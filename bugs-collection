=================================================
This is an automated collection of open reports in
the R-bugs repository.
=================================================

Directory:  Accuracy

none

Directory:  Add-ons

* PR# 948 *
Subject:  xyplot,grid.text segfault 
From: Peter Malewski <p.malewski@tu-bs.de>
Date: Sat, 26 May 2001 13:24:11 +0200
-- no notes --
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 948 <==
From postmaster@franz.stat.wisc.edu  Sat May 26 13:24:02 2001
Received: from franz.stat.wisc.edu (root@franz.stat.wisc.edu [128.105.174.95])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id NAA27393
	for <r-bugs@biostat.ku.dk>; Sat, 26 May 2001 13:24:02 +0200 (MET DST)
Received: from mout0.freenet.de (really [194.97.50.131]) by franz.stat.wisc.edu
	via smail with esmtp (ident exim using rfc1413)
	id <m153cAm-000JIqC@franz.stat.wisc.edu> (Debian Smail3.2.0.111)
	for <r-bugs@r-project.org>; Sat, 26 May 2001 06:23:56 -0500 (CDT) 
Received: from [194.97.50.135] (helo=mx2.freenet.de)
	by mout0.freenet.de with esmtp (Exim 3.22 #1)
	id 153cAj-0006kz-00; Sat, 26 May 2001 13:23:53 +0200
Received: from b90b8.pppool.de ([213.7.144.184] helo=Uranus)
	by mx2.freenet.de with esmtp (Exim 3.22 #1)
	id 153cAi-0005E0-00; Sat, 26 May 2001 13:23:53 +0200
Received: from peter by Uranus with local (Exim 3.12 #1 (Debian))
	id 153cB1-00014k-00; Sat, 26 May 2001 13:24:11 +0200
To: r-bugs@r-project.org
Subject:  xyplot,grid.text segfault 
Cc: p.malewski@tu-bs.de
Message-Id: <E153cB1-00014k-00@Uranus>
From: Peter Malewski <p.malewski@tu-bs.de>
Date: Sat, 26 May 2001 13:24:11 +0200

First, thank you very much for that lattice-package, second, the code
below segfaults R:

zz <- data.frame(
                 y=rnorm(100),x=rnorm(100),z=round(rnorm(100)),
                 g=as.character(rep(1:2,50)))
xyplot(y~ x|z,data=zz,groups=g,
            panel = function(x, y, subscripts, groups)  
            grid.text(x=x, y=y, label=groups[subscripts])
       )

I'm not sure if I have understood that panel stuff right, but anyway,
it shouldn't segfault. BTW: I also unsure if I have to use the
develop-version of R & whether lattice bugs should be submitted
(because of the devel-status??).

Peter

--please do not edit the information below--

Version:
 platform = i686-pc-linux-gnu
 arch = i686
 os = linux-gnu
 system = i686, linux-gnu
 status = 
 major = 1
 minor = 2.3
 year = 2001
 month = 04
 day = 26
 language = R

Search Path:
 .GlobalEnv, package:grid, package:lattice, package:ctest, Autoloads, package:base

==> 948.reply.1 <==
From pd@blueberry.kubism.ku.dk  Sat May 26 16:13:26 2001
Received: from blueberry.kubism.ku.dk (blueberry [130.225.108.193])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id QAA27829;
	Sat, 26 May 2001 16:13:25 +0200 (MET DST)
Received: (from pd@localhost)
	by blueberry.kubism.ku.dk (8.9.3/8.9.3) id QAA28846;
	Sat, 26 May 2001 16:18:09 +0200
Sender: pd@pubhealth.ku.dk
To: p.malewski@tu-bs.de
Cc: r-devel@stat.math.ethz.ch, R-bugs@biostat.ku.dk
Subject: Re: [Rd] xyplot,grid.text segfault (PR#948)
References: <200105261124.NAA27403@pubhealth.ku.dk>
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 26 May 2001 16:18:08 +0200
In-Reply-To: p.malewski@tu-bs.de's message of "Sat, 26 May 2001 13:24:03 +0200 (MET DST)"
Message-ID: <x2ae40p527.fsf@blueberry.kubism.ku.dk>
Lines: 37
X-Mailer: Gnus v5.7/Emacs 20.7
Mime-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: 7bit

p.malewski@tu-bs.de writes:

> First, thank you very much for that lattice-package, second, the code
> below segfaults R:
> 
> zz <- data.frame(
>                  y=rnorm(100),x=rnorm(100),z=round(rnorm(100)),
>                  g=as.character(rep(1:2,50)))
> xyplot(y~ x|z,data=zz,groups=g,
>             panel = function(x, y, subscripts, groups)  
>             grid.text(x=x, y=y, label=groups[subscripts])
>        )
> 
> I'm not sure if I have understood that panel stuff right, but anyway,
> it shouldn't segfault. BTW: I also unsure if I have to use the
> develop-version of R & whether lattice bugs should be submitted
> (because of the devel-status??).

Well, it is easier for us to deal with erroneously submitted bug than
erroneously unsubmitted ones. We have an Add-Ons category on r-bugs to
put it in. 

Lattice is closely associated with the core team, so we'd be able to
track this kind of problem. With some other packages which we do not
maintain, we have some trouble figuring out whether a report has been
solved or whether it was even a bug in the first place (it would be
nice if the original submitters would lend a hand there).

As I remember it, Paul and Deepayan were somewhat vague about exactly
what was required, except that you'd need something relatively recent.
A segfault certainly looks like a real bug.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

==> 948.reply.2 <==
From pd@blueberry.kubism.ku.dk  Sat May 26 18:30:14 2001
Received: from blueberry.kubism.ku.dk (blueberry [130.225.108.193])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id SAA28262;
	Sat, 26 May 2001 18:30:13 +0200 (MET DST)
Received: (from pd@localhost)
	by blueberry.kubism.ku.dk (8.9.3/8.9.3) id SAA28920;
	Sat, 26 May 2001 18:34:57 +0200
Sender: pd@pubhealth.ku.dk
To: p.malewski@tu-bs.de
Cc: R-bugs@biostat.ku.dk
Subject: Re: [Rd] xyplot,grid.text segfault (PR#948)
References: <200105261124.NAA27403@pubhealth.ku.dk> <x2ae40p527.fsf@blueberry.kubism.ku.dk>
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 26 May 2001 18:34:57 +0200
In-Reply-To: Peter Dalgaard BSA's message of "26 May 2001 16:18:08 +0200"
Message-ID: <x2r8xcm5la.fsf@blueberry.kubism.ku.dk>
Lines: 15
X-Mailer: Gnus v5.7/Emacs 20.7
Mime-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: 7bit

Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk> writes:


> As I remember it, Paul and Deepayan were somewhat vague about exactly
> what was required, except that you'd need something relatively recent.
> A segfault certainly looks like a real bug.

...and your example crashes with the current development version of R
too, anyway.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

==> 948.reply.3 <==
From pd@blueberry.kubism.ku.dk  Sat May 26 20:48:38 2001
Received: from blueberry.kubism.ku.dk (blueberry [130.225.108.193])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id UAA28449;
	Sat, 26 May 2001 20:48:37 +0200 (MET DST)
Received: (from pd@localhost)
	by blueberry.kubism.ku.dk (8.9.3/8.9.3) id UAA28992;
	Sat, 26 May 2001 20:53:22 +0200
Sender: pd@pubhealth.ku.dk
To: p.malewski@tu-bs.de
Cc: r-devel@stat.math.ethz.ch, R-bugs@biostat.ku.dk
Subject: Re: [Rd] xyplot,grid.text segfault (PR#948)
References: <200105261124.NAA27403@pubhealth.ku.dk>
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 26 May 2001 20:53:22 +0200
In-Reply-To: p.malewski@tu-bs.de's message of "Sat, 26 May 2001 13:24:03 +0200 (MET DST)"
Message-ID: <x2k834eycd.fsf@blueberry.kubism.ku.dk>
Lines: 43
X-Mailer: Gnus v5.7/Emacs 20.7
Mime-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: 7bit

p.malewski@tu-bs.de writes:

> First, thank you very much for that lattice-package, second, the code
> below segfaults R:
> 
> zz <- data.frame(
>                  y=rnorm(100),x=rnorm(100),z=round(rnorm(100)),
>                  g=as.character(rep(1:2,50)))
> xyplot(y~ x|z,data=zz,groups=g,
>             panel = function(x, y, subscripts, groups)  
>             grid.text(x=x, y=y, label=groups[subscripts])
>        )
> 
> I'm not sure if I have understood that panel stuff right, but anyway,
> it shouldn't segfault. BTW: I also unsure if I have to use the
> develop-version of R & whether lattice bugs should be submitted
> (because of the devel-status??).
> 
> Peter

grid.text() seems unhappy with being passed a non-character vector for
the label argument. I think Paul muttered something to the effect that
he knew there would be that kind of weaknesses in the code.

The following runs successfully (well, at least it doesn't crash - the
result looks a bit weird):

library(lattice)
zz <- data.frame(
                 y=rnorm(100),x=rnorm(100),z=round(rnorm(100)),
                 g=as.character(rep(1:2,50)))
xyplot(y~ x|z,data=zz,groups=g,
            panel = function(x, y, subscripts, groups)
            grid.text(x=x, y=y,
                      label=as.character(groups[subscripts]))
       )


-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

==> 948.audit <==
Mon May 28 21:40:24 2001	thomas	moved from incoming to Add-ons

==> 948.followup.1 <==
From paul@stat.auckland.ac.nz  Tue May 29 01:31:51 2001
Received: from mailhost.auckland.ac.nz (mailhost.auckland.ac.nz [130.216.1.4] (may be forged))
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id BAA14283;
	Tue, 29 May 2001 01:31:48 +0200 (MET DST)
Received: from stat1.stat.auckland.ac.nz (stat1.stat.auckland.ac.nz [130.216.93.1])
	by mailhost.auckland.ac.nz (8.9.2/8.9.2/8.9.2-ua) with ESMTP id LAA14430;
	Tue, 29 May 2001 11:31:40 +1200 (NZST)
Received: from murrell (murrell.stat.auckland.ac.nz [130.216.93.23])
	by stat1.stat.auckland.ac.nz (8.9.3+Sun/8.8.8) with SMTP id LAA08200;
	Tue, 29 May 2001 11:31:40 +1200 (NZST)
Message-ID: <019001c0e7d0$fb44fc70$175dd882@stat.auckland.ac.nz>
From: "Paul Murrell" <paul@stat.auckland.ac.nz>
To: <p.malewski@tu-bs.de>, "Peter Dalgaard BSA" <p.dalgaard@biostat.ku.dk>
Cc: <r-devel@stat.math.ethz.ch>, <R-bugs@biostat.ku.dk>
References: <200105261124.NAA27403@pubhealth.ku.dk> <x2k834eycd.fsf@blueberry.kubism.ku.dk>
Subject: Re: [Rd] xyplot,grid.text segfault (PR#948)
Date: Tue, 29 May 2001 11:50:31 +1200
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 5.00.2014.211
X-MimeOLE: Produced By Microsoft MimeOLE V5.00.2014.211

Hi


> grid.text() seems unhappy with being passed a non-character vector for
> the label argument. I think Paul muttered something to the effect that
> he knew there would be that kind of weaknesses in the code.
>
> The following runs successfully (well, at least it doesn't crash - the
> result looks a bit weird):
>
> library(lattice)
> zz <- data.frame(
>                  y=rnorm(100),x=rnorm(100),z=round(rnorm(100)),
>                  g=as.character(rep(1:2,50)))
> xyplot(y~ x|z,data=zz,groups=g,
>             panel = function(x, y, subscripts, groups)
>             grid.text(x=x, y=y,
>                       label=as.character(groups[subscripts]))
>        )


The results look weird because the x and y locations in grid.text are in
"npc" units by default (that is, they are taken as proportions of the
dimensions of the region they are being drawn in).  This means that values
outside the range 0..1 are drawn outside the limits of the plotting region.
You need to specify "native" units in the call so that the x and y locations
are relative to the scales on the axes of the plotting region.  For example,

    grid.text(x=x, y=y,
                  label=as.character(groups[subscripts]),
                  default.units="native")

This unit stuff is a "feature" of the underlying grid graphics, which is
probably why you did not notice it.  The default panel functions do,
however, provide examples of what needs to be done.  See, for example,
panel.xyplot.

Paul


~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
* PR# 950 *
Subject:  lattice: dev.print(postscript) gives probl. false background Info 
From: Peter Malewski <p.malewski@tu-bs.de>
Date: Sat, 26 May 2001 23:20:29 +0200
-- no notes --
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 950 <==
From postmaster@franz.stat.wisc.edu  Sat May 26 23:28:58 2001
Received: from franz.stat.wisc.edu (root@franz.stat.wisc.edu [128.105.174.95])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id XAA28783
	for <r-bugs@biostat.ku.dk>; Sat, 26 May 2001 23:28:58 +0200 (MET DST)
Received: from mout0.freenet.de (really [194.97.50.131]) by franz.stat.wisc.edu
	via smail with esmtp (ident exim using rfc1413)
	id <m153lcC-000JIzC@franz.stat.wisc.edu> (Debian Smail3.2.0.111)
	for <r-bugs@r-project.org>; Sat, 26 May 2001 16:28:52 -0500 (CDT) 
Received: from [194.97.50.144] (helo=mx1.freenet.de)
	by mout0.freenet.de with esmtp (Exim 3.22 #1)
	id 153lcB-00030a-00; Sat, 26 May 2001 23:28:51 +0200
Received: from b8fba.pppool.de ([213.7.143.186] helo=Uranus)
	by mx1.freenet.de with esmtp (Exim 3.22 #1)
	id 153lcA-0003LO-00; Sat, 26 May 2001 23:28:51 +0200
Received: from peter by Uranus with local (Exim 3.12 #1 (Debian))
	id 153lU5-0005aI-00; Sat, 26 May 2001 23:20:29 +0200
To: r-bugs@r-project.org
Subject:  lattice: dev.print(postscript) gives probl. false background Info 
Cc: p.malewski@tu-bs.de
Message-Id: <E153lU5-0005aI-00@Uranus>
From: Peter Malewski <p.malewski@tu-bs.de>
Date: Sat, 26 May 2001 23:20:29 +0200

There seems to be a problem with the background margins (I only recognized it in a latex ):

xyplot(rnorm(100) ~ rnorm(100))
dev.print(postscript,"/tmp/tmp.ps")

whereas this works on the 1.2.3 version but not with 1.3.0:

dev.copy2eps("/tmp/tmp.ps")                 

both times a warning appears:
Warning message: 
unknown postscript font family, using Helvetica 


Here is the latex-file:

\documentclass{book}
\usepackage{graphicx}

\begin{document}
text texttext texttext texttext texttext texttext text
 \begin{figure}[htb!]
   \begin{center}
     \includegraphics[width=\columnwidth]{/tmp/tmp}      
     \caption{asdas}
   \end{center}
 \end{figure}
texttexttexttexttexttexttexttexttexttexttext
\end{document}

Peter


<<insert bug report here>>



--please do not edit the information below--

Version:
 platform = i686-pc-linux-gnu
 arch = i686
 os = linux-gnu
 system = i686, linux-gnu
 status = Under development (unstable)
 major = 1
 minor = 3.0
 year = 2001
 month = 05
 day = 25
 language = R

Search Path:
 .GlobalEnv, package:grid, package:lattice, package:ctest, Autoloads, package:base

==> 950.audit <==
Mon May 28 21:41:02 2001	thomas	moved from incoming to Add-ons
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
* PR# 974 *
Subject: Lattice: panel.superpose with ordered factor groups
From: John Maindonald <john.maindonald@anu.edu.au>
Date: Sat, 9 Jun 2001 11:08:51 +1000 (EST)
--The warning is standard S and R behaviour.
--Probably xyplot needs to avoid it (by unclassing?)
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 974 <==
From postmaster@franz.stat.wisc.edu  Sat Jun  9 03:09:10 2001
Received: from franz.stat.wisc.edu (root@franz.stat.wisc.edu [128.105.174.95])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id DAA20814
	for <r-bugs@biostat.ku.dk>; Sat, 9 Jun 2001 03:09:09 +0200 (MET DST)
Received: from leonard.anu.edu.au (really [150.203.2.15]) by franz.stat.wisc.edu
	via smail with esmtp
	id <m158XFN-000JbdC@franz.stat.wisc.edu> (Debian Smail3.2.0.111)
	for <r-bugs@r-project.org>; Fri, 8 Jun 2001 20:09:01 -0500 (CDT) 
Received: (from u9801539@localhost)
	by leonard.anu.edu.au (8.9.3/8.9.3) id LAA01081;
	Sat, 9 Jun 2001 11:08:51 +1000 (EST)
Date: Sat, 9 Jun 2001 11:08:51 +1000 (EST)
From: John Maindonald <john.maindonald@anu.edu.au>
Message-Id: <200106090108.LAA01081@leonard.anu.edu.au>
To: r-bugs@r-project.org
Subject: Lattice: panel.superpose with ordered factor groups
Cc: deepayan@stat.wisc.edu


#       r-bugs@r-project.org
The panel.superpose() function for xyplot() complains when 
the groups parameter is set to be an ordered factor.

> library(mass)
> data(cabbages)
> library(lattice)
> xyplot(HeadWt~VitC|Cult, panel=panel.superpose,
+   groups=Date, data=cabbages)
> cabbages$Date <- ordered(cabbages$Date)  # Make Date an ordered factor
> xyplot(HeadWt~VitC|Cult, panel=panel.superpose,
+   groups=Date, data=cabbages)
Warning messages: 
1: Incompatible methods ("Ops.ordered", "Ops.factor") for "==" 
2: Incompatible methods ("Ops.ordered", "Ops.factor") for "==" 
3: Incompatible methods ("Ops.ordered", "Ops.factor") for "==" 
4: Incompatible methods ("Ops.ordered", "Ops.factor") for "==" 
5: Incompatible methods ("Ops.ordered", "Ops.factor") for "==" 
6: Incompatible methods ("Ops.ordered", "Ops.factor") for "==" 

--please do not edit the information below--

Version:
 platform = i386-pc-mingw32
 arch = x86
 os = Win32
 system = x86, Win32
 status = 
 major = 1
 minor = 2.3
 year = 2001
 month = 04
 day = 26
 language = R

Windows ME 4.90 (build 3000)  

Search Path:
 .GlobalEnv, package:grid, package:lattice, package:mass, package:ctest, Autoloads, package:base
John Maindonald            email: john.maindonald@anu.edu.au        
phone : (6125)3998         fax   : (6125)5549 
Statistical Consulting Unit, Room 1194,
John Dedman Mathematical Sciences Building
(Centre for Mathematics & Its Applications.)

==> 974.audit <==
Sun Jun 17 09:39:36 2001	ripley	changed notes
Sun Jun 17 09:39:36 2001	ripley	foobar
Sun Jun 17 09:39:36 2001	ripley	moved from incoming to Add-ons
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
* PR# 981 *
Subject: read.xport() bug
From: abroman@jhu.edu
Date: Fri, 15 Jun 2001 00:25:54 +0200 (MET DST)
--confirmed on Windows and Solaris.
--Seems that file is not in the expected format
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 981 <==
From abroman@jhu.edu  Fri Jun 15 00:25:55 2001
Received: from blueberry.kubism.ku.dk (blueberry [130.225.108.193])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id AAA17758
	for <R-bugs@biostat.ku.dk>; Fri, 15 Jun 2001 00:25:54 +0200 (MET DST)
Date: Fri, 15 Jun 2001 00:25:54 +0200 (MET DST)
From: abroman@jhu.edu
Message-Id: <200106142225.AAA17758@pubhealth.ku.dk>
To: R-bugs@biostat.ku.dk
Subject: read.xport() bug

Full_Name: Aimee Teo Broman
Version: 1.23
OS: Windows 98
Submission from: (NULL) (162.129.145.115)


When I use the read.xport() function in the foreign library, the Rgui shuts
down.   My xport file was created in SAS ver.6, using the xport engine in proc
copy. 

R commands:
1. library(foreign)
2. lookup.xport("fdt.tpt")  <-- this works fine.
3. read.xport("fdt.tpt")  <-- this produces a window that says "This program has
performed an illegal operation and will be shut down."  The details are shown
below:

RGUI caused an invalid page fault in
module FOREIGN.DLL at 017f:14c727e7.
Registers:
EAX=00000000 CS=017f EIP=14c727e7 EFLGS=00010246
EBX=034a1320 SS=0187 ESP=0270f404 EBP=0270f46c
ECX=00000000 DS=0187 ESI=00000006 FS=1847
EDX=034a1338 ES=0187 EDI=034a1335 GS=0000
Bytes at CS:EIP:
c6 00 00 83 c4 fc 83 c4 10 39 d8 75 09 a1 48 02 
Stack dump:
034a1320 00000020 034b5a50 78037ce8 02c5cf68 00000002 0270f4ac 004250ae 00585140
02c5c728 0270f46c 00000079 00000001 0348c150 0348e9d0 78037ce8 

The date on the foreign.zip file is 18-May-2001, so I believe I have the most
recent version of both R and the foreign package.  I would call this an
intermittant problem, except that I have this problem more frequently than not.
Yesterday it was working, but today it is shutting down the gui again.  Any help
would be appreciated.

thanks much,
Aimee Broman

==> 981.followup.1 <==
From ripley@stats.ox.ac.uk  Fri Jun 15 08:48:44 2001
Received: from toucan.stats.ox.ac.uk (toucan.stats.ox.ac.uk [163.1.20.20])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id IAA19206
	for <R-bugs@biostat.ku.dk>; Fri, 15 Jun 2001 08:48:43 +0200 (MET DST)
Received: from max153.public.ox.ac.uk (max153.public.ox.ac.uk [192.76.27.153])
	by toucan.stats.ox.ac.uk (8.9.0/8.9.0) with ESMTP id HAA03707;
	Fri, 15 Jun 2001 07:48:34 +0100 (BST)
Date: Fri, 15 Jun 2001 07:48:39 +0100 (BST)
From: Prof Brian D Ripley <ripley@stats.ox.ac.uk>
Sender: <ripley@auk.stats>
To: <abroman@jhu.edu>
cc: <R-bugs@biostat.ku.dk>
Subject: Re: [Rd] read.xport() bug (PR#981)
In-Reply-To: <200106142225.AAA17768@pubhealth.ku.dk>
Message-ID: <Pine.GSO.4.31.0106150743370.21768-100000@auk.stats>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII

All packages have a version number, in their DESCRIPTION file or via

package.description("foreign")$Version

I suspect this is 0.4-3, but please confirm.

We do need a reproducible example to make any sense of this bug report, and
for that we need fdt.tpt.  Could you please attach that file to your reply.


On Fri, 15 Jun 2001 abroman@jhu.edu wrote:

> Full_Name: Aimee Teo Broman
> Version: 1.23
> OS: Windows 98
> Submission from: (NULL) (162.129.145.115)
>
>
> When I use the read.xport() function in the foreign library, the Rgui shuts
> down.   My xport file was created in SAS ver.6, using the xport engine in proc
> copy.
>
> R commands:
> 1. library(foreign)
> 2. lookup.xport("fdt.tpt")  <-- this works fine.
> 3. read.xport("fdt.tpt")  <-- this produces a window that says "This program has
> performed an illegal operation and will be shut down."  The details are shown
> below:
>
> RGUI caused an invalid page fault in
> module FOREIGN.DLL at 017f:14c727e7.
> Registers:
> EAX=00000000 CS=017f EIP=14c727e7 EFLGS=00010246
> EBX=034a1320 SS=0187 ESP=0270f404 EBP=0270f46c
> ECX=00000000 DS=0187 ESI=00000006 FS=1847
> EDX=034a1338 ES=0187 EDI=034a1335 GS=0000
> Bytes at CS:EIP:
> c6 00 00 83 c4 fc 83 c4 10 39 d8 75 09 a1 48 02
> Stack dump:
> 034a1320 00000020 034b5a50 78037ce8 02c5cf68 00000002 0270f4ac 004250ae 00585140
> 02c5c728 0270f46c 00000079 00000001 0348c150 0348e9d0 78037ce8
>
> The date on the foreign.zip file is 18-May-2001, so I believe I have the most
> recent version of both R and the foreign package.  I would call this an
> intermittant problem, except that I have this problem more frequently than not.
> Yesterday it was working, but today it is shutting down the gui again.  Any help
> would be appreciated.
>
> thanks much,
> Aimee Broman
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


==> 981.followup.2 <==
From abroman@dcpom.med.jhu.edu  Fri Jun 15 15:50:25 2001
Received: from dcpom.med.jhu.edu ([162.129.145.30])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id PAA26162
	for <R-bugs@biostat.ku.dk>; Fri, 15 Jun 2001 15:50:24 +0200 (MET DST)
Received: from localhost (abroman@localhost)
	by dcpom.med.jhu.edu (8.9.1b+Sun/8.9.1) with ESMTP id JAA29889;
	Fri, 15 Jun 2001 09:50:38 -0400 (EDT)
Date: Fri, 15 Jun 2001 09:50:38 -0400 (EDT)
From: Aimee Teo Broman <abroman@dcpom.med.jhu.edu>
Reply-To: abroman@jhu.edu
To: Prof Brian D Ripley <ripley@stats.ox.ac.uk>
cc: abroman@jhu.edu, R-bugs@biostat.ku.dk
Subject: Re: [Rd] read.xport() bug (PR#981)
In-Reply-To: <Pine.GSO.4.31.0106150743370.21768-100000@auk.stats>
Message-ID: <Pine.GSO.4.05.10106150926320.29736-101000@dcpom.med.jhu.edu>
MIME-Version: 1.0
Content-Type: MULTIPART/MIXED; BOUNDARY="-559023410-851401618-992613038=:29850"

  This message is in MIME format.  The first part should be readable text,
  while the remaining parts are likely unreadable without MIME-aware tools.
  Send mail to mime@docserver.cac.washington.edu for more info.

---559023410-851401618-992613038=:29850
Content-Type: TEXT/PLAIN; charset=US-ASCII



Yes, the version of the foreign package is 0.4-3 .

I've found that the problem is with a particular variable in the
dataset--a character variable containing names.  If I remove this
variable from the rest of the dataset, the transfer file reads in
fine.  I attach a transfer file with just the name variable, in the
case that you'd like to take a look at it.

Thanks very much,
Aimee

On Fri, 15 Jun 2001, Prof Brian D Ripley wrote:

> All packages have a version number, in their DESCRIPTION file or via
> 
> package.description("foreign")$Version
> 
> I suspect this is 0.4-3, but please confirm.
> 
> We do need a reproducible example to make any sense of this bug report, and
> for that we need fdt.tpt.  Could you please attach that file to your reply.
> 
> 
> On Fri, 15 Jun 2001 abroman@jhu.edu wrote:
> 
> > Full_Name: Aimee Teo Broman
> > Version: 1.23
> > OS: Windows 98
> > Submission from: (NULL) (162.129.145.115)
> >
> >
> > When I use the read.xport() function in the foreign library, the Rgui shuts
> > down.   My xport file was created in SAS ver.6, using the xport engine in proc
> > copy.
> >
> > R commands:
> > 1. library(foreign)
> > 2. lookup.xport("fdt.tpt")  <-- this works fine.
> > 3. read.xport("fdt.tpt")  <-- this produces a window that says "This program has
> > performed an illegal operation and will be shut down."  The details are shown
> > below:
> >
> > RGUI caused an invalid page fault in
> > module FOREIGN.DLL at 017f:14c727e7.
> > Registers:
> > EAX=00000000 CS=017f EIP=14c727e7 EFLGS=00010246
> > EBX=034a1320 SS=0187 ESP=0270f404 EBP=0270f46c
> > ECX=00000000 DS=0187 ESI=00000006 FS=1847
> > EDX=034a1338 ES=0187 EDI=034a1335 GS=0000
> > Bytes at CS:EIP:
> > c6 00 00 83 c4 fc 83 c4 10 39 d8 75 09 a1 48 02
> > Stack dump:
> > 034a1320 00000020 034b5a50 78037ce8 02c5cf68 00000002 0270f4ac 004250ae 00585140
> > 02c5c728 0270f46c 00000079 00000001 0348c150 0348e9d0 78037ce8
> >
> > The date on the foreign.zip file is 18-May-2001, so I believe I have the most
> > recent version of both R and the foreign package.  I would call this an
> > intermittant problem, except that I have this problem more frequently than not.
> > Yesterday it was working, but today it is shutting down the gui again.  Any help
> > would be appreciated.
> >
> > thanks much,
> > Aimee Broman
> >
> > -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> > r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> > Send "info", "help", or "[un]subscribe"
> > (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> > _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
> >
> 
> -- 
> Brian D. Ripley,                  ripley@stats.ox.ac.uk
> Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
> University of Oxford,             Tel:  +44 1865 272861 (self)
> 1 South Parks Road,                     +44 1865 272860 (secr)
> Oxford OX1 3TG, UK                Fax:  +44 1865 272595
> 
> 

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
dana center for preventive ophthalmology    phone:(410)614-2483
600 n wolfe st. suite wilmer 129              fax:(410)955-0096
baltimore, md 21287

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~


---559023410-851401618-992613038=:29850
Content-Type: APPLICATION/octet-stream; name="fdt1.tpt"
Content-Transfer-Encoding: BASE64
Content-ID: <Pine.GSO.4.05.10106150950380.29850@dcpom.med.jhu.edu>
Content-Description: 
Content-Disposition: attachment; filename="fdt1.tpt"

SEVBREVSIFJFQ09SRCoqKioqKipMSUJSQVJZIEhFQURFUiBSRUNPUkQhISEh
ISEhMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwICBTQVMgICAgIFNB
UyAgICAgU0FTTElCICA2LjEyICAgIFNvbGFyaXMgICAgICAgICAgICAgICAg
ICAgICAgICAgMTVKVU4wMTowOTo0NToxOTE1SlVOMDE6MDk6NDU6MTkgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgSEVBREVSIFJFQ09SRCoqKioqKipNRU1CRVIgIEhF
QURFUiBSRUNPUkQhISEhISEhMDAwMDAwMDAwMDAwMDAwMDAxNjAwMDAwMDAw
MTQwICBIRUFERVIgUkVDT1JEKioqKioqKkRTQ1JQVFIgSEVBREVSIFJFQ09S
RCEhISEhISEwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAgIFNBUyAg
ICAgQ0FUMSAgICBTQVNEQVRBIDYuMTIgICAgU29sYXJpcyAgICAgICAgICAg
ICAgICAgICAgICAgICAxNUpVTjAxOjA5OjQ1OjE5MTVKVU4wMTowOTo0NTox
OSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICBIRUFERVIgUkVDT1JEKioqKioqKk5BTUVT
VFIgSEVBREVSIFJFQ09SRCEhISEhISEwMDAwMDAwMDAxMDAwMDAwMDAwMDAw
MDAwMDAwMDAgIAACAAAAFAABTkFNRSAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAAAAAAAAAAACAgICAgICAg
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAICAgICAgICAgICAgICAgICAgICBIRUFERVIgUkVD
T1JEKioqKioqKk9CUyAgICAgSEVBREVSIFJFQ09SRCEhISEhISEwMDAwMDAw
MDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAgIE1BTkdBVEhBTCAgICAgICAgICAg
U0VCQVNUSU5FICAgICAgICAgICBBQkRVTCBLQURBUiAgICAgICAgIFNJVkFH
TkFOQSBTVU5EQVJBTSAgUy5NQVJZICAgICAgICAgICAgICBKRVlBUkFNQU4g
ICAgICAgICAgIEJBU0tBUkFOICAgICAgICAgICAgTUFSWSAgICAgICAgICAg
ICAgICBCQUJVICAgICAgICAgICAgICAgIEtSSVNITkFOICAgICAgICAgICAg
REVWQUtJICAgICAgICAgICAgICBSQUpBTU1BTCAgICAgICAgICAgIFdJTExJ
TkdUT04gICAgICAgICAgUkFNQSBLUklTSE5BTiAgICAgICBKRVlBU0VFTEkg
ICAgICAgICAgIE1VVEhBTU1BTCAgICAgICAgICAgTUVFUkEgU0hBSElCICAg
ICAgICBSQUpVICAgICAgICAgICAgICAgIFJBTUEgS1JJU0hOQU4gICAgICAg
S0hBSkEgIE1ZREVFTiAgICAgICBTVUJSQU1BTklBTiAgICAgICAgIEJBTEEg
QVJVTkFDSEFMQU0gICAgU1VEQUxBSU1VVEhVICAgICAgICBDQVRIRVJJTkUu
TS5EICAgICAgIFJBSkxBS1NITUkgICAgICAgICAgUEFHSFJWRUxVLkwgICAg
ICAgICBSQU1BTElOR0FNICAgICAgICAgIFJBVEhOQSBLVU1BUkkgICAgICAg
U0FSQVNXQVRIWSAgICAgICAgICBTQUlMQVBQQU4gICAgICAgICAgIFBBUlZB
VEhZICAgICAgICAgICAgR0FOVEhJTUFUSEkgICAgICAgICBESEFNT0RBUkFO
ICAgICAgICAgIEhBUklIQVJBTi5SICAgICAgICAgUEFVTFNBTVkgICAgICAg
ICAgICBTVUJSQU1BTklBTS5TICAgICAgIFNBTkdBUkFOQVJBWUFOQU4gICAg
QVlZQU5BUiBUSEVWQVIgICAgICBQQUxBTkkgICAgICAgICAgICAgIFZFTFUg
ICAgICAgICAgICAgICAgUEFOTklZQU5NQUxBSSAgICAgICBESEFOQUxBS1NI
TUkgICAgICAgIFJBSFVNQU4gQkVFVkkgICAgICAgVEhJTEFHQVZBVFkgICAg
ICAgICBWQU1FREVSQU4gICAgICAgICAgIEpBTkFOVEhBTkFOIFNBUEFMWUEg
U0VOVEhJTCBBUlVNVUdBTSAgICBQVVJVSk9USEFNQU4gICAgICAgIFNBTktB
UkEgTkFSQVlBTkFOLlMgQUxJQ0UuRCAgICAgICAgICAgICBTSEFOVEhBLksg
ICAgICAgICAgIEpBTkFLSUFNTUFMICAgICAgICAgR09NQVRIWSAgICAgICAg
ICAgICBSQVRISU5BQkFJICAgICAgICAgIEVTVEhFUiAgICAgICAgICAgICAg
Sk9TRVBILlUgICAgICAgICAgICBBTEFNRUxVUiAgICAgICAgICAgIFZJQ1RP
Ui5BICAgICAgICAgICAgUEVSVU1BTCAgICAgICAgICAgICBQQURNQU5BQkFO
Lk4gICAgICAgIFNFTFZBTkFZQUdBTi5TICAgICAgVEhJUlVQQVRIWSAgICAg
ICAgICBNRUVSQU5NT0hBSURFRU4gICAgIFBBVENIQUkgIFBFUlVNQUwgICAg
R1VSVVNBTVkuViAgICAgICAgICBKRVlBUkFOSSAgICAgICAgICAgIFNIQU5N
VUdBTSBBTU1BTCAgICAgU0FOVEhBIEtVTUFSSSAgICAgICBNVVRIVSBTQU1Z
LkEgICAgICAgIEdPTUFUSFkgQU1NQUwgICAgICAgU0FOS0FSQUxJTkdBTSAg
ICAgICBIQVJJSEFSQSBTVUJSQU1BTklBTkFOQkFNTUFMICAgICAgICAgICAg
TUFIQURFVkFOLkIgICAgICAgICBNQURIQVZBTiBOQUlSICAgICAgIEJBTEEg
U0FSQVNXQVRIWSAgICAgQVJVTVVHQU0gICAgICAgICAgICBHQU5HQUNITEVT
QU4gTkFJUiAgIFZFRVJBTEFLU0hNSSAgICAgICAgU0hBTk1VR0FNICAgICAg
ICAgICBQRVJVTUFMIFBJTExBSSAgICAgIERFVkFEQVNTICAgICAgICAgICAg
Q0hJVFJBICAgICAgICAgICAgICBNQUhBTElOR0FNICAgICAgICAgIEMuTVVS
VUdBTiAgICAgICAgICAgR0FOQVBBVEhZLkwgICAgICAgICBHVVJVU0FNWSBO
QUlDS0VSICAgIExBS1NITUkgIFNIQU5NVUdBTSAgVEhBTkdBTUFOSSAgICAg
ICAgICBEVVJBSVNBTVkgICAgICAgICAgIFJBSkFMQUtTSE1JLlIgICAgICAg
TUFOT0hBUkFOICAgICAgICAgICBCQUxTVUJSQU1BTklBTiAgICAgIEFNSU5B
ICAgICAgICAgICAgICAgU0FST0pBICAgICAgICAgICAgICBOQUxMQU1NQUwg
ICAgICAgICAgIFJFTkdBUkFKQU4gICAgICAgICAgU0hFR0EgRkFUSElNQSAg
ICAgICBTSEVOQkFHQUxBS1NITUkgICAgIFBJVENIQUlBSCAgICAgICAgICAg
S0FMSVlBIE1VREFMSUFSICAgICBLUklTSE5BTi5ELksgICAgICAgIFRISVJV
R05BTkFNICAgICAgICAgREhBVURBUEFOSSAgICAgICAgICBLUklTSE5BTiAg
ICAgICAgICAgIFZFTlVHT1BBTCAgICAgICAgICAgTUVFTkFNQkFMLlYgICAg
ICAgICBNQVRIRVcgRlJBTkNJUyAgICAgIFBPTkdBTEFTQU1ZICAgICAgICAg
TkFUQVJBSkEgUEFORElBTiAgICBLQU5EQU4gICAgICAgICAgICAgIEtBTUFM
VURFRU4gICAgICAgICAgUi5MQUtTSE1JICAgICAgICAgICBLQU5USElBTU1B
TC5EICAgICAgIFBFUlVNQUwgICAgICAgICAgICAgU1VCQUlEQSAgICAgICAg
ICAgICBWQVNBTlRIQSAgICAgICAgICAgIFNSSU5JVkFTQU4gICAgICAgICAg
UkFKLlIuQiAgICAgICAgICAgICBTQU5USE9SQUdJUkkuUyAgICAgIE1FSEFS
VU5JU0hBICAgICAgICAgR09WSU5EQVNBTVkgICAgICAgICBHUkVUQSBGRVJO
QU5ETyAgICAgIE1VTklZQU1NQUwgICAgICAgICAgTE9HQU5BVEhBTiAgICAg
ICAgICBKT1NFUEguSy5UICAgICAgICAgIFRIQU5HQVJBSkFOLkEgICAgICAg
R0FOQVBBVEhJICAgICAgICAgICBDSElOTkFJQU4gICAgICAgICAgIE5BTExB
TU1BTCAgICAgICAgICAgUkFKRVNXQVJJICAgICAgICAgICBLVVBQQU1NQUwg
ICAgICAgICAgIE1PSEFOICAgICAgICAgICAgICAgS1JJU0hOQU1PT1JUSFkg
ICAgICBQVU5OVVNBTVkgICAgICAgICAgIFZJUlVUSEFHSVJJLk0gICAgICAg
QkFTS0FSQU4gICAgICAgICAgICBLT1RUQUlBUFBBTiAgICAgICAgIFJBSkFU
SFkuSyAgICAgICAgICAgUkFKQSAgICAgICAgICAgICAgICBHQU5FU0hBTi5D
LlYgICAgICAgIERBTkRBWUFUSEFQQU5JLk0gICAgQkFDS0lBTS5QICAgICAg
ICAgICBsTEFLU0hNSS5OICAgICAgICAgIFJBTUFLUklTSE5BSUFIICAgICAg
UkFNVVRIQUkgICAgICAgICAgICBTVUJCVVJBWUFFTFUgICAgICAgIEFSVU1V
R0FNICAgICAgICAgICAgS0FMVURFRU4gICAgICAgICAgICBTVUJCQU1NQUwg
ICAgICAgICAgIFJFTkdBTkFUSEFOICAgICAgICAgQ0hJTk5BU01BWS5BICAg
ICAgICBCQUxBU1VCUkFNQU5JQU4gQUNIQUtVTEFOVEhBSSBUSEVSQVMgICAg
Sk9TRVBILkQgICAgICAgICAgICBNQU5JQ0tBTS5BICAgICAgICAgIE1VVEhV
IE1FRU5BS1NISVNVTkRBTU9IQU4gICAgICAgICAgICAgICBDSElUQU1CQVJB
TS4gICAgICAgIE1BSEFCVSBCSSAgICAgICAgICAgR09QQUxBS1JJU0hOQVdB
UlJJT1JBTEVZQU1NQSAgICAgICAgICAgIEFCUkFIQU0gR0VPUkdFICAgICAg
Uk9TQU1NQUwgICAgICAgICAgICBWQUlSQVZBTiAgICAgICAgICAgIFlBR0FN
TUFMICAgICAgICAgICAgS0FTVEhVUkkgICAgICAgICAgICBTQU5HSUxJQU1N
QUwgICAgICAgIEtBTElBUFBBIFBJTExBSSAgICAgSEFKSSBBQkRVTExBSCAg
ICAgICBSRU5HQU5BVEhBTiAgICAgICAgIEtBUlVQUEFJQUggICAgICAgICAg
U0VMVkFSQUogICAgICAgICAgICBNVVRIVVNBTVkgVC5LICAgICAgIEtBUlVQ
UFVTQU1ZICAgICAgICAgUEhJTElQIEpPSE4gICAgICAgICBNT0hBTUVEIEEu
UCAgICAgICAgIEpFWUFWRUwgICAgICAgICAgICAgQklCSUpIT04gICAgICAg
ICAgICBWSUpBWUFTVU5EQVJBTSAgICAgIA==
---559023410-851401618-992613038=:29850--

==> 981.audit <==
Sun Jun 17 09:36:50 2001	ripley	changed notes
Sun Jun 17 09:36:50 2001	ripley	foobar
Sun Jun 17 09:36:50 2001	ripley	moved from incoming to Add-ons
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
* PR# 1038 *
Subject: nlme: bug in getCovariateFormula
From: Setzer.Woodrow@epamail.epa.gov
Date: Tue, 31 Jul 2001 11:24:09 -0400
--change needed in package nlme
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 1038 <==
From Setzer.Woodrow@epamail.epa.gov  Tue Jul 31 17:47:13 2001
Received: from stat.math.ethz.ch (daemon@hypatia.ethz.ch [129.132.58.23])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id RAA10358
	for <R-bugs@biostat.ku.dk>; Tue, 31 Jul 2001 17:47:12 +0200 (MET DST)
From: Setzer.Woodrow@epamail.epa.gov
Received: (from daemon@localhost)
	by stat.math.ethz.ch (8.9.1/8.9.1) id RAA29279
	for <r-bugs@lists.r-project.org>; Tue, 31 Jul 2001 17:47:07 +0200 (MET DST)
Received: from marconi.rtp.epa.gov(134.67.208.99)
 via SMTP by hypatia, id smtpdAAAa0079S; Tue Jul 31 17:47:02 2001
Received: from epahub11.rtp.epa.gov (epahub11.rtp.epa.gov [134.67.213.52])
 by epamail.epa.gov (PMDF V5.2-33 #42056)
 with ESMTP id <0GHC004FLGOB26@epamail.epa.gov> for r-bugs@lists.r-project.org;
 Tue, 31 Jul 2001 11:40:58 -0400 (EDT)
Date: Tue, 31 Jul 2001 11:24:09 -0400
Subject: nlme: bug in getCovariateFormula
To: r-bugs@hypatia.math.ethz.ch
Message-id: <OF64B799E7.BEBD283E-ON85256A9A.0052DE38@rtp.epa.gov>
MIME-version: 1.0
X-Mailer: Lotus Notes Release 5.0.3  March 21, 2000
Content-type: text/plain; charset=us-ascii
X-MIMETrack: Serialize by Router on EPAHUB11/USEPA/US(Release 5.0.6a |January
 17, 2001) at 07/31/2001 11:40:58 AM

I found that predict.gnls failed with a wierd error message about a
non-numeric argument to a binary vector in one of three nearly identical
uses.

Error in Inh/Ki : non-numeric argument to binary operator

(Inh and Ki are arguments to the function used in the formula for the
object whose predictions were requested).

It turns out that the problem is in getCovariateFormula().

The final line in getCovariateFormula() in the nlme package (version
3.1-16) is:
    eval(parse(text = paste("~", deparse(form))))

however, if deparse(form) exceeds 'width.cutoff (which defaults to 60)',
this results in inappropriately placed "~" signs:
For example, in my application with the error, form is

UnCompetitive(MethoxyresorufinConc, InhibitorConc, Vmax, Km, Ki)

the result of the paste() operation in the last line of getCovariateFormula
is:

> paste("~",deparse(form))
[1] "~ UnCompetitive(MethoxyresorufinConc, InhibitorConc, Vmax, Km, "
[2] "~     Ki)"

extending width.cutoff gives the intended value:

> paste("~",deparse(form,width.cutoff=500))
[1] "~ UnCompetitive(MethoxyresorufinConc, InhibitorConc, Vmax, Km, Ki)"

Seems a bit risky for an enforced cutoff in deparse, though.

R. Woodrow Setzer, Jr.                                            Phone:
(919) 541-0128
Experimental Toxicology Division                       Fax:  (919) 541-5394
Pharmacokinetics Branch
NHEERL MD-74; US EPA; RTP, NC 27711


==> 1038.reply.1 <==
From pd@blueberry.kubism.ku.dk  Tue Jul 31 18:12:16 2001
Received: from blueberry.kubism.ku.dk (blueberry [130.225.108.193])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id SAA10513;
	Tue, 31 Jul 2001 18:12:16 +0200 (MET DST)
Received: (from pd@localhost)
	by blueberry.kubism.ku.dk (8.9.3/8.9.3) id SAA26023;
	Tue, 31 Jul 2001 18:21:47 +0200
Sender: pd@pubhealth.ku.dk
To: Setzer.Woodrow@epamail.epa.gov
Cc: r-devel@stat.math.ethz.ch, R-bugs@biostat.ku.dk
Subject: Re: [Rd] nlme: bug in getCovariateFormula (PR#1038)
References: <200107311547.RAA10368@pubhealth.ku.dk>
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 31 Jul 2001 18:21:46 +0200
In-Reply-To: Setzer.Woodrow@epamail.epa.gov's message of "Tue, 31 Jul 2001 17:47:14 +0200 (MET DST)"
Message-ID: <x2d76h6pd1.fsf@blueberry.kubism.ku.dk>
Lines: 50
X-Mailer: Gnus v5.7/Emacs 20.7
Mime-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: 7bit

Setzer.Woodrow@epamail.epa.gov writes:

> The final line in getCovariateFormula() in the nlme package (version
> 3.1-16) is:
>     eval(parse(text = paste("~", deparse(form))))
> 
> however, if deparse(form) exceeds 'width.cutoff (which defaults to 60)',
> this results in inappropriately placed "~" signs:
> For example, in my application with the error, form is
> 
> UnCompetitive(MethoxyresorufinConc, InhibitorConc, Vmax, Km, Ki)
> 
> the result of the paste() operation in the last line of getCovariateFormula
> is:
> 
> > paste("~",deparse(form))
> [1] "~ UnCompetitive(MethoxyresorufinConc, InhibitorConc, Vmax, Km, "
> [2] "~     Ki)"
> 
> extending width.cutoff gives the intended value:
> 
> > paste("~",deparse(form,width.cutoff=500))
> [1] "~ UnCompetitive(MethoxyresorufinConc, InhibitorConc, Vmax, Km, Ki)"
> 
> Seems a bit risky for an enforced cutoff in deparse, though.

parse(...deparse(...)) always looks wrong to me anyway. Couldn't one
use something like

f <- ~1
f[[2]] <- form
eval(f)

or 

eval(as.call(list(as.name("~"),form)))

or

eval(substitute(~form)) # that's not going to work in S, though...

??

(What is the eval for? Doesn't usually do anything to a
formula argument.)
-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

==> 1038.reply.2 <==
From bates@stat.wisc.edu  Tue Jul 31 21:17:07 2001
Received: from franz.stat.wisc.edu (root@franz.stat.wisc.edu [128.105.174.95])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id VAA11163;
	Tue, 31 Jul 2001 21:17:06 +0200 (MET DST)
Received: by franz.stat.wisc.edu
	via sendmail from stdin
	id <m15RegF-000JP1C@franz.stat.wisc.edu> (Debian Smail3.2.0.111)
	for R-bugs@biostat.ku.dk; Tue, 31 Jul 2001 13:55:47 -0500 (CDT) 
Sender: bates@franz.stat.wisc.edu
To: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Cc: Setzer.Woodrow@epamail.epa.gov, r-devel@stat.math.ethz.ch,
        R-bugs@biostat.ku.dk
Subject: Re: [Rd] nlme: bug in getCovariateFormula (PR#1038)
References: <200107311547.RAA10368@pubhealth.ku.dk>
	<x2d76h6pd1.fsf@blueberry.kubism.ku.dk>
From: Douglas Bates <bates@stat.wisc.edu>
Date: 31 Jul 2001 13:55:47 -0500
In-Reply-To: <x2d76h6pd1.fsf@blueberry.kubism.ku.dk>
Message-ID: <6relqxorm4.fsf@franz.stat.wisc.edu>
Lines: 55
User-Agent: Gnus/5.0808 (Gnus v5.8.8) Emacs/20.7
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii

Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk> writes:

> Setzer.Woodrow@epamail.epa.gov writes:
> 
> > The final line in getCovariateFormula() in the nlme package (version
> > 3.1-16) is:
> >     eval(parse(text = paste("~", deparse(form))))
> > 
> > however, if deparse(form) exceeds 'width.cutoff (which defaults to 60)',
> > this results in inappropriately placed "~" signs:
> > For example, in my application with the error, form is
> > 
> > UnCompetitive(MethoxyresorufinConc, InhibitorConc, Vmax, Km, Ki)
> > 
> > the result of the paste() operation in the last line of getCovariateFormula
> > is:
> > 
> > > paste("~",deparse(form))
> > [1] "~ UnCompetitive(MethoxyresorufinConc, InhibitorConc, Vmax, Km, "
> > [2] "~     Ki)"
> > 
> > extending width.cutoff gives the intended value:
> > 
> > > paste("~",deparse(form,width.cutoff=500))
> > [1] "~ UnCompetitive(MethoxyresorufinConc, InhibitorConc, Vmax, Km, Ki)"
> > 
> > Seems a bit risky for an enforced cutoff in deparse, though.
> 
> parse(...deparse(...)) always looks wrong to me anyway. Couldn't one
> use something like
> 
> f <- ~1
> f[[2]] <- form
> eval(f)
> 
> or 
> 
> eval(as.call(list(as.name("~"),form)))

> or
> 
> eval(substitute(~form)) # that's not going to work in S, though...

Exactly.  The code was originally written for S and ported to R.  Some
of the contorted expressions were things that we found by
experimentation would work in both systems.

> ??
> 
> (What is the eval for? Doesn't usually do anything to a
> formula argument.)

In Sv3 at least it assigns a class to the object.

I'll change it to eval(substitute(~form)) for the R package.

==> 1038.followup.1 <==
From Setzer.Woodrow@epamail.epa.gov  Tue Jul 31 22:19:22 2001
Received: from marconi.rtp.epa.gov (marconi.rtp.epa.gov [134.67.208.99])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id WAA11392;
	Tue, 31 Jul 2001 22:19:19 +0200 (MET DST)
From: Setzer.Woodrow@epamail.epa.gov
Received: from epahub11.rtp.epa.gov (epahub11.rtp.epa.gov [134.67.213.52])
 by epamail.epa.gov (PMDF V5.2-33 #42056)
 with ESMTP id <0GHC00AQNTEESU@epamail.epa.gov>; Tue,
 31 Jul 2001 16:11:02 -0400 (EDT)
Date: Tue, 31 Jul 2001 16:10:54 -0400
Subject: Re: [Rd] nlme: bug in getCovariateFormula (PR#1038)
To: Douglas Bates <bates@stat.wisc.edu>
Cc: bates@franz.stat.wisc.edu, Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>,
        R-bugs@biostat.ku.dk, r-devel@stat.math.ethz.ch
Message-id: <OF7528A682.B9E78D2C-ON85256A9A.006E9C38@rtp.epa.gov>
MIME-version: 1.0
X-Mailer: Lotus Notes Release 5.0.3  March 21, 2000
Content-type: text/plain; charset=us-ascii
X-MIMETrack: Serialize by Router on EPAHUB11/USEPA/US(Release 5.0.6a |January
 17, 2001) at 07/31/2001 04:11:02 PM


It looks clunky, but you could maintain consistency across S and R forms
with

eval(parse(text=paste("~",paste(deparse(form),collapse=" "))))


R. Woodrow Setzer, Jr.                                            Phone:
(919) 541-0128
Experimental Toxicology Division                       Fax:  (919) 541-5394
Pharmacokinetics Branch
NHEERL MD-74; US EPA; RTP, NC 27711


                                                                                                                
                    Douglas Bates                                                                               
                    <bates@stat.wis        To:     Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>                
                    c.edu>                 cc:     Woodrow Setzer/RTP/USEPA/US@EPA, r-devel@stat.math.ethz.ch,  
                    Sent by:               R-bugs@biostat.ku.dk                                                 
                    bates@franz.sta        Subject:     Re: [Rd] nlme: bug in getCovariateFormula (PR#1038)     
                    t.wisc.edu                                                                                  
                                                                                                                
                                                                                                                
                    07/31/01 02:55                                                                              
                    PM                                                                                          
                                                                                                                
                                                                                                                




Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk> writes:

> Setzer.Woodrow@epamail.epa.gov writes:
>
> > The final line in getCovariateFormula() in the nlme package (version
> > 3.1-16) is:
> >     eval(parse(text = paste("~", deparse(form))))
> >
> > however, if deparse(form) exceeds 'width.cutoff (which defaults to
60)',
> > this results in inappropriately placed "~" signs:
> > For example, in my application with the error, form is
> >
> > UnCompetitive(MethoxyresorufinConc, InhibitorConc, Vmax, Km, Ki)
> >
> > the result of the paste() operation in the last line of
getCovariateFormula
> > is:
> >
> > > paste("~",deparse(form))
> > [1] "~ UnCompetitive(MethoxyresorufinConc, InhibitorConc, Vmax, Km, "
> > [2] "~     Ki)"
> >
> > extending width.cutoff gives the intended value:
> >
> > > paste("~",deparse(form,width.cutoff=500))
> > [1] "~ UnCompetitive(MethoxyresorufinConc, InhibitorConc, Vmax, Km,
Ki)"
> >
> > Seems a bit risky for an enforced cutoff in deparse, though.
>
> parse(...deparse(...)) always looks wrong to me anyway. Couldn't one
> use something like
>
> f <- ~1
> f[[2]] <- form
> eval(f)
>
> or
>
> eval(as.call(list(as.name("~"),form)))

> or
>
> eval(substitute(~form)) # that's not going to work in S, though...

Exactly.  The code was originally written for S and ported to R.  Some
of the contorted expressions were things that we found by
experimentation would work in both systems.

> ??
>
> (What is the eval for? Doesn't usually do anything to a
> formula argument.)

In Sv3 at least it assigns a class to the object.

I'll change it to eval(substitute(~form)) for the R package.





==> 1038.reply.3 <==
From pd@blueberry.kubism.ku.dk  Tue Jul 31 23:16:31 2001
Received: from blueberry.kubism.ku.dk (blueberry [130.225.108.193])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id XAA11578;
	Tue, 31 Jul 2001 23:16:30 +0200 (MET DST)
Received: (from pd@localhost)
	by blueberry.kubism.ku.dk (8.9.3/8.9.3) id XAA26225;
	Tue, 31 Jul 2001 23:26:04 +0200
Sender: pd@pubhealth.ku.dk
To: Douglas Bates <bates@stat.wisc.edu>
Cc: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>,
        Setzer.Woodrow@epamail.epa.gov, r-devel@stat.math.ethz.ch,
        R-bugs@biostat.ku.dk
Subject: Re: [Rd] nlme: bug in getCovariateFormula (PR#1038)
References: <200107311547.RAA10368@pubhealth.ku.dk> <x2d76h6pd1.fsf@blueberry.kubism.ku.dk> <6relqxorm4.fsf@franz.stat.wisc.edu>
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 31 Jul 2001 23:26:04 +0200
In-Reply-To: Douglas Bates's message of "31 Jul 2001 13:55:47 -0500"
Message-ID: <x2ae1k23kj.fsf@blueberry.kubism.ku.dk>
Lines: 25
X-Mailer: Gnus v5.7/Emacs 20.7
Mime-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: 7bit

Douglas Bates <bates@stat.wisc.edu> writes:

> Exactly.  The code was originally written for S and ported to R.  Some
> of the contorted expressions were things that we found by
> experimentation would work in both systems.
> 
> > ??
> > 
> > (What is the eval for? Doesn't usually do anything to a
> > formula argument.)
> 
> In Sv3 at least it assigns a class to the object.

Aha. In R too.

> I'll change it to eval(substitute(~form)) for the R package.

Great. I would have thought that one of the two other forms would be
portable, though. 

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

==> 1038.audit <==
Fri Aug  3 12:00:14 2001	ripley	changed notes
Fri Aug  3 12:00:14 2001	ripley	foobar
Fri Aug  3 12:00:14 2001	ripley	moved from incoming to Add-ons
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
* PR# 1044 *
Subject: Polymarsall.c
From: pleu@hotmail.com
Date: Tue, 7 Aug 2001 22:42:07 +0200 (MET DST)
-- no notes --
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 1044 <==
From pleu@hotmail.com  Tue Aug  7 22:42:07 2001
Received: from blueberry.kubism.ku.dk (blueberry [130.225.108.193])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id WAA01752
	for <R-bugs@biostat.ku.dk>; Tue, 7 Aug 2001 22:42:07 +0200 (MET DST)
Date: Tue, 7 Aug 2001 22:42:07 +0200 (MET DST)
From: pleu@hotmail.com
Message-Id: <200108072042.WAA01752@pubhealth.ku.dk>
To: R-bugs@biostat.ku.dk
Subject: Polymarsall.c

Full_Name: Paul Leu
Version: 1.2.3
OS: Windows NT
Submission from: (NULL) (12.2.142.7)


There is a bug in the polymars code.  

Line 655   m=m+k-1;

ought to be moved in front of the for loop in line 652 or else the levels array
will go out of bounds in the loop.

This does not seem to cause any errors in R, but caused crashes when I attempted
to link the file to PV-wave.  

Paul

==> 1044.audit <==
Sat Aug 11 09:56:56 2001	ripley	moved from incoming to Add-ons
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
* PR# 1050 *
Subject: error in ksmooth C code + patch
From: htang@hpl.hp.com
Date: Mon, 13 Aug 2001 04:57:46 +0200 (MET DST)
--fixed for 1.3.1
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 1050 <==
From htang@hpl.hp.com  Mon Aug 13 04:57:46 2001
Received: from blueberry.kubism.ku.dk (blueberry [130.225.108.193])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id EAA07428
	for <R-bugs@biostat.ku.dk>; Mon, 13 Aug 2001 04:57:46 +0200 (MET DST)
Date: Mon, 13 Aug 2001 04:57:46 +0200 (MET DST)
From: htang@hpl.hp.com
Message-Id: <200108130257.EAA07428@pubhealth.ku.dk>
To: R-bugs@biostat.ku.dk
Subject: error in ksmooth C code + patch

Full_Name: Hsiu-Khuern Tang
Version: 1.3.0
OS: GNU/Linux (Debian unstable)
Submission from: (NULL) (192.6.19.190)


Hi!

    If

x <- 1:4
y <- 1:4
z <- ksmooth(x, y, x.points=x)

I get for z

$x
[1] 1 2 3 4

$y
[1] 1.0 1.5 2.0 3.0

    In this case, the default bandwidth (0.5) makes it so that the neighborhood
of any point of x.points contains only one point in x, so z$y should be equal to
y.  I think the error is in
ksmooth.c:

Replace
	  if(x[i] < x0 - cutoff) imin = i;

by
	  if(x[i] < x0 - cutoff) {imin = i; continue;}


Best,
Hsiu-Khuern.




==> 1050.audit <==
Mon Aug 13 08:42:14 2001	ripley	changed notes
Mon Aug 13 08:42:14 2001	ripley	foobar
Mon Aug 13 08:42:14 2001	ripley	moved from incoming to Add-ons
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

Directory:  Analyses

none

Directory:  Documentation

* PR# 988 *
Subject: input for R-intro
From: "Paul E. Johnson" <pauljohn@ku.edu>
Date: Mon, 18 Jun 2001 13:57:10 -0500
-- no notes --
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 988 <==
From pauljohn@ku.edu  Mon Jun 18 21:03:09 2001
Received: from lark.cc.ku.edu (root@lark.cc.ku.edu [129.237.34.2])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id VAA14694
	for <r-bugs@biostat.ku.dk>; Mon, 18 Jun 2001 21:03:08 +0200 (MET DST)
Received: from ku.edu by lark.cc.ku.edu (8.8.8/1.1.8.2/12Jan95-0207PM)
	id OAA0000024737; Mon, 18 Jun 2001 14:02:11 -0500 (CDT)
Sender: pauljohn@lark.cc.ku.edu
Message-ID: <3B2E4F06.F3198537@ku.edu>
Date: Mon, 18 Jun 2001 13:57:10 -0500
From: "Paul E. Johnson" <pauljohn@ku.edu>
X-Mailer: Mozilla 4.77 [en] (X11; U; Linux 2.4.2-2 i686)
X-Accept-Language: en
MIME-Version: 1.0
To: r-bugs@biostat.ku.dk
Subject: input for R-intro
Content-Type: multipart/mixed;
 boundary="------------1C95DB321C5D7CBC643B8CA3"

This is a multi-part message in MIME format.
--------------1C95DB321C5D7CBC643B8CA3
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit

I asked Prof. Brian Ripley if I might submit some text/input for the
R-intro writers, he said this is the place to do it.

I was on a plane a couple of weeks ago reading R-intro as I plan for a
course and made these notes, some of which I think will help my students
if you incorporate them.  I've attached a raw text file I wrote in Emacs
to this message "Rintrochanges.txt".

I have written documents like R-intro before and understand it is
difficult to please everybody, and I thank you for your effort on the
project.

Paul Johnson
Assoc. Professor
Dept. of Political Science
University of Kansas

--------------1C95DB321C5D7CBC643B8CA3
Content-Type: text/plain; charset=us-ascii;
 name="Rintrochanges.txt"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline;
 filename="Rintrochanges.txt"

R-intro comments/enhancements  Part I.

I think something more verbose like this would help under
"Ordered and Unordered factors"

Texts on research design emphasize that variables have
different levels of measurement. Typically, there are three levels.
If a measurement is taken with a precise scale (one on which it is
meaningful to say new_value = b*old_value, as with readings of a
thermometer), it is considered an "interval" level variable.  Many
statistical models were originally designed for interval level
variables.  If a measurement is not so precise, but only provides an
ordered categorization of observations, such as "low" "medium" and
"high", it is called an ordinal variable.  If a measurement is
categorical and implies no sense of ordering, such as "European",
"Asian", or "South American", then it is typically called an ordinal
variable.  Assigning the values of "1", "2", and "3" to these
observations has no substantive significance, as we might as well
number them "3","2","1".

Many statistical models are designed for interval level data, but with
appropriate recoding of input, they can also be made to work with
nominal and ordinal data.  In the "old days" of statistical computing,
users were forced to create a lot of indicator (or "dummy") variables,
thereby converting information from nominal or ordinal measurements
into variables that have only values 0 and 1.  For example, to
represent the information about the home continents of survey
respondents, we might create two dummy variables, one for Asia (coded
1 if respondent is from Asia, 0 otherwise) and one for South America
(likewise 0 and 1).  A respondent for whom we find both of these dummy
variables equal to 0 is sure to be from Europe, so we don't usually
need to create three dummy variables.  Doing so would be redundant.

With a modern language like R, much of the drudgery of creating the
indicator variables is handled automatically if the user declares the
variables properly.  In R, and S before it, the term "factor" is used
to refer to a variable that is not measured at the interval level. An
"unordered factor" is a nominal (or categorical) variable, while an
"ordered factor" is the term for an ordinal measurement.  Many
statistical procedures in R have builtin procedures for handling
factors.

Beyond handling coding of noninterval variables, factors play a vital
role in many R procedures.  Procedures can be designed to do a chore
for each value of a factor.  Many procedures will in fact insist that
a variable be designated as a factor.

 ------------------


In this section "Named arguments and defaults", I am left in a
confusion about a few things.  This confusion has bothered me a while.
Can you do more to explain which arguments must be specified, which
are optional, and under what conditions is it necessary to include the
parameter= which calling a function.

1.  When I use a function, and I look in its help page, how do I know
which input variables must be declared and which can be ignored?  This
is quite mysterious.  When invocations leave out some arguments, how
does R "sift through" the ones that are provided to know which is
which?


For example, consider the page on "update.packages".  

Under Usage, I find:
update.packages(lib.loc = .lib.loc, CRAN = getOption("CRAN"),
                contriburl = contrib.url(CRAN),
                method = "auto", instlib = NULL,
                ask=TRUE, available=NULL, destdir=NULL)

I've been using computers a long time, and I use this function every two months or so.  Between times I forget, come back to this page, and still this one leaves me totally confused.  

After fiddling a while, I find this works on Linux:
>update.packages(lib="/usr/lib/R/library",CRAN="http://lib.stat.cmu.edu/R/CRAN")

but what bothered me thd most is the "getOption("CRAN") option for CRAN.  I tried many variations on that and never figured how to make it work.


Maybe any clarifications could be related to the section "Getting help with functions and features"

In this section, I think it would be nice to have a paragraph about
"how to read a help page."  Some things are not obvious to all new
users.  Some things in help pages are tough to describe... Maybe I'd
say

How to read a help page.

If you find a help page, notice that it is made up of different parts.

1. "Description". These are usually terse, so read every word
   carefully.

2. Look for the "Value" heading.  That tells you what this procedure is
   going to return when you call it. If this procedure doesn't return
   what you need, you should find out immediately.

3. Under "Usage", most help pages list a number of possible commands
   that can be used.  These are not commands to be typed
   literally. Many of them contain abstract references which provide
   information about the nature of the variables that might be
   entered.  

   Here is a simple case.  The coefficients help page has this:

Usage

coef(object, ...)
coefficients(object, ...)

   Clearly, coef and coefficients are going to do the same thing, and you must supply the appropriate object.

4. Under "Arguments," the help page indicates what inputs this
   procedure wants.  The inputs are described line-by-line, and often
   the comments indicate of parameters are optional or what their
   default value might be.

   Many help pages have the infamous "...", which is something like
   "fill in the appropriately, depending on whatever context you
   find."  In some situations this is easy to understand .  Many help
   pages will eplicitly say that "..." refers to any options that
   might be used with a particular kind of object, and in that case
   one must find the help page for that other object. For example, the
   dev.copy help page clearly indicates that "..." refers to any
   options that might be used with the particular device in question.

   Other help pages are not so informative.  Consider the output from ?coefficients:

Arguments

 object
       an object for which the extraction of model coefficients is meaningful.
 ...
       other arguments.

Here it is clear you need to give a statistical object to have
coefficients removed.  The "..." is a mystery, and most R users will
try to use the coefficients command without worrying about it, and
then backtrack if an error occurs.  And, if an error occurs, there may be no recourse but to read the source code for this command or ask  about it in the r-help email list.

--------------1C95DB321C5D7CBC643B8CA3--


==> 988.audit <==
Tue Jun 19 09:07:09 2001	ripley	moved from incoming to Documentation
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
* PR# 1011 *
Subject: R-intro suggestions part II
From: "Paul E. Johnson" <pauljohn@ukans.edu>
Date: Tue, 03 Jul 2001 15:50:06 -0500
-- no notes --
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 1011 <==
From pauljohn@ukans.edu  Tue Jul  3 22:55:21 2001
Received: from lark.cc.ku.edu (root@lark.cc.ku.edu [129.237.34.2])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id WAA25420
	for <r-bugs@biostat.ku.dk>; Tue, 3 Jul 2001 22:55:20 +0200 (MET DST)
Received: from ukans.edu by lark.cc.ku.edu (8.8.8/1.1.8.2/12Jan95-0207PM)
	id PAA0000007085; Tue, 3 Jul 2001 15:55:12 -0500 (CDT)
Sender: pauljohn@lark.cc.ku.edu
Message-ID: <3B422FFE.F4450D57@ukans.edu>
Date: Tue, 03 Jul 2001 15:50:06 -0500
From: "Paul E. Johnson" <pauljohn@ukans.edu>
X-Mailer: Mozilla 4.77 [en] (X11; U; Linux 2.4.2-2 i686)
X-Accept-Language: en
MIME-Version: 1.0
To: r-bugs@biostat.ku.dk
Subject: R-intro suggestions part II
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit

Brian Ripley said that, if I sent these here, they might find their way
to the R-intro team.  So, here is another installment:


Concerning this section:

Data permanency and removing objects.

This is the first place R-intro discusses objects.  I was thinking a
better discussion of objects and syntax is needed, perhaps here, or in
the later section "Objects, their modes and attributes."  I suggest
this:


The fact that R is an object-oriented approach to programming for
statistical analysis has pervasive implications.  If one has studied a
programming language like Java or C++, the notions of object and
method are not new.  For readers who have not studied languages like
that, perhaps we can offer a brief explanation.  An object is a "self
contained data holder" that can follow instructions (do calculations,
provide values).  One intention of this design is to keep things
separate if they belong that way, to reduce the risk that one
calculation accidentally influences the result of another.
Object-orientation also has important implications for the way the
different parts of a program fit together.  Since an object is
supposed to be able to carry out a certain set of actions (which are
called methods, but in R one often says "functions" or "procedures"),
then both the user and the programmer understand what the object can
be expected to do.  There are numerous implications of object
orientation that come into play "under the hood" of the R statistical
engine, but it is not important to delve into them from a user's point
of view.


There is one wrinkle about the syntax of R that we hasten to
emphasize.  In object-oriented computer languages, syntax typically
puts the object first, followed by the instruction, followed any needed
parameters.  In Java, to tell the object "regression" to calculate
estimates for vectors y and x, one would write something like:

   regression.estimate(y,x);

Assuming that object's class has an "estimate" method which knows how
to handle the input, we would be in business.

In R, the syntax is totally different.  Instead of thinking of the
object itself as the primary thing, the syntax in R is designed to use
the method name--the instruction--as the leading concept, and then the
object that is being acted upon is given as a parameter.

When a model gives a result in R, the result is almost invariably an
object, which can then be "poked and prodded" with other methods.
If a linear regression is calculated, for example:

resultObject <- lm(y~x)

the return value is an object.  But, unlike other object-oriented
languages, in R one would write summary(resultObject), or
coefficients(resultObject), rather than the Java style
result_object.summary() or some such thing, in order to investigate the
result.


Paul E. Johnson
Political Science
University of Kansas


==> 1011.audit <==
Fri Aug  3 11:30:05 2001	ripley	moved from incoming to Documentation
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

Directory:  Graphics

* PR# 202 *
Subject: persp box occlusion bug
From: wsi@gcal.ac.uk
Date: Wed, 2 Jun 1999 15:02:03 +0200 (MET DST)
--The persp algorithm does not apply the occlusion rules to the frame, 
--which is always plotted first. 
--A bug, but not very simple to fix.
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 202 <==
From wsi@gcal.ac.uk  Wed Jun  2 15:02:10 1999
Received: from localhost (blueberry [130.225.108.193])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id PAA27126
	for <R-bugs@biostat.ku.dk>; Wed, 2 Jun 1999 15:02:03 +0200 (MET DST)
Date: Wed, 2 Jun 1999 15:02:03 +0200 (MET DST)
From: wsi@gcal.ac.uk
Message-Id: <199906021302.PAA27126@pubhealth.ku.dk>
To: R-bugs@biostat.ku.dk
Subject: persp box occlusion bug

Full_Name: Bill Simpson
Version: 64.1
OS: linux
Submission from: (NULL) (193.62.250.209)


Bug in persp() bounding box:
If the surface being plotted extends below the lower z-axis boundary, the box
is
drawn with the wrong occlusion. The box is shown as being occluded by the
surface
even though it should be in front of the surface.

The box is correct for surface extending above the box. Problem is only for
surface extending below the box.

This exhibits the bug:

std<-rep(seq(-32,32,8),9)/1000 * 60
cf<-rep(seq(-32,32,8),rep(9,9))/1000 *60 
dp<-(cf-std)/.6
std<-unique(std)
cf<-unique(cf)
dp<-t(matrix(dp,length(cf),length(std)))
persp(std,cf,dp, xlim=c(-2,2), ylim=c(-2,2), zlim=c(0,5),theta=-40,    
phi=45,
box=TRUE,ltheta=-120, lphi=120,
d=1.5, shade=.7)


==> 202.audit <==
Wed Jun 30 19:31:18 1999	pd	moved from incoming to Graphics
Thu Jul 01 18:19:48 1999	pd	changed notes
Sun Feb 20 10:07:11 2000	ripley	changed notes
Mon Feb 28 17:17:51 2000	pd	changed notes
Mon Feb 28 17:18:28 2000	pd	changed notes
Mon Feb 28 17:19:35 2000	pd	changed notes
Mon Feb 28 17:20:17 2000	pd	changed notes
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
* PR# 660 *
Subject: identify.default ignores any setting of cex.
From: Prof Brian Ripley <ripley@stats.ox.ac.uk>
Date: Fri, 15 Sep 2000 10:23:39 +0100 (BST)
-- no notes --
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 660 <==
From postmaster@franz.stat.wisc.edu  Fri Sep 15 11:23:32 2000
Received: from stat.math.ethz.ch (daemon@hypatia.ethz.ch [129.132.58.23])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id LAA13327
	for <R-bugs@biostat.ku.dk>; Fri, 15 Sep 2000 11:23:32 +0200 (MET DST)
Received: (from daemon@localhost)
	by stat.math.ethz.ch (8.9.1/8.9.1) id LAA17846
	for <r-bugs@hypatia.math.ethz.ch>; Fri, 15 Sep 2000 11:23:49 +0200 (MET DST)
Received: from franz.stat.wisc.edu(128.105.174.95)
 via SMTP by hypatia, id smtpdAAAa004Mn; Fri Sep 15 11:23:42 2000
Received: from toucan.stats.ox.ac.uk (really [163.1.20.20]) by franz.stat.wisc.edu
	via in.smtpd with esmtp
	id <m13Zrkl-000IW0C@franz.stat.wisc.edu> (Debian Smail3.2.0.102)
	for <R-bugs@r-project.org>; Fri, 15 Sep 2000 04:25:51 -0500 (CDT) 
Received: from localhost (ripley@localhost)
	by toucan.stats.ox.ac.uk (8.9.0/8.9.0) with ESMTP id KAA14892
	for <R-bugs@r-project.org>; Fri, 15 Sep 2000 10:23:39 +0100 (BST)
X-Authentication-Warning: toucan.stats: ripley owned process doing -bs
Date: Fri, 15 Sep 2000 10:23:39 +0100 (BST)
From: Prof Brian Ripley <ripley@stats.ox.ac.uk>
X-Sender: ripley@toucan.stats
To: R-bugs@r-project.org
Subject: identify.default ignores any setting of cex.
Message-ID: <Pine.GSO.4.05.10009151011510.14885-100000@toucan.stats>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII

R 1.1.1 on Windows, but I think this is widespread.

Using either

par(cex=0.5)
plot(1:10)
identify(1:10)

or

plot(1:10)
identify(1:10, cex=0.5)

ignores the cex setting.  The root cause is that par(cex=0.5)
alters cexbase for the device but sets cex=1.0, and the internal
text plotting routines use cex and not cexbase.

The obvious fix is to set cex to cexbase in do_identify. However,
if this is fixed, there is another problem, The offset of the label
is related to the cex in use for the label, and not for the symbol.
So

plot(1:10, type="n")
points(1:10, cex=5)
identify(1:10)

is not sensible in placing the labels.  That may be hard to anticipate,
but 

plot(1:10)
identify(1:10, cex=0.5)

needs to use cex=1 not cex=0.5 for the adjustment.  Perhaps identify is
trying too hard, and should give the user more control over the precise
position of the label (as S-PLUS does).

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


==> 660.audit <==
Wed Oct 25 06:57:35 2000	ripley	moved from incoming to Graphics

==> 660.followup.1 <==
From ligges@statistik.uni-dortmund.de  Wed Apr 25 17:24:42 2001
Received: from nx5.HRZ.Uni-Dortmund.DE (nx5.HRZ.Uni-Dortmund.DE [129.217.131.21])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id RAA02114
	for <R-bugs@biostat.ku.dk>; Wed, 25 Apr 2001 17:24:42 +0200 (MET DST)
Received: from amadeus.statistik.uni-dortmund.de by nx5.HRZ.Uni-Dortmund.DE
          via smtp-local with ESMTP; Wed, 25 Apr 2001 17:24:51 +0200
Received: from statistik.uni-dortmund.de ([129.217.207.201])
	by amadeus.statistik.uni-dortmund.de (8.9.3+Sun/8.9.3) with ESMTP id RAA01760;
	Wed, 25 Apr 2001 17:24:50 +0200 (MET DST)
Message-ID: <3AE6EC55.6C1D8C7A@statistik.uni-dortmund.de>
Date: Wed, 25 Apr 2001 17:25:09 +0200
From: Uwe Ligges <ligges@statistik.uni-dortmund.de>
Organization: Fachbereich Statistik, Universitaet Dortmund
X-Mailer: Mozilla 4.76 [en] (WinNT; U)
X-Accept-Language: en
MIME-Version: 1.0
To: r-bugs <R-bugs@biostat.ku.dk>
CC: "Brian D. Ripley" <ripley@stats.ox.ac.uk>
Subject: Re: identify.default ignores any setting of cex (PR#660)
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit

A follow-up to PR#660 (15 Sep 2000) from Brian Ripley:

> R 1.1.1 on Windows, but I think this is widespread.
>
> Using either
>
> par(cex=0.5)
> plot(1:10)
> identify(1:10)
>
> or
> 
> plot(1:10)
> identify(1:10, cex=0.5)
> 
> ignores the cex setting.  The root cause is that par(cex=0.5)
> alters cexbase for the device but sets cex=1.0, and the internal
> text plotting routines use cex and not cexbase.
> 
> The obvious fix is to set cex to cexbase in do_identify. However,
> if this is fixed, there is another problem, The offset of the label
> is related to the cex in use for the label, and not for the symbol.
> So
> 
> plot(1:10, type="n")
> points(1:10, cex=5)
> identify(1:10)
> 
> is not sensible in placing the labels.  That may be hard to anticipate,
> but 
> 
> plot(1:10)
> identify(1:10, cex=0.5)
> 
> needs to use cex=1 not cex=0.5 for the adjustment.  Perhaps identify is
> trying too hard, and should give the user more control over the precise
> position of the label (as S-PLUS does).


The same with 

 par(cex=1); plot(1:10); text(4, 5, "Hello World") # OK
 par(cex=2); plot(1:10); text(4, 5, "Hello World") # OK
 par(cex=2); plot(1:10); text(4, 5, "Hello World", cex = 1) # NOT OK
 par(cex=2); plot(1:10); text(4, 5, "Hello World", cex = 0.5)

So the scaling with cex in text() is relative to the par() settings,
which is not the expected behaviour.


[R-1.2.2 on WinNT 4.0]

Uwe Ligges

==> 660.followup.2 <==
From ripley@stats.ox.ac.uk  Wed Apr 25 20:00:09 2001
Received: from toucan.stats.ox.ac.uk (toucan.stats.ox.ac.uk [163.1.20.20])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id UAA03187
	for <R-bugs@biostat.ku.dk>; Wed, 25 Apr 2001 20:00:09 +0200 (MET DST)
Received: from max166.public.ox.ac.uk (max166.public.ox.ac.uk [192.76.27.166])
	by toucan.stats.ox.ac.uk (8.9.0/8.9.0) with ESMTP id SAA06061;
	Wed, 25 Apr 2001 18:56:30 +0100 (BST)
Date: Wed, 25 Apr 2001 18:55:47 +0100 (GMT Daylight Time)
From: Prof Brian D Ripley <ripley@stats.ox.ac.uk>
To: <ligges@statistik.uni-dortmund.de>
cc: <r-devel@stat.math.ethz.ch>, <R-bugs@biostat.ku.dk>
Subject: Re: [Rd] Re: identify.default ignores any setting of cex (PR#660)
In-Reply-To: <200104251524.RAA02124@pubhealth.ku.dk>
Message-ID: <Pine.WNT.4.31.0104251852500.300-100000@tern.stats>
Sender: ripley@stats.ox.ac.uk
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII

On Wed, 25 Apr 2001 ligges@statistik.uni-dortmund.de wrote:

> A follow-up to PR#660 (15 Sep 2000) from Brian Ripley:

[...]

> The same with
>
>  par(cex=1); plot(1:10); text(4, 5, "Hello World") # OK
>  par(cex=2); plot(1:10); text(4, 5, "Hello World") # OK
>  par(cex=2); plot(1:10); text(4, 5, "Hello World", cex = 1) # NOT OK
>  par(cex=2); plot(1:10); text(4, 5, "Hello World", cex = 0.5)
>
> So the scaling with cex in text() is relative to the par() settings,
> which is not the expected behaviour.

It is the documented behaviour, though: see the description of cex in
?help.

     cex: numeric character expansion factor; multiplied by
          `par("cex")' yields the final character size.

Brian

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
* PR# 776 *
Subject: strwidth does not take font into account
From: Martyn Plummer <plummer@iarc.fr>
Date: Tue, 19 Dec 2000 14:56:01 +0100 (CET)
--This needs a substantial redesign.
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 776 <==
From postmaster@franz.stat.wisc.edu  Tue Dec 19 14:53:40 2000
Received: from franz.stat.wisc.edu (franz.stat.wisc.edu [128.105.174.95])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id OAA05819
	for <r-bugs@biostat.ku.dk>; Tue, 19 Dec 2000 14:53:39 +0100 (MET)
Received: from smtp02.iarc.fr (really [212.157.236.234]) by franz.stat.wisc.edu
	via in.smtpd with esmtp
	id <m148NHG-000IYiC@franz.stat.wisc.edu> (Debian Smail3.2.0.102)
	for <r-bugs@r-project.org>; Tue, 19 Dec 2000 07:58:02 -0600 (CST) 
Received: from xena.iarc.fr ([10.10.150.125])
	by smtp02.iarc.fr (8.9.3/8.9.3) with ESMTP id OAA21720
	for <r-bugs@r-project.org>; Tue, 19 Dec 2000 14:53:55 +0100
Message-ID: <XFMail.001219145601.plummer@iarc.fr>
X-Mailer: XFMail 1.3 [p0] on Linux
X-Priority: 3 (Normal)
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 8bit
MIME-Version: 1.0
Date: Tue, 19 Dec 2000 14:56:01 +0100 (CET)
Organization: International Agency for Research on Cancer
Sender: martyn@xena.iarc.fr
From: Martyn Plummer <plummer@iarc.fr>
To: r-bugs@r-project.org
Subject: strwidth does not take font into account

One for the wishlist.

The text() function permits the use of different fonts with the arguments
"font" or "vfont".  These create text strings of the same height as the
default font, but of different widths: bold face is slightly wider; vector
fonts are usually much wider.  I think the strwidth() function needs to
take the font into account by also having "font" and "vfont" arguments.
Currently it reports the string width using the default font, which can
be quite different.

Here is a little test function you can use to see how far off the
reported string width is.

test.strwidth <-
function(text, vfont=NULL, cex=NULL, ...)
{
 plot(0,0,xlim=c(-1,1),ylim=c(-1,1), type="n")
 text(0,0, text, adj=c(0,0), offset=0, cex=cex, vfont=vfont, ...)
 abline(h=c(0, strheight(text, cex=cex)), lty=2)
 abline(v=c(0, strwidth(text, cex=cex)), lty=2)
}

e.g.

test.strwidth("This is some text", cex=2)
test.strwidth("This is some text", cex=2, font=2)
test.strwidth("This is some text", vfont=c("sans serif", "plain"))

Martyn

Please do not edit the information below--

Version:
 platform = i686-pc-linux-gnu
 arch = i686
 os = linux-gnu
 system = i686, linux-gnu
 status =
 major = 1
 minor = 2.0
 year = 2000
 month = 12
 day = 15
 language = R

Search Path:
 .GlobalEnv, package:ctest, Autoloads, package:base




==> 776.audit <==
Tue Dec 26 10:31:10 2000	ripley	moved from incoming to Graphics
Sat Feb 24 08:55:28 2001	ripley	changed notes
Sat Feb 24 08:55:28 2001	ripley	foobar
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
* PR# 791 *
Subject:  par(lab= *) / axis(*) bug 
From: maechler@stat.math.ethz.ch
Date: Fri, 22 Dec 2000 10:59:26 +0100
-- no notes --
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 791 <==
From postmaster@franz.stat.wisc.edu  Fri Dec 22 10:59:23 2000
Received: from franz.stat.wisc.edu (franz.stat.wisc.edu [128.105.174.95])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id KAA08619
	for <r-bugs@biostat.ku.dk>; Fri, 22 Dec 2000 10:59:23 +0100 (MET)
Received: from stat.math.ethz.ch (really [129.132.58.23]) by franz.stat.wisc.edu
	via in.smtpd with esmtp (ident daemon using rfc1413)
	id <m149OzA-000IXMC@franz.stat.wisc.edu> (Debian Smail3.2.0.102)
	for <r-bugs@r-project.org>; Fri, 22 Dec 2000 03:59:36 -0600 (CST) 
Received: (from daemon@localhost)
	by stat.math.ethz.ch (8.9.1/8.9.1) id KAA02617;
	Fri, 22 Dec 2000 10:59:34 +0100 (MET)
Received: from UNKNOWN(129.132.58.33), claiming to be "florence.ethz.ch"
 via SMTP by hypatia, id smtpdAAAa000cp; Fri Dec 22 10:59:26 2000
Received: (maechler@localhost) by florence.ethz.ch (8.9.3/D-MATH-client) id KAA23075; Fri, 22 Dec 2000 10:59:26 +0100
Date: Fri, 22 Dec 2000 10:59:26 +0100
From: maechler@stat.math.ethz.ch
Message-Id: <200012220959.KAA23075@florence.ethz.ch>
To: r-bugs@r-project.org
Subject:  par(lab= *) / axis(*) bug 
Cc: maechler@stat.math.ethz.ch

As the subject says,
here is example code (with comments) showing the problem:

p1 <- function(lab = c(8,12,7))
{
    ## This `fails' (on a virgin device)
    clab <- paste(lab,collapse=",")
    plot(1,1, xlim = c(0,15), ylim = c(-.8,1), type ="n", axes = FALSE,
         main=paste("plot(*,axes=F); par(lab= c(",clab,"));  axis(*) x 2",sep=""))
    box(col="gray80")
    op <- par(lab = lab) ; on.exit(par(op))
    axis(1, pos = 0)
    axis(2, pos = 0, las = 1)
    par(op)
    op
}

p2 <- function(lab = c(8,12,7))
{
    ## This works  [par()  *BEFORE*  plot() ]
    clab <- paste(lab,collapse=",")
    op <- par(lab = lab) ; on.exit(par(op))

    plot(1,1, xlim = c(0,15), ylim = c(-.8,1), type ="n", axes = FALSE,
         main=paste("par(lab= c(",clab,")); plot(*,axes=F); axis(*) x 2",sep=""))
    box(col="gray80")
    axis(1, pos = 0)
    axis(2, pos = 0, las = 1)
    op ## lab 5 5 7
}

dev.off()
par(mfrow=c(2,1), mar=c(2,2,3,1))
p1()
p2()




--please do not edit the information below--

Version:
 platform = i686-pc-linux-gnu
 arch = i686
 os = linux-gnu
 system = i686, linux-gnu
 status = Patched
 major = 1
 minor = 2.0
 year = 2000
 month = 12
 day = 19
 language = R

Search Path:
 .GlobalEnv, package:nls, package:splines, package:lqs, package:modreg, package:stepfun, package:mva, package:eda, package:ts, package:VLMC, package:ctest, package:SfS, Autoloads, package:base

==> 791.audit <==
Tue Dec 26 10:31:10 2000	ripley	moved from incoming to Graphics
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
* PR# 816 *
Subject: dotplot: character size of labels
From: RINNER Heinrich <H.RINNER@TIROL.GV.AT>
Date: Thu, 18 Jan 2001 14:54:32 +0100
--Suggested fix is incorporated in 1.2.2.
--
--There is a deeper problem:  mtext() ignores par(cex=.5) in general.  
--To see the problem try:  par(cex=.5); mtext("hi")
--Paul thinks the right fix is to change the argument list for mtext so that
--cex=par(cex) by default rather than cex=NA by default (plus corresponding
--internal changes to  do_mtext in plot.c).
--This needs to be done very carefully because (i) the change suggested above 
--mayhave side-effects in many other pieces of interpreted code 
--(ii) do_mtext ignores dd->gp.cexbase unlike, for example, do_plot_xy 
--and anything to do with cexbase needs extreme care.
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 816 <==
From postmaster@franz.stat.wisc.edu  Thu Jan 18 16:57:16 2001
Received: from franz.stat.wisc.edu (franz.stat.wisc.edu [128.105.174.95])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id QAA13627
	for <r-bugs@biostat.ku.dk>; Thu, 18 Jan 2001 16:57:15 +0100 (MET)
Received: from ingw1.tirol.gv.at (really [212.183.27.1]) by franz.stat.wisc.edu
	via in.smtpd with esmtp
	id <m14JHRE-000IWyC@franz.stat.wisc.edu> (Debian Smail3.2.0.102)
	for <r-bugs@r-project.org>; Thu, 18 Jan 2001 09:57:24 -0600 (CST) 
Received: from xms.tirol.gv.at (xms.tirol.gv.at [10.11.128.200])
	by ingw1.tirol.gv.at (Mailer) with ESMTP id 22ADE2825
	for <r-bugs@r-project.org>; Thu, 18 Jan 2001 14:49:47 +0100 (NFT)
Received: from xms.tirol.gv.at (unverified) by xms.tirol.gv.at
 (Content Technologies SMTPRS 4.1.5) with ESMTP id <T0a0b80c8512ecf1400@xms.tirol.gv.at> for <r-bugs@r-project.org>;
 Thu, 18 Jan 2001 14:54:33 +0100
Received: by xms.tirol.gv.at with Internet Mail Service (5.5.2650.21)
	id <CLGLQ6B7>; Thu, 18 Jan 2001 14:54:33 +0100
Message-ID: <C4D44AB4CB62D311BA6500041202E8862640F8@xms1.tirol.gv.at>
From: RINNER Heinrich <H.RINNER@TIROL.GV.AT>
To: "'r-bugs@r-project.org'" <r-bugs@r-project.org>
Subject: dotplot: character size of labels
Date: Thu, 18 Jan 2001 14:54:32 +0100
Return-Receipt-To: RINNER Heinrich <H.RINNER@TIROL.GV.AT>
MIME-Version: 1.0
X-Mailer: Internet Mail Service (5.5.2650.21)
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: 8bit
X-MIME-Autoconverted: from quoted-printable to 8bit by pubhealth.ku.dk id QAA13627

There seems to be a bug in "dotplot" concerning the "cex" parameter. Setting
cex has no effect on the character size of the labels of the points.
This problem was posted to r-help today (Thu, 18 Jan 2001); the solution
given by Brian Ripley (and Uwe Ligges) seems to work for me.

Heinrich Rinner.
 
> version
         _              
platform i386-pc-mingw32
arch     x86            
os       Win32          
system   x86, Win32     
status                  
major    1              
minor    2.0            
year     2000           
month    12             
day      15             
language R              

> ----------
> Von: 	Prof Brian Ripley[SMTP:ripley@stats.ox.ac.uk]
> Gesendet: 	Donnerstag, 18. Jnner 2001 10:35
> An: 	RINNER Heinrich
> Cc: 	'r-help@stat.math.ethz.ch'
> Betreff: 	Re: [R] dotplot: character size of labels
> 
> On Thu, 18 Jan 2001, RINNER Heinrich wrote:
> 
> > Dear R users,
> >
> > using dotplot (R1.2.0, WinNT4.0), I am trying to change the character
> size
> > of the labels of the points:
> >
> > > # example
> > > data(VADeaths)
> > > dotplot(VADeaths, main = "Death Rates in Virginia - 1940")
> > > # I'd like to have smaller character size of the labels (for age and
> > population groups)
> > > ?dotplot
> > > # for argument "cex", this says: "Setting cex to a value smaller than
> one
> > can be a useful way of avoiding label overlap."
> > > dotplot(VADeaths, main = "Death Rates in Virginia - 1940", cex = 0.5)
> > > # the main title and the plotting characters are smaller now, but not
> the
> > labels
> > > # trying to set other graphics parameters seems to have no effect:
> > > dotplot(VADeaths, main = "Death Rates in Virginia - 1940", cex.axis =
> 0.5)
> > > dotplot(VADeaths, main = "Death Rates in Virginia - 1940", cex.lab =
> 0.5)
> >
> > I'd be grateful for any hint how to do this correctly;
> 
> Looks like a bug. Inside dotplot alter to
> 
>         for (i in 1:n) mtext(labs[i], side = 2, line = loffset,
>             at = y[i], adj = 0, col = color, las = 2, cex = cex, ...)
> 
>         for (i in 1:nlevels(groups)) mtext(glabels[i], side = 2,
>             line = goffset, at = gpos[i], adj = 0, col = gcolor,
>             las = 2, cex = cex, ...)
> 
> However, it really needs more than that to calculate the spaces for the
> labels correctly.
> 
> 
> -- 
> Brian D. Ripley,                  ripley@stats.ox.ac.uk
> Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
> University of Oxford,             Tel:  +44 1865 272861 (self)
> 1 South Parks Road,                     +44 1865 272860 (secr)
> Oxford OX1 3TG, UK                Fax:  +44 1865 272595
> 

==> 816.audit <==
Sat Jan 20 10:24:14 2001	ripley	moved from incoming to Graphics
Tue Jan 23 03:38:23 2001	paul	changed notes
Tue Jan 23 03:38:23 2001	paul	foobar
Sun Feb 18 10:11:12 2001	ripley	changed notes
Sun Feb 18 10:11:12 2001	ripley	foobar
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
* PR# 820 *
Subject: interaction.plot
From: "Mark M. Span" <span@psy.uva.nl>
Date: Mon, 22 Jan 2001 10:47:39 +0100
--mtext is unscaled by default.  It is not clear if this should
--use the par("cex") setting or an inline cex setting such as cex.axis.
--It might make more sense to use axis rather than mtext, as boxplot does.
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 820 <==
From postmaster@franz.stat.wisc.edu  Mon Jan 22 10:43:38 2001
Received: from franz.stat.wisc.edu (franz.stat.wisc.edu [128.105.174.95])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id KAA09043
	for <r-bugs@biostat.ku.dk>; Mon, 22 Jan 2001 10:43:37 +0100 (MET)
Received: from mail.psy.uva.nl (really [145.18.113.16]) by franz.stat.wisc.edu
	via in.smtpd with esmtp
	id <m14KdVr-000IWyC@franz.stat.wisc.edu> (Debian Smail3.2.0.102)
	for <r-bugs@r-project.org>; Mon, 22 Jan 2001 03:43:47 -0600 (CST) 
Received: from rea2205 (rea2205.psy.uva.nl [145.18.152.205])
	by mail.psy.uva.nl (8.9.3/8.9.3) with SMTP id KAA21513
	for <r-bugs@r-project.org>; Mon, 22 Jan 2001 10:43:45 +0100 (MET)
Message-ID: <008501c08458$5bfc6530$cd981291@psy.uva.nl>
From: "Mark M. Span" <span@psy.uva.nl>
To: <r-bugs@r-project.org>
Subject: interaction.plot
Date: Mon, 22 Jan 2001 10:47:39 +0100
Organization: UvA
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 5.50.4133.2400
X-MimeOLE: Produced By Microsoft MimeOLE V5.50.4133.2400

I notices some indesireable behaviour in interaction.plot. The scaling of
the x-axis labels discards the overall settings for the 'cex' attribute,
leading to unscaled labels. The source for this behaviour is the line

mtext(xlabs, 1, at = xvals)

in interaction.plot.

to get this function to perform conform the manual, change this line to

mtext(xlabs, 1, at = xvals, cex=par("cex"))

and all is well.

because of the simplicity of this 'fix' I assume that it is a crossplatform
thingie, but for the record:

I use R-Win in winNT, 1.2.0, upgrading soon.

just my .02 euro..

I'll just end this mail with a standard declaration of love for R

greetz. Mark M. Span


==> 820.audit <==
Thu Jan 25 00:05:53 2001	ripley	moved from incoming to Graphics
Sat Feb 24 08:53:40 2001	ripley	changed notes
Sat Feb 24 08:53:40 2001	ripley	foobar
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
* PR# 828 *
Subject: termplot fails for composite non-factor terms
From: John Maindonald <john.maindonald@anu.edu.au>
Date: Sat, 27 Jan 2001 11:57:37 +1100 (EST)
--Neither of the proposed changes actually works in sufficient generality.
--
--The easy and unimportant part of this, the labels, is fixed in 1.2.2. Getting
--the data right is a project for 1.3
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 828 <==
From postmaster@franz.stat.wisc.edu  Sat Jan 27 01:57:37 2001
Received: from franz.stat.wisc.edu (franz.stat.wisc.edu [128.105.174.95])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id BAA07865
	for <r-bugs@biostat.ku.dk>; Sat, 27 Jan 2001 01:57:36 +0100 (MET)
Received: from leonard.anu.edu.au (really [150.203.2.15]) by franz.stat.wisc.edu
	via in.smtpd with esmtp
	id <m14MJgZ-000IWyC@franz.stat.wisc.edu> (Debian Smail3.2.0.102)
	for <r-bugs@r-project.org>; Fri, 26 Jan 2001 18:57:47 -0600 (CST) 
Received: (from u9801539@localhost)
	by leonard.anu.edu.au (8.9.3/8.9.3) id LAA25063
	for r-bugs@r-project.org; Sat, 27 Jan 2001 11:57:37 +1100 (EST)
Date: Sat, 27 Jan 2001 11:57:37 +1100 (EST)
From: John Maindonald <john.maindonald@anu.edu.au>
Message-Id: <200101270057.LAA25063@leonard.anu.edu.au>
To: r-bugs@r-project.org
Subject: termplot fails for composite non-factor terms

I am running R 1.2.1 under Windows 98SE.

termplot() currently fails when there are composite terms, thus:
  > library(mass)
  > data(hills)
  > hills.lm <- lm(time ~ climb + poly(dist, 2), data = hills)
  > termplot(hills.lm)
  Hit <Return> to see next plot: 
  Error in eval(expr, envir, enclos) : Object "dist" not found

The call
  > termplot(hills.lm,data=hills)
does run without generating an error message, i.e. there is a 
problem with the default setting for the parameter 'data'. 
However the x-axis for the term poly(dist,2) is then incorrectly 
labelled as poly(dist,2), rather than dist
The label poly(dist,2) surely belongs as part of the y-axis label.

Here are suggested fixes

1. In the default parameters for the function call change
   data = model.frame(model)
to
   data = get(as.character(model$call$data))

[This does not work if the variable values are specified in the
function call.  It is not clear to me how to fix that.]

2. A few lines from the beginning, replace
    if (is.null(xlabs)) 
        xlabs <- nmt
    if (is.null(ylab)) 
        ylab <- substitute(link(foo), list(foo = formula(model)[[2]]))
with
   if (is.null(xlabs)) 
        xlabs <- unlist(lapply(cn,function(x)
        if(length(x)>1)as.character(x[[2]]) else as.character(x)))
   if (is.null(ylab)) 
        ylab <- paste("Partial for", nmt)

[The current y-label is "link(<yvar>)".  If it is thought necessary
to specify this, it should be additional to e.g., in my example,
"Partial for poly(dist,2)"]

Replace ylab = ylab with 
   ylab = ylab[i]
in the two places (arguments to plot()) where it appears.

John Maindonald               email : john.maindonald@anu.edu.au        
Statistical Consulting Unit,  phone : (6125)3998        
c/o CMA, SMS,                 fax   : (6125)5549  
John Dedman Mathematical Sciences Building
Australian National University
Canberra ACT 0200
Australia

==> 828.followup.1 <==
From tlumley@u.washington.edu  Sat Jan 27 02:08:54 2001
Received: from jason02.u.washington.edu (root@jason02.u.washington.edu [140.142.8.52])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id CAA07896
	for <R-bugs@biostat.ku.dk>; Sat, 27 Jan 2001 02:08:53 +0100 (MET)
Received: from homer06.u.washington.edu (tlumley@homer06.u.washington.edu [140.142.15.40])
	by jason02.u.washington.edu (8.9.3+UW00.05/8.9.3+UW00.12) with ESMTP id RAA28204;
	Fri, 26 Jan 2001 17:09:04 -0800
Received: from localhost (tlumley@localhost)
	by homer06.u.washington.edu (8.9.3+UW00.05/8.9.3+UW00.12) with ESMTP id RAA186066;
	Fri, 26 Jan 2001 17:09:03 -0800
Date: Fri, 26 Jan 2001 17:09:03 -0800 (PST)
From: Thomas Lumley <tlumley@u.washington.edu>
To: john.maindonald@anu.edu.au
cc: r-devel@stat.math.ethz.ch, R-bugs@biostat.ku.dk
Subject: Re: [Rd] termplot fails for composite non-factor terms (PR#828)
In-Reply-To: <200101270057.BAA07875@pubhealth.ku.dk>
Message-ID: <Pine.A41.4.21.0101261704120.21498-100000@homer06.u.washington.edu>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII

On Sat, 27 Jan 2001 john.maindonald@anu.edu.au wrote:

> I am running R 1.2.1 under Windows 98SE.
> 
> termplot() currently fails when there are composite terms, thus:
>   > library(mass)
>   > data(hills)
>   > hills.lm <- lm(time ~ climb + poly(dist, 2), data = hills)
>   > termplot(hills.lm)
>   Hit <Return> to see next plot: 
>   Error in eval(expr, envir, enclos) : Object "dist" not found
> 
> The call
>   > termplot(hills.lm,data=hills)
> does run without generating an error message, i.e. there is a 
> problem with the default setting for the parameter 'data'. 
> However the x-axis for the term poly(dist,2) is then incorrectly 
> labelled as poly(dist,2), rather than dist
> The label poly(dist,2) surely belongs as part of the y-axis label.
> 
> Here are suggested fixes
> 
> 1. In the default parameters for the function call change
>    data = model.frame(model)
> to
>    data = get(as.character(model$call$data))
> 
> [This does not work if the variable values are specified in the
> function call.  It is not clear to me how to fix that.]

Also, it does not specify where to get() the data: what environment to
use. The reason that the data= argument is present in termplot() is that
we can't tell where to find the data in general.

The situation is better as of R1.2, since we can look up variables in the
environment of the model formula. This would fix not only termplot() but a
number of other prediction-related problems.


> 2. A few lines from the beginning, replace
>     if (is.null(xlabs)) 
>         xlabs <- nmt
>     if (is.null(ylab)) 
>         ylab <- substitute(link(foo), list(foo = formula(model)[[2]]))
> with
>    if (is.null(xlabs)) 
>         xlabs <- unlist(lapply(cn,function(x)
>         if(length(x)>1)as.character(x[[2]]) else as.character(x)))
>    if (is.null(ylab)) 
>         ylab <- paste("Partial for", nmt)
> 
> [The current y-label is "link(<yvar>)".  If it is thought necessary
> to specify this, it should be additional to e.g., in my example,
> "Partial for poly(dist,2)"]
> 
> Replace ylab = ylab with 
>    ylab = ylab[i]
> in the two places (arguments to plot()) where it appears.


This looks like a good idea. 

	-thomas


==> 828.audit <==
Mon Jan 29 08:36:10 2001	ripley	moved from incoming to Graphics
Fri Feb 16 22:43:59 2001	thomas	changed notes
Fri Feb 16 22:43:59 2001	thomas	foobar
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
* PR# 831 *
Subject: screen can't go back to (split) screen with log="y" plot
From: Thomas Vogels <tov@ece.cmu.edu>
Date: 30 Jan 2001 00:39:41 -0500
--Still there. Suggested fix included in followups, but we didn't get around to
--try it in time for 1.2.3.
--
--Fix doesn't work. One problem is that the opar<-par();par(opar) idiom updates
--xaxp before xlog, and the new value of xaxp may only be valid under the new
--value of xlog.
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 831 <==
From postmaster@franz.stat.wisc.edu  Tue Jan 30 06:39:31 2001
Received: from franz.stat.wisc.edu (franz.stat.wisc.edu [128.105.174.95])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id GAA28455
	for <r-bugs@biostat.ku.dk>; Tue, 30 Jan 2001 06:39:30 +0100 (MET)
Received: from infiniti.ece.cmu.edu (really [128.2.216.84]) by franz.stat.wisc.edu
	via in.smtpd with esmtp
	id <m14NTW2-000IWyC@franz.stat.wisc.edu> (Debian Smail3.2.0.102)
	for <r-bugs@r-project.org>; Mon, 29 Jan 2001 23:39:42 -0600 (CST) 
Received: (from tov@localhost) by infiniti.ece.cmu.edu (AIX4.3/UCB 8.8.8/8.8.8) id AAA26672; Tue, 30 Jan 2001 00:39:42 -0500
X-Authentication-Warning: infiniti.ece.cmu.edu: tov set sender to tov@ece.cmu.edu using -f
Sender: tov@infiniti.ece.cmu.edu
To: r-bugs@r-project.org
Cc: Thomas Vogels <tov@ece.cmu.edu>
Subject: screen can't go back to (split) screen with log="y" plot
Reply-To: Thomas Vogels <tov@ece.cmu.edu>
X-URI: http://www.ece.cmu.edu/~tov
From: Thomas Vogels <tov@ece.cmu.edu>
User-Agent: Gnus/5.0807 (Gnus v5.8.7) Emacs/20.7
Date: 30 Jan 2001 00:39:41 -0500
Message-ID: <pxsnm1egyq.fsf@infiniti.ece.cmu.edu>
Lines: 76
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii


Hi.  Let's try to explain the subject line with some code:

> split.screen (c(2,1))
[1] 1 2
> screen(1)
> plot (1:2, 1:2, log="y", main="1")
> screen (2)
> plot (1:2, 1:2, main="2")
> screen (1)
Error in par(.split.screens[[n]]) : invalid value specified for graphics parameter "yaxp".
> close.screen(all=TRUE)

Let's add comments:

> split.screen (c(2,1))
[1] 1 2

OK, plot in the top half screen:
> screen(1)
> plot (1:2, 1:2, log="y", main="1")
> par("yaxp")
[1]  1  2 -5

OK, switch to bottom half:
> screen (2)
> plot (1:2, 1:2, main="2")
> par("yaxp")
[1] 1 2 5

OK, looks fine, let's go back up:
> screen (1)
Error in par(.split.screens[[n]]) : invalid value specified for graphics parameter "yaxp".

Bummer.
> close.screen(all=TRUE)

Somehow I'm hoping you'll tell me I'm doing something wrong, because
I'd really would like to be able to do the following:
  repeat {
    #calculate
    screen(1)
    #fancy plot
    screen (2)
    #even fancier plot ;-)
    if (user.bored()) break
  }
Which is roughly what I was doing when the error messages started
popping up.

Thanks,
  -tom

--please do not edit the information below--

Version:
 platform = i386-pc-linux-gnu
 arch = i386
 os = linux-gnu
 system = i386, linux-gnu
 status = 
 major = 1
 minor = 2.1
 year = 2001
 month = 01
 day = 15
 language = R

Search Path:
 .GlobalEnv, package:ctest, Autoloads, package:base



-- 
mailto:tov@ece.cmu.edu (Tom Vogels)   Tel: (412) 268-6638   FAX: -3204


==> 831.followup.1 <==
From ripley@stats.ox.ac.uk  Tue Jan 30 08:40:46 2001
Received: from toucan.stats.ox.ac.uk (toucan.stats.ox.ac.uk [163.1.20.20])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id IAA28901
	for <R-bugs@biostat.ku.dk>; Tue, 30 Jan 2001 08:40:46 +0100 (MET)
Received: from max144.public.ox.ac.uk (max144.public.ox.ac.uk [192.76.27.144])
	by toucan.stats.ox.ac.uk (8.9.0/8.9.0) with ESMTP id HAA21509;
	Tue, 30 Jan 2001 07:40:54 GMT
Date: Tue, 30 Jan 2001 07:39:25 +0000 (GMT)
From: Prof Brian D Ripley <ripley@stats.ox.ac.uk>
Sender: <ripley@auk.stats>
To: <tov@ece.cmu.edu>
cc: <R-bugs@biostat.ku.dk>
Subject: Re: [Rd] screen can't go back to log="y" plot (PR#831)
In-Reply-To: <200101300539.GAA28465@pubhealth.ku.dk>
Message-ID: <Pine.GSO.4.31.0101300725290.17104-100000@auk.stats>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII

[I have abbreviated the subject as jitterbug has been having probems
with long subjects.]

The issue here is that one cannot mix log/non-log axes in the calls to
screen(), as the appropriate par() parameter is read-only, but the
meaning of yaxp depends on it.  But beyond that you can't set
x/yaxp for log axes.

You should be able to do this: you can in the S original.

A simpler version:

plot (1:2, 1:2, log="y", main="1")
zz <- par("yaxp")
zz
[1]  1  2 -5
par(yaxp=zz)
Error in par(yaxp = zz) : invalid value specified for graphics parameter
"yaxp".

So you can't reset the yaxp parameter to what it is reported as!


Additional bug: the meaning of x/yaxp for log axes is not defined
in help(par).


On Tue, 30 Jan 2001 tov@ece.cmu.edu wrote:

>
> Hi.  Let's try to explain the subject line with some code:
>
> > split.screen (c(2,1))
> [1] 1 2
> > screen(1)
> > plot (1:2, 1:2, log="y", main="1")
> > screen (2)
> > plot (1:2, 1:2, main="2")
> > screen (1)
> Error in par(.split.screens[[n]]) : invalid value specified for graphics parameter "yaxp".
> > close.screen(all=TRUE)
>
> Let's add comments:
>
> > split.screen (c(2,1))
> [1] 1 2
>
> OK, plot in the top half screen:
> > screen(1)
> > plot (1:2, 1:2, log="y", main="1")
> > par("yaxp")
> [1]  1  2 -5
>
> OK, switch to bottom half:
> > screen (2)
> > plot (1:2, 1:2, main="2")
> > par("yaxp")
> [1] 1 2 5
>
> OK, looks fine, let's go back up:
> > screen (1)
> Error in par(.split.screens[[n]]) : invalid value specified for graphics parameter "yaxp".
>
> Bummer.
> > close.screen(all=TRUE)
>
> Somehow I'm hoping you'll tell me I'm doing something wrong, because
> I'd really would like to be able to do the following:
>   repeat {
>     #calculate
>     screen(1)
>     #fancy plot
>     screen (2)
>     #even fancier plot ;-)
>     if (user.bored()) break
>   }
> Which is roughly what I was doing when the error messages started
> popping up.
>
> Thanks,
>   -tom
>
> --please do not edit the information below--
>
> Version:
>  platform = i386-pc-linux-gnu
>  arch = i386
>  os = linux-gnu
>  system = i386, linux-gnu
>  status =
>  major = 1
>  minor = 2.1
>  year = 2001
>  month = 01
>  day = 15
>  language = R
>
> Search Path:
>  .GlobalEnv, package:ctest, Autoloads, package:base
>
>
>
> --
> mailto:tov@ece.cmu.edu (Tom Vogels)   Tel: (412) 268-6638   FAX: -3204
>
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


==> 831.followup.2 <==
From tov@ece.cmu.edu  Thu Feb  1 02:13:08 2001
Received: from infiniti.ece.cmu.edu (INFINITI.ECE.CMU.EDU [128.2.133.84])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id CAA25173
	for <R-bugs@biostat.ku.dk>; Thu, 1 Feb 2001 02:13:07 +0100 (MET)
Received: (from tov@localhost) by infiniti.ece.cmu.edu (AIX4.3/UCB 8.8.8/8.8.8) id UAA19026; Wed, 31 Jan 2001 20:12:41 -0500
X-Authentication-Warning: infiniti.ece.cmu.edu: tov set sender to tov@ece.cmu.edu using -f
Sender: tov@infiniti.ece.cmu.edu
To: Prof Brian D Ripley <ripley@stats.ox.ac.uk>
Cc: <R-bugs@biostat.ku.dk>
Subject: Re: [Rd] screen can't go back to log="y" plot (PR#831)
References: <Pine.GSO.4.31.0101300725290.17104-100000@auk.stats>
Reply-To: Thomas Vogels <tov@ece.cmu.edu>
X-URI: http://www.ece.cmu.edu/~tov
From: Thomas Vogels <tov@ece.cmu.edu>
Date: 31 Jan 2001 20:12:41 -0500
In-Reply-To: Prof Brian D Ripley's message of "Tue, 30 Jan 2001 07:39:25 +0000 (GMT)"
Message-ID: <px7l3bcik6.fsf@infiniti.ece.cmu.edu>
Lines: 81
User-Agent: Gnus/5.0807 (Gnus v5.8.7) Emacs/20.7
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii


Prof Brian D Ripley <ripley@stats.ox.ac.uk> writes:

> [I have abbreviated the subject as jitterbug has been having probems
> with long subjects.]
> 
> The issue here is that one cannot mix log/non-log axes in the calls to
> screen(), as the appropriate par() parameter is read-only, but the
> meaning of yaxp depends on it.  But beyond that you can't set
> x/yaxp for log axes.
> 
> You should be able to do this: you can in the S original.
> 
> A simpler version:
> 
> plot (1:2, 1:2, log="y", main="1")
> zz <- par("yaxp")
> zz
> [1]  1  2 -5
> par(yaxp=zz)
> Error in par(yaxp = zz) : invalid value specified for graphics parameter
> "yaxp".
> 
> So you can't reset the yaxp parameter to what it is reported as!
[snip]

The code in main/par.c ignores the value of xlog (or ylog) when
setting xaxp (or yaxp).  Right now you have in Specify (and Specify2):

... else if (streql(what, "xaxp")) {
	value = coerceVector(value, REALSXP);
	lengthCheck(what, value, 3);
	naRealCheck(REAL(value)[0], what);
	naRealCheck(REAL(value)[1], what);
        posIntCheck((int) (REAL(value)[2]), what);

Shouldn't that be something like:

... else if (streql(what, "xaxp")) {
	value = coerceVector(value, REALSXP);
	lengthCheck(what, value, 3);
	naRealCheck(REAL(value)[0], what);
	naRealCheck(REAL(value)[1], what);
        if (dd->gp.xlog)
            logAxpCheck((int) (REAL(value)[2]), what);
        else
            posIntCheck((int) (REAL(value)[2]), what);

Where logAxpCheck is suitably defined as:

static void logAxpCheck(int x, char *s)
{
    if (x == NA_INTEGER || x == 0 || x > 4)
	par_error(s);
}

since only values < 0 or the values 1, 2, 3 are allowed?


> Additional bug: the meaning of x/yaxp for log axes is not defined
> in help(par).

excerpt from help(par):

    xaxp: A vector of the form `c(x1, x2, n)' giving the coordinates
          of the extreme tick marks and the number of intervals
          between tick-marks.

Could you add:

          The value of n must be positive for linear scale axes.  For
          logarithmic scale axes n must be either negative (then there
          will be (1-n) ticks at a linear distance) or one of 1, 2, or
          3 where n then indicates the number of ticks per decade.

similar for yaxp?  What am I missing?
Regards,
  -tom

-- 
mailto:tov@ece.cmu.edu (Tom Vogels)   Tel: (412) 268-6638   FAX: -3204

==> 831.audit <==
Wed Feb  7 08:51:14 2001	ripley	moved from incoming to Graphics
Thu Apr 26 12:13:40 2001	pd	changed notes
Thu Apr 26 12:13:40 2001	pd	foobar
Thu Jun  7 19:13:15 2001	thomas	changed notes
Thu Jun  7 19:13:15 2001	thomas	foobar
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
* PR# 837 *
Subject: screen doesn't handle redrawing properly
From: Thomas Vogels <tov@ece.cmu.edu>
Date: 01 Feb 2001 14:20:52 -0500
-- no notes --
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 837 <==
From tov@ece.cmu.edu  Thu Feb  1 20:20:40 2001
Received: from infiniti.ece.cmu.edu (INFINITI.ECE.CMU.EDU [128.2.133.84])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id UAA08721
	for <r-bugs@biostat.ku.dk>; Thu, 1 Feb 2001 20:20:39 +0100 (MET)
Received: (from tov@localhost) by infiniti.ece.cmu.edu (AIX4.3/UCB 8.8.8/8.8.8) id OAA30464; Thu, 1 Feb 2001 14:20:52 -0500
X-Authentication-Warning: infiniti.ece.cmu.edu: tov set sender to tov@ece.cmu.edu using -f
Sender: tov@infiniti.ece.cmu.edu
To: r-bugs@biostat.ku.dk
Cc: Thomas Vogels <tov@ece.cmu.edu>
Subject: screen doesn't handle redrawing properly
Reply-To: Thomas Vogels <tov@ece.cmu.edu>
X-URI: http://www.ece.cmu.edu/~tov
From: Thomas Vogels <tov@ece.cmu.edu>
Date: 01 Feb 2001 14:20:52 -0500
Message-ID: <pxitmub46j.fsf@infiniti.ece.cmu.edu>
Lines: 74
User-Agent: Gnus/5.0807 (Gnus v5.8.7) Emacs/20.7
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii


Hi.  As far as I understand it, there is a list of graphic primitives
stored for a device.  So for example, when I iconify/deiconify an X11
window, the plot will be redrawn.  Now screen (split.screen and
friends) appear not to handle this list properly, the list is reset or
not reset at odd times.  The commands below will show clearly what I
mean.  There are two effects:

  - After splitting the device real estate into two screens, I can
    plot on these screens, alternating between them.  When I then
    touch the window to force a redraw, *all* the plots are redrawn,
    not just the last (and visible) ones.
    [This happens when the X server runs on AIX, R runs on AIX or Sun.]

  - Again, after splitting, plotting on one screen can affect the
    other screen.  I.e. plot(...); plot (...) on the left screen can
    erase the *right* screen.
    [This happens for all platforms I have access to, AIX, Linux, Sun.]

The first effect may be due to a bad interaction with the X server,
but the second effect is surely not desirable, is it?  Am I mis-using
'screen' here?

R> split.screen (c(1,2))
[1] 1 2
R> # Draw 10000 points to make the effect obvious
R> screen (1)
R> plot (1:10000, 1:10000, main="1")
R> screen (2)
R> plot (1:10000, 1:10000, main="2")
R> # Ok, go back to screen 1, draw plots 3 and 4
R> screen (1)
R> plot (1:10000, 10000:1, main="3")
R> screen (2)
R> plot (1:10000, 10000:1, main="4")
R> 
R> ########################################
R> # NOW lower/raise window, do something to force device to redraw itself.
R> # You'll see again plot 1 (!), 2 (!), 3, and 4.  Why 1 and 2?
R> ########################################
R> 
R> # Here's how to erase screen 2 from screen 1 (!)
R> screen (1)
R> plot (1:10, 1:10, main="3a")
R> ########################################
R> # The following plot will erase screen 2
R> ########################################
R> plot (1:10, 1:10, main="3b")
R> 
R> # The good news is that this resets the list of graphic ops:
R> screen (2)
R> plot (1:10, 1:10, main="4")
R> # Now if you touch the window, you'll see only plot 3b and 4.

Regards,
  -tom

R> R.version
         _                   
platform sparc-sun-solaris2.7
arch     sparc               
os       solaris2.7          
system   sparc, solaris2.7   
status   Patched             
major    1                   
minor    2.1                 
year     2001                
month    01                  
day      31                  
language R                   

-- 
mailto:tov@ece.cmu.edu (Tom Vogels)   Tel: (412) 268-6638   FAX: -3204


==> 837.audit <==
Wed Feb  7 08:51:14 2001	ripley	moved from incoming to Graphics
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
* PR# 887 *
Subject: axis(adj=anything) has no effect
From: jhallman@frb.gov
Date: Wed, 28 Mar 2001 20:51:05 +0200 (MET DST)
-- no notes --
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 887 <==
From jhallman@frb.gov  Wed Mar 28 20:51:06 2001
Received: from blueberry.kubism.ku.dk (blueberry [130.225.108.193])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id UAA23265
	for <R-bugs@biostat.ku.dk>; Wed, 28 Mar 2001 20:51:05 +0200 (MET DST)
Date: Wed, 28 Mar 2001 20:51:05 +0200 (MET DST)
From: jhallman@frb.gov
Message-Id: <200103281851.UAA23265@pubhealth.ku.dk>
To: R-bugs@biostat.ku.dk
Subject: axis(adj=anything) has no effect

Full_Name: Jeff Hallman
Version: 1.2.2
OS: SunOS5.6
Submission from: (NULL) (132.200.32.33)


Giving an adj argument to axis() seems to have no effect.  In Splus, adj = 0 
left-justifies the labels under the ticks, adj = 1 right justifies them, and 
numbers in between can also be used.  I like to use adj = 0.9 to get something
that looks like this:

-----------+-----------+-----------+------------+---------
        1980        1981        1982         1983

as an axis for a plot of monthly time series data.



==> 887.audit <==
Sat Apr  7 10:29:17 2001	ripley	moved from incoming to Graphics

==> 887.followup.1 <==
From paul@stat.auckland.ac.nz  Tue Jun 19 06:05:35 2001
Received: from mailhost.auckland.ac.nz (mailhost.auckland.ac.nz [130.216.191.4] (may be forged))
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id GAA16140
	for <R-bugs@biostat.ku.dk>; Tue, 19 Jun 2001 06:05:33 +0200 (MET DST)
Received: from stat1.stat.auckland.ac.nz (stat1.stat.auckland.ac.nz [130.216.93.1])
	by mailhost.auckland.ac.nz (8.9.2/8.9.2/8.9.2-ua) with ESMTP id QAA00412;
	Tue, 19 Jun 2001 16:05:26 +1200 (NZST)
Received: from murrell (murrell.stat.auckland.ac.nz [130.216.93.23])
	by stat1.stat.auckland.ac.nz (8.9.3+Sun/8.8.8) with SMTP id QAA24826;
	Tue, 19 Jun 2001 16:05:25 +1200 (NZST)
Message-ID: <020401c0f877$becbd540$175dd882@stat.auckland.ac.nz>
From: "Paul Murrell" <paul@stat.auckland.ac.nz>
To: <r-core@r-project.org>
Cc: <R-bugs@biostat.ku.dk>
Subject: Re: axis(adj=anything) has no effect (PR#887)
Date: Tue, 19 Jun 2001 16:24:35 +1200
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 5.50.4522.1200
X-MimeOLE: Produced By Microsoft MimeOLE V5.50.4522.1200

Hi

----Bug summary:----
Giving an adj argument to axis() seems to have no effect.  In Splus, adj = 0
left-justifies the labels under the ticks, adj = 1 right justifies them, and
numbers in between can also be used.  I like to use adj = 0.9 to get
something
that looks like this:

-----------+-----------+-----------+------------+---------
        1980        1981        1982         1983

as an axis for a plot of monthly time series data.
----Bug summary:----


Are missing features bugs or wish-list items ?

Paul


~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
* PR# 916 *
Subject:  par(mgp) bug 
From: paul@stat.auckland.ac.nz
Date: Fri, 20 Apr 2001 08:33:45 +1200 (NZST)
-- no notes --
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 916 <==
From postmaster@franz.stat.wisc.edu  Thu Apr 19 22:33:54 2001
Received: from franz.stat.wisc.edu (root@franz.stat.wisc.edu [128.105.174.95])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id WAA02208
	for <r-bugs@biostat.ku.dk>; Thu, 19 Apr 2001 22:33:53 +0200 (MET DST)
Received: from mailhost.auckland.ac.nz (really [130.216.1.4]) by franz.stat.wisc.edu
	via smail with esmtp
	id <m14qL7p-000J8eC@franz.stat.wisc.edu> (Debian Smail3.2.0.111)
	for <r-bugs@r-project.org>; Thu, 19 Apr 2001 15:34:01 -0500 (CDT) 
Received: from stat1.stat.auckland.ac.nz (stat1.stat.auckland.ac.nz [130.216.93.1])
	by mailhost.auckland.ac.nz (8.9.2/8.9.2/8.9.2-ua) with ESMTP id IAA16455
	for <r-bugs@r-project.org>; Fri, 20 Apr 2001 08:33:45 +1200 (NZST)
Received: (from paul@localhost)
	by stat1.stat.auckland.ac.nz (8.9.3+Sun/8.8.8) id IAA18528;
	Fri, 20 Apr 2001 08:33:45 +1200 (NZST)
Date: Fri, 20 Apr 2001 08:33:45 +1200 (NZST)
Message-Id: <200104192033.IAA18528@stat1.stat.auckland.ac.nz>
From: paul@stat.auckland.ac.nz
To: r-bugs@r-project.org
Cc: paul@stat1.stat.auckland.ac.nz
Subject:  par(mgp) bug 

Hi

The behaviour of the third argument of par(mgp), which controls the
placement of the axis ticks, is not working.  

In the following example, the plots should NOT be
identical; the axis ticks plus the axis major line should be drawn one
line out from the edges of the plot region.

par(mfrow=c(2,1))
plot(1:10)
par(mgp=c(3,1,1))
plot(1:10)

Paul

<<insert bug report here>>



--please do not edit the information below--

Version:
 platform = sparc-sun-solaris2.7
 arch = sparc
 os = solaris2.7
 system = sparc, solaris2.7
 status = Under development (unstable)
 major = 1
 minor = 3.0
 year = 2001
 month = 02
 day = 18
 language = R

Search Path:
 .GlobalEnv, package:ctest, Autoloads, package:base

==> 916.audit <==
Sat Apr 21 12:59:42 2001	ripley	moved from incoming to Graphics

==> 916.followup.1 <==
From paul@stat.auckland.ac.nz  Tue Jun 19 03:36:11 2001
Received: from mailhost.auckland.ac.nz (mailhost.auckland.ac.nz [130.216.191.4] (may be forged))
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id DAA15904
	for <R-bugs@biostat.ku.dk>; Tue, 19 Jun 2001 03:36:08 +0200 (MET DST)
Received: from stat1.stat.auckland.ac.nz (stat1.stat.auckland.ac.nz [130.216.93.1])
	by mailhost.auckland.ac.nz (8.9.2/8.9.2/8.9.2-ua) with ESMTP id NAA25485;
	Tue, 19 Jun 2001 13:36:01 +1200 (NZST)
Received: from murrell (murrell.stat.auckland.ac.nz [130.216.93.23])
	by stat1.stat.auckland.ac.nz (8.9.3+Sun/8.8.8) with SMTP id NAA21072;
	Tue, 19 Jun 2001 13:36:00 +1200 (NZST)
Message-ID: <012601c0f862$df47ec10$175dd882@stat.auckland.ac.nz>
From: "Paul Murrell" <paul@stat.auckland.ac.nz>
To: <r-core@r-project.org>
Cc: <R-bugs@biostat.ku.dk>
References: <200104192033.WAA02218@pubhealth.ku.dk>
Subject: Re: [Rd] par(mgp) bug (PR#916)
Date: Tue, 19 Jun 2001 13:55:09 +1200
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 5.50.4522.1200
X-MimeOLE: Produced By Microsoft MimeOLE V5.50.4522.1200

Hi


> The behaviour of the third argument of par(mgp), which controls the
> placement of the axis ticks, is not working.
>
> In the following example, the plots should NOT be
> identical; the axis ticks plus the axis major line should be drawn one
> line out from the edges of the plot region.
>
> par(mfrow=c(2,1))
> plot(1:10)
> par(mgp=c(3,1,1))
> plot(1:10)


This is more of an incompatibility-with-S rather than a bug.  In R,
axis(pos=) overrides axis(line=) which overrides par(mgp=).  It is possible
to get axis to respond to par(mgp=), but this is NOT the default behaviour.
For example,

par(mgp=c(3, 1, 1))
plot(1:10, axes=F)
box()
axis(1, line=NA)
axis(2)

In S, par(mgp=) specifies locations RELATIVE TO axis(line=), which can be
overridden by axis(pos=).

So the options are:
(i) become compatible NOW (for 1.3)
(ii) become compatible later
(iii) remain incompatible

I think we should do (i), especially because the default behaviour, which I
think would cover 99.999% of user code, would NOT change.

This is your chance to disagree ...

Paul



~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
* PR# 940 *
Subject: GCircle(): fails for non-clippable devices under certain circumstances (see below)
From: "Thomas Hoffmann" <thoffman@zappa.sax.de>
Date: Tue, 15 May 01 23:34:17 +0100
-- no notes --
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 940 <==
From postmaster@franz.stat.wisc.edu  Tue May 15 23:36:36 2001
Received: from franz.stat.wisc.edu (root@franz.stat.wisc.edu [128.105.174.95])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id XAA19114
	for <r-bugs@biostat.ku.dk>; Tue, 15 May 2001 23:36:35 +0200 (MET DST)
Received: from sax.sax.de (really [193.175.26.33]) by franz.stat.wisc.edu
	via smail with esmtp
	id <m14zmUW-000JGWC@franz.stat.wisc.edu> (Debian Smail3.2.0.111)
	for <r-bugs@r-project.org>; Tue, 15 May 2001 16:36:28 -0500 (CDT) 
Received: (from uucp@localhost)
	by sax.sax.de (8.9.3/8.9.3) with UUCP id XAA02964
	for r-bugs@r-project.org; Tue, 15 May 2001 23:36:22 +0200 (CEST)
Received:  by zappa.sax.de (UUPC/extended 1.13f);
           Tue, 15 May 2001 23:34:19 +0100
From: "Thomas Hoffmann" <thoffman@zappa.sax.de>
To: "r-bugs@r-project.org" <r-bugs@r-project.org>
Date: Tue, 15 May 01 23:34:17 +0100
Reply-To: "Thomas Hoffmann" <thoffman@zappa.sax.de>
Priority: Normal
X-Mailer: PMMail 1.9 For OS/2 UNREGISTERED SHAREWARE
X-Mailer-Gate: PMMail<->UUPC/extended Gateway v1.01
MIME-Version: 1.0
Content-Type: text/plain; charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
Subject: GCircle(): fails for non-clippable devices under certain circumstances (see below)
Message-ID: <3b01aeeb.thoffman.zappa@zappa.sax.de>

The following code snippet from graphics.c: GCircle() (around line 3100) fails for devices which 
can not clip (dd->dp.canClip==0) and try to plot a circle that does not fit into the plot region, but
fits into the device region, see inserted comments:

....
    result = clipCircleCode(x, y, coords, ir, dd);
// result>0, because circle does not fit into plot region (for dd->gp.xpd=0)

    switch (result) {
    case -2: /* No clipping;  draw all of circle */
        dd->dp.circle(x, y, coords, ir, bg, fg, dd);
        break;
    case -1: /* Total clipping; draw nothing */
        break;
    default: /* Partial clipping; draw poly[line|gon] */
// we proceed here:
        dd->gp.xpd = 2;
// check clipping for the device region:
        result = clipCircleCode(x, y, coords, ir, dd);
// ...if it fits, result=-2: ouch, we have thrown away the result from the 1st check!
        dd->gp.xpd = xpdsaved;
        if (dd->dp.canClip && result == -2) {
// ...but it does not matter if we can clip!
            GClip(dd);
            dd->dp.circle(x, y, coords, ir, bg, fg, dd);
        }
        else {
//...BUT if we can not clip, then we call for trouble:
            vmax = vmaxget();$

....
    default: /* Partial clipping; draw poly[line|gon] */
      if (dd->dp.canClip) {
	dd->gp.xpd = 2;
	result = clipCircleCode(x, y, coords, ir, dd);
	dd->gp.xpd = xpdsaved;
	if (result == -2) {
	    GClip(dd);
	    dd->dp.circle(x, y, coords, ir, bg, fg, dd);
	    break;
	}
      }
      vmax = vmaxget();
      xc = (double*)R_alloc(result+1, sizeof(double));
      yc = (double*)R_alloc(result+1, sizeof(double));
      GConvert(&x, &y, coords, DEVICE, dd);
      convertCircle(x, y, ir, result, xc, yc, dd);
      if (bg == NA_INTEGER) {
	dd->gp.col = fg;
	GPolyline(result+1, xc, yc, DEVICE, dd);
      }
      else {
	int npts;
	double *xcc, *ycc;
	xcc = ycc = 0;	/* -Wall */
	npts = GClipPolygon(xc, yc, result, DEVICE, 0, xcc, ycc, dd);
	if (npts > 1) {
	  xcc = (double*)R_alloc(npts, sizeof(double));
	  ycc = (double*)R_alloc(npts, sizeof(double));
	  npts = GClipPolygon(xc, yc, result, DEVICE, 1,
			      xcc, ycc, dd);
	  dd->dp.polygon(npts, xcc, ycc, DEVICE, bg, fg, dd);
	}
      }
      vmaxset(vmax);
    }
}


This works at least in my test case at

> version
         _
platform i386-pc-os2_emx
arch     i386
os       os2_emx
system   i386, os2_emx
status
major    1
minor    2.2
year     2001
month    02
day      26
language R


Thomas Hoffmann.


==> 940.audit <==
Mon May 21 08:54:07 2001	ripley	moved from incoming to Graphics
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
* PR# 943 *
Subject: legend() with xpd=T; omission of initial plot character
From: John Maindonald <john.maindonald@anu.edu.au>
Date: Sun, 20 May 2001 10:35:16 +1000
-- no notes --
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 943 <==
From postmaster@franz.stat.wisc.edu  Sun May 20 02:32:40 2001
Received: from franz.stat.wisc.edu (franz.stat.wisc.edu [128.105.174.95])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id CAA02494
	for <r-bugs@biostat.ku.dk>; Sun, 20 May 2001 02:32:39 +0200 (MET DST)
Received: from mail.anu.edu.au (really [150.203.2.7]) by franz.stat.wisc.edu
	via smail with esmtp
	id <m151H95-000JH8C@franz.stat.wisc.edu> (Debian Smail3.2.0.111)
	for <r-bugs@r-project.org>; Sat, 19 May 2001 19:32:31 -0500 (CDT) 
Received: from anugpo.anu.edu.au (anugpo.anu.edu.au [150.203.2.6])
	by mail.anu.edu.au (8.9.3/8.9.3) with ESMTP id KAA18515
	for <r-bugs@r-project.org>; Sun, 20 May 2001 10:32:27 +1000 (EST)
Received: from soda.anu.edu.au (soda.anu.edu.au [150.203.33.17])
	by anugpo.anu.edu.au (8.9.3+Sun/8.9.3) with ESMTP id KAA22405
	for <r-bugs@r-project.org>; Sun, 20 May 2001 10:32:27 +1000 (EST)
Message-Id: <5.0.2.1.1.20010520103337.00ac8b10@pophost.anu.edu.au>
X-Sender: u9801539@pophost.anu.edu.au (Unverified)
X-Mailer: QUALCOMM Windows Eudora Version 5.0.2
Date: Sun, 20 May 2001 10:35:16 +1000
To: r-bugs@r-project.org
From: John Maindonald <john.maindonald@anu.edu.au>
Subject: legend() with xpd=T; omission of initial plot character
Mime-Version: 1.0
Content-Type: text/plain; charset="us-ascii"; format=flowed


In the following:

plot(0:1, 0:1)
legend(x=0, y=1.2, pch=c(1,2), legend=c("May","June"))

the first plot character is omitted when plotting to
the screen.

I obtained the same behaviour when placing a legend
in the margin following use of pairs()

-please do not edit the information below--

Version:
  platform = i386-pc-mingw32
  arch = x86
  os = Win32
  system = x86, Win32
  status =
  major = 1
  minor = 2.3
  year = 2001
  month = 04
  day = 26
  language = R

Windows 98 SE 4.10 (build 2222)  A

Search Path:
  .GlobalEnv, package:ctest, Autoloads, package:base
John Maindonald               email : john.maindonald@anu.edu.au
Statistical Consulting Unit,  phone : (6125)3998
c/o CMA, SMS,                 fax   : (6125)5549
John Dedman Mathematical Sciences Building
Australian National University
Canberra ACT 0200
Australia


==> 943.reply.1 <==
From: paul@stat.auckland.ac.nz
To: r-core@r-project.org
Subject: Re: legend() with xpd=T; omission of initial plot character (PR#943)
Date: Tue Jun 19 05:58:40 2001
CC: r-bugs@r-project.org; john.maindonald@anu.edu.au

Hi

Bug summary:----
par(xpd=T)
plot(0:1, 0:1)
legend(x=0, y=1.2, pch=c(1,2), legend=c("May","June"))

the first plot character is omitted when plotting to
the screen.
Bug summary:----

I cannot reproduce this bug, BUT it did show up a bug in rect() -- in the
example above, the border around the legend is not drawn.

This is because rect() ignores par(xpd).  The default is rect(xpd=FALSE).  This
is at odds with text(xpd=NULL) and polygon(xpd=NULL) which use par(xpd) by
default.  arrows(xpd=FALSE) has the same problem as rect().  

I propose modifying rect() and arrows() to use par(xpd) by default like text()
and polygon().  There will, as usual, be a small risk that someone's code will
produce different output after this change, but this risk should be pretty
small.

Any objections ... ?

Paul

==> 943.followup.1 <==
From postmaster@franz.stat.wisc.edu  Tue Jun 19 05:56:22 2001
Received: from franz.stat.wisc.edu (root@franz.stat.wisc.edu [128.105.174.95])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id FAA16092
	for <r-bugs@biostat.ku.dk>; Tue, 19 Jun 2001 05:56:21 +0200 (MET DST)
Received: from pubhealth.ku.dk (really [130.225.108.10]) by franz.stat.wisc.edu
	via smail with esmtp
	id <m15CCch-000JGhC@franz.stat.wisc.edu> (Debian Smail3.2.0.111)
	for <r-bugs@r-project.org>; Mon, 18 Jun 2001 22:56:15 -0500 (CDT) 
Received: from blueberry.kubism.ku.dk (blueberry [130.225.108.193])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id FAA16087;
	Tue, 19 Jun 2001 05:55:27 +0200 (MET DST)
From: paul@stat.auckland.ac.nz
Received: from blueberry.kubism.ku.dk (blueberry.kubism.ku.dk [130.225.108.193])
	by blueberry.kubism.ku.dk (8.9.3/8.9.3) with ESMTP id FAA32381;
	Tue, 19 Jun 2001 05:58:35 +0200
Date: Tue, 19 Jun 2001 05:58:35 +0200
Message-Id: <200106190358.FAA32381@blueberry.kubism.ku.dk>
To: r-core@r-project.org
Subject: Re: legend() with xpd=T; omission of initial plot character (PR#943)
CC: r-bugs@r-project.org;john.maindonald@anu.edu.au;;;
X-Loop: R-bugs@biostat.ku.dk

Hi

Bug summary:----
par(xpd=T)
plot(0:1, 0:1)
legend(x=0, y=1.2, pch=c(1,2), legend=c("May","June"))

the first plot character is omitted when plotting to
the screen.
Bug summary:----

I cannot reproduce this bug, BUT it did show up a bug in rect() -- in the
example above, the border around the legend is not drawn.

This is because rect() ignores par(xpd).  The default is rect(xpd=FALSE).  This
is at odds with text(xpd=NULL) and polygon(xpd=NULL) which use par(xpd) by
default.  arrows(xpd=FALSE) has the same problem as rect().  

I propose modifying rect() and arrows() to use par(xpd) by default like text()
and polygon().  There will, as usual, be a small risk that someone's code will
produce different output after this change, but this risk should be pretty
small.

Any objections ... ?

Paul


==> 943.reply.2 <==
From postmaster@franz.stat.wisc.edu  Tue Jun 19 08:43:07 2001
Received: from franz.stat.wisc.edu (root@franz.stat.wisc.edu [128.105.174.95])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id IAA16819
	for <r-bugs@biostat.ku.dk>; Tue, 19 Jun 2001 08:43:07 +0200 (MET DST)
Received: from stat.math.ethz.ch (really [129.132.58.23]) by franz.stat.wisc.edu
	via smail with esmtp (ident daemon using rfc1413)
	id <m15CFDy-000JJWC@franz.stat.wisc.edu> (Debian Smail3.2.0.111)
	for <r-bugs@r-project.org>; Tue, 19 Jun 2001 01:42:54 -0500 (CDT) 
Received: (from daemon@localhost)
	by stat.math.ethz.ch (8.9.1/8.9.1) id IAA02705;
	Tue, 19 Jun 2001 08:42:52 +0200 (MET DST)
Received: from lynne(129.132.58.30), claiming to be "lynne.ethz.ch"
 via SMTP by hypatia, id smtpdAAAa000eE; Tue Jun 19 08:42:50 2001
Received: (maechler@localhost) by lynne.ethz.ch (8.9.3/D-MATH-client) id IAA08111; Tue, 19 Jun 2001 08:42:50 +0200
X-Authentication-Warning: lynne.ethz.ch: maechler set sender to maechler@stat.math.ethz.ch using -f
From: Martin Maechler <maechler@stat.math.ethz.ch>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
Message-ID: <15150.62570.490993.741070@gargle.gargle.HOWL>
Date: Tue, 19 Jun 2001 08:42:50 +0200
To: paul@stat.auckland.ac.nz
Cc: r-bugs@r-project.org, john.maindonald@anu.edu.au
Subject: Re: legend() with xpd=T; omission of initial plot character (PR#943)
In-Reply-To: <200106190358.FAA32381@blueberry.kubism.ku.dk>
References: <200106190358.FAA32381@blueberry.kubism.ku.dk>
X-Mailer: VM 6.92 under Emacs 20.7.1
Reply-To: Martin Maechler <maechler@stat.math.ethz.ch>

>>>>> "Paul" == Paul Murrell <paul@stat.auckland.ac.nz> writes:

    Paul> Hi
    Paul> Bug summary:----
    Paul> par(xpd=T)
    Paul> plot(0:1, 0:1)
    Paul> legend(x=0, y=1.2, pch=c(1,2), legend=c("May","June"))

    Paul> the first plot character is omitted when plotting to
    Paul> the screen.
    Paul> Bug summary:----

    Paul> I cannot reproduce this bug, BUT it did show up a bug in rect()
    Paul> -- in the example above, the border around the legend is not
    Paul> drawn.

Coincidence, I *did* look at that bug only yesterday.
My experience:
   I *could* reproduce the bug {X11(), Linux-386}, but only a few times. 
   Then, it didn't show anymore. Even restarting R wouldn't show it again.
   My ``explanation'' was that it might be (a bug) inside X11 / Window manager
   handling of things... ??


    Paul> This is because rect() ignores par(xpd).  The default is
    Paul> rect(xpd=FALSE).  This is at odds with text(xpd=NULL) and
    Paul> polygon(xpd=NULL) which use par(xpd) by default.
    Paul> arrows(xpd=FALSE) has the same problem as rect().

    Paul> I propose modifying rect() and arrows() to use par(xpd) by
    Paul> default like text() and polygon().  There will, as usual, be a
    Paul> small risk that someone's code will produce different output
    Paul> after this change, but this risk should be pretty small.

    Paul> Any objections ... ?

not at all, but please fix  abline(*) at the same time.
It doesn't obey xpd either (PR#750).

Martin

==> 943.reply.3 <==
From: paul murrell <R-bugs@biostat.ku.dk>
To: paul@stat.auckland.ac.nz
Subject: Re: legend() with xpd=T; omission of initial plot character (PR#943)
Date: Tue Jul 17 04:28:44 2001
CC: John Maindonald <john.maindonald@anu.edu.au>

Hi


> Bug summary:----
> par(xpd=T)
> plot(0:1, 0:1)
> legend(x=0, y=1.2, pch=c(1,2), legend=c("May","June"))
> 
> the first plot character is omitted when plotting to
> the screen.
> Bug summary:----
> 
> I cannot reproduce this bug, BUT it did show up a bug in rect() -- in the
> example above, the border around the legend is not drawn.


Still can't reproduce original bug, so no progress there.


> This is because rect() ignores par(xpd).  The default is rect(xpd=FALSE). 
This
> is at odds with text(xpd=NULL) and polygon(xpd=NULL) which use par(xpd) by
> default.  arrows(xpd=FALSE) has the same problem as rect().  
> 
> I propose modifying rect() and arrows() to use par(xpd) by default like
text()
> and polygon().  There will, as usual, be a small risk that someone's code
will
> produce different output after this change, but this risk should be pretty
> small.


Both of these changes made now (for 1.3.1).  
The following code should demonstrate the bugs (in pre-1.3.1 R) and the fixes:

par(mfrow=c(2,1), xpd=FALSE)
plot(1:10)
plot(1:10)
# rect() and arrow() ignored par(xpd=)
rect(1, 9, 2, 20, col="red")
arrows(1.5, 20, 1.5, 10)
par(xpd=TRUE)
rect(3, 9, 4, 20, col="blue")
arrows(3.5, 20, 3.5, 10)
par(xpd=NA)
rect(5, 9, 6, 20, col="green")
arrows(5.5, 20, 5.5, 10)

Paul


==> 943.audit <==
Mon May 21 08:54:07 2001	ripley	moved from incoming to Graphics
Tue Jun 19 05:58:40 2001	paul	sent reply 1
Tue Jul 17 04:28:44 2001	paul	sent reply 3

==> 943.followup.2 <==
From MAILER-DAEMON  Tue Jul 17 04:21:22 2001
Received: from blueberry.kubism.ku.dk (blueberry [130.225.108.193])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id EAA16216
	for <R-bugs@biostat.ku.dk>; Tue, 17 Jul 2001 04:21:21 +0200 (MET DST)
Received: from localhost (localhost)
	by blueberry.kubism.ku.dk (8.9.3/8.9.3) with internal id EAA21901;
	Tue, 17 Jul 2001 04:28:45 +0200
Date: Tue, 17 Jul 2001 04:28:45 +0200
From: Mail Delivery Subsystem <MAILER-DAEMON@pubhealth.ku.dk>
Message-Id: <200107170228.EAA21901@blueberry.kubism.ku.dk>
To: <R-bugs@biostat.ku.dk>
MIME-Version: 1.0
Content-Type: multipart/report; report-type=delivery-status;
	boundary="EAA21901.995336925/blueberry.kubism.ku.dk"
Subject: Returned mail: User unknown
Auto-Submitted: auto-generated (failure)

This is a MIME-encapsulated message

--EAA21901.995336925/blueberry.kubism.ku.dk

The original message was received at Tue, 17 Jul 2001 04:28:44 +0200
from blueberry.kubism.ku.dk [130.225.108.193]

   ----- The following addresses had permanent fatal errors -----
<John>
    (expanded from: <John>)
<Maindonald>
    (expanded from: <Maindonald>)

   ----- Transcript of session follows -----
... while talking to mail.kubism.ku.dk.:
>>> RCPT To:<maindonald@mail.kubism.ku.dk>
<<< 550 <maindonald@mail.kubism.ku.dk>... User unknown
550 <Maindonald>... User unknown
>>> RCPT To:<john@mail.kubism.ku.dk>
<<< 550 <john@mail.kubism.ku.dk>... User unknown
550 <John>... User unknown

--EAA21901.995336925/blueberry.kubism.ku.dk
Content-Type: message/delivery-status

Reporting-MTA: dns; blueberry.kubism.ku.dk
Received-From-MTA: DNS; blueberry.kubism.ku.dk
Arrival-Date: Tue, 17 Jul 2001 04:28:44 +0200

Final-Recipient: RFC822; john@blueberry.kubism.ku.dk
X-Actual-Recipient: RFC822; john@mail.kubism.ku.dk
Action: failed
Status: 5.1.1
Remote-MTA: DNS; mail.kubism.ku.dk
Diagnostic-Code: SMTP; 550 <john@mail.kubism.ku.dk>... User unknown
Last-Attempt-Date: Tue, 17 Jul 2001 04:28:44 +0200

Final-Recipient: RFC822; maindonald@blueberry.kubism.ku.dk
X-Actual-Recipient: RFC822; maindonald@mail.kubism.ku.dk
Action: failed
Status: 5.1.1
Remote-MTA: DNS; mail.kubism.ku.dk
Diagnostic-Code: SMTP; 550 <maindonald@mail.kubism.ku.dk>... User unknown
Last-Attempt-Date: Tue, 17 Jul 2001 04:28:44 +0200

--EAA21901.995336925/blueberry.kubism.ku.dk
Content-Type: message/rfc822

Return-Path: <R-bugs@biostat.ku.dk>
Received: from blueberry.kubism.ku.dk (blueberry.kubism.ku.dk [130.225.108.193])
	by blueberry.kubism.ku.dk (8.9.3/8.9.3) with ESMTP id EAA21899;
	Tue, 17 Jul 2001 04:28:44 +0200
Date: Tue, 17 Jul 2001 04:28:44 +0200
Message-Id: <200107170228.EAA21899@blueberry.kubism.ku.dk>
From: paul murrell <R-bugs@biostat.ku.dk>
To: paul@stat.auckland.ac.nz
Subject: Re: legend() with xpd=T; omission of initial plot character (PR#943)
CC: John Maindonald <john.maindonald@anu.edu.au>
X-Loop: R-bugs@biostat.ku.dk

Hi


> Bug summary:----
> par(xpd=T)
> plot(0:1, 0:1)
> legend(x=0, y=1.2, pch=c(1,2), legend=c("May","June"))
> 
> the first plot character is omitted when plotting to
> the screen.
> Bug summary:----
> 
> I cannot reproduce this bug, BUT it did show up a bug in rect() -- in the
> example above, the border around the legend is not drawn.


Still can't reproduce original bug, so no progress there.


> This is because rect() ignores par(xpd).  The default is rect(xpd=FALSE). 
This
> is at odds with text(xpd=NULL) and polygon(xpd=NULL) which use par(xpd) by
> default.  arrows(xpd=FALSE) has the same problem as rect().  
> 
> I propose modifying rect() and arrows() to use par(xpd) by default like
text()
> and polygon().  There will, as usual, be a small risk that someone's code
will
> produce different output after this change, but this risk should be pretty
> small.


Both of these changes made now (for 1.3.1).  
The following code should demonstrate the bugs (in pre-1.3.1 R) and the fixes:

par(mfrow=c(2,1), xpd=FALSE)
plot(1:10)
plot(1:10)
# rect() and arrow() ignored par(xpd=)
rect(1, 9, 2, 20, col="red")
arrows(1.5, 20, 1.5, 10)
par(xpd=TRUE)
rect(3, 9, 4, 20, col="blue")
arrows(3.5, 20, 3.5, 10)
par(xpd=NA)
rect(5, 9, 6, 20, col="green")
arrows(5.5, 20, 5.5, 10)

Paul



--EAA21901.995336925/blueberry.kubism.ku.dk--

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
* PR# 997 *
Subject:  las=1 with log axis 
From: Peter Dalgaard BSA <pd@pubhealth.ku.dk>
Date: Wed, 27 Jun 2001 11:54:06 +0200
-- no notes --
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 997 <==
From postmaster@franz.stat.wisc.edu  Wed Jun 27 11:50:00 2001
Received: from franz.stat.wisc.edu (root@franz.stat.wisc.edu [128.105.174.95])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id LAA01987
	for <r-bugs@biostat.ku.dk>; Wed, 27 Jun 2001 11:49:59 +0200 (MET DST)
Received: from pubhealth.ku.dk (really [130.225.108.10]) by franz.stat.wisc.edu
	via smail with esmtp
	id <m15FBxI-000JJjC@franz.stat.wisc.edu> (Debian Smail3.2.0.111)
	for <r-bugs@r-project.org>; Wed, 27 Jun 2001 04:49:52 -0500 (CDT) 
Received: from blueberry.kubism.ku.dk (blueberry [130.225.108.193])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id LAA01969;
	Wed, 27 Jun 2001 11:49:40 +0200 (MET DST)
Received: (from pd@localhost)
	by blueberry.kubism.ku.dk (8.9.3/8.9.3) id LAA25776;
	Wed, 27 Jun 2001 11:54:06 +0200
Date: Wed, 27 Jun 2001 11:54:06 +0200
From: Peter Dalgaard BSA <pd@pubhealth.ku.dk>
Message-Id: <200106270954.LAA25776@blueberry.kubism.ku.dk>
To: r-bugs@r-project.org
Subject:  las=1 with log axis 
Cc: pd@pubhealth.ku.dk

This just came in:

plot(c(0.1,100),log="y", las=1)

(Numbers and tick marks are unaligned)

Same thing with mtext(), try

mtext("x",2,at=0.1)
mtext("x",2,at=0.1,las=1)

--please do not edit the information below--

Version:
 platform = i586-pc-linux-gnu
 arch = i586
 os = linux-gnu
 system = i586, linux-gnu
 status = 
 major = 1
 minor = 3.0
 year = 2001
 month = 06
 day = 22
 language = R

Search Path:
 .GlobalEnv, package:ctest, Autoloads, package:base

==> 997.followup.1 <==
From paul@stat.auckland.ac.nz  Fri Jun 29 00:19:03 2001
Received: from mailhost.auckland.ac.nz (mailhost.auckland.ac.nz [130.216.1.4] (may be forged))
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id AAA21935;
	Fri, 29 Jun 2001 00:19:01 +0200 (MET DST)
Received: from stat1.stat.auckland.ac.nz (stat1.stat.auckland.ac.nz [130.216.93.1])
	by mailhost.auckland.ac.nz (8.9.2/8.9.2/8.9.2-ua) with ESMTP id KAA24932;
	Fri, 29 Jun 2001 10:18:52 +1200 (NZST)
Received: from murrell (murrell.stat.auckland.ac.nz [130.216.93.23])
	by stat1.stat.auckland.ac.nz (8.9.3+Sun/8.8.8) with SMTP id KAA25180;
	Fri, 29 Jun 2001 10:18:52 +1200 (NZST)
Message-ID: <00fc01c10023$19a40700$175dd882@stat.auckland.ac.nz>
From: "Paul Murrell" <paul@stat.auckland.ac.nz>
To: <pd@pubhealth.ku.dk>, <r-devel@stat.math.ethz.ch>
Cc: <R-bugs@biostat.ku.dk>
References: <200106270950.LAA01997@pubhealth.ku.dk>
Subject: Re: [Rd] las=1 with log axis (PR#997)
Date: Fri, 29 Jun 2001 10:38:49 +1200
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 5.50.4522.1200
X-MimeOLE: Produced By Microsoft MimeOLE V5.50.4522.1200

Hi


> This just came in:
>
> plot(c(0.1,100),log="y", las=1)
>
> (Numbers and tick marks are unaligned)
>
> Same thing with mtext(), try
>
> mtext("x",2,at=0.1)
> mtext("x",2,at=0.1,las=1)


This is related to bug #865, which I have discovered is a problem with some
of the very basic transformation code in R graphics (for transforming widths
or heights when there are log scales).  I have a fix for this particular
mtext() problem, but I'm still working on the more general transformation
bug.

Paul



==> 997.reply.1 <==
From: paul murrell <R-bugs@biostat.ku.dk>
To: pd@pubhealth.ku.dk
Subject: Re: las=1 with log axis (PR#997)
Date: Tue Jul 17 06:05:49 2001

Hi


> plot(c(0.1,100),log="y", las=1)
> 
> (Numbers and tick marks are unaligned)
> 
> Same thing with mtext(), try
> 
> mtext("x",2,at=0.1)
> mtext("x",2,at=0.1,las=1)


This is now fixed (which also fixes PR#865).
Also fixed for mtext() when side=1, log="x", and las=2 (and for corresponding
siutations on sides 3 and 4).
Also fixed for mtext() when text is an expression (i.e., mathematical
annotation).

Unfortunately, the problem goes pretty deep -- it is to do with transformation
of widths and heights to or from USER coordinates when the axis is logged. 
There are a couple of other places where this causes a problem:
(i) strwidth() and strheight() 
(ii) symbols()

I'm leaving this bug active until these other issues are resolved.

Paul


==> 997.audit <==
Sat Jun 30 08:57:44 2001	ripley	moved from incoming to Graphics
Tue Jul 17 06:05:49 2001	paul	sent reply 1
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
* PR# 1045 *
Subject: Palette changes on redraw
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 08 Aug 2001 19:08:01 +0200
-- no notes --
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 1045 <==
From postmaster@franz.stat.wisc.edu  Wed Aug  8 19:07:59 2001
Received: from franz.stat.wisc.edu (root@franz.stat.wisc.edu [128.105.174.95])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id TAA11349
	for <r-bugs@biostat.ku.dk>; Wed, 8 Aug 2001 19:07:58 +0200 (MET DST)
Received: from blueberry.kubism.ku.dk (really [130.225.108.193]) by franz.stat.wisc.edu
	via smail with esmtp
	id <m15UWoD-000JIvC@franz.stat.wisc.edu> (Debian Smail3.2.0.111)
	for <r-bugs@r-project.org>; Wed, 8 Aug 2001 12:07:53 -0500 (CDT) 
Received: (from pd@localhost)
	by blueberry.kubism.ku.dk (8.11.2/8.11.2) id f78H81o29218;
	Wed, 8 Aug 2001 19:08:01 +0200
X-Authentication-Warning: blueberry.kubism.ku.dk: pd set sender to p.dalgaard@biostat.ku.dk using -f
Sender: pd@pubhealth.ku.dk
To: r-bugs@r-project.org
Subject: Palette changes on redraw
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 08 Aug 2001 19:08:01 +0200
Message-ID: <x2snf2zdhq.fsf@blueberry.kubism.ku.dk>
Lines: 14
User-Agent: Gnus/5.0808 (Gnus v5.8.8) Emacs/20.7
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii

Try this

example(palette)

then trigger a redraw e.g. by resizing the window. Shouldn't the
palette be stored as part of the display list?

(This only happens because the palette was reset at the end of the
example, but still...)
-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

==> 1045.reply.1 <==
From ihaka@stat.auckland.ac.nz  Wed Aug  8 22:36:29 2001
Received: from mailhost.auckland.ac.nz (mailhost.auckland.ac.nz [130.216.1.4] (may be forged))
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id WAA12009;
	Wed, 8 Aug 2001 22:36:26 +0200 (MET DST)
Received: from stat1.stat.auckland.ac.nz (stat1.stat.auckland.ac.nz [130.216.93.1])
	by mailhost.auckland.ac.nz (8.9.2/8.9.2/8.9.2-ua) with ESMTP id IAA21626;
	Thu, 9 Aug 2001 08:36:20 +1200 (NZST)
Received: from stat.auckland.ac.nz (g.ihaka.slip.auckland.ac.nz [130.216.9.243])
	by stat1.stat.auckland.ac.nz (8.10.2+Sun/8.8.8) with ESMTP id f78KaJ720404;
	Thu, 9 Aug 2001 08:36:19 +1200 (NZST)
Sender: ihaka@stat.auckland.ac.nz
Message-ID: <3B71A31A.8BB29F85@stat.auckland.ac.nz>
Date: Thu, 09 Aug 2001 08:37:46 +1200
From: Ross Ihaka <ihaka@stat.auckland.ac.nz>
Organization: University of Auckland
X-Mailer: Mozilla 4.76 [en] (X11; U; Linux 2.2.12 i386)
X-Accept-Language: en
MIME-Version: 1.0
To: p.dalgaard@biostat.ku.dk
CC: r-devel@stat.math.ethz.ch, R-bugs@biostat.ku.dk
Subject: Re: [Rd] Palette changes on redraw (PR#1045)
References: <200108081708.TAA11359@pubhealth.ku.dk>
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit

p.dalgaard@biostat.ku.dk wrote:
> 
> Try this
> 
> example(palette)
> 
> then trigger a redraw e.g. by resizing the window. Shouldn't the
> palette be stored as part of the display list?
> 
> (This only happens because the palette was reset at the end of the
> example, but still...)

I could argue either way on this.

I agree that its nasty to have plot colours change in mid-stream,
but I suspect that adding the palette to the display list may not
be the "right" solution.

A different approach would be to map the colour indices (and names)
to RGB values at a slightly higher level.  That way it would be the
RGB values which would be captured in the display list, not the
indices.

[ I'm afraid that I think that the whole display list mechanism is
  "wrong".  We need a much higher level way of describing plots. ]

	Ross

==> 1045.audit <==
Sat Aug 11 09:57:42 2001	ripley	moved from incoming to Graphics
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

Directory:  In-Out

none

Directory:  Installation

* PR# 1034 *
Subject: Compiling R (1.3.0) on AIX (4.3) fails
From: "Thomas J Vogels" <tov@ece.cmu.edu>
Date: Sun, 29 Jul 2001 12:27:51 -0400
-- no notes --
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 1034 <==
From tov@ece.cmu.edu  Sun Jul 29 18:28:26 2001
Received: from ece.cmu.edu (ECE.CMU.EDU [128.2.236.200])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id SAA24361
	for <r-bugs@biostat.ku.dk>; Sun, 29 Jul 2001 18:28:25 +0200 (MET DST)
Received: from bavaria (AC9B4D83.ipt.aol.com [172.155.77.131])
	by ece.cmu.edu (8.11.0/8.10.2) with SMTP id f6TGSK224272;
	Sun, 29 Jul 2001 12:28:20 -0400 (EDT)
Reply-To: <vogels@cmu.edu>
From: "Thomas J Vogels" <tov@ece.cmu.edu>
To: <r-bugs@biostat.ku.dk>
Cc: "Vogels@Cmu. Edu" <vogels@cmu.edu>
Subject: Compiling R (1.3.0) on AIX (4.3) fails
Date: Sun, 29 Jul 2001 12:27:51 -0400
Message-ID: <NFBBKIAHMMCHOBIBLMMPKEBLCAAA.tov@ece.cmu.edu>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
X-Priority: 3 (Normal)
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook IMO, Build 9.0.2416 (9.0.2910.0)
Importance: Normal
X-MimeOLE: Produced By Microsoft MimeOLE V5.00.2314.1300

Hi,

This email reports bugs in acinclude.m4, src/library/tcltk/src/Makefile,
and share/perl/Rd2contents.pl.  It is based on R-patched.tgz from 07/27/2001
(R 1.3.0) and comes from trying to compile R on AIX 4.3.

1) acinclude.m4:  A string on line 3096 starts with a single quote: ' but
is terminated with a double quote: ".  (This leads to the weird error
message that configure can't execute 'shared' on line 4060.)
     The fix is simply to use single quotes both times:
allow_undefined_flag='${wl}-berok'

2) after configure (with CC=gcc but using AIX's linker /usr/bin/ld), the
Makefile in src/library/tcltk/src doesn't protect the linker flags -bI
with -Xlinker! (-Xlinker is required when using gcc so that the linker flags
are passed on to ld correctly.  Which I know that you know...)
  The fix is to add -Xlinker before every -bI. Sorry, haven't looked into
patching configure yet...

3) Rd2contents.pl:  this perl script fails in the base library!  There are
too many files in the man directory and perl reports 'glob failed'.  When I
try 'ls man/*.Rd'  bash also reports that the argument list is too long.  I
don't know whether this limitation comes from AIX, bash or perl and why it
doesn't happen with, say, Linux.
The fix is to replace the simple while loop (line 6):
  while(<$ARGV[0]/man/*.Rd>){ &do_one; }

with a loop over the contents of the directory using readdir:

if (opendir RD, "$ARGV[0]/man") {
    my $f;
    while (defined ($f = readdir RD)) {
     $_ = "$ARGV[0]/man/$f", &do_one if $f =~ m,.Rd$,;
    }
    closedir RD;
}

A) tkConfig.sh contains a line like this:
   TK_XINCLUDES='# no special path needed'
This has nothing to do with R proper but this bug which is either in AIX or
the local installation of X shows up during the compilation of R.  Anyhow,
this line is plain stupid since when passed on to the compiler _comments
out_ the rest of the line!  (Think about:
  gcc fine_program.c #no special path needed -lX11 -Xm
)  The fix is to use "TK_XINCLUDES=''" in tkConfig.sh
Again, I know this is not a problem with R but I'm adding it here for people
to find if they use the mailing list archive.

After these changes R compiles (producing warnings about duplicate
symbols...) and installs.  'make check' fails in mva--report to follow.

Regards,
  -tom

--
Email: vogels@cmu.edu



==> 1034.followup.1 <==
From ripley@stats.ox.ac.uk  Sun Jul 29 21:17:50 2001
Received: from toucan.stats.ox.ac.uk (toucan.stats.ox.ac.uk [163.1.20.20])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id VAA24784
	for <R-bugs@biostat.ku.dk>; Sun, 29 Jul 2001 21:17:49 +0200 (MET DST)
Received: from gannet.stats (IDENT:root@gannet.stats [163.1.20.127])
	by toucan.stats.ox.ac.uk (8.9.0/8.9.0) with ESMTP id UAA28002;
	Sun, 29 Jul 2001 20:17:46 +0100 (BST)
Received: from localhost (ripley@localhost)
	by gannet.stats (8.11.3/8.11.3) with ESMTP id f6TJHjt08161;
	Sun, 29 Jul 2001 20:17:45 +0100
X-Authentication-Warning: gannet.stats: ripley owned process doing -bs
Date: Sun, 29 Jul 2001 20:17:45 +0100 (BST)
From: Prof Brian Ripley <ripley@stats.ox.ac.uk>
X-X-Sender:  <ripley@gannet.stats>
To: <vogels@cmu.edu>
cc: <R-bugs@biostat.ku.dk>
Subject: Re: [Rd] Compiling R (1.3.0) on AIX (4.3) fails (PR#1034)
In-Reply-To: <200107291628.SAA24371@pubhealth.ku.dk>
Message-ID: <Pine.LNX.4.31.0107292005120.8135-100000@gannet.stats>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII

On Sun, 29 Jul 2001 vogels@cmu.edu wrote:

> Hi,
>
> This email reports bugs in acinclude.m4, src/library/tcltk/src/Makefile,
> and share/perl/Rd2contents.pl.  It is based on R-patched.tgz from 07/27/2001
> (R 1.3.0) and comes from trying to compile R on AIX 4.3.

Would that be 2001-07-27?  Not all of us live in countries that flout ISO
standards!

> 1) acinclude.m4:  A string on line 3096 starts with a single quote: ' but
> is terminated with a double quote: ".  (This leads to the weird error
> message that configure can't execute 'shared' on line 4060.)
>      The fix is simply to use single quotes both times:
> allow_undefined_flag='${wl}-berok'

That is a generated file.  It coems from m4/libtool.m4.

> 2) after configure (with CC=gcc but using AIX's linker /usr/bin/ld), the
> Makefile in src/library/tcltk/src doesn't protect the linker flags -bI
> with -Xlinker! (-Xlinker is required when using gcc so that the linker flags
> are passed on to ld correctly.  Which I know that you know...)
>   The fix is to add -Xlinker before every -bI. Sorry, haven't looked into
> patching configure yet...
>
> 3) Rd2contents.pl:  this perl script fails in the base library!  There are
> too many files in the man directory and perl reports 'glob failed'.  When I
> try 'ls man/*.Rd'  bash also reports that the argument list is too long.  I

(! That looks like a bash bug.  Your bash version is ?  sh is supposed ot
have no line length limits.)

> don't know whether this limitation comes from AIX, bash or perl and why it
> doesn't happen with, say, Linux.

Do you have a current perl?  Globbing was changed in 5.6.0 to be handled
in C code, as I recall.  It does not happen on Solaris, Linux or Windows,
and I suspect a perl upgrade might fix it.  Try 5.6.1, if you are not
already using it.

> The fix is to replace the simple while loop (line 6):
>   while(<$ARGV[0]/man/*.Rd>){ &do_one; }
>
> with a loop over the contents of the directory using readdir:
>
> if (opendir RD, "$ARGV[0]/man") {
>     my $f;
>     while (defined ($f = readdir RD)) {
>      $_ = "$ARGV[0]/man/$f", &do_one if $f =~ m,.Rd$,;
>     }
>     closedir RD;
> }

(slower and less portable if it is not needed.)

Your perl version is ?


> A) tkConfig.sh contains a line like this:
>    TK_XINCLUDES='# no special path needed'
> This has nothing to do with R proper but this bug which is either in AIX or
> the local installation of X shows up during the compilation of R.  Anyhow,
> this line is plain stupid since when passed on to the compiler _comments
> out_ the rest of the line!  (Think about:
>   gcc fine_program.c #no special path needed -lX11 -Xm
> )  The fix is to use "TK_XINCLUDES=''" in tkConfig.sh
> Again, I know this is not a problem with R but I'm adding it here for people
> to find if they use the mailing list archive.
>
> After these changes R compiles (producing warnings about duplicate
> symbols...) and installs.  'make check' fails in mva--report to follow.
>
> Regards,
>   -tom
>
> --
> Email: vogels@cmu.edu
>
>
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


==> 1034.followup.2 <==
From tov@ece.cmu.edu  Sun Jul 29 22:10:52 2001
Received: from infiniti.ece.cmu.edu (INFINITI.ECE.CMU.EDU [128.2.133.84])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id WAA24908
	for <R-bugs@biostat.ku.dk>; Sun, 29 Jul 2001 22:10:51 +0200 (MET DST)
Received: (from tov@localhost) by infiniti.ece.cmu.edu (AIX4.3/UCB 8.8.8/8.8.8) id QAA16896; Sun, 29 Jul 2001 16:10:48 -0400
X-Authentication-Warning: infiniti.ece.cmu.edu: tov set sender to tov@ece.cmu.edu using -f
Sender: tov@infiniti.ece.cmu.edu
To: r-devel@stat.math.ethz.ch, R-bugs@biostat.ku.dk
Subject: Re: [Rd] Compiling R (1.3.0) on AIX (4.3) fails (PR#1034)
References: <200107291917.VAA24794@pubhealth.ku.dk>
Reply-To: Thomas Vogels <tov@ece.cmu.edu>
X-URI: http://www.ece.cmu.edu/~tov
From: Thomas Vogels <tov@ece.cmu.edu>
Date: 29 Jul 2001 16:10:47 -0400
In-Reply-To: ripley@stats.ox.ac.uk's message of "Sun, 29 Jul 2001 21:17:55 +0200 (MET DST)"
Message-ID: <pxsnffpkc8.fsf@infiniti.ece.cmu.edu>
Lines: 133
User-Agent: Gnus/5.0807 (Gnus v5.8.7) Emacs/20.7
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii


ripley@stats.ox.ac.uk writes:

> On Sun, 29 Jul 2001 vogels@cmu.edu wrote:
> 
> > Hi,
> >
> > This email reports bugs in acinclude.m4, src/library/tcltk/src/Makefile,
> > and share/perl/Rd2contents.pl.  It is based on R-patched.tgz from 07/27/2001
> > (R 1.3.0) and comes from trying to compile R on AIX 4.3.
> 
> Would that be 2001-07-27?  Not all of us live in countries that flout ISO
> standards!

Oops.  Should have used the contents of the date stamp file...

> > 1) acinclude.m4:  A string on line 3096 starts with a single quote: ' but
> > is terminated with a double quote: ".  (This leads to the weird error
> > message that configure can't execute 'shared' on line 4060.)
> >      The fix is simply to use single quotes both times:
> > allow_undefined_flag='${wl}-berok'
> 
> That is a generated file.  It coems from m4/libtool.m4.

...which means I should have said...
 Line 1473 in m4/libtool.m4 contains the unterminated string.

Hmm, should the name of the file suggest to me that it's part of some
other package, like 'libtool', and I should file a bug report with
it's maintainer?

> > 2) after configure (with CC=gcc but using AIX's linker /usr/bin/ld), the
> > Makefile in src/library/tcltk/src doesn't protect the linker flags -bI
> > with -Xlinker! (-Xlinker is required when using gcc so that the linker flags
> > are passed on to ld correctly.  Which I know that you know...)
> >   The fix is to add -Xlinker before every -bI. Sorry, haven't looked into
> > patching configure yet...
> >
> > 3) Rd2contents.pl:  this perl script fails in the base library!  There are
> > too many files in the man directory and perl reports 'glob failed'.  When I
> > try 'ls man/*.Rd'  bash also reports that the argument list is too long.  I
> 
> (! That looks like a bash bug.  Your bash version is ?  sh is supposed ot
> have no line length limits.)

Guilty as suspected.  My bash and perl is rather old...  

> > don't know whether this limitation comes from AIX, bash or perl and why it
> > doesn't happen with, say, Linux.
> 
> Do you have a current perl?  Globbing was changed in 5.6.0 to be handled
> in C code, as I recall.  It does not happen on Solaris, Linux or Windows,
> and I suspect a perl upgrade might fix it.  Try 5.6.1, if you are not
> already using it.

I'm not and I won't.  I'll live with my old perl since I don't want to
download and compile perl and bash...  I have a work around and if the
installation fails for somebody else they might have a hack available
when they search the r-bugs/r-devel archive.  Should I encounter the
problem again with a current installation (on a different system),
I'll let you know, otherwise I'll shut up.


> > The fix is to replace the simple while loop (line 6):
> >   while(<$ARGV[0]/man/*.Rd>){ &do_one; }
> >
> > with a loop over the contents of the directory using readdir:
> >
> > if (opendir RD, "$ARGV[0]/man") {
> >     my $f;
> >     while (defined ($f = readdir RD)) {
> >      $_ = "$ARGV[0]/man/$f", &do_one if $f =~ m,.Rd$,;
> >     }
> >     closedir RD;
> > }
> 
> (slower and less portable if it is not needed.)

True (especially the portability argument) if globbing is handled in
C in Perl nowadays.  I'd challenge the "slower" if Perl had to use the
shell since the shell would sort the file list which readdir won't.
 
> Your perl version is ?

Too embarassed to tell ;-)  Mea culpa, I'll bring up Perl issues in
the future only when I know I have a recent version...


> > A) tkConfig.sh contains a line like this:
> >    TK_XINCLUDES='# no special path needed'
> > This has nothing to do with R proper but this bug which is either in AIX or
> > the local installation of X shows up during the compilation of R.  Anyhow,
> > this line is plain stupid since when passed on to the compiler _comments
> > out_ the rest of the line!  (Think about:
> >   gcc fine_program.c #no special path needed -lX11 -Xm
> > )  The fix is to use "TK_XINCLUDES=''" in tkConfig.sh
> > Again, I know this is not a problem with R but I'm adding it here for people
> > to find if they use the mailing list archive.
> >
> > After these changes R compiles (producing warnings about duplicate
> > symbols...) and installs.  'make check' fails in mva--report to follow.
> >
> > Regards,
> >   -tom
> >
> > --
> > Email: vogels@cmu.edu
> >
> >
> >
> > -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> > r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> > Send "info", "help", or "[un]subscribe"
> > (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> > _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
> >
> 
> -- 
> Brian D. Ripley,                  ripley@stats.ox.ac.uk
> Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
> University of Oxford,             Tel:  +44 1865 272861 (self)
> 1 South Parks Road,                     +44 1865 272860 (secr)
> Oxford OX1 3TG, UK                Fax:  +44 1865 272595
> 
> 
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

-- 
mailto:tov@ece.cmu.edu (Tom Vogels)   Tel: (412) 268-6638   FAX: -3204

==> 1034.reply.1 <==
From hornik@ci.tuwien.ac.at  Mon Jul 30 09:36:24 2001
Received: from mr.tuwien.ac.at (mr.tuwien.ac.at [128.130.2.10])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id JAA26859
	for <R-bugs@biostat.ku.dk>; Mon, 30 Jul 2001 09:36:23 +0200 (MET DST)
Received: from mithrandir.hornik.net (a61.dialin.tuwien.ac.at [192.35.240.71])
	by mr.tuwien.ac.at (8.11.1/8.11.1) with ESMTP id f6U7cms20529;
	Mon, 30 Jul 2001 09:38:49 +0200 (MET DST)
Received: from hornik by mithrandir.hornik.net with local (Exim 3.12 #1 (Debian))
	id 15R7aA-0003R8-00; Mon, 30 Jul 2001 09:35:18 +0200
From: Kurt Hornik <Kurt.Hornik@ci.tuwien.ac.at>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
Message-ID: <15205.3637.903902.962867@mithrandir.hornik.net>
Date: Mon, 30 Jul 2001 09:35:17 +0200
To: Thomas Vogels <tov@ece.cmu.edu>
Cc: r-devel@stat.math.ethz.ch, R-bugs@biostat.ku.dk
Subject: Re: [Rd] Compiling R (1.3.0) on AIX (4.3) fails (PR#1034)
In-Reply-To: <pxsnffpkc8.fsf@infiniti.ece.cmu.edu>
References: <200107291917.VAA24794@pubhealth.ku.dk>
	<pxsnffpkc8.fsf@infiniti.ece.cmu.edu>
X-Mailer: VM 6.94 under Emacs 20.7.2
Reply-To: Kurt.Hornik@ci.tuwien.ac.at
Sender: Kurt Hornik <hornik@ci.tuwien.ac.at>

>>>>> Thomas Vogels writes:

> ripley@stats.ox.ac.uk writes:

>> On Sun, 29 Jul 2001 vogels@cmu.edu wrote:
>> 
>> > Hi,
>> >
>> > This email reports bugs in acinclude.m4, src/library/tcltk/src/Makefile,
>> > and share/perl/Rd2contents.pl.  It is based on R-patched.tgz from 07/27/2001
>> > (R 1.3.0) and comes from trying to compile R on AIX 4.3.
>> 
>> Would that be 2001-07-27?  Not all of us live in countries that flout ISO
>> standards!

> Oops.  Should have used the contents of the date stamp file...

>> > 1) acinclude.m4:  A string on line 3096 starts with a single quote: ' but
>> > is terminated with a double quote: ".  (This leads to the weird error
>> > message that configure can't execute 'shared' on line 4060.)
>> >      The fix is simply to use single quotes both times:
>> > allow_undefined_flag='${wl}-berok'
>> 
>> That is a generated file.  It coems from m4/libtool.m4.

> ...which means I should have said...
>  Line 1473 in m4/libtool.m4 contains the unterminated string.

> Hmm, should the name of the file suggest to me that it's part of some
> other package, like 'libtool', and I should file a bug report with
> it's maintainer?

Fixed now.  The file comes from libtool 1.4.  Unfortunately, we have to
patch it ourselves, as the libtool 1.4 `patch release' suddenly requires
autoconf 2.50 ...

>> > 2) after configure (with CC=gcc but using AIX's linker /usr/bin/ld), the
>> > Makefile in src/library/tcltk/src doesn't protect the linker flags -bI
>> > with -Xlinker! (-Xlinker is required when using gcc so that the linker flags
>> > are passed on to ld correctly.  Which I know that you know...)
>> >   The fix is to add -Xlinker before every -bI. Sorry, haven't looked into
>> > patching configure yet...

Very strange.  Configure has

  *aix4.[2-9]*)
    EXPORTFILE="\$(top_builddir)/etc/R.exp"
    cpicflags=
    cxxpicflags=
    fpicflags=
    wl="-Wl,"
    main_ldflags="${wl}-bdynamic ${wl}-bE:${EXPORTFILE} ${wl}-bM:SRE"
    shlib_ldflags="${wl}-bM:SRE ${wl}-H512 ${wl}-T512 ${wl}-bnoentry \
      ${wl}-bexpall ${wl}-bI:\$(R_HOME)/etc/R.exp"
    SHLIB_LIBADD="\$(LIBM)"
    ;;

so unless I am missing something obvious all linker flages are protected
via `-Wl,' (which should also work if the C compiler is not gcc).

-k

==> 1034.followup.3 <==
From tov@ece.cmu.edu  Mon Jul 30 16:18:40 2001
Received: from infiniti.ece.cmu.edu (INFINITI.ECE.CMU.EDU [128.2.133.84])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id QAA01527
	for <R-bugs@biostat.ku.dk>; Mon, 30 Jul 2001 16:18:39 +0200 (MET DST)
Received: (from tov@localhost) by infiniti.ece.cmu.edu (AIX4.3/UCB 8.8.8/8.8.8) id KAA20604; Mon, 30 Jul 2001 10:18:35 -0400
X-Authentication-Warning: infiniti.ece.cmu.edu: tov set sender to tov@ece.cmu.edu using -f
Sender: tov@infiniti.ece.cmu.edu
To: r-devel@stat.math.ethz.ch
Cc: R-bugs@biostat.ku.dk
Subject: Re: [Rd] Compiling R (1.3.0) on AIX (4.3) fails (PR#1034)
References: <200107291917.VAA24794@pubhealth.ku.dk>
	<pxsnffpkc8.fsf@infiniti.ece.cmu.edu>
Reply-To: Thomas Vogels <tov@ece.cmu.edu>
X-URI: http://www.ece.cmu.edu/~tov
From: Thomas Vogels <tov@ece.cmu.edu>
Date: 30 Jul 2001 10:18:35 -0400
In-Reply-To: Thomas Vogels's message of "29 Jul 2001 16:10:47 -0400"
Message-ID: <pxlml6cxfo.fsf@infiniti.ece.cmu.edu>
Lines: 52
User-Agent: Gnus/5.0807 (Gnus v5.8.7) Emacs/20.7
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii


Excerpt from Kurt's email this morning:

>>> > 2) after configure (with CC=gcc but using AIX's linker
>/usr/bin/ld), the
>>> > Makefile in src/library/tcltk/src doesn't protect the linker
>flags
>-bI
>>> > with -Xlinker! (-Xlinker is required when using gcc so that the
>linker flags
>>> > are passed on to ld correctly.  Which I know that you know...)
>>> >   The fix is to add -Xlinker before every -bI. Sorry, haven't
>looked into
>>> > patching configure yet...
>
>Very strange.  Configure has
>
>  *aix4.[2-9]*)
>    EXPORTFILE="\$(top_builddir)/etc/R.exp"
>    cpicflags=
>    cxxpicflags=
>    fpicflags=
>    wl="-Wl,"
>    main_ldflags="${wl}-bdynamic ${wl}-bE:${EXPORTFILE} ${wl}-bM:SRE"
>    shlib_ldflags="${wl}-bM:SRE ${wl}-H512 ${wl}-T512 ${wl}-bnoentry \
>      ${wl}-bexpall ${wl}-bI:\$(R_HOME)/etc/R.exp"
>    SHLIB_LIBADD="\$(LIBM)"
>    ;;
>
>so unless I am missing something obvious all linker flages are
>protected
>via `-Wl,' (which should also work if the C compiler is not gcc).
>

Sorry, should have been more explicit, I guess: the problem is with
PKG_LIBS (which is the only variable in that Makefile using linker
flags...)  Some digging shows that '-Wl,' (or '-Xlinker') is missing
in tkConfig.sh.  So if you have Tcl/Tk (8.3 in my case) installed and
used AIX's 'cc' compiler, you get in trouble with later using gcc
(e.g. for R).  Oddly, this didn't show when compiling, say, Tktable.

There is the question, why configure didn't "see" this coming.  What
would be nice is a warning to the effect that tkConfig.sh is broken
when R can't compile tcltk.c.  (Currently I get messages about libc.a
not found...)

Thanks,
  -tom

-- 
mailto:tov@ece.cmu.edu (Tom Vogels)   Tel: (412) 268-6638   FAX: -3204


==> 1034.audit <==
Fri Aug  3 11:36:36 2001	ripley	moved from incoming to Installation
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

Directory:  Language

* PR# 408 *
Subject: convolution bug
From: wsimpson@gcal.ac.uk
Date: Fri, 28 Jan 2000 11:17:36 +0100 (MET)
-- no notes --
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 408 <==
From wsimpson@gcal.ac.uk  Fri Jan 28 11:17:36 2000
Received: from localhost (blueberry [130.225.108.193])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id LAA11325
	for <R-bugs@biostat.ku.dk>; Fri, 28 Jan 2000 11:17:36 +0100 (MET)
Date: Fri, 28 Jan 2000 11:17:36 +0100 (MET)
From: wsimpson@gcal.ac.uk
Message-Id: <200001281017.LAA11325@pubhealth.ku.dk>
To: R-bugs@biostat.ku.dk
Subject: convolution bug

Full_Name: Bill Simpson
Version: 65.1 , 0.90.1
OS: Linux
Submission from: (NULL) (193.62.250.209)


I reported this on r-help, but here is official bug report.

The present convolve() does not do convolution by default. Its default behaviour
is
correlation. This is a bug.

The default argument conj should be set to FALSE.

The zero-padding should be on the right for linear convolution (don't ask me
why you call this type="open"; I suggest type="linear").

Here is what I expect linear convolution to do:
myconvolve<-function (x,h) 
{
    nx <- length(x)
    nh <- length(h)
    #zero pad
    if(nx>nh)
       {
       x <- c(x,rep(0, nh-1))
       h<-c(h,rep(0,nx-1))
       }
    else
       {
       h <- c(h,rep(0, nx-1))
       x<-c(x,rep(0,nh-1))
       }
    x <- fft(fft(x) * fft(h), inv = TRUE)
    Re(x)/length(x)
#I am not sure about this, the R IFFT is weird
}

What "circular" convolution should do is just
eliminate the zero-padding:

myconvolve2<-function (x,h)
{
#no padding, circular convolution
    nx <- length(x)
    nh <- length(h)
    x <- fft(fft(x) * fft(h), inv = TRUE)
    Re(x)/(nx)
}


I suggest that you create two functions, convolve() and correlate(), and get
rid
of the conj argument in convolve().

==> 408.audit <==
Wed Feb 16 19:28:42 2000	ripley	moved from incoming to Language
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
* PR# 412 *
Subject: anomalies with call objects
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 06 Feb 2000 01:18:50 +0100
-- no notes --
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 412 <==
From postmaster@franz.stat.wisc.edu  Sun Feb  6 01:16:33 2000
Received: from stat.math.ethz.ch (daemon@hypatia.ethz.ch [129.132.58.23])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id BAA26868
	for <R-bugs@biostat.ku.dk>; Sun, 6 Feb 2000 01:16:31 +0100 (MET)
Received: (from daemon@localhost)
	by stat.math.ethz.ch (8.9.1/8.9.1) id BAA18080
	for <r-bugs@hypatia.math.ethz.ch>; Sun, 6 Feb 2000 01:16:38 +0100 (MET)
Received: from franz.stat.wisc.edu(128.105.174.95)
 via SMTP by hypatia, id smtpdAAAa004QS; Sun Feb  6 01:16:33 2000
Received: from pubhealth.ku.dk (really [130.225.108.10]) by franz.stat.wisc.edu
	via smail with esmtp
	id <m12HFNP-000ZSxC@franz.stat.wisc.edu> (Debian Smail3.2.0.102)
	for <r-bugs@r-project.org>; Sat, 5 Feb 2000 18:16:31 -0600 (CST) 
Received: from biostat.ku.dk (blueberry [130.225.108.193])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id BAA26864
	for <r-bugs@r-project.org>; Sun, 6 Feb 2000 01:16:18 +0100 (MET)
Received: (from pd@localhost)
	by biostat.ku.dk (8.9.3/8.9.3) id BAA12311;
	Sun, 6 Feb 2000 01:18:51 +0100
Sender: pd@blueberry.kubism.ku.dk
To: r-bugs@r-project.org
Subject: anomalies with call objects
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 06 Feb 2000 01:18:50 +0100
Message-ID: <x2900zyyhh.fsf@blueberry.kubism.ku.dk>
Lines: 51
X-Mailer: Gnus v5.7/Emacs 20.4
Mime-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: 7bit


Call objects don't always behave as you'd expect. They're mostly
list-like, but with exceptions:

> f<-function(x,y,...)match.call(expand.dots=FALSE)
> xx <- f(y=1,2,z=3,4)
> dd <- xx$...
> xx$... <- NULL
> c(xx,dd)
[[1]]
f(x = 2, y = 1)

$z
[1] 3

[[3]]
[1] 4

> as.call(c(as.list(xx),dd))
f(x = 2, y = 1, z = 3, 4)

(Splus has this rather differently, since dd becomes a call to list()
rather than a list of promises:

S> c(xx,dd)
f(x = 2, y = 1, list, z = 3, 4)
S> as.call(c(as.list(xx),dd))
f(x = 2, y = 1, list, z = 3, 4)

...but at least gives the same in both cases)

Also, the names of arguments added with [[<- is getting dropped if a
new element is required:

> xx[["abc"]]<-123
> xx
f(x = 2, y = 1, 123)

S has what I'd expect there:

S> xx[["abc"]]<-123
S> xx
f(x = 2, y = 1, abc = 123)

[R-0.99.0 prerelease on RedHat6.1, but this is likely not a new thing.]

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

==> 412.audit <==
Wed Feb 16 19:26:57 2000	ripley	moved from incoming to Language
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
* PR# 669 *
Subject: Bug(s) w/ rbind.data.frame(); fix also read.table(*, as.is = TRUE) ?
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Mon, 25 Sep 2000 10:17:15 +0200
--status of AsIs columns
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 669 <==
From maechler@stat.math.ethz.ch  Mon Sep 25 10:17:01 2000
Received: from stat.math.ethz.ch (daemon@hypatia.ethz.ch [129.132.58.23])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id KAA01907
	for <R-bugs@biostat.ku.dk>; Mon, 25 Sep 2000 10:17:01 +0200 (MET DST)
Received: (from daemon@localhost)
	by stat.math.ethz.ch (8.9.1/8.9.1) id KAA07627
	for <R-bugs@stat.math.ethz.ch>; Mon, 25 Sep 2000 10:17:19 +0200 (MET DST)
Received: from lynne(129.132.58.30), claiming to be "lynne.ethz.ch"
 via SMTP by hypatia, id smtpdAAAa001r9; Mon Sep 25 10:17:15 2000
Received: (maechler@localhost) by lynne.ethz.ch (8.9.3/D-MATH-client) id KAA01475; Mon, 25 Sep 2000 10:17:15 +0200
X-Authentication-Warning: lynne.ethz.ch: maechler set sender to maechler@stat.math.ethz.ch using -f
From: Martin Maechler <maechler@stat.math.ethz.ch>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
Message-ID: <14799.2571.494467.836722@gargle.gargle.HOWL>
Date: Mon, 25 Sep 2000 10:17:15 +0200
To: R-bugs@stat.math.ethz.ch
Subject: Bug(s) w/ rbind.data.frame(); fix also read.table(*, as.is = TRUE) ?
X-Mailer: VM 6.76 under Emacs 20.7.1
Reply-To: Martin Maechler <maechler@stat.math.ethz.ch>

This is not only bug report, but also a RFC (request for comments):

The basic problem is that there are (at least) two ways of easily getting
non-factor character columns in data.frames.
The first is  
    read.table(*, as.is = TRUE) 
and the second is
    data.frame(.., I(...), ..)	      

which differ in their result. Whereas the first produces `pure' character
columns in the data.frame, the second approach gives `AsIs' classed
columns (character, or, e.g. logical).

Now, as the following shows,  rbind.data.frame()  *is* buggy anyway,
I wonder if we shouldn't change read.table(*, as.is = TRUE)
such that the non-numeric columns of its result become "AsIs" classed as
well:

-----------

str(d1 <- data.frame(a=1:3, b = I(letters[1:3])))
## d1 is `alright'
## d0: The same but a `character' *not* protected by AsIs:
d0 <- d1
d0$b <- unclass(d0$b)
str(d0)
## Note that this is *really* the same as a what you get from
##  read.table(*, as.is = TRUE)
##  ----------
##  R's read.table() is S+ compatible; however I wonder if
##  we shouldn't add  "AsIs" classes to all non-numeric components...
##  the classes, shouldn't harm, but ensure consistency of treatment..

str(d11 <- rbind(d1, new = c(7, "N"))) ## alright
str(d01 <- rbind(d0, new = c(7, "N"))) ## all wrong :
## Both columns were coerced to factors !!
##-- S-PLUS 5 coerces both to "character" -- which is better,
##  since the new row *is* all character

## R makes nonsense with 'b' [factor w/ 1 level "N": NA NA NA 1]
## S+ 5.1 does exactly the right thing [both a & b still look like in d0,d1 :
str(d12 <- rbind(d1, new = data.frame(a= 7, b="N")))##
str(d02 <- rbind(d0, new = data.frame(a= 7, b="N")))##

---------

Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
Seminar fuer Statistik, ETH-Zentrum  LEO D10	Leonhardstr. 27
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1228			<><

==> 669.audit <==
Wed Oct 25 20:31:21 2000	ripley	changed notes
Wed Oct 25 20:31:21 2000	ripley	foobar
Wed Oct 25 20:31:21 2000	ripley	moved from incoming to Language
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
* PR# 921 *
Subject:  Managed to confuse match.arg 
From: J.C.Rougier@durham.ac.uk
Date: Wed, 25 Apr 2001 12:22:54 +0100 (BST)
-- no notes --
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 921 <==
From postmaster@franz.stat.wisc.edu  Wed Apr 25 13:23:07 2001
Received: from franz.stat.wisc.edu (root@franz.stat.wisc.edu [128.105.174.95])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id NAA14338
	for <r-bugs@biostat.ku.dk>; Wed, 25 Apr 2001 13:23:06 +0200 (MET DST)
Received: from hermes.dur.ac.uk (really [129.234.4.9]) by franz.stat.wisc.edu
	via smail with esmtp
	id <m14sNO6-000JH1C@franz.stat.wisc.edu> (Debian Smail3.2.0.111)
	for <r-bugs@r-project.org>; Wed, 25 Apr 2001 06:23:14 -0500 (CDT) 
Received: from euclid (euclid.dur.ac.uk [129.234.21.53])
	by hermes.dur.ac.uk (8.11.1/8.11.1) with ESMTP id f3PBMtl04590
	for <r-bugs@r-project.org>; Wed, 25 Apr 2001 12:22:55 +0100 (BST)
Received: from laplace by euclid id <MAA23210@euclid>; Wed, 25 Apr 2001 12:22:49 +0100 (BST)
From: J.C.Rougier@durham.ac.uk
Date: Wed, 25 Apr 2001 12:22:54 +0100 (BST)
Message-Id: <8522.200104251122@laplace>
To: r-bugs@r-project.org
Cc: dma0jcr@laplace.dur.ac.uk
Subject:  Managed to confuse match.arg 

This one may not strictly be a bug, and it was certainly my
fault, but it took me a while to track it down and it is rather
strange:

funOne <- function(x)
{
  funTwo <- 1:10
  funTwo(x)
}

funTwo <- function(v) 2*v

funOne(5) # answer is 10 as expected

# now a different definition for funTwo with a match.arg

funTwo <- function(v, foo=c("small", "large"))
{
  foo <- match.arg(foo)
  print(foo)
  2*v
}

funOne(5) # answer is 10, but foo is NULL

What happens is that in funOne I mask funTwo with a vector, but
that doesn't matter as the call to funTwo specifies
mode="function" (or something similar).  But what happens when
funTwo includes a match.arg?  In this case match.arg fails, and
the reason it fails is that sys.function(sys.parent()) in
match.arg evaluates to 1:10.  If there is a bug here it is the
failure of sys.function to grab a function, with the result that
formal.args in match.fun is NULL.

Cheers, Jonathan.

--please do not edit the information below--

Version:
 platform = sparc-sun-solaris2.7
 arch = sparc
 os = solaris2.7
 system = sparc, solaris2.7
 status = 
 major = 1
 minor = 2.1
 year = 2001
 month = 01
 day = 15
 language = R

Search Path:
 .GlobalEnv, Autoloads, package:base

==> 921.reply.1 <==
From postmaster@franz.stat.wisc.edu  Thu Apr 26 01:01:48 2001
Received: from franz.stat.wisc.edu (root@franz.stat.wisc.edu [128.105.174.95])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id BAA04470
	for <r-bugs@biostat.ku.dk>; Thu, 26 Apr 2001 01:01:47 +0200 (MET DST)
Received: from pubhealth.ku.dk (really [130.225.108.10]) by franz.stat.wisc.edu
	via smail with esmtp
	id <m14sYIG-000JdlC@franz.stat.wisc.edu> (Debian Smail3.2.0.111)
	for <r-bugs@r-project.org>; Wed, 25 Apr 2001 18:01:56 -0500 (CDT) 
Received: from blueberry.kubism.ku.dk (blueberry [130.225.108.193])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id BAA04466
	for <r-bugs@r-project.org>; Thu, 26 Apr 2001 01:01:27 +0200 (MET DST)
Received: (from pd@localhost)
	by blueberry.kubism.ku.dk (8.9.3/8.9.3) id BAA30388;
	Thu, 26 Apr 2001 01:10:27 +0200
Sender: pd@pubhealth.ku.dk
To: r-bugs@r-project.org
Subject: match.arg confusion (PR#921)
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 26 Apr 2001 01:10:27 +0200
Message-ID: <x2zod4r2xo.fsf@blueberry.kubism.ku.dk>
Lines: 22
X-Mailer: Gnus v5.7/Emacs 20.7
Mime-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: 7bit


[sys.function fails sometimes (sorry, our mail system decide to throw
away the original mail)]

Yes, I bumped into something similar recently. The problem is that we
only actually store the call in the context structure, not the
function, so sys.function has to grab the call, take the 1st element,
and reevaluate it in the parent frame. It is quite easy to think up
examples where a second evaluation does not give the same value as
the first. 

Your particular case is of a slightly different natur and should be
easily fixable by replacing findVar in R_sysfunction by findVar1 and
looking specifically for objects of mode "function", but the basic
problem persists. I don't think I want to risk fixing this (and maybe
unfixing something else) for 1.2.3 tomorrow though.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

==> 921.audit <==
Thu Apr 26 12:30:31 2001	pd	moved from incoming to Language
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

Directory:  Low-level

* PR# 989 *
Subject: "[.data.frame" allows un-named 3rd subscript
From: "Charles C. Berry" <cberry@tajo.ucsd.edu>
Date: Mon, 18 Jun 2001 13:13:46 -0700 (PDT)
-- no notes --
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 989 <==
From cberry@tajo.ucsd.edu  Mon Jun 18 22:10:28 2001
Received: from mailbox4.ucsd.edu (mailbox4.ucsd.edu [132.239.1.56])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id WAA14900
	for <r-bugs@biostat.ku.dk>; Mon, 18 Jun 2001 22:10:27 +0200 (MET DST)
Received: from smtp.ucsd.edu (smtp.ucsd.edu [132.239.1.49])
	by mailbox4.ucsd.edu (8.11.3/8.11.0) with ESMTP id f5IKAKq28590
	for <r-bugs@biostat.ku.dk>; Mon, 18 Jun 2001 13:10:20 -0700 (PDT)
Received: from tajo.ucsd.edu (tajo.ucsd.edu [132.239.99.2])
	by smtp.ucsd.edu (8.9.3/8.9.3) with ESMTP id NAA24075
	for <r-bugs@biostat.ku.dk>; Mon, 18 Jun 2001 13:10:20 -0700 (PDT)
Received: by tajo.ucsd.edu (8.9.3+Sun/SMI-SVR4-UCSD.1)
	id NAA15110; Mon, 18 Jun 2001 13:13:46 -0700 (PDT)
Date: Mon, 18 Jun 2001 13:13:46 -0700 (PDT)
Message-Id: <200106182013.NAA15110@tajo.ucsd.edu>
From: "Charles C. Berry" <cberry@tajo.ucsd.edu>
To: r-bugs@biostat.ku.dk
Subject: "[.data.frame" allows un-named 3rd subscript


Since the Extract page has usage as:

     x[i, j, ... , drop=TRUE]

I would expect that 'drop=' would need to be given to the third 'subscript'

> diag(4)[ , 4 , 4 ] # Forgot 'drop=' or added extra ','
Error in diag(4)[, 4, 4] : incorrect number of dimensions
> 
> as.data.frame( diag(4) )[ , 4 , 4 ] # should return error, right?
[1] 0 0 0 1


Also note:

> diag(4)[ ,  , drop=TRUE ]
     [,1] [,2] [,3] [,4]
[1,]    1    0    0    0
[2,]    0    1    0    0
[3,]    0    0    1    0
[4,]    0    0    0    1
> 
> as.data.frame( diag(4) )[ ,  , drop=TRUE ]
Error in [.data.frame(as.data.frame(diag(4)), , , drop = 4) : 
	Argument "j" is missing, with no default
> 

--please do not edit the information below--

Version:
 platform = sparc-sun-solaris2.7
 arch = sparc
 os = solaris2.7
 system = sparc, solaris2.7
 status = 
 major = 1
 minor = 2.3
 year = 2001
 month = 04
 day = 26
 language = R

Search Path:
 .GlobalEnv, package:nls, package:nlme, package:ctest, Autoloads, package:base



Chuck

-- 
Charles C. Berry                        (858) 534-2098 
                                         Dept of Family/Preventive Medicine
E mailto:cberry@tajo.ucsd.edu	         UC San Diego
http://hacuna.ucsd.edu/members/ccb.html  La Jolla, San Diego 92093-0645

 

==> 989.reply.1 <==
From pd@blueberry.kubism.ku.dk  Mon Jun 18 22:35:29 2001
Received: from blueberry.kubism.ku.dk (blueberry [130.225.108.193])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id WAA15008;
	Mon, 18 Jun 2001 22:35:28 +0200 (MET DST)
Received: (from pd@localhost)
	by blueberry.kubism.ku.dk (8.9.3/8.9.3) id WAA31163;
	Mon, 18 Jun 2001 22:38:38 +0200
Sender: pd@pubhealth.ku.dk
To: cberry@tajo.ucsd.edu
Cc: r-devel@stat.math.ethz.ch, R-bugs@biostat.ku.dk
Subject: Re: [Rd] "[.data.frame" allows un-named 3rd subscript (PR#989)
References: <200106182010.WAA14911@pubhealth.ku.dk>
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 18 Jun 2001 22:38:38 +0200
In-Reply-To: cberry@tajo.ucsd.edu's message of "Mon, 18 Jun 2001 22:10:29 +0200 (MET DST)"
Message-ID: <x27ky9o75d.fsf@blueberry.kubism.ku.dk>
Lines: 34
X-Mailer: Gnus v5.7/Emacs 20.7
Mime-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: 7bit

cberry@tajo.ucsd.edu writes:

> Since the Extract page has usage as:
> 
>      x[i, j, ... , drop=TRUE]
> 
> I would expect that 'drop=' would need to be given to the third 'subscript'
> 
> > diag(4)[ , 4 , 4 ] # Forgot 'drop=' or added extra ','
> Error in diag(4)[, 4, 4] : incorrect number of dimensions
> > 
> > as.data.frame( diag(4) )[ , 4 , 4 ] # should return error, right?
> [1] 0 0 0 1
> 

And the bug is?

The generic indexing should really be x[...,drop=T].  Methods for
specific classes can specialize to a particular number of indices if
they want to, which is what is happening here

> get ("[.data.frame")
function (x, i, j, drop = if (missing(i)) TRUE else length(cols) == 
    1) 

one could fairly easily slip in a "..." argument after "j", and then
inside the function give an error if "..." is not empty, but what
would the point be?

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

==> 989.followup.1 <==
From cberry@tajo.ucsd.edu  Mon Jun 18 23:06:32 2001
Received: from mailbox3.ucsd.edu (mailbox3.ucsd.edu [132.239.1.55])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id XAA15201;
	Mon, 18 Jun 2001 23:06:31 +0200 (MET DST)
Received: from smtp.ucsd.edu (smtp.ucsd.edu [132.239.1.49])
	by mailbox3.ucsd.edu (8.10.1/8.11.0) with ESMTP id f5IL6PR16820;
	Mon, 18 Jun 2001 14:06:25 -0700 (PDT)
Received: from tajo.ucsd.edu (tajo.ucsd.edu [132.239.99.2])
	by smtp.ucsd.edu (8.9.3/8.9.3) with ESMTP id OAA06469;
	Mon, 18 Jun 2001 14:06:24 -0700 (PDT)
Received: from localhost by tajo.ucsd.edu (8.9.3+Sun/SMI-SVR4-UCSD.1)
	id OAA15733; Mon, 18 Jun 2001 14:09:49 -0700 (PDT)
Date: Mon, 18 Jun 2001 14:09:49 -0700 (PDT)
From: "Charles C. Berry" <cberry@tajo.ucsd.edu>
To: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
cc: r-devel@stat.math.ethz.ch, R-bugs@biostat.ku.dk
Subject: Re: [Rd] "[.data.frame" allows un-named 3rd subscript (PR#989)
In-Reply-To: <x27ky9o75d.fsf@blueberry.kubism.ku.dk>
Message-ID: <Pine.GSO.4.05.10106181348090.12737-100000@tajo.ucsd.edu>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII


See below.

On 18 Jun 2001, Peter Dalgaard BSA wrote:

> cberry@tajo.ucsd.edu writes:
> 
> > Since the Extract page has usage as:
> > 
> >      x[i, j, ... , drop=TRUE]
> > 
> > I would expect that 'drop=' would need to be given to the third 'subscript'
> > 
> > > diag(4)[ , 4 , 4 ] # Forgot 'drop=' or added extra ','
> > Error in diag(4)[, 4, 4] : incorrect number of dimensions
> > > 
> > > as.data.frame( diag(4) )[ , 4 , 4 ] # should return error, right?
> > [1] 0 0 0 1
> > 
> 
> And the bug is?
> 
> The generic indexing should really be x[...,drop=T].  Methods for
> specific classes can specialize to a particular number of indices if
> they want to, which is what is happening here
> 
> > get ("[.data.frame")
> function (x, i, j, drop = if (missing(i)) TRUE else length(cols) == 
>     1) 
> 
> one could fairly easily slip in a "..." argument after "j", and then
> inside the function give an error if "..." is not empty, but what
> would the point be?
> 

The point would be to catch errors like this

for ( i in 1:2 ) foo[i,2] <- my.fun( bar[,i,2] , another.arg )

that might otherwise pass unnoticed when 'bar' is a data.frame.


Charles C. Berry                        (858) 534-2098 
                                         Dept of Family/Preventive Medicine
E mailto:cberry@tajo.ucsd.edu	         UC San Diego
http://hacuna.ucsd.edu/members/ccb.html  La Jolla, San Diego 92093-0645

 


==> 989.audit <==
Tue Jun 19 09:07:09 2001	ripley	moved from incoming to Low-level
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

Directory:  Macintosh

* PR# 1015 *
Subject: R 1.3  on iMacs
From: Con Savas <con@maths.uwa.edu.au>
Date: Fri, 06 Jul 2001 16:40:05 +0800
-- no notes --
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 1015 <==
From postmaster@franz.stat.wisc.edu  Fri Jul  6 10:39:02 2001
Received: from franz.stat.wisc.edu (franz.stat.wisc.edu [128.105.174.95])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id KAA14331
	for <r-bugs@biostat.ku.dk>; Fri, 6 Jul 2001 10:39:02 +0200 (MET DST)
Received: from madvax.maths.uwa.edu.au (really [130.95.16.1]) by franz.stat.wisc.edu
	via smail with esmtp
	id <m15IR8Z-000J9fC@franz.stat.wisc.edu> (Debian Smail3.2.0.111)
	for <r-bugs@r-project.org>; Fri, 6 Jul 2001 03:38:55 -0500 (CDT) 
Received: from maths.uwa.edu.au (con.maths.uwa.edu.au [130.95.48.140])
	by madvax.maths.uwa.edu.au (8.8.8/8.8.5) with ESMTP id QAA11418;
	Fri, 6 Jul 2001 16:38:46 +0800 (WST)
Message-ID: <3B457966.2E29EB31@maths.uwa.edu.au>
Date: Fri, 06 Jul 2001 16:40:05 +0800
From: Con Savas <con@maths.uwa.edu.au>
X-Mailer: Mozilla 4.77 (Macintosh; U; PPC)
X-Accept-Language: en
MIME-Version: 1.0
To: r-bugs@r-project.org
CC: martin@maths.uwa.edu.au
Subject: R 1.3  on iMacs
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit

Hi,

I have been trying to run R 1.3 on a Lab of iMacs running system 9.0. It
starts up fine but it wont accept any input from the keyboard. I can
select commands and use the copy and paste menu option and this works.

It works fine on my G4 running 9.04.

Apart from having to install the latest carbonlib, is there anything
else needed to get it running on system 9.0 on iMacs?

If you don't know of any problem then I will try to install 9.04 on one
of these machines and see if that helps.

Thanks for any feedback.
_____________________________________________________________________
Con Savas                                 email: con@maths.uwa.edu.au
Programmer                               http://maths.uwa.edu.au/~con
Department of Mathematics and Statistics                           
The University of Western Australia            Phone + 61 8 9380 3184
35 Stirling Hwy Crawley 6009                   Fax   + 61 8 9380 1028

He shall see the travail of his soul, and be satisfied:     Isaiah 53
_____________________________________________________________________

==> 1015.audit <==
Fri Aug  3 11:36:17 2001	ripley	moved from incoming to Macintosh
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
* PR# 1023 *
Subject: data function
From: wild@stat.auckland.ac.nz
Date: Fri, 13 Jul 2001 02:48:53 +0200 (MET DST)
--Mac-specific
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 1023 <==
From wild@stat.auckland.ac.nz  Fri Jul 13 02:48:54 2001
Received: from blueberry.kubism.ku.dk (blueberry [130.225.108.193])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id CAA26603
	for <R-bugs@biostat.ku.dk>; Fri, 13 Jul 2001 02:48:53 +0200 (MET DST)
Date: Fri, 13 Jul 2001 02:48:53 +0200 (MET DST)
From: wild@stat.auckland.ac.nz
Message-Id: <200107130048.CAA26603@pubhealth.ku.dk>
To: R-bugs@biostat.ku.dk
Subject: data function

Full_Name: Chris Wild
Version: 1.3
OS: MacOS8.6
Submission from: (NULL) (130.216.1.6)


data() is failing to read some files.
I cannot read in:
    stanford2.rda from survival library
    veteran.rda from survival library
    gehan.rda from MASS library

Problem does not exist in Windows version

==> 1023.audit <==
Fri Aug  3 11:37:12 2001	ripley	changed notes
Fri Aug  3 11:37:12 2001	ripley	foobar
Fri Aug  3 11:37:12 2001	ripley	moved from incoming to Macintosh
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

Directory:  Misc

none

Directory:  Models

* PR# 1003 *
Subject: interaction() -- problem with drop
From: Matthew Wiener <mcw@ln.nimh.nih.gov>
Date: Thu, 28 Jun 2001 20:14:47 -0400 (EDT)
-- no notes --
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 1003 <==
From mcw@ln.nimh.nih.gov  Fri Jun 29 02:30:42 2001
Received: from stat.math.ethz.ch (daemon@hypatia.ethz.ch [129.132.58.23])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id CAA22327
	for <R-bugs@biostat.ku.dk>; Fri, 29 Jun 2001 02:30:41 +0200 (MET DST)
Received: (from daemon@localhost)
	by stat.math.ethz.ch (8.9.1/8.9.1) id CAA26396
	for <r-bugs@hypatia.math.ethz.ch>; Fri, 29 Jun 2001 02:30:34 +0200 (MET DST)
Received: from ln.nimh.nih.gov(156.40.248.2)
 via SMTP by hypatia, id smtpdAAAa006SF; Fri Jun 29 02:30:25 2001
Received: from localhost (mcw@localhost)
	by ln.nimh.nih.gov (8.11.0/8.11.0) with ESMTP id f5T0ElK17536
	for <r-bugs@lists.r-project.org>; Thu, 28 Jun 2001 20:14:47 -0400
Date: Thu, 28 Jun 2001 20:14:47 -0400 (EDT)
From: Matthew Wiener <mcw@ln.nimh.nih.gov>
To: r-bugs@stat.math.ethz.ch
Subject: interaction() -- problem with drop
Message-ID: <Pine.LNX.4.21.0106282014230.17513-100000@ln.nimh.nih.gov>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII


(R-1.3.0 on linux, alpha and intel; also tested on R-1.1.1 on irix.)

Below is a program that creates some random data (n, x, and y), creates a
factor out of x and y and then creates a factor z out of their interaction
(corresponding, with the default nf = 2, to quadrants, which is how I came
upon this).  It then runs an analysis of variance.

f.test.problem <- 
function(n = 100, nf = 2){

  t1 <- data.frame(n = rnorm(n), x = rnorm(n), y = rnorm(n))

  t1$x <- cut(t1$x, nf, labels = 1:nf)
  t1$y <- cut(t1$y, nf, labels = 1:nf)
  t1$z <- interaction(t1$x, t1$y, drop = F)
  
  print(table(t1$x))
  print(table(t1$y))
  print(table(t1$z))
  
  summary(aov(n ~ z, data = t1))
}

Here's the problem:  if none of the nf * nf levels of z is empty -- that
is, if there is at least one trial taking on each value -- I get the error
"Error in model.matrix(t, data) : invalid variable type".

traceback() gives:

8: model.matrix.default(mt, mf, contrasts)
7: model.matrix(mt, mf, contrasts)
6: lm(formula = n ~ z, data = t1, singular.ok = TRUE)
5: eval(expr, envir, enclos)
4: eval(lmcall, parent.frame())
3: aov(n ~ z, data = t1)
2: summary(aov(n ~ z, data = t1))
1: f.test.problem(nf = 3)


However, if one of the levels of z is empty (which I'm checking using
table), then the analysis of variance runs!  (Easy to see if you use nf =
4 or even 3; it won't take long to get some examples that run and some
that don't.)

Creating n and z outside of a dataframe and then running aov(n~z) doesn't
help.

The problem does not arise if I do aov(n ~ x, data = t1) or 
aov(n ~ y, data = t1) -- the analysis of variance runs whether there are
empty categories or not.


Finally:  if I specify drop = T in the interaction call:
t1$z <- interaction(t1$x, t1$y, drop = T)
then the analysis works whether a factor actually gets dropped or
not.  That is, even when no factor is empty (and so I got an error with
drop = F), everything works.

So the problem seems to arise from something going on in interaction.  I'm
not sure what, and I'm sure someone else will see the problem faster than
I will.

Apologies in advance if I'm being dense and this is really how things
ought to work.  If not, I'll submit a formal bug report.

Matt Wiener



==> 1003.audit <==
Sat Jun 30 08:58:24 2001	ripley	foobar
Sat Jun 30 08:58:24 2001	ripley	moved from incoming to Models
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

Directory:  Startup

none

Directory:  System-specific

* PR# 848 *
Subject: X11 device doesn't handle destroy events correcly
From: Thomas Vogels <tov@ece.cmu.edu>
Date: 13 Feb 2001 17:40:46 -0500
-- no notes --
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 848 <==
From postmaster@franz.stat.wisc.edu  Tue Feb 13 23:40:36 2001
Received: from franz.stat.wisc.edu (franz.stat.wisc.edu [128.105.174.95])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id XAA10552
	for <r-bugs@biostat.ku.dk>; Tue, 13 Feb 2001 23:40:36 +0100 (MET)
Received: from infiniti.ece.cmu.edu (really [128.2.133.84]) by franz.stat.wisc.edu
	via in.smtpd with esmtp
	id <m14So7r-000J2mC@franz.stat.wisc.edu> (Debian Smail3.2.0.102)
	for <r-bugs@r-project.org>; Tue, 13 Feb 2001 16:40:47 -0600 (CST) 
Received: (from tov@localhost) by infiniti.ece.cmu.edu (AIX4.3/UCB 8.8.8/8.8.8) id RAA70658; Tue, 13 Feb 2001 17:40:46 -0500
X-Authentication-Warning: infiniti.ece.cmu.edu: tov set sender to tov@ece.cmu.edu using -f
Sender: tov@infiniti.ece.cmu.edu
To: r-bugs@r-project.org
Cc: Thomas Vogels <tov@ece.cmu.edu>
Subject: X11 device doesn't handle destroy events correcly
Reply-To: Thomas Vogels <tov@ece.cmu.edu>
X-URI: http://www.ece.cmu.edu/~tov
From: Thomas Vogels <tov@ece.cmu.edu>
Date: 13 Feb 2001 17:40:46 -0500
Message-ID: <px3ddi6wb5.fsf@infiniti.ece.cmu.edu>
Lines: 258
User-Agent: Gnus/5.0807 (Gnus v5.8.7) Emacs/20.7
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii


Hi, there are two problems in devX11.c.  The one is an undocumented
nuisance and the other isn't a bug until you try to embed an X11
device in another window (think tktoplevel() in tcltk package...).

Let's take a look at locator() first: Assuming you call locator() with
a current X11 device, this call is handled in X11_Locator
(src/unix/X11/devX11.c).  When you have one window open and call
locator, you have three options to quit the locator: click Button 1
(to locate), click Button 2 (to abort), or destroy the window.  The
later results in the error message: "Error in locator(1) : No graphics
device is active". That's OK, sort of.

This gets problematic when you open two windows:
> x11()  # assume that's device 2
> x11()  # assume that's device 3
> plot(1)
> locator(1)  # with device 3 == dev.cur()!

When you now destroy device 3 (where locator expects the click), you have
*no alternative but to close _all_ windows* to abort the locator.  The
locator continues to wait for mouse clicks in device 3 where of course
no further clicks can come from.  That's the nuisance part.

The second problem is that the device may try to plot() into a
non-existant window.  Assume that the window was destroyed by some
other part of the program.  The device (at some point in the future)
will receive a DestroyNotify event that handleEvent ignores.
Blissfully!  *No KillDevice is called* when the window is destroyed by
something other than the WM_DELETE_WINDOW mechanism!  This happens
when you embed the X11 device into another window/application.  For
starters, the device no longer receives WM_DELETE_WINDOW client
messages.  But it does receive a DestroyNotify event when the parent
(the container window) is destroyed.  HandleEvent should, well
_handle_ this _event_.

The patch below is a _suggestion_ how to solve both problems.  It is
against the current r-devel, 1.3, as of 2/13.  I believe this behavior
exists in version 1.2 as well and can be solved there the same way.
The patch is just meant as a convenient and concise way to describe
my suggestion.  I'd greatly appreciate feedback or other ideas!

Implementation:

-- the variable inclose is now in the device specific structure (why
   was it global?)  After the window is mapped, inclose is TRUE until
   the window is destroyed explicitly or a DestroyNotify event has been
   received.
-- the deviceSpecific pointer is set to NULL after the memory has been
   freed. This (side?) effect is used in X11_Locator to detect the
   closing of the current device  which _must_ lead to an error.
-- the if statement to handle events of type DestroyEvent is added to 
   handleEvent
-- when the user closes the device (dev.off()), the window is
   destroyed in X11_Close
-- when the user pushes the close button in the window frame, the
   window is destroyed in handleEvent and X11_Close is initiated
   (the WM_DELETE_WINDOW mechanism already in place.)
-- when the window is destroyed for another reason (e.g. the parent
   being destroyed), it is not destroyed again but X11_Close is still
   initiated.

Regards,
  -tom


--------------------------------------------------
*** devX11.c_orig	Tue Feb 13 15:32:24 2001
--- devX11.c	Tue Feb 13 17:24:04 2001
***************
*** 116,121 ****
--- 116,122 ----
      FILE *fp;				/* file for a bitmap device */
      int quality;			/* JPEG quality */
  
+     Rboolean inclose;                   /* TRUE if window is being closed */
  } x11Desc;
  
  
***************
*** 145,151 ****
  static Atom _XA_WM_PROTOCOLS, protocol;
  
  static Rboolean displayOpen = FALSE;
- static Rboolean inclose = FALSE;
  static int numX11Devices = 0;
  
  	/********************************************************/
--- 146,151 ----
***************
*** 619,632 ****
  	xd->windowHeight = event.xconfigure.height;
  	xd->resize = 1;
      }
      else if ((event.type == ClientMessage) &&
! 	     (event.xclient.message_type == _XA_WM_PROTOCOLS))
! 	if (!inclose && event.xclient.data.l[0] == protocol) {
! 	    XFindContext(display, event.xclient.window,
  			 devPtrContext, &temp);
  	    dd = (DevDesc *) temp;
! 	    KillDevice(dd);
  	}
  }
  
  static void R_ProcessEvents(void *data)
--- 619,652 ----
  	xd->windowHeight = event.xconfigure.height;
  	xd->resize = 1;
      }
+     else if (event.type == DestroyNotify) {
+         /* The window is being destroyed, kill the device, too. */
+         XFindContext(display, event.xdestroywindow.window,
+                      devPtrContext, &temp);
+         dd = (DevDesc *) temp;
+         xd = (x11Desc *) dd->deviceSpecific;
+         if (!xd->inclose) {
+             xd->inclose = TRUE;
+             KillDevice(dd);
+         }
+     }
      else if ((event.type == ClientMessage) &&
! 	     (event.xclient.message_type == _XA_WM_PROTOCOLS)) {
! 	if (event.xclient.data.l[0] == protocol) {
!             XFindContext(display, event.xclient.window,
  			 devPtrContext, &temp);
  	    dd = (DevDesc *) temp;
! 	    xd = (x11Desc *) dd->deviceSpecific;
! 	    if (!xd->inclose) {
! 		/* Dispatch destroy only once */
! 		xd->inclose = TRUE;
! 		XDestroyWindow(display, xd->window);
! 		XSync (display, 0);
! 		KillDevice(dd);
! 	    }
  	}
+     }
+ 
  }
  
  static void R_ProcessEvents(void *data)
***************
*** 1208,1213 ****
--- 1228,1234 ----
  		     ExposureMask | ButtonPressMask | StructureNotifyMask);
  	XMapWindow(display, xd->window);
  	XSync(display, 0);
+         xd->inclose = FALSE;
  
  	/* Gobble expose events */
  
***************
*** 1464,1476 ****
      x11Desc *xd = (x11Desc *) dd->deviceSpecific;
  
      if (xd->type == WINDOW) {
! 	/* process pending events */
! 	/* set block on destroy events */
! 	inclose = TRUE;
  	R_ProcessEvents((void*) NULL);
  
  	XFreeCursor(display, xd->gcursor);
- 	XDestroyWindow(display, xd->window);
  	XSync(display, 0);
      } else {
  	if (xd->npages && xd->type != XIMAGE) {
--- 1485,1506 ----
      x11Desc *xd = (x11Desc *) dd->deviceSpecific;
  
      if (xd->type == WINDOW) {
! 	/* There are three reasons to be here: */
! 	/* 1) The user clicked on a button in the window frame */
! 	/*    and we received a DELETE_WINDOW from the wm, */
! 	/* 2) Somebody destroyed our window directly, or if */
! 	/*    embedded, the parent is being destroyed, and so */
! 	/*    we got a DestroyNotify event, too, */
! 	/* 3) The user used dev.off() to get rid of us. Bye. */
! 
! 	if (!xd->inclose) {
! 	    xd->inclose = TRUE;
! 	    XDestroyWindow(display, xd->window);
! 	}
! 	/* process pending events (esp. reap events for this window) */
  	R_ProcessEvents((void*) NULL);
  
  	XFreeCursor(display, xd->gcursor);
  	XSync(display, 0);
      } else {
  	if (xd->npages && xd->type != XIMAGE) {
***************
*** 1517,1523 ****
      }
  
      free(xd);
!     inclose = FALSE;
  }
  
  	/********************************************************/
--- 1547,1553 ----
      }
  
      free(xd);
!     dd->deviceSpecific = NULL;
  }
  
  	/********************************************************/
***************
*** 1858,1866 ****
  		else
  		    done = 2;
  	    }
! 	}
! 	else
  	    handleEvent(event);
      }
      /* if it was a Button1 succeed, otherwise fail */
      return (done == 1);
--- 1888,1901 ----
  		else
  		    done = 2;
  	    }
! 	} else {
  	    handleEvent(event);
+ 	    if (!dd->deviceSpecific) {
+ 		/* Allow new active window to redraw */
+ 		R_ProcessEvents((void*)NULL);
+ 		error ("Device closed while waiting for input.\n");
+ 	    }
+         }
      }
      /* if it was a Button1 succeed, otherwise fail */
      return (done == 1);
--------------------------------------------------




--please do not edit the information below--

Version:
 platform = i686-pc-linux-gnu
 arch = i686
 os = linux-gnu
 system = i686, linux-gnu
 status = Under development (unstable)
 major = 1
 minor = 3.0
 year = 2001
 month = 02
 day = 12
 language = R

Search Path:
 .GlobalEnv, package:ctest, Autoloads, package:base


-- 
mailto:tov@ece.cmu.edu (Tom Vogels)   Tel: (412) 268-6638   FAX: -3204


==> 848.followup.1 <==
From pd@biostat.ku.dk  Wed Feb 14 01:10:35 2001
Received: from biostat.ku.dk (blueberry [130.225.108.193])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id BAA10968;
	Wed, 14 Feb 2001 01:10:34 +0100 (MET)
Received: (from pd@localhost)
	by biostat.ku.dk (8.9.3/8.9.3) id BAA02066;
	Wed, 14 Feb 2001 01:11:56 +0100
Sender: pd@blueberry.kubism.ku.dk
To: tov@ece.cmu.edu
Cc: r-devel@stat.math.ethz.ch, R-bugs@biostat.ku.dk
Subject: Re: [Rd] X11 device doesn't handle destroy events correcly (PR#848)
References: <200102132240.XAA10562@pubhealth.ku.dk>
From: Peter Dalgaard BSA <p.dalgaard@pubhealth.ku.dk>
Date: 14 Feb 2001 01:11:56 +0100
In-Reply-To: tov@ece.cmu.edu's message of "Tue, 13 Feb 2001 23:40:37 +0100 (MET)"
Message-ID: <x2elx2yvg3.fsf@blueberry.kubism.ku.dk>
Lines: 25
X-Mailer: Gnus v5.7/Emacs 20.7
Mime-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: 7bit

tov@ece.cmu.edu writes:


> Blissfully!  *No KillDevice is called* when the window is destroyed by
> something other than the WM_DELETE_WINDOW mechanism!  This happens
> when you embed the X11 device into another window/application.  For
> starters, the device no longer receives WM_DELETE_WINDOW client
> messages.  But it does receive a DestroyNotify event when the parent
> (the container window) is destroyed.  HandleEvent should, well
> _handle_ this _event_.

Heh. Quite probably, this is also the source of the FVWM trouble
reported earlier although that triggered an infinite loop which should
probably be guarded against by other means as well. 

Thanks for filing this (good to have as bug report so that we don't
forget - it's the sort of thing that often has to wait until someone
has a clear enough mind and sufficient stamina to try and get it
right.)

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

==> 848.audit <==
Sat Feb 17 11:44:41 2001	ripley	moved from incoming to System-specific
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
* PR# 964 *
Subject: R-1.2.3 OSF precompiled binary doesn't run under DU4.0D
From: paul@gromit.dlib.vt.edu
Date: Fri, 1 Jun 2001 17:47:10 +0200 (MET DST)
--Builder needs to avoid -ldnet in distributed binaries..
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 964 <==
From paul@gromit.dlib.vt.edu  Fri Jun  1 17:47:11 2001
Received: from blueberry.kubism.ku.dk (blueberry [130.225.108.193])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id RAA03063
	for <R-bugs@biostat.ku.dk>; Fri, 1 Jun 2001 17:47:10 +0200 (MET DST)
Date: Fri, 1 Jun 2001 17:47:10 +0200 (MET DST)
From: paul@gromit.dlib.vt.edu
Message-Id: <200106011547.RAA03063@pubhealth.ku.dk>
To: R-bugs@biostat.ku.dk
Subject: R-1.2.3 OSF precompiled binary doesn't run under DU4.0D

Full_Name: Paul Mather
Version: 1.2.3
OS: Digital Unix 4.0D
Submission from: (NULL) (128.173.35.237)


The precompiled binary for "osf4.0" distributed via CRAN does not run under
Digital Unix 4.0.  The error given is:

Fatal error: The X11 shared library could not be loaded.
  The error was dlopen: cannot load /usr/local/lib/R/bin/R_X11.so

Subsequent investigation actually reveals that the R_X11.so was linked against
libdnet.so, which is not present on standard Digital Unix 4.0D systems.  The
error is triggered by an inability to load the libdnet.so shared library.

As I understand it, libdnet provides DECnet support.  Digital Unix 4.0D systems
ship with libdnet_stub.so, which is a library of empty stub functions.

Is it possible to provide a version of R_X11.so linked against libdnet_stub.so?
Aside from this problem, the precompiled binary appears to work (i.e.,
"R -g none" runs).

Cheers,

Paul.

==> 964.audit <==
Mon Jun  4 09:27:52 2001	ripley	moved from incoming to System-specific
Thu Jun 21 08:48:15 2001	ripley	changed notes
Thu Jun 21 08:48:15 2001	ripley	foobar
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
* PR# 1002 *
Subject: core dump running modreg-Ex.R
From: WhiteG@dfo-mpo.gc.ca
Date: Thu, 28 Jun 2001 19:14:18 +0200 (MET DST)
--Only reported on SGI, solved by removing optimization.
--Needs debugging there.
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 1002 <==
From WhiteG@dfo-mpo.gc.ca  Thu Jun 28 19:14:18 2001
Received: from blueberry.kubism.ku.dk (blueberry [130.225.108.193])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id TAA20611
	for <R-bugs@biostat.ku.dk>; Thu, 28 Jun 2001 19:14:18 +0200 (MET DST)
Date: Thu, 28 Jun 2001 19:14:18 +0200 (MET DST)
From: WhiteG@dfo-mpo.gc.ca
Message-Id: <200106281714.TAA20611@pubhealth.ku.dk>
To: R-bugs@biostat.ku.dk
Subject: core dump running modreg-Ex.R

Full_Name: George N. White III
Version: R-1.3.0 
OS: Irix 6.5
Submission from: (NULL) (142.176.61.253)


R-1.3.0 was built on Irix 6.5 using gcc and MIPSPro f90.  This combination has
worked for previous versions, in particular R-1.2.3.

$ cd test/Examples
$ ../../bin/R --vanilla < modreg-Ex.R > modreg-Ex.Rout

This worked in R-1.2.3.  It looks like there were a number 
of cosmetic changes to the modreg Fortran sources since R-1.2.3. 
SGI MIPSPro f90 was used to compile modreg, e.g.:

   f90 -OPT:IEEE_NaN_inf=ON -KPIC -O2 -c sslvrg.f -o sslvrg.o

$ dbx ../../bin/R.bin
dbx version 7.3 MR 55458_Apr30_MR Apr 30 1999 13:44:41
Core from signal SIGBUS: Bus error
(dbx) where
>  0 sslvrg(0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x7ffdaa38)
["/disk2/gwhite/src/R-1.3.0/src/library/modreg/src/sslvrg.f":94, 0x5fceff54]
   1 sbart(0xd, 0x7ffcebc8, 0x7ffdab20, 0x7ffdf940, 0x7ffe4760, 0x5fd058dc,
0x10cdb9a8, 0x7ffdaa38)
["/disk2/gwhite/src/R-1.3.0/src/library/modreg/src/sbart.f":204, 0x5fcee388]
   2 qsbart(0xd, 0x7ffcf3f8, 0x7ffcf3d8, 0xb, 0x7ffce6c0, 0x4, 0x1, 0x2)
["/disk2/gwhite/src/R-1.3.0/src/library/modreg/src/qsbart.f":15, 0x5fcee140]
   3 bdrspline(0x10cdb9a8, 0x7ffd0df8, 0x10ce0a28, 0x7ffd5c18, 0x3, 0x10cd5ba0,
0x1, 0x2) ["/disk2/gwhite/src/R-1.3.0/src/library/modreg/src/ppr.f":1261,
0x5fcedae0]
   [...]

Regenerating modreg.so using g77 (e.g., $ gmake FC=g77 ALL_FFLAGS='-O2 -g')
did not fix the problem (so it may not be a compiler bug):

$ dbx ../../bin/R.bin                                 
dbx version 7.3 MR 55458_Apr30_MR Apr 30 1999 13:44:41
Core from signal SIGBUS: Bus error
(dbx) where
>  0 sslvrg_() ["/usr/people/gwhite/src/R-1.3.0/src/library/modreg/src/sslvrg.f":94,
0x5fcf3ba0]
   1 sbart_() ["/usr/people/gwhite/src/R-1.3.0/src/library/modreg/src/sbart.f":204,
0x5fcf25c8]
   2 qsbart_() ["/usr/people/gwhite/src/R-1.3.0/src/library/modreg/src/qsbart.f":15,
0x5fcf21c8]
   3 bdrspline_() ["/usr/people/gwhite/src/R-1.3.0/src/library/modreg/src/ppr.f":1261,
0x5fcf1ba0]





==> 1002.followup.1 <==
From ripley@stats.ox.ac.uk  Thu Jun 28 19:30:58 2001
Received: from toucan.stats.ox.ac.uk (toucan.stats.ox.ac.uk [163.1.20.20])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id TAA20684
	for <R-bugs@biostat.ku.dk>; Thu, 28 Jun 2001 19:30:58 +0200 (MET DST)
Received: from max166.public.ox.ac.uk (max166.public.ox.ac.uk [192.76.27.166])
	by toucan.stats.ox.ac.uk (8.9.0/8.9.0) with ESMTP id SAA07791;
	Thu, 28 Jun 2001 18:30:51 +0100 (BST)
Date: Thu, 28 Jun 2001 18:31:21 +0100 (GMT Daylight Time)
From: Prof Brian D Ripley <ripley@stats.ox.ac.uk>
To: <WhiteG@dfo-mpo.gc.ca>
cc: <R-bugs@biostat.ku.dk>
Subject: Re: [Rd] core dump running modreg-Ex.R (PR#1002)
In-Reply-To: <200106281714.TAA20621@pubhealth.ku.dk>
Message-ID: <Pine.WNT.4.31.0106281828080.90-100000@tern.stats>
Sender: ripley@stats.ox.ac.uk
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII

On Thu, 28 Jun 2001 WhiteG@dfo-mpo.gc.ca wrote:

> Full_Name: George N. White III
> Version: R-1.3.0
> OS: Irix 6.5
> Submission from: (NULL) (142.176.61.253)
>
>
> R-1.3.0 was built on Irix 6.5 using gcc and MIPSPro f90.  This combination has
> worked for previous versions, in particular R-1.2.3.
>
> $ cd test/Examples
> $ ../../bin/R --vanilla < modreg-Ex.R > modreg-Ex.Rout
>
> This worked in R-1.2.3.  It looks like there were a number
> of cosmetic changes to the modreg Fortran sources since R-1.2.3.

We had a private report of this on Iris 6.5, and the resolution was that it
worked with optimization off.

This is the only platform reporting a problem, so we need someone to debug
it there.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


==> 1002.audit <==
Sat Jun 30 08:56:09 2001	ripley	moved from incoming to System-specific
Sat Jun 30 08:59:20 2001	ripley	changed notes
Sat Jun 30 08:59:20 2001	ripley	foobar
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
* PR# 1020 *
Subject: .Call and Mandrake 8.0
From: lcottret@yahoo.fr
Date: Wed, 11 Jul 2001 15:34:23 +0200 (MET DST)
--problem with symbol names only on Mandrake 8.0, not 7.2
--needs reply to follow-up
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 1020 <==
From lcottret@yahoo.fr  Wed Jul 11 15:34:24 2001
Received: from blueberry.kubism.ku.dk (blueberry [130.225.108.193])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id PAA16374
	for <R-bugs@biostat.ku.dk>; Wed, 11 Jul 2001 15:34:23 +0200 (MET DST)
Date: Wed, 11 Jul 2001 15:34:23 +0200 (MET DST)
From: lcottret@yahoo.fr
Message-Id: <200107111334.PAA16374@pubhealth.ku.dk>
To: R-bugs@biostat.ku.dk
Subject: .Call and Mandrake 8.0

Full_Name: Ludovic Cottret
Version: R 1.3.0
OS: Linux
Submission from: (NULL) (157.136.20.138)


I have a R function which call a C function by the instruction ".Call".
The first time I call the R function in a R session, it perfectly runs. But the
next 
times, R returns this error message :

Error in .Call("", bankpath, accn, indexpath, key, beg, end) :
        .Call function name not in load table

The function name has disappeared !!
This function well runs on Mandrake 7.2 but not in Mandrake 8.0. Why ?!?

Thanks for your answers...
PS : Excuse my poor english...




==> 1020.followup.1 <==
From duncan@jessie.research.bell-labs.com  Wed Jul 11 16:15:16 2001
Received: from crufty.research.bell-labs.com (crufty.research.bell-labs.com [204.178.16.49])
	by pubhealth.ku.dk (8.9.3/8.9.1) with SMTP id QAA16686
	for <R-bugs@biostat.ku.dk>; Wed, 11 Jul 2001 16:15:15 +0200 (MET DST)
Received: from scummy.research.bell-labs.com ([135.104.2.10]) by crufty; Wed Jul 11 10:10:04 EDT 2001
Received: from jessie.research.bell-labs.com ([135.104.13.5]) by scummy; Wed Jul 11 10:13:33 EDT 2001
Received: (from duncan@localhost)
	by jessie.research.bell-labs.com (8.9.1/8.9.1) id KAA02731;
	Wed, 11 Jul 2001 10:13:07 -0400 (EDT)
Date: Wed, 11 Jul 2001 10:13:07 -0400
From: Duncan Temple Lang <duncan@research.bell-labs.com>
To: lcottret@yahoo.fr
Cc: r-devel@stat.math.ethz.ch, R-bugs@biostat.ku.dk
Subject: Re: [Rd] .Call and Mandrake 8.0 (PR#1020)
Message-ID: <20010711101307.E24919@jessie.research.bell-labs.com>
Mail-Followup-To: lcottret@yahoo.fr, r-devel@stat.math.ethz.ch,
	R-bugs@biostat.ku.dk
References: <200107111334.PAA16384@pubhealth.ku.dk>
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Mailer: Mutt 1.0us
In-Reply-To: <200107111334.PAA16384@pubhealth.ku.dk>; from lcottret@yahoo.fr on Wed, Jul 11, 2001 at 03:34:25PM +0200

Hi Ludovic.

 There are at least two possible explanations for this behaviour.

  1)  There is a bug in the recently changed code in R to find 
     routines in C and Fortran libraries.

  2)  The routine that you are .Call()'ing is doing something
  that has confused the R internals and makes the next R commands
  not work, and potentially this is not reproducible.

If this is not proprietary or confidential code, you can send the C
code and instructions as to how to call it from R (that is, provide
simple values for the bankpath, accn, indexpath, key, beg and end
arguments), then I can see if the computations are potentially
writing over other values in memory.

Also, you can try a invoking a very simple .Call() routine 
many times to see if that displays the same failure. For example,
put the following C code in a file named simpleCall.c

#include "Rinternals.h"

SEXP
simpleCall() 
{
  static int count = 0;
  SEXP ans;

  PROTECT(ans = allocVector(INTSXP, 1));
  INTEGER(ans)[0] = count++;

  UNPROTECT(1);
  return(ans);
}

Then, compile this with 
  R CMD SHLIB simpleCall.c

and call it from R in the following way

 > dyn.load("simpleCall.so")
 > for(i in 1:10) { print(.Call("simpleCall")) }

If this works, it won't determine whether it is 1) or 2) (or any other
possible reason), but if it doesn't work, we will have a lot more
information.

 Thanks,
   Duncan


lcottret@yahoo.fr wrote:
> Full_Name: Ludovic Cottret
> Version: R 1.3.0
> OS: Linux
> Submission from: (NULL) (157.136.20.138)
> 
> 
> I have a R function which call a C function by the instruction ".Call".
> The first time I call the R function in a R session, it perfectly runs. But the
> next 
> times, R returns this error message :
> 
> Error in .Call("", bankpath, accn, indexpath, key, beg, end) :
>         .Call function name not in load table
> 
> The function name has disappeared !!
> This function well runs on Mandrake 7.2 but not in Mandrake 8.0. Why ?!?
> 
> Thanks for your answers...
> PS : Excuse my poor english...
> 
> 
> 
> 
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

-- 
_______________________________________________________________

Duncan Temple Lang                duncan@research.bell-labs.com
Bell Labs, Lucent Technologies    office: (908)582-3217
700 Mountain Avenue, Room 2C-259  fax:    (908)582-3340
Murray Hill, NJ  07974-2070       
         http://cm.bell-labs.com/stat/duncan

==> 1020.audit <==
Fri Aug  3 11:33:04 2001	ripley	changed notes
Fri Aug  3 11:33:04 2001	ripley	foobar
Fri Aug  3 11:33:04 2001	ripley	moved from incoming to System-specific
Tue Aug  7 08:37:20 2001	ripley	changed notes
Tue Aug  7 08:37:20 2001	ripley	foobar
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
* PR# 1026 *
Subject: make check failure on SGI-IRIX6.5
From: laurent@cbs.dtu.dk
Date: Mon, 16 Jul 2001 15:06:17 +0200 (MET DST)
-- no notes --
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 1026 <==
From laurent@cbs.dtu.dk  Mon Jul 16 15:06:17 2001
Received: from blueberry.kubism.ku.dk (blueberry [130.225.108.193])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id PAA13242
	for <R-bugs@biostat.ku.dk>; Mon, 16 Jul 2001 15:06:17 +0200 (MET DST)
Date: Mon, 16 Jul 2001 15:06:17 +0200 (MET DST)
From: laurent@cbs.dtu.dk
Message-Id: <200107161306.PAA13242@pubhealth.ku.dk>
To: R-bugs@biostat.ku.dk
Subject: make check failure on SGI-IRIX6.5

Full_Name: Laurent Gautier
Version: 1.3.0-patched version
OS: SGI's IRIX 6.5
Submission from: (NULL) (130.225.67.199)


Hello,


During the 'make check' step of the installation procedure, I had the following
error messages


> make test > rapportMakeTest
/bin/sh: /usr/local/bin//perl: arg list too long

----------
I've seen that already in my former life in the software industry.
It seems the SGI sh shell is rather more limitated by the length
of arg lists than it's linux conterpart (I do not know about the other OSs).

----------
>gmake[3]: *** [modreg-Ex.Rout] Bus error (core dumped)
gmake[3]: *** Deleting file `modreg-Ex.Rout'
gmake[2]: *** [test-Examples] Error 2
gmake[1]: *** [test-Examples] Error 2
gmake: *** [test-all-basics] Error 1
----------
I cannot (or rather I do not dare) make any hypothesis about this one...



Cheers,






Laurent

==> 1026.audit <==
Fri Aug  3 11:30:25 2001	ripley	moved from incoming to System-specific
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

Directory:  TooMuchAtOnce

none

Directory:  Windows

none

Directory:  incoming

* PR# 1051 *
Subject:      erappin' - daily morning update 8-13-01
From: eminidaytrading <erap@eminidaytrading.com>
Date:         Mon, 13 Aug 2001 09:18:54 -0400
-- no notes --
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 1051 <==
From postmaster@franz.stat.wisc.edu  Mon Aug 13 15:32:06 2001
Received: from franz.stat.wisc.edu (root@franz.stat.wisc.edu [128.105.174.95])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id PAA13975
	for <r-bugs@biostat.ku.dk>; Mon, 13 Aug 2001 15:32:04 +0200 (MET DST)
Received: from mail.eminidaytrading.com (really [66.12.212.91]) by franz.stat.wisc.edu
	via smail with esmtp
	id <m15WHny-000JOCC@franz.stat.wisc.edu> (Debian Smail3.2.0.111)
	for <r-bugs@R-PROJECT.ORG>; Mon, 13 Aug 2001 08:30:54 -0500 (CDT) 
Received: from mail.eminidaytrading.com (mail.eminidaytrading.com [66.12.212.91])
	by mail.eminidaytrading.com (8.11.2/8.8.7) with ESMTP id f7DD9LS21100;
	Mon, 13 Aug 2001 09:09:21 -0400
Received: from MAIL.EMINIDAYTRADING.COM by MAIL.EMINIDAYTRADING.COM
          (LISTSERV-TCP/IP release 1.8d) with spool id 0036 for
          ERAPPERS@MAIL.EMINIDAYTRADING.COM; Mon, 13 Aug 2001 09:09:05 -0400
Approved-By: erap@EMINIDAYTRADING.COM
Received: from cc378816a (cc378816-a.srst1.fl.home.com [24.3.71.191]) by
          mail.eminidaytrading.com (8.11.2/8.8.7) with SMTP id f7DD7CS20925 for
          <erappers@list.eminidaytrading.com>; Mon, 13 Aug 2001 09:07:13 -0400
MIME-Version: 1.0
Content-Type: multipart/alternative;
              boundary="----=_NextPart_000_002D_01C123D8.F95B41A0"
X-Priority: 3 (Normal)
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook IMO, Build 9.0.2416 (9.0.2910.0)
Importance: Normal
X-MimeOLE: Produced By Microsoft MimeOLE V5.50.4522.1200
Message-ID:  <NDBBJFBEOLILFEODKBCHAECGCOAA.erap@eminidaytrading.com>
Date:         Mon, 13 Aug 2001 09:18:54 -0400
Reply-To: info@eminidaytrading.com
From: eminidaytrading <erap@eminidaytrading.com>
Subject:      erappin' - daily morning update 8-13-01
Comments: To: erappers@list.eminidaytrading.com
To: ERAPPERS@mail.eminidaytrading.com

This is a multi-part message in MIME format.

------=_NextPart_000_002D_01C123D8.F95B41A0
Content-Type: text/plain;
        charset="iso-8859-1"
Content-Transfer-Encoding: 7bit

erappin' - daily morning update


----------------------------------------------------------------------------
----

 BLEAK ECONOMIC PICTURE

      We got a mixed bag of reports by retailers at the end of last week. As
you know, retail sales are a key element to this economy's growth as
continued consumer spending is necessary to remain out of a recession.
Market analysts are hoping consumers will be spending part of their $40
billion tax refund in the coming months. Consumer spending is the only part
of this economy that is still stagnating without reflecting signs of this
slowing economy...for now. This week, we get several clues on the latest
economic condition, on top of the consumer spending reports that will give
the market a further indication how they are coping with the weakening job
market. Analysts are expecting today's Retail Sales report to come in -0.2%.

      Earlier last week, the Fed Beige Book, even though limited in its
number of anecdotes, showed a slowing factory sector, flat to falling bank
loan demand, and most importantly, retail sales below plan. Pretty much all
U.S. regions are presenting a picture of "slow growth or lateral movement in
economic activity" over the past few months. The economy keeps touching that
bottom without showing any improvements. On August 7, we had Chicago Fed
President Moskow citing that, "an underperforming economy may be rare, but
it is nothing new. What is different today are the mixed signals we see in
the marketplace. The combination of weaknesses and strengths and risks is
both unusual and challenging."


            Symbol Close High Low  Gain/Loss
            SPU01 1191.20 1197.50 1171.50  3.40
            ESU01 1191.25 1197.50 1172.00  3.50
            NDU01 1624.00 1652.50 1581.00  15.50
            NQU01 1624.00 1652.50 1582.50  15.50
            DOW 10416.25 10433.46 10197.32  117.69
            NASDAQ 1956.47 1967.03 1915.99  6.85
            SPX 1190.16 1193.33 1169.55  6.73
            SOX 593.05 595.63 572.29  7.16
            VIX 22.81 24.91 22.68  0.83


      TRADING

      We have seen this market trade in quite the range these past few
months (Nasdaq 2000-2300). Unless we are getting something different than
the clouded visibility companies are reporting, some economic data showing
signs of a bottom, we will not be trading outside that range. Going into the
weekend, we saw a technical rather than a fundamental-based rally. Traders
want more than just reports telling them there is no worry about inflation.
It is time for some reports saying there is no worry about this economy
slowing any further! For now, economic news is not showing signs of
stabilization so traders will remain anxious about the timing of the
economic turnaround hoping that the next data reports are giving them reason
to believe it is sooner rather than later.

      Curious to see how this week's earnings come in for Hewlett-Packard,
Applied Materials and Dell and of course how they see next quarter's
numbers. HWP is expecting a 91% drop in earnings per share, Applied
Materials a 97% drop while Dell sees a 27% step back in EPS.


      EUROPE'S SLOWING ECONOMY

      The European Central Bank (ECB) indicated in its August report that it
might need to cut interest rates again. So far, the ECB has been reluctant
to do so as they were experiencing troubles with rising inflation. Latest
economic reports are indicating a pause in inflationary pressures, which
introduces the possibility now of another 25 basis point rate cut as soon as
August 31st. Especially given Europe's largest economy, Germany, is
reporting weak industrial production, factory orders, and factory orders
besides its seventh consecutive rise in unemployment.

      It seems that central banks around the world are now in the race to
reverse direction on their slowing economies. Greenspan and company have cut
interest rates six times so far this year, with possibly another two coming
up later this quarter, the Bank of England has reduced them four times while
the Bank of Japan.... well they are still stuck with their zero interest
rate situation. Based on the economic data we have seen these past few
months, it does not look like Europe's economic bottom is in sight any time
soon either. Last week, the ECB released a statement saying, "there is an
increased uncertainty surrounding economic growth in the euro area in the
second half of 2001," and they might feel the effects of, "deteriorating
growth performances in several other regions of the world."

      On Friday, back on U.S. soil, the Chicago Board of Trade's Fed Fund
Futures are indicating a 100% chance of a 25 basis point rate cut to 3.50%
at the next FOMC meeting on August 21st and even a slight 18% probability of
a 50 bp cut at that time. Given a cut to 3.50% end of August, traders are
expecting with an 88% probability another 25 bp cut to 3.25% by year end.

      Have a great trading day -- and honor those stops !!


      If you would like to signup for a free trial of our interactive
trading room called the epit, where trading signals are posted in realtime
throughout the day, please fill out form at
http://www.eminidaytrading.com/eminisignup.html All questions regarding the
epit service, please email info@eminidaytrading.com . Erap service is not an
investment advisory service, nor a registered investment advisor or broker
and does not purport to tell or suggest which securities members should buy
or sell for themselves. Members should always check with their licensed
financial advisor and their tax advisor to determine the suitability of any
investment. You are currently subscribed to erap. To unsubscribe, please
send a blank email to erappers-unsubscribe-request@eminidaytrading.com

      Copyright 2001 by eminidaytrading Inc.
     Number 1
      08/13/2001

            Futures - The Basics
       Futures, the Basics - Are you a stock / option trader and have
considered trading futures but are constantly reminded how terribly risky
they are? If you are new to futures trading, then this session is a must as
emaster and emagine will cover the basics. What you need to know about
futures, how it differs from stocks & options trading and how to add them to
your trading arsenal.

            August 23rd and August 27th.


      Targets

      Both ES/NQ continue their downtrend. ES had a double bottom in the
1174-78 area which was briefly taken out, low 1172, before it bounced back.
However, until we make a clean break and close above 1235 level, we aren't
getting bullish. That area has been tested twice and failed. We have been
trading within this 1174-1233 range for over a month now. NQ has same story.
Even though it penetrated the upper trendline, it has resumed trend making a
new low of 1582.50. A break of this level could leave us testing 1550 and
1500 levels. We need a close above 1800 to get bullish.

            Intraday Epit Targets Hit
            ES  NQ
            1174.50  1604
            1188   1590
            1195.75   1619
            1631











------=_NextPart_000_002D_01C123D8.F95B41A0
Content-Type: text/html;
        charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable

<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<HTML><HEAD><TITLE>erappin' - daily morning update</TITLE><BASE=20
href=3Dhttp://www.eminidaytrading.com/erappin/erappin_081301a.html>
<META http-equiv=3Dcontent-type =
content=3Dtext/html;charset=3DISO-8859-1>
<META content=3D"MSHTML 5.50.4522.1800" name=3DGENERATOR></HEAD>
<BODY vLink=3D#ff00ff link=3D#ff00ff bgColor=3Dblack>
<DIV>&nbsp;</DIV>
<DIV>&nbsp;</DIV>
<HR>

<DIV align=3Dcenter><IMG height=3D120=20
src=3D"http://www.eminidaytrading.com/erappin/images/erappin_top.gif" =
width=3D580=20
useMap=3D#erappin_topb794dc2a border=3D0><MAP =
name=3Derappin_topb794dc2a><AREA=20
  shape=3DRECT coords=3D488,32,556,100><AREA shape=3DRECT =
coords=3D524,3,571,24=20
  href=3D"http://www.invest-store.com/eminidaytrading/"><AREA =
shape=3DRECT=20
  coords=3D461,3,509,23=20
  href=3D"http://www.eminidaytrading.com/eminisignup.html"><AREA =
shape=3DRECT=20
  coords=3D414,3,444,24 =
href=3D"http://www.eminidaytrading.com/epit/epit.html"><AREA=20
  shape=3DRECT coords=3D205,4,370,27 =
href=3D"http://www.eminidaytrading.com"><AREA=20
  shape=3DRECT coords=3D132,4,167,24 =
href=3D"mailto:info@eminidaytrading.com"><AREA=20
  shape=3DRECT coords=3D12,3,55,23=20
href=3D"http://www.eminidaytrading.com/main.html"></MAP>=20
<TABLE cellSpacing=3D0 cellPadding=3D14 width=3D560 bgColor=3D#ffffff =
border=3D0>
  <TBODY>
  <TR>
    <TD vAlign=3Dtop align=3Dleft width=3D370><FONT=20
      face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
color=3D#000000=20
      size=3D4><B>BLEAK ECONOMIC PICTURE<BR><BR></B></FONT><FONT=20
      face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular size=3D2>We =
got a mixed=20
      bag of reports by retailers at the end of last week. As you know, =
retail=20
      sales are a key element to this economy's growth as continued =
consumer=20
      spending is necessary to remain out of a recession. Market =
analysts are=20
      hoping consumers will be spending part of their $40 billion tax =
refund in=20
      the coming months. Consumer spending is the only part of this =
economy that=20
      is still stagnating without reflecting signs of this slowing =
economy...for=20
      now. This week, we get several clues on the latest economic =
condition, on=20
      top of the consumer spending reports that will give the market a =
further=20
      indication how they are coping with the weakening job market. =
Analysts are=20
      expecting today's Retail Sales report to come in =
-0.2%.<BR><BR>Earlier=20
      last week, the Fed Beige Book, even though limited in its number =
of=20
      anecdotes, showed a slowing factory sector, flat to falling bank =
loan=20
      demand, and most importantly, retail sales below plan. Pretty much =
all=20
      U.S. regions are presenting a picture of "slow growth or lateral =
movement=20
      in economic activity" over the past few months. The economy keeps =
touching=20
      that bottom without showing any improvements. On August 7, we had =
Chicago=20
      Fed President Moskow citing that, "an underperforming economy may =
be rare,=20
      but it is nothing new. What is different today are the mixed =
signals we=20
      see in the marketplace. The combination of weaknesses and =
strengths and=20
      risks is both unusual and challenging."<BR><BR></FONT>
      <P><FONT face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
size=3D2>
      <TABLE cellSpacing=3D0 cellPadding=3D3 width=3D366 bgColor=3Dwhite =
border=3D0>
        <TBODY>
        <TR>
          <TD vAlign=3Dtop align=3Dleft><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
color=3D#ff00ff=20
            size=3D2><B>Symbol</B></FONT></TD>
          <TD vAlign=3Dtop align=3Dleft><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
color=3D#ff00ff=20
            size=3D2><B>Close</B></FONT></TD>
          <TD vAlign=3Dtop align=3Dleft><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
color=3D#ff00ff=20
            size=3D2><B>High</B></FONT></TD>
          <TD vAlign=3Dtop align=3Dleft><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
color=3D#ff00ff=20
            size=3D2><B>Low</B></FONT></TD>
          <TD vAlign=3Dtop align=3Dmiddle></TD>
          <TD vAlign=3Dtop align=3Dleft><B><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
color=3D#ff00ff=20
            size=3D2>Gain/Loss</FONT></B></TD></TR>
        <TR>
          <TD vAlign=3Dtop align=3Dleft><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
color=3D#33cc00=20
            size=3D2><B>SPU01</B></FONT></TD>
          <TD vAlign=3Dtop align=3Dleft><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
color=3Dblack=20
            size=3D2><B>1191.20</B></FONT></TD>
          <TD vAlign=3Dtop align=3Dleft><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
color=3Dblack=20
            size=3D2><B>1197.50</B></FONT></TD>
          <TD vAlign=3Dtop align=3Dleft><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
color=3Dblack=20
            size=3D2><B>1171.50</B></FONT></TD>
          <TD vAlign=3Dtop align=3Dmiddle><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
size=3D2><IMG=20
            height=3D14=20
            =
src=3D"http://www.eminidaytrading.com/erappin/images/arrow_up.gif"=20
            width=3D12 border=3D0></FONT></TD>
          <TD vAlign=3Dtop align=3Dleft><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
color=3D#33cc00=20
            size=3D2><B>3.40</B></FONT></TD></TR>
        <TR>
          <TD vAlign=3Dtop align=3Dleft><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
color=3D#33cc00=20
            size=3D2><B>ESU01</B></FONT></TD>
          <TD vAlign=3Dtop align=3Dleft><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
color=3Dblack=20
            size=3D2><B>1191.25</B></FONT></TD>
          <TD vAlign=3Dtop align=3Dleft><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
color=3Dblack=20
            size=3D2><B>1197.50</B></FONT></TD>
          <TD vAlign=3Dtop align=3Dleft><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
color=3Dblack=20
            size=3D2><B>1172.00</B></FONT></TD>
          <TD vAlign=3Dtop align=3Dmiddle><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
size=3D2><IMG=20
            height=3D14=20
            =
src=3D"http://www.eminidaytrading.com/erappin/images/arrow_up.gif"=20
            width=3D12 border=3D0></FONT></TD>
          <TD vAlign=3Dtop align=3Dleft><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
color=3D#33cc00=20
            size=3D2><B>3.50</B></FONT></TD></TR>
        <TR>
          <TD vAlign=3Dtop align=3Dleft><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
color=3D#33cc00=20
            size=3D2><B>NDU01</B></FONT></TD>
          <TD vAlign=3Dtop align=3Dleft><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
color=3Dblack=20
            size=3D2><B>1624.00</B></FONT></TD>
          <TD vAlign=3Dtop align=3Dleft><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
color=3Dblack=20
            size=3D2><B>1652.50</B></FONT></TD>
          <TD vAlign=3Dtop align=3Dleft><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
color=3Dblack=20
            size=3D2><B>1581.00</B></FONT></TD>
          <TD vAlign=3Dtop align=3Dmiddle><IMG height=3D13=20
            =
src=3D"http://www.eminidaytrading.com/erappin/images/arrow_down.gif"=20
            width=3D12 border=3D0></TD>
          <TD vAlign=3Dtop align=3Dleft><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
color=3D#ff0000=20
            size=3D2><B>15.50</B></FONT></TD></TR>
        <TR>
          <TD vAlign=3Dtop align=3Dleft><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
color=3D#33cc00=20
            size=3D2><B>NQU01</B></FONT></TD>
          <TD vAlign=3Dtop align=3Dleft><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
color=3Dblack=20
            size=3D2><B>1624.00</B></FONT></TD>
          <TD vAlign=3Dtop align=3Dleft><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
color=3Dblack=20
            size=3D2><B>1652.50</B></FONT></TD>
          <TD vAlign=3Dtop align=3Dleft><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
color=3Dblack=20
            size=3D2><B>1582.50</B></FONT></TD>
          <TD vAlign=3Dtop align=3Dmiddle><IMG height=3D13=20
            =
src=3D"http://www.eminidaytrading.com/erappin/images/arrow_down.gif"=20
            width=3D12 border=3D0></TD>
          <TD vAlign=3Dtop align=3Dleft><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
color=3D#ff0000=20
            size=3D2><B>15.50</B></FONT></TD></TR>
        <TR>
          <TD vAlign=3Dtop align=3Dleft><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
color=3D#33cc00=20
            size=3D2><B>DOW</B></FONT></TD>
          <TD vAlign=3Dtop align=3Dleft><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
color=3Dblack=20
            size=3D2><B>10416.25</B></FONT></TD>
          <TD vAlign=3Dtop align=3Dleft><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
color=3Dblack=20
            size=3D2><B>10433.46</B></FONT></TD>
          <TD vAlign=3Dtop align=3Dleft><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
color=3Dblack=20
            size=3D2><B>10197.32</B></FONT></TD>
          <TD vAlign=3Dtop align=3Dmiddle><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
size=3D2><IMG=20
            height=3D14=20
            =
src=3D"http://www.eminidaytrading.com/erappin/images/arrow_up.gif"=20
            width=3D12 border=3D0></FONT></TD>
          <TD vAlign=3Dtop align=3Dleft><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
color=3D#33cc00=20
            size=3D2><B>117.69</B></FONT></TD></TR>
        <TR>
          <TD vAlign=3Dtop align=3Dleft><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
color=3D#33cc00=20
            size=3D2><B>NASDAQ</B></FONT></TD>
          <TD vAlign=3Dtop align=3Dleft><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
color=3Dblack=20
            size=3D2><B>1956.47</B></FONT></TD>
          <TD vAlign=3Dtop align=3Dleft><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
color=3Dblack=20
            size=3D2><B>1967.03</B></FONT></TD>
          <TD vAlign=3Dtop align=3Dleft><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
color=3Dblack=20
            size=3D2><B>1915.99</B></FONT></TD>
          <TD vAlign=3Dtop align=3Dmiddle><IMG height=3D13=20
            =
src=3D"http://www.eminidaytrading.com/erappin/images/arrow_down.gif"=20
            width=3D12 border=3D0></TD>
          <TD vAlign=3Dtop align=3Dleft><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
color=3D#ff0000=20
            size=3D2><B>6.85</B></FONT></TD></TR>
        <TR>
          <TD vAlign=3Dtop align=3Dleft><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
color=3D#33cc00=20
            size=3D2><B>SPX</B></FONT></TD>
          <TD vAlign=3Dtop align=3Dleft><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
color=3Dblack=20
            size=3D2><B>1190.16</B></FONT></TD>
          <TD vAlign=3Dtop align=3Dleft><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
color=3Dblack=20
            size=3D2><B>1193.33</B></FONT></TD>
          <TD vAlign=3Dtop align=3Dleft><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
color=3Dblack=20
            size=3D2><B>1169.55</B></FONT></TD>
          <TD vAlign=3Dtop align=3Dmiddle><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
size=3D2><IMG=20
            height=3D14=20
            =
src=3D"http://www.eminidaytrading.com/erappin/images/arrow_up.gif"=20
            width=3D12 border=3D0></FONT></TD>
          <TD vAlign=3Dtop align=3Dleft><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
color=3D#33cc00=20
            size=3D2><B>6.73</B></FONT></TD></TR>
        <TR>
          <TD vAlign=3Dtop align=3Dleft><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
color=3D#33cc00=20
            size=3D2><B>SOX</B></FONT></TD>
          <TD vAlign=3Dtop align=3Dleft><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
color=3Dblack=20
            size=3D2><B>593.05</B></FONT></TD>
          <TD vAlign=3Dtop align=3Dleft><FONT=20
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
* PR# 1052 *
Subject:  Inconsistent behaviour of is.vector? 
From: J.C.Rougier@durham.ac.uk
Date: Tue, 14 Aug 2001 09:04:57 +0100
-- no notes --
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 1052 <==
From postmaster@franz.stat.wisc.edu  Tue Aug 14 10:09:16 2001
Received: from franz.stat.wisc.edu (root@franz.stat.wisc.edu [128.105.174.95])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id KAA19232
	for <r-bugs@biostat.ku.dk>; Tue, 14 Aug 2001 10:09:14 +0200 (MET DST)
Received: from hermes.dur.ac.uk (really [129.234.4.9]) by franz.stat.wisc.edu
	via smail with esmtp
	id <m15WZG1-000JHrC@franz.stat.wisc.edu> (Debian Smail3.2.0.111)
	for <r-bugs@r-project.org>; Tue, 14 Aug 2001 03:09:01 -0500 (CDT) 
Received: from euclid (euclid.dur.ac.uk [129.234.21.53])
	by hermes.dur.ac.uk (8.11.1/8.11.1) with ESMTP id f7E84vu13050
	for <r-bugs@r-project.org>; Tue, 14 Aug 2001 09:04:58 +0100 (BST)
Received: from modigliani.dur.ac.uk by euclid id <JAA02083@euclid>; Tue, 14 Aug 2001 09:04:45 +0100 (BST)
From: J.C.Rougier@durham.ac.uk
Date: Tue, 14 Aug 2001 09:04:57 +0100
Message-Id: <17014.200108140804@modigliani.dur.ac.uk>
To: r-bugs@r-project.org
Subject:  Inconsistent behaviour of is.vector? 
Cc: dma0jcr@modigliani.dur.ac.uk
X-ECS-MailScanner: Found to be clean

Hi everyone,

I have noticed that is.vector returns FALSE if I attach
attributes:

> x <- c(a = 1, b = 2)
> attributes(x)
$names
[1] "a" "b"

> is.vector(x)
[1] TRUE
> attr(x, "fred") <- "happy"
> attributes(x)
$names
[1] "a" "b"

$fred
[1] "happy"

> is.vector(x)
[1] FALSE

This seems inconsistent to me, as "names" is itself an attribute
yet this does negate is.vector.  As the original x is clearly a
vector, albeit one with names, wouldn't it be consistent to allow
any attributes?  This appears to be the case for is.matrix ...

> x <- matrix(1:4, 2, 2)
> is.matrix(x)
[1] TRUE
> attributes(x)
$dim
[1] 2 2
> attr(x, "fred") <- "happy"
> x
     [,1] [,2]
[1,]    1    3
[2,]    2    4
attr(,"fred")
[1] "happy"
> is.matrix(x)
[1] TRUE

Cheers, Jonathan.

--please do not edit the information below--

Version:
 platform = i686-pc-linux-gnu
 arch = i686
 os = linux-gnu
 system = i686, linux-gnu
 status = Patched
 major = 1
 minor = 3.0
 year = 2001
 month = 06
 day = 27
 language = R

Search Path:
 .GlobalEnv, Autoloads, package:base

==> 1052.followup.1 <==
From ripley@stats.ox.ac.uk  Tue Aug 14 10:43:20 2001
Received: from toucan.stats.ox.ac.uk (toucan.stats.ox.ac.uk [163.1.20.20])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id KAA19924
	for <R-bugs@biostat.ku.dk>; Tue, 14 Aug 2001 10:43:20 +0200 (MET DST)
Received: from gannet.stats (IDENT:root@gannet.stats [163.1.20.127])
	by toucan.stats.ox.ac.uk (8.9.0/8.9.0) with ESMTP id JAA12431;
	Tue, 14 Aug 2001 09:43:16 +0100 (BST)
Received: from localhost (ripley@localhost)
	by gannet.stats (8.11.3/8.11.3) with ESMTP id f7E8hGu16468;
	Tue, 14 Aug 2001 09:43:16 +0100
X-Authentication-Warning: gannet.stats: ripley owned process doing -bs
Date: Tue, 14 Aug 2001 09:43:16 +0100 (BST)
From: Prof Brian Ripley <ripley@stats.ox.ac.uk>
X-X-Sender:  <ripley@gannet.stats>
To: <J.C.Rougier@durham.ac.uk>
cc: <R-bugs@biostat.ku.dk>
Subject: Re: [Rd] Inconsistent behaviour of is.vector? (PR#1052)
In-Reply-To: <200108140809.KAA19242@pubhealth.ku.dk>
Message-ID: <Pine.LNX.4.31.0108140926180.16448-100000@gannet.stats>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII

This seems intentional.  as.vector(x) changes x, and is.vector should be a
test of no change.  It is in S:

From S-PLUS 3.4:

       is.vector returns TRUE if x is a simple object of the mode
       specified, and FALSE otherwise.  If the mode is "any", any
       simple object will match,  that  is,  an  object  with  no
       attributes.   Note  that  a  list is typically a vector in
       this sense.

Note the `simple' in there.

R appears to allow names as attributes but nothing else, but does not
document this (except in the source code).  Anyone want to explain why R
is incompatible with S?  And why as.vector and is.vector are inconsistent?
(Note that the isas tests do not pick this up.)

This is a documentation bug, at least.


On Tue, 14 Aug 2001 J.C.Rougier@durham.ac.uk wrote:

> Hi everyone,
>
> I have noticed that is.vector returns FALSE if I attach
> attributes:
>
> > x <- c(a = 1, b = 2)
> > attributes(x)
> $names
> [1] "a" "b"
>
> > is.vector(x)
> [1] TRUE
> > attr(x, "fred") <- "happy"
> > attributes(x)
> $names
> [1] "a" "b"
>
> $fred
> [1] "happy"
>
> > is.vector(x)
> [1] FALSE
>
> This seems inconsistent to me, as "names" is itself an attribute
> yet this does negate is.vector.  As the original x is clearly a
> vector, albeit one with names, wouldn't it be consistent to allow
> any attributes?

Well, dim is an attribute, so you want an array to be a vector?

> This appears to be the case for is.matrix ...
>
> > x <- matrix(1:4, 2, 2)
> > is.matrix(x)
> [1] TRUE
> > attributes(x)
> $dim
> [1] 2 2
> > attr(x, "fred") <- "happy"
> > x
>      [,1] [,2]
> [1,]    1    3
> [2,]    2    4
> attr(,"fred")
> [1] "happy"
> > is.matrix(x)
> [1] TRUE
>
> Cheers, Jonathan.
>
> --please do not edit the information below--
>
> Version:
>  platform = i686-pc-linux-gnu
>  arch = i686
>  os = linux-gnu
>  system = i686, linux-gnu
>  status = Patched
>  major = 1
>  minor = 3.0
>  year = 2001
>  month = 06
>  day = 27
>  language = R
>
> Search Path:
>  .GlobalEnv, Autoloads, package:base
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
* PR# 1053 *
Subject:      erappin' - daily morning update 8-14-01
From: eminidaytrading <erap@eminidaytrading.com>
Date:         Tue, 14 Aug 2001 07:00:20 -0400
-- no notes --
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 1053 <==
From postmaster@franz.stat.wisc.edu  Tue Aug 14 13:31:57 2001
Received: from franz.stat.wisc.edu (root@franz.stat.wisc.edu [128.105.174.95])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id NAA22699
	for <r-bugs@biostat.ku.dk>; Tue, 14 Aug 2001 13:31:55 +0200 (MET DST)
Received: from mail.eminidaytrading.com (really [66.12.212.91]) by franz.stat.wisc.edu
	via smail with esmtp
	id <m15WcPU-000JGfC@franz.stat.wisc.edu> (Debian Smail3.2.0.111)
	for <r-bugs@R-PROJECT.ORG>; Tue, 14 Aug 2001 06:31:00 -0500 (CDT) 
Received: from mail.eminidaytrading.com (mail.eminidaytrading.com [66.12.212.91])
	by mail.eminidaytrading.com (8.11.2/8.8.7) with ESMTP id f7EAnsI22991;
	Tue, 14 Aug 2001 06:49:54 -0400
Received: from MAIL.EMINIDAYTRADING.COM by MAIL.EMINIDAYTRADING.COM
          (LISTSERV-TCP/IP release 1.8d) with spool id 0327 for
          ERAPPERS@MAIL.EMINIDAYTRADING.COM; Tue, 14 Aug 2001 06:49:39 -0400
Approved-By: erap@EMINIDAYTRADING.COM
Received: from cc378816a (cc378816-a.srst1.fl.home.com [24.3.71.191]) by
          mail.eminidaytrading.com (8.11.2/8.8.7) with SMTP id f7EAmSI22828 for
          <erappers@list.eminidaytrading.com>; Tue, 14 Aug 2001 06:48:28 -0400
MIME-Version: 1.0
Content-Type: multipart/alternative;
              boundary="----=_NextPart_000_0010_01C1248E.C852A560"
X-Priority: 3 (Normal)
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook IMO, Build 9.0.2416 (9.0.2910.0)
X-MimeOLE: Produced By Microsoft MimeOLE V5.50.4522.1200
Importance: Normal
Message-ID:  <NDBBJFBEOLILFEODKBCHCEIBCOAA.erap@eminidaytrading.com>
Date:         Tue, 14 Aug 2001 07:00:20 -0400
Reply-To: info@eminidaytrading.com
From: eminidaytrading <erap@eminidaytrading.com>
Subject:      erappin' - daily morning update 8-14-01
Comments: To: erappers@list.eminidaytrading.com
To: ERAPPERS@mail.eminidaytrading.com

This is a multi-part message in MIME format.

------=_NextPart_000_0010_01C1248E.C852A560
Content-Type: text/plain;
        charset="iso-8859-1"
Content-Transfer-Encoding: 7bit

erappin' - daily morning update


----------------------------------------------------------------------------
----

 CALM BEFORE ECONOMIC STORM ?

      Trading was really range bound on Monday as traders were cautious
after digesting last week's weak reports and are holding off getting
involved ahead of some key economic reports due this week. Even though no
reports were due yesterday, this market is pricing in more aggressive Fed
easing as there is talk now of a 50 basis point interest rate cut this
coming FOMC next week.

      Today should be a more interesting trading session than Monday's
action (or lack thereof) with the Retail Sales number being released
pre-market hours as it is the last key report before the FOMC meeting.
Analysts are expecting a -0.2%, which was revised downward given the slowing
hints retailers revealed last week. Curious how this will play out as the
consumers, which are the only pillar in this economy that has not folded
under the economic slowdown, will eventually react to the continuous flood
of bad corporate news and concerns about the U.S. economic recovery.

      Today, equity players will be looking at earnings from Wal-Mart, Home
Depot, Deere, and of course Applied Materials which will be closely watched
throughout the session.

      Later this week on the economic front, we have Industrial Production
(IP) on Wednesday which is expected to come in lower due to slowing output.
On Thursday, we have Consumer Price Index (CPI), Housing Starts, Initial
Jobless claims, and Philly Fed reports due. We are closing off the week with
the Trade Balance and Michigan Sentiment numbers.

      Quite a few reports ahead of next Tuesday's FOMC meeting. Now, the
economic data released these past few months are still not pointing to an
improvement in the U.S. economy, leading analysts to lower their corporate /
economic assessments. Hoping for a second half 2001 recovery, the bulls are
now forced to postpone that party until at least early 2002 before any signs
will appear of this economy moving away from this standstill.

            Symbol Close High Low  Gain/Loss
            SPU01 1192.50 1197.40 1187.50  1.30
            ESU01 1192.50 1197.75 1186.75  1.25
            NDU01 1656.00 1666.00 1613.50  32.00
            NQU01 1656.00 1666.00 1613.50  32.00
            DOW 10415.91 10445.80 10367.06   0.34
            NASDAQ 1982.25 1986.33 1951.46  25.78
            SPX 1191.29 1193.82 1185.12  1.13
            SOX 603.47 604.18 589.67  10.42
            VIX 23.24 23.86 23.08  0.43


      EUROPE'S SLOWING ECONOMY

      German retail sales came in -1.8% in June after a -1.4% slide in the
previous month. Summer months tend to throw a wrench in the economic
forecasting engine, so even though a bit volatile, the data still confirm
the slowing German growth that other economic data are showing. This report
provides another reason (or excuse depending on your point of view) for the
European Central Bank (ECB) to cut interest rates again by 25 basis points
as soon as August 31st. We know that the ECB has been holding off cutting
rates due to the rising inflationary pressures. However, the latest
inflation data out eases that problem, so ECB has room again to cut rates
(for now).

      The Fed Fund Futures, traded at the Chicago Board of Trade, are
pricing in a 100% probability of a 25 basis point rate cut at the next FOMC
meeting next Tuesday. There is even a 22% odds of a 50bp cut at that time.
Given that cut next week to 3.50%, traders are anticipating with 88% chance
that we will see another rate cut sometime this last quarter.

      Bottomline this week: these economic reports should pretty much all
come in seriously weaker or show a lack of inflation in order for the Fed to
even consider cutting interest rates by 50 bp next week.

      Have a great trading day -- and watch out trading lunch time !!


      If you would like to signup for a free trial of our interactive
trading room called the epit, where trading signals are posted in realtime
throughout the day, please fill out form at
http://www.eminidaytrading.com/eminisignup.html All questions regarding the
epit service, please email info@eminidaytrading.com . Erap service is not an
investment advisory service, nor a registered investment advisor or broker
and does not purport to tell or suggest which securities members should buy
or sell for themselves. Members should always check with their licensed
financial advisor and their tax advisor to determine the suitability of any
investment.


      Copyright 2001 by eminidaytrading Inc.  Number 2
      08/14/2001



            Futures - The Basics
       Futures, the Basics - Are you a stock / option trader and have
considered trading futures but are constantly reminded how terribly risky
they are? If you are new to futures trading, then this session is a must as
emaster and emagine will cover the basics. What you need to know about
futures, how it differs from stocks & options trading and how to add them to
your trading arsenal.

            August 23rd and August 27th.


      Targets

      We are still facing both ES and NQ daily charts retracements in this
downtrend.  Even though ES daily chart shows an elo formation, markets are
still in pullback mode right now with no signs of a reversal yet. We are
looking for solid closes above NQ 1800 and ES 1234 levels before considering
a potential reversal in trend.


            Intraday Epit Targets Hit
            ES  NQ
            1198   1650
            1655
            1662












------=_NextPart_000_0010_01C1248E.C852A560
Content-Type: text/html;
        charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable

<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<HTML><HEAD><TITLE>erappin' - daily morning update</TITLE><BASE=20
href=3Dhttp://www.eminidaytrading.com/erappin/erappin_081401a.html>
<META http-equiv=3Dcontent-type =
content=3Dtext/html;charset=3DISO-8859-1>
<META content=3D"MSHTML 5.50.4522.1800" name=3DGENERATOR></HEAD>
<BODY vLink=3D#ff00ff link=3D#ff00ff bgColor=3Dblack>
<DIV>&nbsp;</DIV>
<DIV>&nbsp;</DIV>
<HR>

<DIV align=3Dcenter><IMG height=3D120=20
src=3D"http://www.eminidaytrading.com/erappin/images/erappin_top.gif" =
width=3D580=20
useMap=3D#erappin_topb794dc2a border=3D0><MAP =
name=3Derappin_topb794dc2a><AREA=20
  shape=3DRECT coords=3D524,3,571,24=20
  href=3D"http://www.invest-store.com/eminidaytrading/"><AREA =
shape=3DRECT=20
  coords=3D461,3,509,23=20
  href=3D"http://www.eminidaytrading.com/eminisignup.html"><AREA =
shape=3DRECT=20
  coords=3D414,3,444,24 =
href=3D"http://www.eminidaytrading.com/epit/epit.html"><AREA=20
  shape=3DRECT coords=3D205,4,370,27 =
href=3D"http://www.eminidaytrading.com"><AREA=20
  shape=3DRECT coords=3D132,4,167,24 =
href=3D"mailto:info@eminidaytrading.com"><AREA=20
  shape=3DRECT coords=3D12,3,55,23=20
href=3D"http://www.eminidaytrading.com/main.html"></MAP>=20
<TABLE cellSpacing=3D0 cellPadding=3D14 width=3D560 bgColor=3D#ffffff =
border=3D0>
  <TBODY>
  <TR>
    <TD vAlign=3Dtop align=3Dleft width=3D370><FONT=20
      face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
color=3D#000000=20
      size=3D4><B>CALM BEFORE ECONOMIC STORM ?<BR><BR></B></FONT><FONT=20
      face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
size=3D2>Trading was=20
      really range bound on Monday as traders were cautious after =
digesting last=20
      week's weak reports and are holding off getting involved ahead of =
some key=20
      economic reports due this week. Even though no reports were due =
yesterday,=20
      this market is pricing in more aggressive Fed easing as there is =
talk now=20
      of a 50 basis point interest rate cut this coming FOMC next=20
      week.<BR><BR>Today should be a more interesting trading session =
than=20
      Monday's action (or lack thereof) with the Retail Sales number =
being=20
      released pre-market hours as it is the last key report before the =
FOMC=20
      meeting. Analysts are expecting a -0.2%, which was revised =
downward given=20
      the slowing hints retailers revealed last week. Curious how this =
will play=20
      out as the consumers, which are the only pillar in this economy =
that has=20
      not folded under the economic slowdown, will eventually react to =
the=20
      continuous flood of bad corporate news and concerns about the U.S. =

      economic recovery.<BR><BR>Today, equity players will be looking at =

      earnings from Wal-Mart, Home Depot, Deere, and of course Applied =
Materials=20
      which will be closely watched throughout the session.<BR><BR>Later =
this=20
      week on the economic front, we have Industrial Production (IP) on=20
      Wednesday which is expected to come in lower due to slowing =
output. On=20
      Thursday, we have Consumer Price Index (CPI), Housing Starts, =
Initial=20
      Jobless claims, and Philly Fed reports due. We are closing off the =
week=20
      with the Trade Balance and Michigan Sentiment =
numbers.<BR><BR>Quite a few=20
      reports ahead of next Tuesday's FOMC meeting. Now, the economic =
data=20
      released these past few months are still not pointing to an =
improvement in=20
      the U.S. economy, leading analysts to lower their corporate / =
economic=20
      assessments. Hoping for a second half 2001 recovery, the bulls are =
now=20
      forced to postpone that party until at least early 2002 before any =
signs=20
      will appear of this economy moving away from this=20
      standstill.<BR><BR></FONT><FONT=20
      face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular size=3D2>
      <TABLE cellSpacing=3D0 cellPadding=3D3 width=3D366 bgColor=3Dwhite =
border=3D0>
        <TBODY>
        <TR>
          <TD vAlign=3Dtop align=3Dleft><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
color=3D#ff00ff=20
            size=3D2><B>Symbol</B></FONT></TD>
          <TD vAlign=3Dtop align=3Dleft><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
color=3D#ff00ff=20
            size=3D2><B>Close</B></FONT></TD>
          <TD vAlign=3Dtop align=3Dleft><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
color=3D#ff00ff=20
            size=3D2><B>High</B></FONT></TD>
          <TD vAlign=3Dtop align=3Dleft><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
color=3D#ff00ff=20
            size=3D2><B>Low</B></FONT></TD>
          <TD vAlign=3Dtop align=3Dmiddle></TD>
          <TD vAlign=3Dtop align=3Dleft><B><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
color=3D#ff00ff=20
            size=3D2>Gain/Loss</FONT></B></TD></TR>
        <TR>
          <TD vAlign=3Dtop align=3Dleft><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
color=3D#33cc00=20
            size=3D2><B>SPU01</B></FONT></TD>
          <TD vAlign=3Dtop align=3Dleft><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
color=3Dblack=20
            size=3D2><B>1192.50</B></FONT></TD>
          <TD vAlign=3Dtop align=3Dleft><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
color=3Dblack=20
            size=3D2><B>1197.40</B></FONT></TD>
          <TD vAlign=3Dtop align=3Dleft><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
color=3Dblack=20
            size=3D2><B>1187.50</B></FONT></TD>
          <TD vAlign=3Dtop align=3Dmiddle><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
size=3D2><IMG=20
            height=3D14=20
            =
src=3D"http://www.eminidaytrading.com/erappin/images/arrow_up.gif"=20
            width=3D12 border=3D0></FONT></TD>
          <TD vAlign=3Dtop align=3Dleft><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
color=3D#33cc00=20
            size=3D2><B>1.30</B></FONT></TD></TR>
        <TR>
          <TD vAlign=3Dtop align=3Dleft><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
color=3D#33cc00=20
            size=3D2><B>ESU01</B></FONT></TD>
          <TD vAlign=3Dtop align=3Dleft><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
color=3Dblack=20
            size=3D2><B>1192.50</B></FONT></TD>
          <TD vAlign=3Dtop align=3Dleft><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
color=3Dblack=20
            size=3D2><B>1197.75</B></FONT></TD>
          <TD vAlign=3Dtop align=3Dleft><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
color=3Dblack=20
            size=3D2><B>1186.75</B></FONT></TD>
          <TD vAlign=3Dtop align=3Dmiddle><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
size=3D2><IMG=20
            height=3D14=20
            =
src=3D"http://www.eminidaytrading.com/erappin/images/arrow_up.gif"=20
            width=3D12 border=3D0></FONT></TD>
          <TD vAlign=3Dtop align=3Dleft><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
color=3D#33cc00=20
            size=3D2><B>1.25</B></FONT></TD></TR>
        <TR>
          <TD vAlign=3Dtop align=3Dleft><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
color=3D#33cc00=20
            size=3D2><B>NDU01</B></FONT></TD>
          <TD vAlign=3Dtop align=3Dleft><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
color=3Dblack=20
            size=3D2><B>1656.00</B></FONT></TD>
          <TD vAlign=3Dtop align=3Dleft><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
color=3Dblack=20
            size=3D2><B>1666.00</B></FONT></TD>
          <TD vAlign=3Dtop align=3Dleft><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
color=3Dblack=20
            size=3D2><B>1613.50</B></FONT></TD>
          <TD vAlign=3Dtop align=3Dmiddle><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
size=3D2><IMG=20
            height=3D14=20
            =
src=3D"http://www.eminidaytrading.com/erappin/images/arrow_up.gif"=20
            width=3D12 border=3D0></FONT></TD>
          <TD vAlign=3Dtop align=3Dleft><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
color=3D#33cc00=20
            size=3D2><B>32.00</B></FONT></TD></TR>
        <TR>
          <TD vAlign=3Dtop align=3Dleft><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
color=3D#33cc00=20
            size=3D2><B>NQU01</B></FONT></TD>
          <TD vAlign=3Dtop align=3Dleft><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
color=3Dblack=20
            size=3D2><B>1656.00</B></FONT></TD>
          <TD vAlign=3Dtop align=3Dleft><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
color=3Dblack=20
            size=3D2><B>1666.00</B></FONT></TD>
          <TD vAlign=3Dtop align=3Dleft><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
color=3Dblack=20
            size=3D2><B>1613.50</B></FONT></TD>
          <TD vAlign=3Dtop align=3Dmiddle><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
size=3D2><IMG=20
            height=3D14=20
            =
src=3D"http://www.eminidaytrading.com/erappin/images/arrow_up.gif"=20
            width=3D12 border=3D0></FONT></TD>
          <TD vAlign=3Dtop align=3Dleft><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
color=3D#33cc00=20
            size=3D2><B>32.00</B></FONT></TD></TR>
        <TR>
          <TD vAlign=3Dtop align=3Dleft><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
color=3D#33cc00=20
            size=3D2><B>DOW</B></FONT></TD>
          <TD vAlign=3Dtop align=3Dleft><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
color=3Dblack=20
            size=3D2><B>10415.91</B></FONT></TD>
          <TD vAlign=3Dtop align=3Dleft><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
color=3Dblack=20
            size=3D2><B>10445.80</B></FONT></TD>
          <TD vAlign=3Dtop align=3Dleft><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
color=3Dblack=20
            size=3D2><B>10367.06</B></FONT></TD>
          <TD vAlign=3Dtop align=3Dmiddle><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
size=3D2><IMG=20
            height=3D13=20
            =
src=3D"http://www.eminidaytrading.com/erappin/images/arrow_down.gif"=20
            width=3D12 border=3D0> </FONT></TD>
          <TD vAlign=3Dtop align=3Dleft><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
color=3D#ff0000=20
            size=3D2><B>0.34</B></FONT></TD></TR>
        <TR>
          <TD vAlign=3Dtop align=3Dleft><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
color=3D#33cc00=20
            size=3D2><B>NASDAQ</B></FONT></TD>
          <TD vAlign=3Dtop align=3Dleft><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
color=3Dblack=20
            size=3D2><B>1982.25</B></FONT></TD>
          <TD vAlign=3Dtop align=3Dleft><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
color=3Dblack=20
            size=3D2><B>1986.33</B></FONT></TD>
          <TD vAlign=3Dtop align=3Dleft><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
color=3Dblack=20
            size=3D2><B>1951.46</B></FONT></TD>
          <TD vAlign=3Dtop align=3Dmiddle><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
size=3D2><IMG=20
            height=3D14=20
            =
src=3D"http://www.eminidaytrading.com/erappin/images/arrow_up.gif"=20
            width=3D12 border=3D0></FONT></TD>
          <TD vAlign=3Dtop align=3Dleft><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
color=3D#33cc00=20
            size=3D2><B>25.78</B></FONT></TD></TR>
        <TR>
          <TD vAlign=3Dtop align=3Dleft><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
color=3D#33cc00=20
            size=3D2><B>SPX</B></FONT></TD>
          <TD vAlign=3Dtop align=3Dleft><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
color=3Dblack=20
            size=3D2><B>1191.29</B></FONT></TD>
          <TD vAlign=3Dtop align=3Dleft><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
color=3Dblack=20
            size=3D2><B>1193.82</B></FONT></TD>
          <TD vAlign=3Dtop align=3Dleft><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
color=3Dblack=20
            size=3D2><B>1185.12</B></FONT></TD>
          <TD vAlign=3Dtop align=3Dmiddle><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
size=3D2><IMG=20
            height=3D14=20
            =
src=3D"http://www.eminidaytrading.com/erappin/images/arrow_up.gif"=20
            width=3D12 border=3D0></FONT></TD>
          <TD vAlign=3Dtop align=3Dleft><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
color=3D#33cc00=20
            size=3D2><B>1.13</B></FONT></TD></TR>
        <TR>
          <TD vAlign=3Dtop align=3Dleft><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
color=3D#33cc00=20
            size=3D2><B>SOX</B></FONT></TD>
          <TD vAlign=3Dtop align=3Dleft><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
* PR# 1054 *
Subject: documented but missing from the code
From: Paul Gilbert <pgilbert@bank-banque-canada.ca>
Date: Wed, 15 Aug 2001 12:11:42 -0400
-- no notes --
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 1054 <==
From pgilbert@bank-banque-canada.ca  Wed Aug 15 18:19:33 2001
Received: from mail1.bank-banque-canada.ca (mail1.bank-banque-canada.ca [140.80.193.130])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id SAA10090
	for <R-bugs@biostat.ku.dk>; Wed, 15 Aug 2001 18:19:32 +0200 (MET DST)
Received: from fwx-int (fwx-int.bank-banque-canada.ca [140.80.193.129])
	by mail1.bank-banque-canada.ca (8.9.3/8.9.3) with SMTP id MAA28848
	for <R-bugs@biostat.ku.dk>; Wed, 15 Aug 2001 12:11:59 -0400 (EDT)
Received: from mfa99599.boc by mailhost.bank-banque-canada.ca (8.8.8+Sun/SMI-SVR4)
	id MAA27588; Wed, 15 Aug 2001 12:11:43 -0400 (EDT)
Received: from mfa01506.boc (mfa01506 [140.80.3.112])
	by mfa99599.boc (8.9.1b+Sun/8.9.1) with ESMTP id MAA29709
	for <R-bugs@biostat.ku.dk>; Wed, 15 Aug 2001 12:11:42 -0400 (EDT)
Received: from bank-banque-canada.ca (localhost [127.0.0.1])
	by mfa01506.boc (8.9.3+Sun/8.9.3) with ESMTP id MAA27218
	for <R-bugs@biostat.ku.dk>; Wed, 15 Aug 2001 12:11:42 -0400 (EDT)
Sender: pgilbert@bank-banque-canada.ca
Message-ID: <3B7A9F3E.F33011F8@bank-banque-canada.ca>
Date: Wed, 15 Aug 2001 12:11:42 -0400
From: Paul Gilbert <pgilbert@bank-banque-canada.ca>
X-Mailer: Mozilla 4.75 [en] (X11; U; SunOS 5.8 sun4u)
X-Accept-Language: en
MIME-Version: 1.0
To: R-bugs <R-bugs@biostat.ku.dk>
Subject: documented but missing from the code
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit

In R-devel (Aug 15) I am getting some warnings
"Objects documented but missing from the code:"

The ones I have checked are definitely in the code, so I suspect there is a bug in
this check. I'm very busy today and then away until after the projected release of
the new version so I cannot follow up on this as carefully as I would like to. I
expect the problem is reproducible with dse from CRAN, though I have been testing
with my own working copy.

Paul Gilbert



==> 1054.followup.1 <==
From ripley@stats.ox.ac.uk  Wed Aug 15 19:30:01 2001
Received: from toucan.stats.ox.ac.uk (toucan.stats.ox.ac.uk [163.1.20.20])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id TAA10341
	for <R-bugs@biostat.ku.dk>; Wed, 15 Aug 2001 19:30:01 +0200 (MET DST)
Received: from max102.public.ox.ac.uk (max102.public.ox.ac.uk [192.76.27.102])
	by toucan.stats.ox.ac.uk (8.9.0/8.9.0) with ESMTP id SAA18642;
	Wed, 15 Aug 2001 18:29:53 +0100 (BST)
Date: Wed, 15 Aug 2001 18:28:21 +0100 (BST)
From: Prof Brian D Ripley <ripley@stats.ox.ac.uk>
Sender: <ripley@auk.stats>
To: <pgilbert@bank-banque-canada.ca>
cc: <R-bugs@biostat.ku.dk>
Subject: Re: [Rd] documented but missing from the code (PR#1054)
In-Reply-To: <200108151619.SAA10100@pubhealth.ku.dk>
Message-ID: <Pine.GSO.4.31.0108151810150.19175-100000@auk.stats>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII

On Wed, 15 Aug 2001 pgilbert@bank-banque-canada.ca wrote:

> In R-devel (Aug 15) I am getting some warnings
> "Objects documented but missing from the code:"
>
> The ones I have checked are definitely in the code, so I suspect there is a bug in
> this check. I'm very busy today and then away until after the projected release of
> the new version so I cannot follow up on this as carefully as I would like to. I
> expect the problem is reproducible with dse from CRAN, though I have been testing
> with my own working copy.

Until very recently this was true for objects in zzz.R. One example in dse
is scale.default, which is not in the code and is in the documentation
(incorrectly). Generated objects are (correctly) marked as not in the code.


R-devel does not have a projected release date, and is not the next version
planned (1.3.1 on August 31).  I'd guess its release is several months off.


BTW, is it you who is responsible for the scale generic in R?
dse has

      scale <- function(x, ..., scale = TRUE) UseMethod("scale")

as R did, and that is incompatible with scale.default (and hence S's
scale) which does not have a ... argument.  Adding one forces the
scale argument to be named and breaks a lot of ported code.

Your own scale methods are also incompatible with your own generic.
Try running checkMethods().

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


==> 1054.reply.1 <==
From hornik@ci.tuwien.ac.at  Wed Aug 15 23:35:57 2001
Received: from mr.tuwien.ac.at (mr.tuwien.ac.at [128.130.2.10])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id XAA11101
	for <R-bugs@biostat.ku.dk>; Wed, 15 Aug 2001 23:35:56 +0200 (MET DST)
Received: from mithrandir.hornik.net (a20.dialin.tuwien.ac.at [192.35.240.30])
	by mr.tuwien.ac.at (8.11.1/8.11.1) with ESMTP id f7FLZQh21052;
	Wed, 15 Aug 2001 23:35:27 +0200 (MET DST)
Received: from hornik by mithrandir.hornik.net with local (Exim 3.12 #1 (Debian))
	id 15X6qE-0001lk-00; Wed, 15 Aug 2001 22:00:38 +0200
From: Kurt Hornik <Kurt.Hornik@ci.tuwien.ac.at>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
Message-ID: <15226.54502.941259.677297@mithrandir.hornik.net>
Date: Wed, 15 Aug 2001 22:00:38 +0200
To: ripley@stats.ox.ac.uk
Cc: r-devel@stat.math.ethz.ch, R-bugs@biostat.ku.dk
Subject: Re: [Rd] documented but missing from the code (PR#1054)
In-Reply-To: <200108151730.TAA10351@pubhealth.ku.dk>
References: <200108151730.TAA10351@pubhealth.ku.dk>
X-Mailer: VM 6.95 under Emacs 20.7.2
Reply-To: Kurt.Hornik@ci.tuwien.ac.at
Sender: Kurt Hornik <hornik@ci.tuwien.ac.at>

>>>>> ripley  writes:

> On Wed, 15 Aug 2001 pgilbert@bank-banque-canada.ca wrote:
>> In R-devel (Aug 15) I am getting some warnings
>> "Objects documented but missing from the code:"
>> 
>> The ones I have checked are definitely in the code, so I suspect there is a bug in
>> this check. I'm very busy today and then away until after the projected release of
>> the new version so I cannot follow up on this as carefully as I would like to. I
>> expect the problem is reproducible with dse from CRAN, though I have been testing
>> with my own working copy.

> Until very recently this was true for objects in zzz.R. One example in
> dse is scale.default, which is not in the code and is in the
> documentation (incorrectly). Generated objects are (correctly) marked
> as not in the code.

> R-devel does not have a projected release date, and is not the next
> version planned (1.3.1 on August 31).  I'd guess its release is
> several months off.

> BTW, is it you who is responsible for the scale generic in R?  dse has

>       scale <- function(x, ..., scale = TRUE) UseMethod("scale")

> as R did, and that is incompatible with scale.default (and hence S's
> scale) which does not have a ... argument.  Adding one forces the
> scale argument to be named and breaks a lot of ported code.

> Your own scale methods are also incompatible with your own generic.
> Try running checkMethods().

I have only tried a random sample of the warnings: e.g., dse2 has one
about `combine'.  This comes from the usage in combine.forecast.cov.Rd
being

    combine(obj1, obj2)

whereas the file actually documents the topics

\alias{combine.forecast.cov}
\alias{combine.forecast.cov.estimators.wrt.data}
\alias{combine.forecast.cov.estimators.wrt.true} 

and there is no object `combine' in the package:

hornik@mithrandir:~/tmp/dse.Rcheck/dse2/R$ grep combine *
combine.forecast.cov.estimators.wrt.data <- function(e1,e2)
combine.forecast.cov.estimators.wrt.true <- function(e1,e2)
combine.forecast.cov <- function(e1,e2)

So I would think that \usage documents an object that is missing from
the code.

-k

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
* PR# 1055 *
Subject:      books - special offers by eminidaytrading.com
From: eminidaytrading <erap@eminidaytrading.com>
Date:         Wed, 15 Aug 2001 22:01:34 -0400
-- no notes --
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 1055 <==
From postmaster@franz.stat.wisc.edu  Thu Aug 16 04:06:50 2001
Received: from franz.stat.wisc.edu (root@franz.stat.wisc.edu [128.105.174.95])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id EAA12117
	for <r-bugs@biostat.ku.dk>; Thu, 16 Aug 2001 04:06:49 +0200 (MET DST)
Received: from mail.eminidaytrading.com (really [63.148.242.91]) by franz.stat.wisc.edu
	via smail with esmtp
	id <m15XCYS-000JHHC@franz.stat.wisc.edu> (Debian Smail3.2.0.111)
	for <r-bugs@R-PROJECT.ORG>; Wed, 15 Aug 2001 21:06:40 -0500 (CDT) 
Received: from mail.eminidaytrading.com (mail.eminidaytrading.com [63.148.242.91])
	by mail.eminidaytrading.com (8.11.2/8.8.7) with ESMTP id f7G1ppN03435;
	Wed, 15 Aug 2001 21:51:51 -0400
Received: from MAIL.EMINIDAYTRADING.COM by MAIL.EMINIDAYTRADING.COM
          (LISTSERV-TCP/IP release 1.8d) with spool id 0004 for
          ERAPPERS@MAIL.EMINIDAYTRADING.COM; Wed, 15 Aug 2001 21:51:37 -0400
Approved-By: erap@EMINIDAYTRADING.COM
Received: from cc378816a (cc378816-a.srst1.fl.home.com [24.3.71.191]) by
          mail.eminidaytrading.com (8.11.2/8.8.7) with SMTP id f7G1nHN03276 for
          <erappers@list.eminidaytrading.com>; Wed, 15 Aug 2001 21:49:17 -0400
MIME-Version: 1.0
Content-Type: multipart/alternative;
              boundary="----=_NextPart_000_0020_01C125D5.D96940A0"
X-Priority: 3 (Normal)
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook IMO, Build 9.0.2416 (9.0.2910.0)
X-MIMEOLE: Produced By Microsoft MimeOLE V5.50.4522.1200
Importance: Normal
Message-ID:  <NDBBJFBEOLILFEODKBCHIELJCOAA.erap@eminidaytrading.com>
Date:         Wed, 15 Aug 2001 22:01:34 -0400
Reply-To: info@eminidaytrading.com
From: eminidaytrading <erap@eminidaytrading.com>
Subject:      books - special offers by eminidaytrading.com
Comments: To: erappers@list.eminidaytrading.com
To: ERAPPERS@mail.eminidaytrading.com

This is a multi-part message in MIME format.

------=_NextPart_000_0020_01C125D5.D96940A0
Content-Type: text/plain;
        charset="iso-8859-1"
Content-Transfer-Encoding: 7bit

books - special offers by eminidaytrading.com


----------------------------------------------------------------------------
----




            Attention OPTION Traders!!

            Don't miss this incredible event...

            THE OPTIONS TRADING FORUM
            October 9 & 10, Chicago, IL


            The BEST names in the business. The BIGGEST gathering of options
experts - EVER.
            Powerful workshops. Hands-on Software training sessions. MANY
unique extras.
            40% SAVINGS for early registration. It's ALL here as...


            ** Jon Najarian explains LEAPS and conducts a mock trading
session LIVE on the floor
               of the CBOE (sponsored by PTI Securities) - Register NOW as
this session is ONLY
               available to the first 150 Registrants.
            ** Larry McMillan is presented with the Traders' Hall of Fame
Award
            ** James Bittman - the CBOE's top trainer -covers advanced
options strategies
            ** Oliver Velez presents Pristine.com's primary options methods
for profiting in all market
               environments
            ** George Fontanills focuses on Powerful Volatility Strategies
            ** Discover how to Pinpoint Winning Opton Trades with OptionVue
            ** Max Ansbacher shares insider Techniques of a Professional
Money Manager
            ** Russ Wasendorf discusses Futures - or Futures Options: when
and how to choose

                                   PLUS ... * Greg Temel * Chris Terry *
Michael S. Williams
                                                     * Price Headley... And
MORE!

                                Register early & SAVE up to 40%!! Go here
NOW for details:

http://www.invest-store/eminidaytrading/otforum.html

                             NOTE: The Live mock-trading session at the CBOE
is open ONLY to
                                  The first 150 registrants - so DON'T
delay. Register TODAY!*


***************************************************

            This unprecedented trading event features the foremost Options
Traders in the industry -
            for 2 full days of powerful, profit-building workshops. SAVE up
to 40% when you register
            early by the deadline. PLUS ... this exclusive event gives you
...

            ** Small, intimate workshops promising one-on-one attention
            ** An Awards Banquet honoring Larry McMillan, Traders Hall of
Fame recipient,
                with entertainment by the renowned comedy troupe "Second
City"
            ** Strategies and insider information that can take your trading
to new levels - trade after
                trade
            ** FREE Stuff, Dozens of product demos & samples from software,
data and research firms
            ** An exclusive cocktail party - and key note luncheon
            ** A cast of trading luminaries you CAN'T find together anywhere
else

                                       **** LIVE TRADING SESSION is filling
up FAST ****
                               Seating is very limited - and this particular
event WILL SELL OUT
                                          ONLY the first 150 full paid
registrants can get in!

                           ALL OF THIS at the incredibly LOW price of $495 -
if you register early
                          ($695 after the deadline). Click here now for
details on the full conference
                                                      schedule - or to
register NOW:

http://www.invest-store/eminidaytrading/otforum.html

            This is definitely the PREMIERE OPTIONS Event of the year - with
a cast of luminaries -
            in small workshops - and many extras you won't find at other
trade shows.

            Previous FORUM attendees rave about the great value this show
delivers, and say....
            " I feel I can take something home that I can IMMEDIATELY USE."

                                     But you must register early to get the
BIG SAVINGS.....

                                    Early bird rate: $495                2
people for just : $839
                                                Each additional person: $389
each

                                                     Register now - or get
full details:

http://www.invest-store/eminidaytrading/otforum.html

            This event is sponsored by: Wall Street Access, Option Vue, PTI
securities, Beyond
                                                    the Bull, John Wiley &
Sons


________________________________________________________________________

            This is an email service to inform you of special discounts, new
releases,
            and trading book reviews.

            Copyright 2001 by eminidaytrading Inc.







------=_NextPart_000_0020_01C125D5.D96940A0
Content-Type: text/html;
        charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable

<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<HTML><HEAD><TITLE>books - special offers by =
eminidaytrading.com</TITLE><BASE=20
href=3Dhttp://www.eminidaytrading.com/books/books_options.html>
<META http-equiv=3Dcontent-type =
content=3Dtext/html;charset=3DISO-8859-1>
<META content=3D"MSHTML 5.50.4522.1800" name=3DGENERATOR></HEAD>
<BODY vLink=3D#ff00ff link=3D#ff00ff bgColor=3Dblack>
<DIV>&nbsp;</DIV>
<DIV>&nbsp;</DIV>
<HR>

<DIV align=3Dcenter>
<TABLE height=3D766 cellSpacing=3D0 cellPadding=3D0 width=3D581 =
border=3D0 showgridy=20
showgridx gridy=3D"2" gridx=3D"2" usegridy usegridx cool>
  <TBODY>
  <TR height=3D120>
    <TD vAlign=3Dtop align=3Dleft width=3D580 colSpan=3D2 height=3D120 =
xpos=3D"0"><IMG=20
      height=3D120 src=3D"images/books_top.gif" width=3D580=20
      useMap=3D#erappin_topb794dc2a border=3D0></TD>
    <TD width=3D1 height=3D120><SPACER height=3D"120" width=3D"1" =
type=3D"block"></TD></TR>
  <TR height=3D564>
    <TD width=3D10 height=3D645 rowSpan=3D2></TD>
    <TD vAlign=3Dtop align=3Dleft width=3D570 height=3D564 xpos=3D"10">
      <TABLE cellSpacing=3D0 cellPadding=3D14 width=3D561 =
bgColor=3D#ffffff border=3D0>
        <TBODY>
        <TR>
          <TD vAlign=3Dtop align=3Dleft width=3D533>
            <P align=3Dcenter><A target=3D_blank=20
            =
href=3D"http://www.invest-store.com/eminidaytrading/otforum_lb.html"><IMG=
=20
            height=3D60=20
            =
src=3D"http://www.invest-store.com/images/resource/otforum_lb.gif"=20
            width=3D486 border=3D0></A><BR><BR><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
color=3D#000000=20
            size=3D3><B>Attention OPTION Traders!!</B></FONT><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
color=3D#000000=20
            size=3D2><BR></FONT><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
color=3D#000000=20
            size=3D2><BR>Don't miss this incredible =
event...<BR></FONT><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
color=3D#000000=20
            size=3D2><BR><B>THE OPTIONS TRADING FORUM<BR>October 9 &amp; =
10,=20
            Chicago, IL</B> </FONT></P>
            <P align=3Dleft><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
color=3D#000000=20
            size=3D2><BR>The BEST names in the business. The BIGGEST =
gathering of=20
            options experts - EVER.<BR></FONT>Powerful workshops. =
Hands-on=20
            Software training sessions. MANY unique extras.<BR>40% =
SAVINGS for=20
            early registration. It's ALL here as...</P>
            <P align=3Dleft><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
color=3D#000000=20
            size=3D2><BR>** Jon Najarian explains LEAPS and conducts a =
mock=20
            trading session LIVE on the floor<BR>&nbsp;&nbsp; of the =
CBOE=20
            (sponsored by PTI Securities) - Register NOW as this session =
is=20
            ONLY<BR>&nbsp;&nbsp; available to the first 150 =
Registrants.<BR>**=20
            Larry McMillan is presented with the Traders' Hall of Fame=20
            Award<BR>** James Bittman - the CBOE's top trainer -covers =
advanced=20
            options strategies<BR>** Oliver Velez presents =
Pristine.com's=20
            primary options methods for profiting in all =
market<BR>&nbsp;&nbsp;=20
            environments<BR>** George Fontanills focuses on Powerful =
Volatility=20
            Strategies<BR>** Discover how to Pinpoint Winning Opton =
Trades with=20
            OptionVue<BR>** Max Ansbacher shares insider Techniques of a =

            Professional Money Manager<BR>** Russ Wasendorf discusses =
Futures -=20
            or Futures Options: when and how to=20
            =
choose<BR><BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp=
;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=
=20
            PLUS ... * Greg Temel * Chris Terry * Michael S.=20
            =
Williams<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&=
nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&n=
bsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nb=
sp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=20
            * Price Headley... And=20
            =
MORE!<BR><BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=20
            <B>Register early &amp; SAVE up to 40%!! Go here NOW for=20
            =
details:</B><BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nb=
sp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbs=
p;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=20
            <A=20
            =
href=3D"http://www.invest-store/eminidaytrading/otforum.html">http://www.=
invest-store/eminidaytrading/otforum.html</A></FONT></P>
            <P align=3Dleft><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
color=3D#000000=20
            =
size=3D2>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbs=
p;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=20
            NOTE: The Live mock-trading session at the CBOE is open ONLY =

            =
to<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&=
nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=20
            The first 150 registrants - so DON'T delay. Register=20
            TODAY!*</FONT></P>
            <P align=3Dleft><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
color=3D#000000=20
            =
size=3D2>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbs=
p;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp=
;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=20
            =
***************************************************</FONT></P>
            <P align=3Dleft><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
color=3D#000000=20
            size=3D2>This unprecedented trading event features the =
foremost=20
            Options Traders in the industry -&nbsp;<BR>for 2 full days =
of=20
            powerful, profit-building workshops. SAVE up to 40% when you =

            register<BR>early by the deadline. PLUS ... this exclusive =
event=20
            gives you ...</FONT></P>
            <P align=3Dleft><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
color=3D#000000=20
            size=3D2>** Small, intimate workshops promising one-on-one=20
            attention<BR>** An Awards Banquet honoring Larry McMillan, =
Traders=20
            Hall of Fame recipient,</FONT><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
color=3D#000000=20
            size=3D2><BR>&nbsp;&nbsp;&nbsp; with entertainment by the =
renowned=20
            comedy troupe "Second City"<BR>** Strategies and insider =
information=20
            that can take your trading to new levels - trade=20
            after<BR>&nbsp;&nbsp;&nbsp; trade<BR>** FREE Stuff, Dozens =
of=20
            product demos &amp; samples from software, data and research =

            firms<BR>** An exclusive cocktail party - and key note=20
            luncheon<BR>** A cast of trading luminaries you CAN'T find =
together=20
            anywhere else</FONT></P>
            <P align=3Dleft><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
color=3D#000000=20
            =
size=3D2>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbs=
p;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp=
;&nbsp;&nbsp;&nbsp;=20
            **** LIVE TRADING SESSION is filling up FAST=20
            =
****<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp=
;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=20
            Seating is very limited - and this particular event WILL =
SELL=20
            =
OUT<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&=
nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=20
            ONLY the first 150 full paid registrants can get=20
            =
in!<BR><BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&n=
bsp;&nbsp;&nbsp;&nbsp;=20
            ALL OF THIS at the incredibly LOW price of $495 - if you =
register=20
            =
early<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbs=
p;&nbsp;&nbsp;=20
            ($695 after the deadline). Click here now for details on the =
full=20
            =
conference<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp=
;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&=
nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=20
            schedule - or to register NOW:<BR></FONT><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
color=3D#000000=20
            =
size=3D2>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbs=
p;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp=
;&nbsp;&nbsp;&nbsp;=20
            <A=20
            =
href=3D"http://www.invest-store/eminidaytrading/otforum.html">http://www.=
invest-store/eminidaytrading/otforum.html</A></FONT></P>
            <P align=3Dleft><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
color=3D#000000=20
            size=3D2>This is definitely the PREMIERE OPTIONS Event of =
the year -=20
            with a cast of luminaries -<BR>in small workshops - and many =
extras=20
            you won't find at other trade shows.</FONT></P>
            <P align=3Dleft><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
color=3D#000000=20
            size=3D2>Previous FORUM attendees rave about the great value =
this show=20
            delivers, and say....<BR>" I feel I can take something home =
that I=20
            can IMMEDIATELY USE."</FONT></P>
            <P align=3Dleft><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
color=3D#000000=20
            =
size=3D2>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbs=
p;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp=
;&nbsp;=20
            But you must register early to get the BIG =
SAVINGS.....</FONT></P>
            <P align=3Dleft><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
color=3D#000000=20
            =
size=3D2><B>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&=
nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&n=
bsp;=20
            Early bird rate:=20
            =
$495&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nb=
sp;&nbsp;&nbsp;&nbsp;=20
            2 people for just :=20
            =
$839<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp=
;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; =

            Each additional person: $389 each</B></FONT></P>
            <P align=3Dleft><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
color=3D#000000=20
            =
size=3D2>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbs=
p;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp=
;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=20
            Register now - or get full details:<BR></FONT><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
color=3D#000000=20
            =
size=3D2>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbs=
p;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp=
;&nbsp;=20
            <A=20
            =
href=3D"http://www.invest-store/eminidaytrading/otforum.html">http://www.=
invest-store/eminidaytrading/otforum.html</A></FONT></P>
            <P align=3Dleft><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
color=3D#000000=20
            size=3D2>This event is sponsored by: Wall Street Access, =
Option Vue,=20
            PTI securities,=20
            =
Beyond<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nb=
sp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbs=
p;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp=
;&nbsp;&nbsp;&nbsp;&nbsp;=20
            the Bull, John Wiley &amp; Sons<BR></FONT><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
color=3D#000000=20
            size=3D2><BR></FONT><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
color=3D#000000=20
            =
size=3D2>________________________________________________________________=
________<BR></FONT><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
color=3D#000000=20
            size=3D2><BR></FONT><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
color=3D#000000=20
            size=3D2>This is an email service to inform you of special =
discounts,=20
            new releases,</FONT><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
color=3D#000000=20
            size=3D2><BR></FONT><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
color=3D#000000=20
            size=3D2>and trading book reviews.&nbsp;</FONT><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular=20
            size=3D2><BR></FONT><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
* PR# 1056 *
Subject:      books - special offers by eminidaytrading.com
From: eminidaytrading <erap@eminidaytrading.com>
Date:         Thu, 16 Aug 2001 00:03:08 -0400
-- no notes --
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 1056 <==
From postmaster@franz.stat.wisc.edu  Thu Aug 16 06:30:25 2001
Received: from franz.stat.wisc.edu (root@franz.stat.wisc.edu [128.105.174.95])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id GAA12252
	for <r-bugs@biostat.ku.dk>; Thu, 16 Aug 2001 06:30:24 +0200 (MET DST)
Received: from mail.eminidaytrading.com (really [63.148.242.91]) by franz.stat.wisc.edu
	via smail with esmtp
	id <m15XEnS-000JHHC@franz.stat.wisc.edu> (Debian Smail3.2.0.111)
	for <r-bugs@R-PROJECT.ORG>; Wed, 15 Aug 2001 23:30:18 -0500 (CDT) 
Received: from mail.eminidaytrading.com (mail.eminidaytrading.com [63.148.242.91])
	by mail.eminidaytrading.com (8.11.2/8.8.7) with ESMTP id f7G3tgN20447;
	Wed, 15 Aug 2001 23:55:42 -0400
Received: from MAIL.EMINIDAYTRADING.COM by MAIL.EMINIDAYTRADING.COM
          (LISTSERV-TCP/IP release 1.8d) with spool id 0002 for
          ERAPPERS@MAIL.EMINIDAYTRADING.COM; Wed, 15 Aug 2001 23:55:27 -0400
Approved-By: erap@EMINIDAYTRADING.COM
Received: from cc378816a (cc378816-a.srst1.fl.home.com [24.3.71.191]) by
          mail.eminidaytrading.com (8.11.2/8.8.7) with SMTP id f7G3oqN19910 for
          <erappers@eminidaytrading.com>; Wed, 15 Aug 2001 23:50:52 -0400
MIME-Version: 1.0
Content-Type: multipart/alternative;
              boundary="----=_NextPart_000_0052_01C125E6.D500F4C0"
X-Priority: 3 (Normal)
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook IMO, Build 9.0.2416 (9.0.2910.0)
X-MIMEOLE: Produced By Microsoft MimeOLE V5.50.4522.1200
Importance: Normal
Message-ID:  <NDBBJFBEOLILFEODKBCHEENDCOAA.erap@eminidaytrading.com>
Date:         Thu, 16 Aug 2001 00:03:08 -0400
Reply-To: info@eminidaytrading.com
From: eminidaytrading <erap@eminidaytrading.com>
Subject:      books - special offers by eminidaytrading.com
Comments: To: erappers@eminidaytrading.com
To: ERAPPERS@mail.eminidaytrading.com

This is a multi-part message in MIME format.

------=_NextPart_000_0052_01C125E6.D500F4C0
Content-Type: text/plain;
        charset="iso-8859-1"
Content-Transfer-Encoding: 7bit

books - special offers by eminidaytrading.com


----------------------------------------------------------------------------
----




            Attention OPTION Traders!!

            Don't miss this incredible event...

            THE OPTIONS TRADING FORUM
            October 9 & 10, Chicago, IL


            The BEST names in the business. The BIGGEST gathering of options
experts - EVER.
            Powerful workshops. Hands-on Software training sessions. MANY
unique extras.
            40% SAVINGS for early registration. It's ALL here as...


            ** Jon Najarian explains LEAPS and conducts a mock trading
session LIVE on the floor
               of the CBOE (sponsored by PTI Securities) - Register NOW as
this session is ONLY
               available to the first 150 Registrants.
            ** Larry McMillan is presented with the Traders' Hall of Fame
Award
            ** James Bittman - the CBOE's top trainer -covers advanced
options strategies
            ** Oliver Velez presents Pristine.com's primary options methods
for profiting in all market
               environments
            ** George Fontanills focuses on Powerful Volatility Strategies
            ** Discover how to Pinpoint Winning Opton Trades with OptionVue
            ** Max Ansbacher shares insider Techniques of a Professional
Money Manager
            ** Russ Wasendorf discusses Futures - or Futures Options: when
and how to choose

                                   PLUS ... * Greg Temel * Chris Terry *
Michael S. Williams
                                                     * Price Headley... And
MORE!

                                Register early & SAVE up to 40%!! Go here
NOW for details:

http://www.invest-store.com/eminidaytrading/otforum.html

                             NOTE: The Live mock-trading session at the CBOE
is open ONLY to
                                  The first 150 registrants - so DON'T
delay. Register TODAY!*


***************************************************

            This unprecedented trading event features the foremost Options
Traders in the industry -
            for 2 full days of powerful, profit-building workshops. SAVE up
to 40% when you register
            early by the deadline. PLUS ... this exclusive event gives you
...

            ** Small, intimate workshops promising one-on-one attention
            ** An Awards Banquet honoring Larry McMillan, Traders Hall of
Fame recipient,
                with entertainment by the renowned comedy troupe "Second
City"
            ** Strategies and insider information that can take your trading
to new levels - trade after
                trade
            ** FREE Stuff, Dozens of product demos & samples from software,
data and research firms
            ** An exclusive cocktail party - and key note luncheon
            ** A cast of trading luminaries you CAN'T find together anywhere
else

                                       **** LIVE TRADING SESSION is filling
up FAST ****
                               Seating is very limited - and this particular
event WILL SELL OUT
                                          ONLY the first 150 full paid
registrants can get in!

                           ALL OF THIS at the incredibly LOW price of $495 -
if you register early
                          ($695 after the deadline). Click here now for
details on the full conference
                                                      schedule - or to
register NOW:

http://www.invest-store.com/eminidaytrading/otforum.html

            This is definitely the PREMIERE OPTIONS Event of the year - with
a cast of luminaries -
            in small workshops - and many extras you won't find at other
trade shows.

            Previous FORUM attendees rave about the great value this show
delivers, and say....
            " I feel I can take something home that I can IMMEDIATELY USE."

                                     But you must register early to get the
BIG SAVINGS.....

                                    Early bird rate: $495                2
people for just : $839
                                                Each additional person: $389
each

                                                     Register now - or get
full details:

http://www.invest-store.com/eminidaytrading/otforum.html

            This event is sponsored by: Wall Street Access, Option Vue, PTI
securities, Beyond
                                                    the Bull, John Wiley &
Sons


________________________________________________________________________

            This is an email service to inform you of special discounts, new
releases,
            and trading book reviews.

            Copyright 2001 by eminidaytrading Inc.







------=_NextPart_000_0052_01C125E6.D500F4C0
Content-Type: text/html;
        charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable

<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<HTML><HEAD><TITLE>books - special offers by =
eminidaytrading.com</TITLE><BASE=20
href=3Dhttp://www.eminidaytrading.com/books/books_options.html>
<META http-equiv=3Dcontent-type =
content=3Dtext/html;charset=3DISO-8859-1>
<META content=3D"MSHTML 5.50.4522.1800" name=3DGENERATOR></HEAD>
<BODY vLink=3D#ff00ff link=3D#ff00ff bgColor=3Dblack>
<DIV>&nbsp;</DIV>
<DIV>&nbsp;</DIV>
<HR>

<DIV align=3Dcenter>
<TABLE height=3D766 cellSpacing=3D0 cellPadding=3D0 width=3D581 =
border=3D0 showgridy=20
showgridx gridy=3D"2" gridx=3D"2" usegridy usegridx cool>
  <TBODY>
  <TR height=3D120>
    <TD vAlign=3Dtop align=3Dleft width=3D580 colSpan=3D2 height=3D120 =
xpos=3D"0"><IMG=20
      height=3D120 src=3D"images/books_top.gif" width=3D580=20
      useMap=3D#erappin_topb794dc2a border=3D0></TD>
    <TD width=3D1 height=3D120><SPACER height=3D"120" width=3D"1" =
type=3D"block"></TD></TR>
  <TR height=3D564>
    <TD width=3D10 height=3D645 rowSpan=3D2></TD>
    <TD vAlign=3Dtop align=3Dleft width=3D570 height=3D564 xpos=3D"10">
      <TABLE cellSpacing=3D0 cellPadding=3D14 width=3D561 =
bgColor=3D#ffffff border=3D0>
        <TBODY>
        <TR>
          <TD vAlign=3Dtop align=3Dleft width=3D533>
            <P align=3Dcenter><A target=3D_blank=20
            =
href=3D"http://www.invest-store.com/eminidaytrading/otforum.html"><IMG=20
            height=3D60=20
            =
src=3D"http://www.invest-store.com/images/resource/otforum_lb.gif"=20
            width=3D486 border=3D0></A><BR><BR><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
color=3D#000000=20
            size=3D3><B>Attention OPTION Traders!!</B></FONT><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
color=3D#000000=20
            size=3D2><BR></FONT><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
color=3D#000000=20
            size=3D2><BR>Don't miss this incredible =
event...<BR></FONT><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
color=3D#000000=20
            size=3D2><BR><B>THE OPTIONS TRADING FORUM<BR>October 9 &amp; =
10,=20
            Chicago, IL</B> </FONT></P>
            <P align=3Dleft><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
color=3D#000000=20
            size=3D2><BR>The BEST names in the business. The BIGGEST =
gathering of=20
            options experts - EVER.<BR></FONT>Powerful workshops. =
Hands-on=20
            Software training sessions. MANY unique extras.<BR>40% =
SAVINGS for=20
            early registration. It's ALL here as...</P>
            <P align=3Dleft><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
color=3D#000000=20
            size=3D2><BR>** Jon Najarian explains LEAPS and conducts a =
mock=20
            trading session LIVE on the floor<BR>&nbsp;&nbsp; of the =
CBOE=20
            (sponsored by PTI Securities) - Register NOW as this session =
is=20
            ONLY<BR>&nbsp;&nbsp; available to the first 150 =
Registrants.<BR>**=20
            Larry McMillan is presented with the Traders' Hall of Fame=20
            Award<BR>** James Bittman - the CBOE's top trainer -covers =
advanced=20
            options strategies<BR>** Oliver Velez presents =
Pristine.com's=20
            primary options methods for profiting in all =
market<BR>&nbsp;&nbsp;=20
            environments<BR>** George Fontanills focuses on Powerful =
Volatility=20
            Strategies<BR>** Discover how to Pinpoint Winning Opton =
Trades with=20
            OptionVue<BR>** Max Ansbacher shares insider Techniques of a =

            Professional Money Manager<BR>** Russ Wasendorf discusses =
Futures -=20
            or Futures Options: when and how to=20
            =
choose<BR><BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp=
;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=
=20
            PLUS ... * Greg Temel * Chris Terry * Michael S.=20
            =
Williams<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&=
nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&n=
bsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nb=
sp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=20
            * Price Headley... And=20
            =
MORE!<BR><BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=20
            <B>Register early &amp; SAVE up to 40%!! Go here NOW for=20
            =
details:</B><BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nb=
sp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbs=
p;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=20
            <A=20
            =
href=3D"http://www.invest-store.com/eminidaytrading/otforum.html">http://=
www.invest-store.com/eminidaytrading/otforum.html</A></FONT></P>
            <P align=3Dleft><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
color=3D#000000=20
            =
size=3D2>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbs=
p;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=20
            NOTE: The Live mock-trading session at the CBOE is open ONLY =

            =
to<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&=
nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=20
            The first 150 registrants - so DON'T delay. Register=20
            TODAY!*</FONT></P>
            <P align=3Dleft><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
color=3D#000000=20
            =
size=3D2>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbs=
p;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp=
;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=20
            =
***************************************************</FONT></P>
            <P align=3Dleft><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
color=3D#000000=20
            size=3D2>This unprecedented trading event features the =
foremost=20
            Options Traders in the industry -&nbsp;<BR>for 2 full days =
of=20
            powerful, profit-building workshops. SAVE up to 40% when you =

            register<BR>early by the deadline. PLUS ... this exclusive =
event=20
            gives you ...</FONT></P>
            <P align=3Dleft><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
color=3D#000000=20
            size=3D2>** Small, intimate workshops promising one-on-one=20
            attention<BR>** An Awards Banquet honoring Larry McMillan, =
Traders=20
            Hall of Fame recipient,</FONT><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
color=3D#000000=20
            size=3D2><BR>&nbsp;&nbsp;&nbsp; with entertainment by the =
renowned=20
            comedy troupe "Second City"<BR>** Strategies and insider =
information=20
            that can take your trading to new levels - trade=20
            after<BR>&nbsp;&nbsp;&nbsp; trade<BR>** FREE Stuff, Dozens =
of=20
            product demos &amp; samples from software, data and research =

            firms<BR>** An exclusive cocktail party - and key note=20
            luncheon<BR>** A cast of trading luminaries you CAN'T find =
together=20
            anywhere else</FONT></P>
            <P align=3Dleft><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
color=3D#000000=20
            =
size=3D2>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbs=
p;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp=
;&nbsp;&nbsp;&nbsp;=20
            **** LIVE TRADING SESSION is filling up FAST=20
            =
****<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp=
;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=20
            Seating is very limited - and this particular event WILL =
SELL=20
            =
OUT<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&=
nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=20
            ONLY the first 150 full paid registrants can get=20
            =
in!<BR><BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&n=
bsp;&nbsp;&nbsp;&nbsp;=20
            ALL OF THIS at the incredibly LOW price of $495 - if you =
register=20
            =
early<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbs=
p;&nbsp;&nbsp;=20
            ($695 after the deadline). Click here now for details on the =
full=20
            =
conference<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp=
;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&=
nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=20
            schedule - or to register NOW:<BR></FONT><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
color=3D#000000=20
            =
size=3D2>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbs=
p;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp=
;&nbsp;&nbsp;&nbsp;=20
            <A=20
            =
href=3D"http://www.invest-store.com/eminidaytrading/otforum.html">http://=
www.invest-store.com/eminidaytrading/otforum.html</A></FONT></P>
            <P align=3Dleft><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
color=3D#000000=20
            size=3D2>This is definitely the PREMIERE OPTIONS Event of =
the year -=20
            with a cast of luminaries -<BR>in small workshops - and many =
extras=20
            you won't find at other trade shows.</FONT></P>
            <P align=3Dleft><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
color=3D#000000=20
            size=3D2>Previous FORUM attendees rave about the great value =
this show=20
            delivers, and say....<BR>" I feel I can take something home =
that I=20
            can IMMEDIATELY USE."</FONT></P>
            <P align=3Dleft><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
color=3D#000000=20
            =
size=3D2>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbs=
p;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp=
;&nbsp;=20
            But you must register early to get the BIG =
SAVINGS.....</FONT></P>
            <P align=3Dleft><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
color=3D#000000=20
            =
size=3D2><B>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&=
nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&n=
bsp;=20
            Early bird rate:=20
            =
$495&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nb=
sp;&nbsp;&nbsp;&nbsp;=20
            2 people for just :=20
            =
$839<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp=
;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; =

            Each additional person: $389 each</B></FONT></P>
            <P align=3Dleft><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
color=3D#000000=20
            =
size=3D2>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbs=
p;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp=
;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=20
            Register now - or get full details:<BR></FONT><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
color=3D#000000=20
            =
size=3D2>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbs=
p;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp=
;&nbsp;=20
            <A=20
            =
href=3D"http://www.invest-store.com/eminidaytrading/otforum.html">http://=
www.invest-store.com/eminidaytrading/otforum.html</A></FONT></P>
            <P align=3Dleft><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
color=3D#000000=20
            size=3D2>This event is sponsored by: Wall Street Access, =
Option Vue,=20
            PTI securities,=20
            =
Beyond<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nb=
sp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbs=
p;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp=
;&nbsp;&nbsp;&nbsp;&nbsp;=20
            the Bull, John Wiley &amp; Sons<BR></FONT><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
color=3D#000000=20
            size=3D2><BR></FONT><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
color=3D#000000=20
            =
size=3D2>________________________________________________________________=
________<BR></FONT><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
color=3D#000000=20
            size=3D2><BR></FONT><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
color=3D#000000=20
            size=3D2>This is an email service to inform you of special =
discounts,=20
            new releases,</FONT><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
color=3D#000000=20
            size=3D2><BR></FONT><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
color=3D#000000=20
            size=3D2>and trading book reviews.&nbsp;</FONT><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular=20
            size=3D2><BR></FONT><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
color=3Dblack=20
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
* PR# 1057 *
Subject: crt1.o skipped at configure time ?
From: laurent@cbs.dtu.dk
Date: Thu, 16 Aug 2001 08:52:34 +0200 (MET DST)
-- no notes --
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 1057 <==
From laurent@cbs.dtu.dk  Thu Aug 16 08:52:35 2001
Received: from blueberry.kubism.ku.dk (blueberry [130.225.108.193])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id IAA12801
	for <R-bugs@biostat.ku.dk>; Thu, 16 Aug 2001 08:52:34 +0200 (MET DST)
Date: Thu, 16 Aug 2001 08:52:34 +0200 (MET DST)
From: laurent@cbs.dtu.dk
Message-Id: <200108160652.IAA12801@pubhealth.ku.dk>
To: R-bugs@biostat.ku.dk
Subject: crt1.o skipped at configure time ?

Full_Name: Laurent Gautier
Version: 1.3.0-patched
OS: IRIX 6.5
Submission from: (NULL) (130.225.67.199)





During the configuration step, things do not go perfect:

The file config.log has :

configure:3754: gcc -o conftest -g -O2 -I/usr/freeware/include
-I/usr/local/include  -static conftest.c -L/usr/local/lib 1>&5
ld32: FATAL   9  : I/O error (/usr/lib32/mips3/nonshared/crt1.o): No such file
or directory

here is a list of what's in mips3
laurent@ibiology> ls /usr/lib32/mips3/
crt1.o             libdmnet.so        libfpe.so          libmalloc_cv.so
crtn.o             libdmnet.so.1      libfpe_ss.so       libmalloc_ss.so
dmedia             libdplace.so       libftn.so          libmangle.a
dsmcrt.o           libdprof.so        libftn90.so        libmp.a
fixade.o           libelfutil.a       libinstr.so        libmp.so
libMMmalloc.a      libelfutil_xtnd.a  libio_ss.so        libmpc.a
libMMmalloc.so     libexc.so          libkapio.a         libmpi_ss.so
libblas.so         libfastm.a         libkmem.a          libmx.a
libblas_mp.so      libfastm.so        libksync.so        libmx.so
libc.so            libfetchop.so      libksync.so.1      libsgidl.a
libc.so.1          libffio.a          libm.a             libss.so
libdlook.so        libffio.so         libm.so            libssrt.so
libdmedia.so       libfortran.so      libm43.a           mcrt1.o
libdmedia.so.1     libfpe.a           libm43.so



...if it's a real problem (and not the installation here being _really_ exotic,
 it should be fixed in a wink)


Best regards,



Laurent
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
* PR# 1058 *
Subject:      erappin' - daily morning update 8-16-01
From: eminidaytrading <erap@eminidaytrading.com>
Date:         Thu, 16 Aug 2001 07:40:00 -0400
-- no notes --
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 1058 <==
From postmaster@franz.stat.wisc.edu  Thu Aug 16 13:56:03 2001
Received: from franz.stat.wisc.edu (root@franz.stat.wisc.edu [128.105.174.95])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id NAA16779
	for <r-bugs@biostat.ku.dk>; Thu, 16 Aug 2001 13:56:01 +0200 (MET DST)
Received: from mail.eminidaytrading.com (really [63.148.242.91]) by franz.stat.wisc.edu
	via smail with esmtp
	id <m15XLkf-000JJ7C@franz.stat.wisc.edu> (Debian Smail3.2.0.111)
	for <r-bugs@R-PROJECT.ORG>; Thu, 16 Aug 2001 06:55:53 -0500 (CDT) 
Received: from mail.eminidaytrading.com (mail.eminidaytrading.com [63.148.242.91])
	by mail.eminidaytrading.com (8.11.2/8.8.7) with ESMTP id f7GBT9N28236;
	Thu, 16 Aug 2001 07:29:09 -0400
Received: from MAIL.EMINIDAYTRADING.COM by MAIL.EMINIDAYTRADING.COM
          (LISTSERV-TCP/IP release 1.8d) with spool id 0175 for
          ERAPPERS@MAIL.EMINIDAYTRADING.COM; Thu, 16 Aug 2001 07:28:55 -0400
Approved-By: erap@EMINIDAYTRADING.COM
Received: from cc378816a (cc378816-a.srst1.fl.home.com [24.3.71.191]) by
          mail.eminidaytrading.com (8.11.2/8.8.7) with SMTP id f7GBRbN28082 for
          <erappers@list.eminidaytrading.com>; Thu, 16 Aug 2001 07:27:37 -0400
MIME-Version: 1.0
Content-Type: multipart/alternative;
              boundary="----=_NextPart_000_0069_01C12626.A77722A0"
X-Priority: 3 (Normal)
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook IMO, Build 9.0.2416 (9.0.2910.0)
X-MimeOLE: Produced By Microsoft MimeOLE V5.50.4522.1200
Importance: Normal
Message-ID:  <NDBBJFBEOLILFEODKBCHMEPECOAA.erap@eminidaytrading.com>
Date:         Thu, 16 Aug 2001 07:40:00 -0400
Reply-To: info@eminidaytrading.com
From: eminidaytrading <erap@eminidaytrading.com>
Subject:      erappin' - daily morning update 8-16-01
Comments: To: erappers@list.eminidaytrading.com
To: ERAPPERS@mail.eminidaytrading.com

This is a multi-part message in MIME format.

------=_NextPart_000_0069_01C12626.A77722A0
Content-Type: text/plain;
        charset="iso-8859-1"
Content-Transfer-Encoding: 7bit

erappin' - daily morning update


----------------------------------------------------------------------------
----

 MARKET IN STALEMATE

      Traders were not impressed with the economic data released Wednesday
morning. At first, traders thought to see a spark of positive news in some
part of the Industrial Production data. Locals tried taking out the
overnight high at NQ 1649 but failed and sellers (with very limited dealer
involvement) took us lower to make new intraday lows. Around noon, the
market tried to bounce off those levels but ended up breaking the a.m. lows
again. What will it take to get the bulls buying again? Please let it be
something other than the Fed's rate cuts. We have seen interest rates drop
all year, but are still waiting for the momentum to pick up.

      Wednesday's Industrial Production (IP) came in -0.1% versus an
expected drop of 0.3% from June's originally -0.7% (which got revised
downward to -0.9%). The July slide gave the manufacturing production a tenth
consecutive decline which is not a sign of an improving economy.

            Symbol Close High Low  Gain/Loss
            SPU01 1180.80 1195.20 1179.50   11.50
            ESU01 1180.75 1195.25 1179.50   11.50
            NDU01 1576.50 1649.00 1574.00   58.00
            NQU01 1576.50 1649.00 1574.00   58.00
            DOW 10345.95 10469.74 10340.76   66.22
            NASDAQ 1918.89 1975.18 1918.74   45.64
            SPX 1178.02 1191.21 1177.61   8.71
            SOX 572.92 60.63 572.70  21.08
            VIX 23.77 24.01 23.05  0.76


      U.S. ECONOMIC OUTLOOK

      One year ago, we had the Industrial Production 3.2% higher than the
current level. July's manufacturing production was unchanged after nine
consecutive monthly declines. Even though we did not see a worse July
figure, one should not be too optimistic about the overall report as it will
be very likely revised downward again once August's data is released. The
Capacity Utilization number dropped to 77.0, which means the industry is now
operating at 77% of capacity or the worst level since August 1983's 77.0
reading.

      Wednesday's other report, June's Business Inventories came in line
with expectations (-0.4%). Manufacturers, retailers, and wholesalers are
actively cutting inventories in order to catch up with slowing sales. The
latest inventory-to-sales ratio, which shows how many months products remain
in stock before being sold, remains high and explains why companies are not
too eager to increase orders to manufacturers. The inventory correction will
be ongoing for another few months. Once again, it will come down to the
sales element of the equation here.

      On Tuesday, we saw Retail Sales data coming in at the unchanged mark.
How do we possibly interpret that? On the one hand, traders were
expecting -0.2% but were positively surprised to see a stronger number. On
the other hand, June's +0.2% number got revised down to 0.0%. So here we
have two consecutive months of flat Retail Sales data. Remember last year
how we saw Retail Sales growth of double digits. So far, year-over-year we
have enjoyed a whooping 3% growth. We are seeing that consumers are being
rather cautious with their spending barely keeping this economy from a full
blown recession.

      Several economists are afraid that the recession in the manufacturing
industry and massive layoffs could affect the consumer spending. Will it be
a question of "if" or "when" consumers will take a breather from their
spending binge? Knowing that consumer spending makes up 3/4 of this economy,
if consumers can keep up spending, even at zero growth rates these next few
months, the U.S. economy might avoid a recession. Yes, even with the
manufacturing sector in the slumps right now. Without jumping out too far
ahead, we will need a lot more economic reports before we will be able to
come to a conclusion.

      All attention on Thursday will be on the Consumer Price Index (CPI)
which is expected to come in -0.1%. Furthermore, Initial Jobless Claims,
Housing Starts, and Philly Fed reports are due. Nothing should be new to us
there -- still reporting rising claims, steady housing market and slowing
manufacturing respectively.


      BOJ EASING MONETARY POLICY

      The Bank of Japan (BOJ) surprised the financial markets by further
easing their monetary policy. It was just a week ago that they announced
that changes in monetary policy have not produced the desired effects on
their economy so a policy change would be an unnecessary step. Then on
Tuesday, they reversed the statement by saying that "concrete steps for
reforms have started to take place". Did the BOJ change its policy position
because of political pressures?

      Specifically, the cash reserve deposit held at the BOJ by financial
institutions will be increased which will give those institutions more money
to lend out. The Bank of Japan will also increase its outright monthly
purchases of government bonds by 50%. Having more money in circulation with
the hopes that by increasing the money supply, the incentive to spend it
will increase as well.

      Japan's second quarter GDP will be released on September 7th, at which
time the Japanese government will decide on further monetary action. Keep in
mind that the first quarter GDP number was -0.2%. Furthermore, Japan June
Factory Use came out -0.6% today as factory capacity dropped to levels not
seen since 1990 on top of sharp declines in their Industrial Production.
Lower production will very likely translate itself into a decline in
domestic demand. Looks like Japan's problems are far from over.

      On the U.S. interest rate front, the Fed Fund Futures on Wednesday
were pricing in a 100% chance of a 25 basis point rate reduction on August
21st. Odds for a 50bp cut did dropped to only 4% given the stronger
manufacturing news. Traders still expect the Fed to cut another 25bp in
October with a 68% probability.

      Have a great trading day -- keep your trailing stops close !!



      If you would like to signup for a free trial of our interactive
trading room called the epit, where trading signals are posted in realtime
throughout the day, please fill out form at
http://www.eminidaytrading.com/eminisignup.html All questions regarding the
epit service, please email info@eminidaytrading.com  Erap service is not an
investment advisory service, nor a registered investment advisor or broker
and does not purport to tell or suggest which securities members should buy
or sell for themselves. Members should always check with their licensed
financial advisor and their tax advisor to determine the suitability of any
investment.

      Copyright 2001 by eminidaytrading Inc.  Number 4
      08/16/2001



            Futures - The Basics
       Futures, the Basics - Are you a stock or option trader and have
considered trading futures but are constantly reminded how terribly risky
they are? If you are new to futures trading, then this session is a must as
emaster and emagine will cover the basics. What you need to know about
futures, how it differs from stocks and options trading and how to add them
to your trading arsenal.

            August 23rd and August 27th.


      Targets

      The daily charts have not changed much except NQ pierced new lows (not
by much but even so). Looking at ES, we have support in 1170-74 area, if we
get near there again, we will be looking at a quadruple bottom (7/11, 7/24,
8/10, ...) . So we will keep an eye on that area on Thursday. Now with this
ehi close on daily chart, ES has new downside setups if we lose 1170, we
have 1156.75. Daily NQ has downside targets now that we took out that 1580,
with first one being the 1535 level. Hourly ES chart has downside target in
play of 1174.75 once we get solid break of 1180, while the hourly NQ chart
target points at 1568.50. Finally, both the 13 minute charts are exhausted
especially once that 1599 hit. No upside setups for the time being so we
treat upside moves as retracements/ pullbacks until we clearly get reversal
symptoms.

            Intraday Epit Targets Hit
            ES  NQ
            1187  1630
            1186  1611
            1184  1608
            1599











------=_NextPart_000_0069_01C12626.A77722A0
Content-Type: text/html;
        charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable

<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<HTML><HEAD><TITLE>erappin' - daily morning update</TITLE><BASE=20
href=3Dhttp://www.eminidaytrading.com/erappin/erappin_081601a.html>
<META http-equiv=3Dcontent-type =
content=3Dtext/html;charset=3DISO-8859-1>
<META content=3D"MSHTML 5.50.4522.1800" name=3DGENERATOR></HEAD>
<BODY vLink=3D#ff00ff link=3D#ff00ff bgColor=3Dblack>
<DIV>&nbsp;</DIV>
<DIV>&nbsp;</DIV>
<HR>

<DIV align=3Dcenter><IMG height=3D120=20
src=3D"http://www.eminidaytrading.com/erappin/images/erappin_top.gif" =
width=3D580=20
useMap=3D#erappin_topb794dc2a border=3D0><MAP =
name=3Derappin_topb794dc2a><AREA=20
  shape=3DRECT coords=3D488,32,556,100><AREA shape=3DRECT =
coords=3D524,3,571,24=20
  href=3D"http://www.invest-store.com/eminidaytrading/"><AREA =
shape=3DRECT=20
  coords=3D461,3,509,23=20
  href=3D"http://www.eminidaytrading.com/eminisignup.html"><AREA =
shape=3DRECT=20
  coords=3D414,3,444,24 =
href=3D"http://www.eminidaytrading.com/epit/epit.html"><AREA=20
  shape=3DRECT coords=3D205,4,370,27 =
href=3D"http://www.eminidaytrading.com"><AREA=20
  shape=3DRECT coords=3D132,4,167,24 =
href=3D"mailto:info@eminidaytrading.com"><AREA=20
  shape=3DRECT coords=3D12,3,55,23=20
href=3D"http://www.eminidaytrading.com/main.html"></MAP>=20
<TABLE cellSpacing=3D0 cellPadding=3D14 width=3D560 bgColor=3D#ffffff =
border=3D0>
  <TBODY>
  <TR>
    <TD vAlign=3Dtop align=3Dleft width=3D370><FONT=20
      face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
color=3D#000000=20
      size=3D4><B>MARKET IN STALEMATE<BR></B></FONT><FONT=20
      face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
size=3D2><BR>Traders were=20
      not impressed with the economic data released Wednesday morning. =
At first,=20
      traders thought to see a spark of positive news in some part of =
the=20
      Industrial Production data. Locals tried taking out the overnight =
high at=20
      NQ 1649 but failed and sellers (with very limited dealer =
involvement) took=20
      us lower to make new intraday lows. Around noon, the market tried =
to=20
      bounce off those levels but ended up breaking the a.m. lows again. =
What=20
      will it take to get the bulls buying again? Please let it be =
something=20
      other than the Fed's rate cuts. We have seen interest rates drop =
all year,=20
      but are still waiting for the momentum to pick =
up.<BR><BR>Wednesday's=20
      Industrial Production (IP) came in -0.1% versus an expected drop =
of 0.3%=20
      from June's originally -0.7% (which got revised downward to =
-0.9%). The=20
      July slide gave the manufacturing production a tenth consecutive =
decline=20
      which is not a sign of an improving economy.<BR><BR>
      <TABLE cellSpacing=3D0 cellPadding=3D3 width=3D366 bgColor=3Dwhite =
border=3D0>
        <TBODY>
        <TR>
          <TD vAlign=3Dtop align=3Dleft><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
color=3D#ff00ff=20
            size=3D2><B>Symbol</B></FONT></TD>
          <TD vAlign=3Dtop align=3Dleft><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
color=3D#ff00ff=20
            size=3D2><B>Close</B></FONT></TD>
          <TD vAlign=3Dtop align=3Dleft><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
color=3D#ff00ff=20
            size=3D2><B>High</B></FONT></TD>
          <TD vAlign=3Dtop align=3Dleft><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
color=3D#ff00ff=20
            size=3D2><B>Low</B></FONT></TD>
          <TD vAlign=3Dtop align=3Dmiddle></TD>
          <TD vAlign=3Dtop align=3Dleft><B><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
color=3D#ff00ff=20
            size=3D2>Gain/Loss</FONT></B></TD></TR>
        <TR>
          <TD vAlign=3Dtop align=3Dleft><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
color=3D#33cc00=20
            size=3D2><B>SPU01</B></FONT></TD>
          <TD vAlign=3Dtop align=3Dleft><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
color=3Dblack=20
            size=3D2><B>1180.80</B></FONT></TD>
          <TD vAlign=3Dtop align=3Dleft><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
color=3Dblack=20
            size=3D2><B>1195.20</B></FONT></TD>
          <TD vAlign=3Dtop align=3Dleft><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
color=3Dblack=20
            size=3D2><B>1179.50</B></FONT></TD>
          <TD vAlign=3Dtop align=3Dmiddle><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
size=3D2><IMG=20
            height=3D13=20
            =
src=3D"http://www.eminidaytrading.com/erappin/images/arrow_down.gif"=20
            width=3D12 border=3D0> </FONT></TD>
          <TD vAlign=3Dtop align=3Dleft><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
color=3D#ff0000=20
            size=3D2><B>11.50</B></FONT></TD></TR>
        <TR>
          <TD vAlign=3Dtop align=3Dleft><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
color=3D#33cc00=20
            size=3D2><B>ESU01</B></FONT></TD>
          <TD vAlign=3Dtop align=3Dleft><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
color=3Dblack=20
            size=3D2><B>1180.75</B></FONT></TD>
          <TD vAlign=3Dtop align=3Dleft><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
color=3Dblack=20
            size=3D2><B>1195.25</B></FONT></TD>
          <TD vAlign=3Dtop align=3Dleft><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
color=3Dblack=20
            size=3D2><B>1179.50</B></FONT></TD>
          <TD vAlign=3Dtop align=3Dmiddle><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
size=3D2><IMG=20
            height=3D13=20
            =
src=3D"http://www.eminidaytrading.com/erappin/images/arrow_down.gif"=20
            width=3D12 border=3D0> </FONT></TD>
          <TD vAlign=3Dtop align=3Dleft><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
color=3D#ff0000=20
            size=3D2><B>11.50</B></FONT></TD></TR>
        <TR>
          <TD vAlign=3Dtop align=3Dleft><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
color=3D#33cc00=20
            size=3D2><B>NDU01</B></FONT></TD>
          <TD vAlign=3Dtop align=3Dleft><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
color=3Dblack=20
            size=3D2><B>1576.50</B></FONT></TD>
          <TD vAlign=3Dtop align=3Dleft><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
color=3Dblack=20
            size=3D2><B>1649.00</B></FONT></TD>
          <TD vAlign=3Dtop align=3Dleft><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
color=3Dblack=20
            size=3D2><B>1574.00</B></FONT></TD>
          <TD vAlign=3Dtop align=3Dmiddle><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
size=3D2><IMG=20
            height=3D13=20
            =
src=3D"http://www.eminidaytrading.com/erappin/images/arrow_down.gif"=20
            width=3D12 border=3D0> </FONT></TD>
          <TD vAlign=3Dtop align=3Dleft><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
color=3D#ff0000=20
            size=3D2><B>58.00</B></FONT></TD></TR>
        <TR>
          <TD vAlign=3Dtop align=3Dleft><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
color=3D#33cc00=20
            size=3D2><B>NQU01</B></FONT></TD>
          <TD vAlign=3Dtop align=3Dleft><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
color=3Dblack=20
            size=3D2><B>1576.50</B></FONT></TD>
          <TD vAlign=3Dtop align=3Dleft><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
color=3Dblack=20
            size=3D2><B>1649.00</B></FONT></TD>
          <TD vAlign=3Dtop align=3Dleft><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
color=3Dblack=20
            size=3D2><B>1574.00</B></FONT></TD>
          <TD vAlign=3Dtop align=3Dmiddle><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
size=3D2><IMG=20
            height=3D13=20
            =
src=3D"http://www.eminidaytrading.com/erappin/images/arrow_down.gif"=20
            width=3D12 border=3D0> </FONT></TD>
          <TD vAlign=3Dtop align=3Dleft><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
color=3D#ff0000=20
            size=3D2><B>58.00</B></FONT></TD></TR>
        <TR>
          <TD vAlign=3Dtop align=3Dleft><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
color=3D#33cc00=20
            size=3D2><B>DOW</B></FONT></TD>
          <TD vAlign=3Dtop align=3Dleft><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
color=3Dblack=20
            size=3D2><B>10345.95</B></FONT></TD>
          <TD vAlign=3Dtop align=3Dleft><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
color=3Dblack=20
            size=3D2><B>10469.74</B></FONT></TD>
          <TD vAlign=3Dtop align=3Dleft><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
color=3Dblack=20
            size=3D2><B>10340.76</B></FONT></TD>
          <TD vAlign=3Dtop align=3Dmiddle><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
size=3D2><IMG=20
            height=3D13=20
            =
src=3D"http://www.eminidaytrading.com/erappin/images/arrow_down.gif"=20
            width=3D12 border=3D0> </FONT></TD>
          <TD vAlign=3Dtop align=3Dleft><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
color=3D#ff0000=20
            size=3D2><B>66.22</B></FONT></TD></TR>
        <TR>
          <TD vAlign=3Dtop align=3Dleft><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
color=3D#33cc00=20
            size=3D2><B>NASDAQ</B></FONT></TD>
          <TD vAlign=3Dtop align=3Dleft><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
color=3Dblack=20
            size=3D2><B>1918.89</B></FONT></TD>
          <TD vAlign=3Dtop align=3Dleft><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
color=3Dblack=20
            size=3D2><B>1975.18</B></FONT></TD>
          <TD vAlign=3Dtop align=3Dleft><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
color=3Dblack=20
            size=3D2><B>1918.74</B></FONT></TD>
          <TD vAlign=3Dtop align=3Dmiddle><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
size=3D2><IMG=20
            height=3D13=20
            =
src=3D"http://www.eminidaytrading.com/erappin/images/arrow_down.gif"=20
            width=3D12 border=3D0> </FONT></TD>
          <TD vAlign=3Dtop align=3Dleft><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
color=3D#ff0000=20
            size=3D2><B>45.64</B></FONT></TD></TR>
        <TR>
          <TD vAlign=3Dtop align=3Dleft><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
color=3D#33cc00=20
            size=3D2><B>SPX</B></FONT></TD>
          <TD vAlign=3Dtop align=3Dleft><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
color=3Dblack=20
            size=3D2><B>1178.02</B></FONT></TD>
          <TD vAlign=3Dtop align=3Dleft><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
color=3Dblack=20
            size=3D2><B>1191.21</B></FONT></TD>
          <TD vAlign=3Dtop align=3Dleft><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
color=3Dblack=20
            size=3D2><B>1177.61</B></FONT></TD>
          <TD vAlign=3Dtop align=3Dmiddle><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
* PR# 1059 *
Subject: lm()
From: JDiaz-Saiz@uh.edu
Date: Thu, 16 Aug 2001 19:31:07 +0200 (MET DST)
-- no notes --
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 1059 <==
From JDiaz-Saiz@uh.edu  Thu Aug 16 19:31:08 2001
Received: from blueberry.kubism.ku.dk (blueberry [130.225.108.193])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id TAA19800
	for <R-bugs@biostat.ku.dk>; Thu, 16 Aug 2001 19:31:07 +0200 (MET DST)
Date: Thu, 16 Aug 2001 19:31:07 +0200 (MET DST)
Message-Id: <200108161731.TAA19800@pubhealth.ku.dk>
From: JDiaz-Saiz@uh.edu
To: R-bugs@biostat.ku.dk
Subject: lm()

Full_Name: Joaquin Diaz-Saiz
Version: 1.3.0
OS: Windows
Submission from: (NULL) (129.7.120.106)


The lm() function applied to a particular data set produces a negative value for
the adjusted R-square. See the output below.


=======================================================
R : Copyright 2001, The R Development Core Team
Version 1.3.0  (2001-06-22)

R is free software and comes with ABSOLUTELY NO WARRANTY.
You are welcome to redistribute it under certain conditions.
Type `license()' or `licence()' for distribution details.

R is a collaborative project with many contributors.
Type `contributors()' for more information.

Type `demo()' for some demos, `help()' for on-line help, or
`help.start()' for a HTML browser interface to help.
Type `q()' to quit R.

[Previously saved workspace restored]

> w<-read.table("accres.txt")
> w
   V1 V2
1   9  1
2   3  1
3   8  1
4   7  1
5  12  1
6   4  0
7  13  0
8  10  0
9   9  0
10  9  0
11  6  0
> x<-w$V1
> t<-w$V2
> x
 [1]  9  3  8  7 12  4 13 10  9  9  6
> t
 [1] 1 1 1 1 1 0 0 0 0 0 0
> out<-lm(x~t)
> summary(out)

Call:
lm(formula = x ~ t)

Residuals:
   Min     1Q Median     3Q    Max 
 -4.80  -1.65   0.50   1.35   4.50 

Coefficients:
            Estimate Std. Error t value Pr(>|t|)    
(Intercept)    8.500      1.307   6.502 0.000111 ***
t             -0.700      1.939  -0.361 0.726443    
---
Signif. codes:  0 `***' 0.001 `**' 0.01 `*' 0.05 `.' 0.1 ` ' 1 

Residual standard error: 3.202 on 9 degrees of freedom
Multiple R-Squared: 0.01427,    Adjusted R-squared: -0.09525 
F-statistic: 0.1303 on 1 and 9 DF,  p-value: 0.7264 

> 


==> 1059.followup.1 <==
From kjetilh@umsanet.edu.bo  Thu Aug 16 19:41:26 2001
Received: from jupiter.umsanet.edu.bo (jupiter.umsanet.edu.bo [166.114.17.11])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id TAA19888
	for <R-bugs@biostat.ku.dk>; Thu, 16 Aug 2001 19:41:13 +0200 (MET DST)
Received: from umsanet.edu.bo (pc69.umsanet.edu.bo [166.114.17.69])
	by jupiter.umsanet.edu.bo (8.11.0/8.9.3) with ESMTP id f7GHq3J13155;
	Thu, 16 Aug 2001 13:52:03 -0400
Message-ID: <3B7C05EF.2066625A@umsanet.edu.bo>
Date: Thu, 16 Aug 2001 13:42:08 -0400
From: kjetil halvorsen <kjetilh@umsanet.edu.bo>
Reply-To: kjetilh@umsanet.edu.bo
Organization: UMSA
X-Mailer: Mozilla 4.7 [en] (Win98; I)
X-Accept-Language: en
MIME-Version: 1.0
To: JDiaz-Saiz@uh.edu
CC: r-devel@stat.math.ethz.ch, R-bugs@biostat.ku.dk
Subject: Re: [Rd] lm() (PR#1059)
References: <200108161731.TAA19810@pubhealth.ku.dk>
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit

Hola!

This is not an error. If the r-squared is small, the formula 
defining "adjusted r-square" can give negative values, correctly.

Kjetil Halvorsen.

JDiaz-Saiz@uh.edu wrote:
> 
> Full_Name: Joaquin Diaz-Saiz
> Version: 1.3.0
> OS: Windows
> Submission from: (NULL) (129.7.120.106)
> 
> The lm() function applied to a particular data set produces a negative value for
> the adjusted R-square. See the output below.
> 
> =======================================================
> R : Copyright 2001, The R Development Core Team
> Version 1.3.0  (2001-06-22)
> 
> R is free software and comes with ABSOLUTELY NO WARRANTY.
> You are welcome to redistribute it under certain conditions.
> Type `license()' or `licence()' for distribution details.
> 
> R is a collaborative project with many contributors.
> Type `contributors()' for more information.
> 
> Type `demo()' for some demos, `help()' for on-line help, or
> `help.start()' for a HTML browser interface to help.
> Type `q()' to quit R.
> 
> [Previously saved workspace restored]
> 
> > w<-read.table("accres.txt")
> > w
>    V1 V2
> 1   9  1
> 2   3  1
> 3   8  1
> 4   7  1
> 5  12  1
> 6   4  0
> 7  13  0
> 8  10  0
> 9   9  0
> 10  9  0
> 11  6  0
> > x<-w$V1
> > t<-w$V2
> > x
>  [1]  9  3  8  7 12  4 13 10  9  9  6
> > t
>  [1] 1 1 1 1 1 0 0 0 0 0 0
> > out<-lm(x~t)
> > summary(out)
> 
> Call:
> lm(formula = x ~ t)
> 
> Residuals:
>    Min     1Q Median     3Q    Max
>  -4.80  -1.65   0.50   1.35   4.50
> 
> Coefficients:
>             Estimate Std. Error t value Pr(>|t|)
> (Intercept)    8.500      1.307   6.502 0.000111 ***
> t             -0.700      1.939  -0.361 0.726443
> ---
> Signif. codes:  0 `***' 0.001 `**' 0.01 `*' 0.05 `.' 0.1 ` ' 1
> 
> Residual standard error: 3.202 on 9 degrees of freedom
> Multiple R-Squared: 0.01427,    Adjusted R-squared: -0.09525
> F-statistic: 0.1303 on 1 and 9 DF,  p-value: 0.7264
> 
> >
> 
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

==> 1059.reply.1 <==
From p.dalgaard@biostat.ku.dk  Thu Aug 16 21:32:25 2001
Received: from blueberry.kubism.ku.dk (blueberry [130.225.108.193])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id VAA20330;
	Thu, 16 Aug 2001 21:32:24 +0200 (MET DST)
Received: (from pd@localhost)
	by blueberry.kubism.ku.dk (8.11.2/8.11.2) id f7GJVpS04061;
	Thu, 16 Aug 2001 21:31:51 +0200
X-Authentication-Warning: blueberry.kubism.ku.dk: pd set sender to p.dalgaard@biostat.ku.dk using -f
Sender: pd@pubhealth.ku.dk
To: kjetilh@umsanet.edu.bo
Cc: JDiaz-Saiz@uh.edu, r-devel@stat.math.ethz.ch, R-bugs@biostat.ku.dk
Subject: Re: [Rd] lm() (PR#1059)
References: <200108161731.TAA19810@pubhealth.ku.dk>
	<3B7C05EF.2066625A@umsanet.edu.bo>
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 16 Aug 2001 21:31:51 +0200
In-Reply-To: <3B7C05EF.2066625A@umsanet.edu.bo>
Message-ID: <x27kw37qe0.fsf@blueberry.kubism.ku.dk>
Lines: 16
User-Agent: Gnus/5.0808 (Gnus v5.8.8) Emacs/20.7
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii

kjetil halvorsen <kjetilh@umsanet.edu.bo> writes:

> Hola!
> 
> This is not an error. If the r-squared is small, the formula 
> defining "adjusted r-square" can give negative values, correctly.

Yep. Essentially it is  100 * "% variance accounted for" and the
variance can be larger under the model than under the null. Whenever
the F for the model is less than 1, in fact.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
