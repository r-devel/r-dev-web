=================================================
This is an automated collection of open reports in
the R-bugs repository.
=================================================

Directory:  Accuracy

none

Directory:  Add-ons

* PR# 471 *
Subject:  Problems with nlme 
From: Berwin Turlach <berwin@maths.uwa.edu.au>
Date: Tue, 7 Mar 2000 15:28:00 +0800
--Problem 1) was a subscripting bug introduced in 1.0.0 and fixed for 1.0.1
--Problem 2) (mssing datasets) needs a revised nlme
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 471 <==
From berwin@bossiaea.maths.uwa.edu.au  Tue Mar  7 08:27:58 2000
Received: from bossiaea.maths.uwa.edu.au (IDENT:root@bossiaea.maths.uwa.edu.au [130.95.16.247])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id IAA11434
	for <r-bugs@biostat.ku.dk>; Tue, 7 Mar 2000 08:27:54 +0100 (MET)
Received: (from berwin@localhost)
	by bossiaea.maths.uwa.edu.au (8.9.3/8.9.3) id PAA26674;
	Tue, 7 Mar 2000 15:28:00 +0800
Date: Tue, 7 Mar 2000 15:28:00 +0800
From: Berwin Turlach <berwin@maths.uwa.edu.au>
Message-Id: <200003070728.PAA26674@bossiaea.maths.uwa.edu.au>
To: r-bugs@biostat.ku.dk
Subject:  Problems with nlme 
Cc: berwin@bossiaea.maths.uwa.edu.au

Dear R developers,

first of all let me join the chorus of congratulations for the release
of R 1.0.0.  Well, done!

Unfortunately, I find it necessary to e-mail in a bug report regarding
the `nlme' package.  On my office machine I experience the following
trouble:

bossiaea:/opt/R$ R CMD check -c nlme 
Checking package `nlme' ...
 Massaging examples into `nlme-Ex.R' ...
 Running examples in package `nlme' ...
 ERROR

The end of nlme-Ex.Rout is:

> rm(list = ls(all = TRUE)); .Random.seed <- c(0,rep(7654,3))
> ###--- >>> `anova.gls' <<<----- Compare Likelihoods of Fitted Objects
> 
> 	## alias	 help(anova.gls)
> 
> ##___ Examples ___:
> 
> library(nlme)
> data(Ovary)
> # AR(1) errors within each Mare
> fm1 <- gls(follicles ~ sin(2*pi*Time) + cos(2*pi*Time), Ovary,
+            correlation = corAR1(form = ~ 1 | Mare))
Warning message: 
NA/Inf replaced by maximum positive value 
> anova(fm1)
Denom. DF: 305 
                   numDF  F-value p-value
(Intercept)            1 354.7375  <.0001
sin(2 * pi * Time)     1  18.5035  <.0001
cos(2 * pi * Time)     1   1.6633  0.1981
> # variance changes with a power of the absolute fitted values?
> fm2 <- update(fm1, weights = varPower())
Error in update.gls(fm1, weights = varPower()) : 
	subscript out of bounds
Execution halted


(R CMD check MASS is also failing on an example that uses update.gls.)

On my machine at home I run into troubles even faster when running `R
CMD check nlme'.  One of the early examples chokes on the line:
> data(Orthodont)

I had done a "clean install" on that machine, i.e., I first blew away
the older installation of R.  It seems that the datasets Orthodont and
Pixel have been distributed with the nls library in earlier R versions
but not so in R 1.0.0.  But they are not distributed with the current
version of nlme either.

Cheers,

        Berwin

--please do not edit the information below--

Version:
 platform = i686-unknown-linux
 arch = i686
 os = linux
 system = i686, linux
 status = 
 major = 1
 minor = 0.0
 year = 2000
 month = February
 day = 29
 language = R

Search Path:
 .GlobalEnv, Autoloads, package:base

==> 471.audit <==
Sun Mar 12 13:56:34 2000	ripley	changed notes
Sun Mar 12 13:56:34 2000	ripley	moved from incoming to Add-ons
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

Directory:  Analyses

none

Directory:  Documentation

none

Directory:  Graphics

* PR# 202 *
Subject: persp box occlusion bug
From: wsi@gcal.ac.uk
Date: Wed, 2 Jun 1999 15:02:03 +0200 (MET DST)
--The persp algorithm does not apply the occlusion rules to the frame, 
--which is always plotted first. 
--A bug, but not very simple to fix.
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 202 <==
From wsi@gcal.ac.uk  Wed Jun  2 15:02:10 1999
Received: from localhost (blueberry [130.225.108.193])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id PAA27126
	for <R-bugs@biostat.ku.dk>; Wed, 2 Jun 1999 15:02:03 +0200 (MET DST)
Date: Wed, 2 Jun 1999 15:02:03 +0200 (MET DST)
From: wsi@gcal.ac.uk
Message-Id: <199906021302.PAA27126@pubhealth.ku.dk>
To: R-bugs@biostat.ku.dk
Subject: persp box occlusion bug

Full_Name: Bill Simpson
Version: 64.1
OS: linux
Submission from: (NULL) (193.62.250.209)


Bug in persp() bounding box:
If the surface being plotted extends below the lower z-axis boundary, the box
is
drawn with the wrong occlusion. The box is shown as being occluded by the
surface
even though it should be in front of the surface.

The box is correct for surface extending above the box. Problem is only for
surface extending below the box.

This exhibits the bug:

std<-rep(seq(-32,32,8),9)/1000 * 60
cf<-rep(seq(-32,32,8),rep(9,9))/1000 *60 
dp<-(cf-std)/.6
std<-unique(std)
cf<-unique(cf)
dp<-t(matrix(dp,length(cf),length(std)))
persp(std,cf,dp, xlim=c(-2,2), ylim=c(-2,2), zlim=c(0,5),theta=-40,    
phi=45,
box=TRUE,ltheta=-120, lphi=120,
d=1.5, shade=.7)


==> 202.audit <==
Wed Jun 30 19:31:18 1999	pd	moved from incoming to Graphics
Thu Jul 01 18:19:48 1999	pd	changed notes
Sun Feb 20 10:07:11 2000	ripley	changed notes
Mon Feb 28 17:17:51 2000	pd	changed notes
Mon Feb 28 17:18:28 2000	pd	changed notes
Mon Feb 28 17:19:35 2000	pd	changed notes
Mon Feb 28 17:20:17 2000	pd	changed notes
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
* PR# 400 *
Subject: X11 troubles
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 13 Jan 2000 14:31:42 +0100
--a) We don't handle multiple window closes well
--b) X11 errors should be caught by an error handler, not kill R
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 400 <==
From pd@biostat.ku.dk  Thu Jan 13 14:29:00 2000
Received: from biostat.ku.dk (blueberry [130.225.108.193])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id OAA01544
	for <r-bugs@mail.kubism.ku.dk>; Thu, 13 Jan 2000 14:29:00 +0100 (MET)
Received: (from pd@localhost)
	by biostat.ku.dk (8.9.3/8.9.3) id OAA15286;
	Thu, 13 Jan 2000 14:31:43 +0100
Sender: pd@blueberry.kubism.ku.dk
To: r-bugs@biostat.ku.dk
Subject: X11 troubles
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 13 Jan 2000 14:31:42 +0100
Message-ID: <x23ds2nlmp.fsf@blueberry.kubism.ku.dk>
Lines: 24
X-Mailer: Gnus v5.7/Emacs 20.4
Mime-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: 7bit

Just to get these issues recorded in the bug repository:

a) We don't handle multiple window closes well

My "favourite" version of this is when I ^Z out of an R session with
an open graphics window to do something on the command line, then kill
the graphics window (which does nothing), kill it again, realise that
it's because the R session was stopped, and:

[pd@blueberry BUILD]$ %
bin/R
Segmentation fault (core dumped)

b) X11 errors should be caught by an error handler, not kill R.

This is mainly seen when there's an error somewhere else, such as
trouble with the font setup. But in principle, we should at worst shut
down the graphics window, not R itself.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

==> 400.audit <==
Wed Jan 26 19:28:37 2000	ripley	moved from incoming to Graphics
Mon Feb 28 17:07:48 2000	pd	changed notes
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
* PR# 414 *
Subject:  graphics bugs: steep slopes and large values beyond ylim 
From: Ben Bolker <bolker@zoo.ufl.edu>
Date: Mon, 7 Feb 2000 18:28:04 -0500
--Followup on R-devel showed this was due to generating integer coordinates 
--outside +/- 2^15 in the X11 driver.
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 414 <==
From ben@bolker-nt.zoo.ufl.edu  Tue Feb  8 00:32:03 2000
Received: from triarch.zoo.ufl.edu (triarch.zoo.ufl.edu [128.227.60.248])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id AAA13274
	for <r-bugs@biostat.ku.dk>; Tue, 8 Feb 2000 00:32:02 +0100 (MET)
Received: from bolker-nt.zoo.ufl.edu ([128.227.60.126])
          by triarch.zoo.ufl.edu (Netscape Messaging Server 3.5)
           with ESMTP id 494; Mon, 7 Feb 2000 18:32:02 -0500
Received: (from ben@localhost)
	by bolker-nt.zoo.ufl.edu (8.9.3/8.9.3) id SAA22301;
	Mon, 7 Feb 2000 18:28:04 -0500
Date: Mon, 7 Feb 2000 18:28:04 -0500
From: Ben Bolker <bolker@zoo.ufl.edu>
Message-Id: <200002072328.SAA22301@bolker-nt.zoo.ufl.edu>
To: r-bugs@biostat.ku.dk
Subject:  graphics bugs: steep slopes and large values beyond ylim 
Cc: ben@bolker-nt.zoo.ufl.edu


  Some of my students have uncovered some apparent graphics bugs in 
R.  I think they may manifest slightly different on different platforms/
with different display devices (they sometimes report a Windows graph
that looks OK but odd results on printing).
  I'm able to replicate similar problems on my Linux (RH 6.0) system.


1. abline() plots nothing, or a wrong line, when the slope is too steep.

plot(0:10,0:10)
abline(a=0,b=100)
abline(a=0,b=200)
abline(a=0,b=300)
abline(a=0,b=80)

2. when plotting with type "l" and with values far beyond the limits of
the plot, semi-random lines appear on the plot.

plot(exp(1:100),ylim=c(0,10),type="l")

Any thoughts?  I poked a little bit at this myself: abline calls GLine, neither of them
seems to do much checking whether the endpoints of the line to be drawn are way outside of the
window (I guess that XDrawLine, which gets called by GLine, can't handle this).
I guess this should probably be fixed at the the level of GLine (it might fix both of
the above problems, but I'm a little bit afraid digging this deeply into the graphics drivers.
  Maybe it will be obvious to someone closer to the code?

--please do not edit the information below--

Version:
 platform = i686-unknown-linux
 arch = i686
 os = linux
 system = i686, linux
 status = 
 major = 0
 minor = 99.0
 year = 2000
 month = February
 day = 7
 language = R

Search Path:
 .GlobalEnv, Autoloads, package:base

==> 414.audit <==
Wed Feb 16 19:26:57 2000	ripley	moved from incoming to Graphics
Sun Feb 20 10:13:40 2000	ripley	changed notes
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

Directory:  In-Out

none

Directory:  Installation

* PR# 478 *
Subject: Conditional for XDR code left out in saveload.c
From: hoffmann@ehmgs2.et.tu-dresden.de
Date: Thu, 9 Mar 2000 09:43:01 +0100 (MET)
--This seems to be a harmless warning, not an error.
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 478 <==
From hoffmann@ehmgs2.et.tu-dresden.de  Thu Mar  9 09:43:02 2000
Received: from localhost (blueberry [130.225.108.193])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id JAA07568
	for <R-bugs@biostat.ku.dk>; Thu, 9 Mar 2000 09:43:01 +0100 (MET)
Date: Thu, 9 Mar 2000 09:43:01 +0100 (MET)
From: hoffmann@ehmgs2.et.tu-dresden.de
Message-Id: <200003090843.JAA07568@pubhealth.ku.dk>
To: R-bugs@biostat.ku.dk
Subject: Conditional for XDR code left out in saveload.c

Full_Name: Thomas Hoffmann
Version: 1.0.0
OS: OS/2 Warp 4.0 FP 11
Submission from: (NULL) (141.30.125.20)


I autoconfigured/configured the src'es w/o having XDR (#undef HAVE_RPC_XDR_H).

In saveload.c , at the beginning of the file the XDR code is enclosed by
matching #ifdefs.

But in the NEW_SAVE_FORMAT section, there are no #ifdefs around the XDR code.

Does this imply that using the new save format requires using XDR or is 
this simply an oversight?

==> 478.followup.1 <==
From ripley@stats.ox.ac.uk  Thu Mar  9 10:13:28 2000
Received: from toucan.stats.ox.ac.uk (toucan.stats.ox.ac.uk [163.1.20.20])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id KAA08143
	for <R-bugs@biostat.ku.dk>; Thu, 9 Mar 2000 10:13:27 +0100 (MET)
Received: from max164.public.ox.ac.uk (max164.public.ox.ac.uk [192.76.27.164])
	by toucan.stats.ox.ac.uk (8.9.0/8.9.0) with ESMTP id JAA17986;
	Thu, 9 Mar 2000 09:10:23 GMT
Date: Thu, 9 Mar 2000 09:10:51 +0000 (GMT)
From: Prof Brian D Ripley <ripley@stats.ox.ac.uk>
Sender: ripley@auk.stats
To: hoffmann@ehmgs2.et.tu-dresden.de
cc: r-devel@stat.math.ethz.ch, R-bugs@biostat.ku.dk
Subject: Re: [Rd] Conditional for XDR code left out in saveload.c (PR#478)
In-Reply-To: <200003090843.JAA07578@pubhealth.ku.dk>
Message-ID: <Pine.GSO.4.05.10003090908141.7342-100000@auk.stats>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII

On Thu, 9 Mar 2000 hoffmann@ehmgs2.et.tu-dresden.de wrote:

> Full_Name: Thomas Hoffmann
> Version: 1.0.0
> OS: OS/2 Warp 4.0 FP 11
> Submission from: (NULL) (141.30.125.20)
> 
> 
> I autoconfigured/configured the src'es w/o having XDR (#undef HAVE_RPC_XDR_H).
> 
> In saveload.c , at the beginning of the file the XDR code is enclosed by
> matching #ifdefs.
> 
> But in the NEW_SAVE_FORMAT section, there are no #ifdefs around the XDR code.
> 
> Does this imply that using the new save format requires using XDR or is 
> this simply an oversight?

The defines in R_SaveToFile and R_LoadFromFile determine what is 
actually used.  I think all that happens is that unused code is not
excluded from the compile (and that happens with the BinarySave code
if XDR is available).

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


==> 478.audit <==
Sun Mar 12 13:57:21 2000	ripley	changed notes
Sun Mar 12 13:57:21 2000	ripley	moved from incoming to Installation
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

Directory:  Language

* PR# 408 *
Subject: convolution bug
From: wsimpson@gcal.ac.uk
Date: Fri, 28 Jan 2000 11:17:36 +0100 (MET)
-- no notes --
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 408 <==
From wsimpson@gcal.ac.uk  Fri Jan 28 11:17:36 2000
Received: from localhost (blueberry [130.225.108.193])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id LAA11325
	for <R-bugs@biostat.ku.dk>; Fri, 28 Jan 2000 11:17:36 +0100 (MET)
Date: Fri, 28 Jan 2000 11:17:36 +0100 (MET)
From: wsimpson@gcal.ac.uk
Message-Id: <200001281017.LAA11325@pubhealth.ku.dk>
To: R-bugs@biostat.ku.dk
Subject: convolution bug

Full_Name: Bill Simpson
Version: 65.1 , 0.90.1
OS: Linux
Submission from: (NULL) (193.62.250.209)


I reported this on r-help, but here is official bug report.

The present convolve() does not do convolution by default. Its default behaviour
is
correlation. This is a bug.

The default argument conj should be set to FALSE.

The zero-padding should be on the right for linear convolution (don't ask me
why you call this type="open"; I suggest type="linear").

Here is what I expect linear convolution to do:
myconvolve<-function (x,h) 
{
    nx <- length(x)
    nh <- length(h)
    #zero pad
    if(nx>nh)
       {
       x <- c(x,rep(0, nh-1))
       h<-c(h,rep(0,nx-1))
       }
    else
       {
       h <- c(h,rep(0, nx-1))
       x<-c(x,rep(0,nh-1))
       }
    x <- fft(fft(x) * fft(h), inv = TRUE)
    Re(x)/length(x)
#I am not sure about this, the R IFFT is weird
}

What "circular" convolution should do is just
eliminate the zero-padding:

myconvolve2<-function (x,h)
{
#no padding, circular convolution
    nx <- length(x)
    nh <- length(h)
    x <- fft(fft(x) * fft(h), inv = TRUE)
    Re(x)/(nx)
}


I suggest that you create two functions, convolve() and correlate(), and get
rid
of the conj argument in convolve().

==> 408.audit <==
Wed Feb 16 19:28:42 2000	ripley	moved from incoming to Language
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
* PR# 412 *
Subject: anomalies with call objects
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 06 Feb 2000 01:18:50 +0100
-- no notes --
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 412 <==
From postmaster@franz.stat.wisc.edu  Sun Feb  6 01:16:33 2000
Received: from stat.math.ethz.ch (daemon@hypatia.ethz.ch [129.132.58.23])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id BAA26868
	for <R-bugs@biostat.ku.dk>; Sun, 6 Feb 2000 01:16:31 +0100 (MET)
Received: (from daemon@localhost)
	by stat.math.ethz.ch (8.9.1/8.9.1) id BAA18080
	for <r-bugs@hypatia.math.ethz.ch>; Sun, 6 Feb 2000 01:16:38 +0100 (MET)
Received: from franz.stat.wisc.edu(128.105.174.95)
 via SMTP by hypatia, id smtpdAAAa004QS; Sun Feb  6 01:16:33 2000
Received: from pubhealth.ku.dk (really [130.225.108.10]) by franz.stat.wisc.edu
	via smail with esmtp
	id <m12HFNP-000ZSxC@franz.stat.wisc.edu> (Debian Smail3.2.0.102)
	for <r-bugs@r-project.org>; Sat, 5 Feb 2000 18:16:31 -0600 (CST) 
Received: from biostat.ku.dk (blueberry [130.225.108.193])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id BAA26864
	for <r-bugs@r-project.org>; Sun, 6 Feb 2000 01:16:18 +0100 (MET)
Received: (from pd@localhost)
	by biostat.ku.dk (8.9.3/8.9.3) id BAA12311;
	Sun, 6 Feb 2000 01:18:51 +0100
Sender: pd@blueberry.kubism.ku.dk
To: r-bugs@r-project.org
Subject: anomalies with call objects
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 06 Feb 2000 01:18:50 +0100
Message-ID: <x2900zyyhh.fsf@blueberry.kubism.ku.dk>
Lines: 51
X-Mailer: Gnus v5.7/Emacs 20.4
Mime-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: 7bit


Call objects don't always behave as you'd expect. They're mostly
list-like, but with exceptions:

> f<-function(x,y,...)match.call(expand.dots=FALSE)
> xx <- f(y=1,2,z=3,4)
> dd <- xx$...
> xx$... <- NULL
> c(xx,dd)
[[1]]
f(x = 2, y = 1)

$z
[1] 3

[[3]]
[1] 4

> as.call(c(as.list(xx),dd))
f(x = 2, y = 1, z = 3, 4)

(Splus has this rather differently, since dd becomes a call to list()
rather than a list of promises:

S> c(xx,dd)
f(x = 2, y = 1, list, z = 3, 4)
S> as.call(c(as.list(xx),dd))
f(x = 2, y = 1, list, z = 3, 4)

...but at least gives the same in both cases)

Also, the names of arguments added with [[<- is getting dropped if a
new element is required:

> xx[["abc"]]<-123
> xx
f(x = 2, y = 1, 123)

S has what I'd expect there:

S> xx[["abc"]]<-123
S> xx
f(x = 2, y = 1, abc = 123)

[R-0.99.0 prerelease on RedHat6.1, but this is likely not a new thing.]

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

==> 412.audit <==
Wed Feb 16 19:26:57 2000	ripley	moved from incoming to Language
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

Directory:  Low-level

* PR# 391 *
Subject: Segfault in dataentry()
From: Peter Dalgaard BSA <p.dalgaard@pubhealth.ku.dk>
Date: 29 Dec 1999 11:59:50 +0100
--dataentry(0,0) segfaults
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 391 <==
From pd@biostat.ku.dk  Wed Dec 29 11:53:44 1999
Received: from biostat.ku.dk (blueberry [130.225.108.193])
	by pubhealth.ku.dk (8.8.8+Sun/8.8.8) with ESMTP id LAA02951;
	Wed, 29 Dec 1999 11:53:44 +0100 (MET)
Received: (from pd@localhost)
	by biostat.ku.dk (8.9.3/8.9.3) id LAA01559;
	Wed, 29 Dec 1999 11:59:50 +0100
Sender: pd@blueberry.kubism.ku.dk
To: r-core@r-project.org
Subject: Segfault in dataentry()
Cc: r-bugs@biostat.ku.dk
From: Peter Dalgaard BSA <p.dalgaard@pubhealth.ku.dk>
Date: 29 Dec 1999 11:59:50 +0100
Message-ID: <x2d7rqt3kp.fsf@blueberry.kubism.ku.dk>
Lines: 18
X-Mailer: Gnus v5.7/Emacs 20.4
Mime-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: 7bit
Content-Length: 611


> dataentry(0,0)

Program received signal SIGSEGV, Segmentation fault.
0x808991c in duplicate (s=0x0) at ../../../R/src/main/duplicate.c:42
42	    switch (TYPEOF(s)) {

Apparently that one doesn't get trapped by the no-segfault checks.
Martin? 

(It's not too high priority to fix, but confusing data.entry and
dataentry provokes this quite easily.)

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

==> 391.reply.1 <==
From maechler@stat.math.ethz.ch  Fri Dec 31 18:09:17 1999
Received: from stat.math.ethz.ch (hypatia.ethz.ch [129.132.58.23])
	by pubhealth.ku.dk (8.8.8+Sun/8.8.8) with ESMTP id SAA12661;
	Fri, 31 Dec 1999 18:09:16 +0100 (MET)
Received: (from daemon@localhost)
	by stat.math.ethz.ch (8.9.1/8.9.1) id SAA16695;
	Fri, 31 Dec 1999 18:09:19 +0100 (MET)
Received: from florence(129.132.58.33), claiming to be "florence.ethz.ch"
 via SMTP by hypatia, id smtpdAAAa0044p; Fri Dec 31 18:09:10 1999
Received: (maechler@localhost) by florence.ethz.ch (8.9.3/D-MATH-client) id SAA15779; Fri, 31 Dec 1999 18:09:14 +0100
X-Authentication-Warning: florence.ethz.ch: maechler set sender to maechler@florence using -f
From: Martin Maechler <maechler@stat.math.ethz.ch>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
Message-ID: <14444.58169.886168.959820@gargle.gargle.HOWL>
Date: Fri, 31 Dec 1999 18:09:13 +0100 (MET)
To: p.dalgaard@pubhealth.ku.dk
Cc: R-bugs@biostat.ku.dk
Subject: Re: Segfault in dataentry() (PR#391)
In-Reply-To: <199912291053.LAA02959@pubhealth.ku.dk>
References: <199912291053.LAA02959@pubhealth.ku.dk>
X-Mailer: VM 6.75 under Emacs 20.5.1
Reply-To: Martin Maechler <maechler@stat.math.ethz.ch>
Content-Length: 1008

>>>>> "PD" == p dalgaard <p.dalgaard@pubhealth.ku.dk> writes:

    >> dataentry(0,0)

    PD> Program received signal SIGSEGV, Segmentation fault.  0x808991c in
    PD> duplicate (s=0x0) at ../../../R/src/main/duplicate.c:42 42 switch
    PD> (TYPEOF(s)) {

    PD> Apparently that one doesn't get trapped by the no-segfault checks.
    PD> Martin?

There's a not-so-short  "stop.list" of functions which are *NOT* tested for
segfaults.   dataentry (w/ and w/o ".") is among them.
all the interactive ones are, actually.
[[remember:   The list was quite a bit shorter, and there were R core
	      members who complained...]] 

Look in  ..../tests/make-no-segfault.R for the statements starting with

 edit.int <- c("fix", "edit", "vi", "emacs", "pico", "xemacs", "xedit")
 misc.int <- c("browser", "bug.report", "menu")
 stop.list[["base"]] <-
    ..

to find all the functions which are *not* tested for seg.faults.

Maybe we (R-core) we should really always have
      R_TESTLOTS=yes
in our environments?

==> 391.reply.2 <==
From hornik@ci.tuwien.ac.at  Sat Jan  1 16:40:27 2000
Received: from fangorn.ci.tuwien.ac.at (fangorn.ci.tuwien.ac.at [128.131.51.24])
	by pubhealth.ku.dk (8.8.8+Sun/8.8.8) with ESMTP id QAA13861
	for <R-bugs@biostat.ku.dk>; Sat, 1 Jan 2000 16:40:27 +0100 (MET)
Received: from aragorn.ci.tuwien.ac.at (hornik@aragorn.ci.tuwien.ac.at [128.131.51.35])
	by fangorn.ci.tuwien.ac.at (8.9.3/8.9.3/Debian/GNU) with ESMTP id QAA19454;
	Sat, 1 Jan 2000 16:39:43 +0100
Received: (from hornik@localhost)
	by aragorn.ci.tuwien.ac.at (8.9.3/8.8.5) id QAA19446;
	Sat, 1 Jan 2000 16:40:51 +0100
From: Kurt Hornik <Kurt.Hornik@ci.tuwien.ac.at>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
Message-ID: <14446.8194.975894.184062@aragorn.ci.tuwien.ac.at>
Date: Sat, 1 Jan 2000 16:40:50 +0100 (CET)
To: maechler@stat.math.ethz.ch
Cc: r-devel@stat.math.ethz.ch, R-bugs@biostat.ku.dk
Subject: Re: Segfault in dataentry() (PR#391)
In-Reply-To: <199912311709.SAA12673@pubhealth.ku.dk>
References: <199912311709.SAA12673@pubhealth.ku.dk>
X-Mailer: VM 6.75 under Emacs 19.34.1
Reply-To: Kurt.Hornik@ci.tuwien.ac.at
Content-Length: 1470

>>>>> maechler  writes:

>>>>> "PD" == p dalgaard <p.dalgaard@pubhealth.ku.dk> writes:
>>> dataentry(0,0)

PD> Program received signal SIGSEGV, Segmentation fault.  0x808991c in
PD> duplicate (s=0x0) at ../../../R/src/main/duplicate.c:42 42 switch
PD> (TYPEOF(s)) {

PD> Apparently that one doesn't get trapped by the no-segfault checks.
PD> Martin?

> There's a not-so-short  "stop.list" of functions which are *NOT* tested for
> segfaults.   dataentry (w/ and w/o ".") is among them.
> all the interactive ones are, actually.
> [[remember:   The list was quite a bit shorter, and there were R core
> 	      members who complained...]] 

> Look in  ..../tests/make-no-segfault.R for the statements starting with

>  edit.int <- c("fix", "edit", "vi", "emacs", "pico", "xemacs", "xedit")
>  misc.int <- c("browser", "bug.report", "menu")
>  stop.list[["base"]] <-
>     ..

> to find all the functions which are *not* tested for seg.faults.

> Maybe we (R-core) we should really always have
>       R_TESTLOTS=yes
> in our environments?

Actually, I'd prefer having some means of markup in the Rd source code
to indicate whether an object should not be employed for the no-segfault
testing.  We could still keep the R_TESTLOTS, though ...

E.g, the socket docs would have something correspding to \dontrun in the
examples section.

This should be cleaner than having to change the script in tests.

(Confusion arose when Fritz added old.packages() two days ago ...)

-k

==> 391.audit <==
Fri Feb 18 15:28:12 2000	pd	moved from incoming to Low-level
Mon Feb 28 17:21:37 2000	pd	changed notes
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

Directory:  Misc

none

Directory:  Models

none

Directory:  Startup

none

Directory:  System-specific

* PR# 452 *
Subject: problem with glm
From: Brad McNeney <mcneney@cs.sfu.ca>
Date: Fri, 18 Feb 2000 17:51:54 -0800 (PST)
--Problems on Alpha's with glm. Status unclear
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 452 <==
From mcneney@cs.sfu.ca  Sat Feb 19 02:51:57 2000
Received: from stat.math.ethz.ch (daemon@hypatia.ethz.ch [129.132.58.23])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id CAA15326
	for <R-bugs@biostat.ku.dk>; Sat, 19 Feb 2000 02:51:56 +0100 (MET)
Received: (from daemon@localhost)
	by stat.math.ethz.ch (8.9.1/8.9.1) id CAA05839
	for <r-bugs@stat.math.ethz.ch>; Sat, 19 Feb 2000 02:52:05 +0100 (MET)
Received: from cs.sfu.ca(142.58.111.1)
 via SMTP by hypatia, id smtpdAAAa001RB; Sat Feb 19 02:51:57 2000
Received: from smahlt.math.sfu.ca (smahlt [199.60.17.25])
	by cs.sfu.ca (8.9.1/8.9.1) with ESMTP id RAA10291
	for <r-bugs@stat.math.ethz.ch>; Fri, 18 Feb 2000 17:51:55 -0800 (PST)
Received: from localhost by smahlt.math.sfu.ca (8.8.8/1.1.20.8/23Nov99-0751PM)
	id RAA0000400367; Fri, 18 Feb 2000 17:51:54 -0800 (PST)
X-Authentication-Warning: smahlt.math.sfu.ca: mcneney owned process doing -bs
Date: Fri, 18 Feb 2000 17:51:54 -0800 (PST)
From: Brad McNeney <mcneney@cs.sfu.ca>
X-Sender: mcneney@smahlt.math.sfu.ca
To: r-bugs@stat.math.ethz.ch
Subject: problem with glm
Message-ID: <Pine.OSF.4.21.0002181750080.400767-100000@smahlt.math.sfu.ca>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII

I'm having sporadic problems with glm on my alpha workstation running
Compaq Tru64 UNIX V5.0 (I can't replicate the problem on my Linux PC). I
have the same problem whether I use a version of R built with the native
C-compiler or a version compiled with gcc. In both cases I've built with
g77.

I want to do some simulations with a call to glm in each rep. A simplified
version would be something like:

N_100; NREPS_100; lam.e_5; logit.inv_function(x){ exp(x)/(1+exp(x)) }
for(i in (1:NREPS)) {
   cat(paste("REP",i,"\n"))
   T_rexp(N,(lam.e))
   Delta_rbinom(N,1,logit.inv(1+T))
   ff_glm(Delta ~ T,family=binomial(logit))
}
 
It often completes all reps, but I occasionally get errors related to
lengths of various objects, etc.:

REP 1 
REP 2
<snip>
REP 9 
Error in model.matrix(t, data) : variable lengths differ


REP 1 
<snip>
REP 53 
Error: subscript out of bounds

REP 1 
<snip>
REP 41 
Error in model.matrix(t, data) : invalid variable type

Different error messages, different numbers of reps. When I call glm again
using the values of T and Delta just before the error, it runs error-free.
When I put the data in a data frame before calling glm I can also get
messages like:

REP 1 
<snip>
REP 64 
Error in model.frame(formula, rownames, variables, varnames, extras, extranames,  : 
        invalid variable type


--please do not edit the information below--

Version:
 platform = alpha-dec-osf5.0
 arch = alpha
 os = osf5.0
 system = alpha, osf5.0
 status = Patched
 major = 0
 minor = 99.0
 year = 2000
 month = February
 day = 9
 language = R

Search Path:
 .GlobalEnv, Autoloads, package:base

-------------------------------------------------------------------------
Brad McNeney                               email: mcneney@stat.sfu.ca
Department of Mathematics and Statistics   web: www.math.sfu.ca/~mcneney/
Simon Fraser University                    phone: 604.291.4815
8888 University Drive                      fax: 604.291.4947
Burnaby, British Columbia
Canada V5A 1S6


==> 452.reply.1 <==
From pd@biostat.ku.dk  Sat Feb 19 13:57:47 2000
Received: from biostat.ku.dk (blueberry [130.225.108.193])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id NAA16134;
	Sat, 19 Feb 2000 13:57:46 +0100 (MET)
Received: (from pd@localhost)
	by biostat.ku.dk (8.9.3/8.9.3) id NAA30569;
	Sat, 19 Feb 2000 13:59:28 +0100
Sender: pd@blueberry.kubism.ku.dk
To: mcneney@cs.sfu.ca
Cc: r-devel@stat.math.ethz.ch, R-bugs@biostat.ku.dk
Subject: Re: [Rd] problem with glm (PR#452)
References: <200002190151.CAA15336@pubhealth.ku.dk>
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 19 Feb 2000 13:59:27 +0100
In-Reply-To: mcneney@cs.sfu.ca's message of "Sat, 19 Feb 2000 02:51:58 +0100 (MET)"
Message-ID: <x24sb5l55c.fsf@blueberry.kubism.ku.dk>
Lines: 47
X-Mailer: Gnus v5.7/Emacs 20.4
Mime-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: 7bit

mcneney@cs.sfu.ca writes:

> N_100; NREPS_100; lam.e_5; logit.inv_function(x){ exp(x)/(1+exp(x)) }
> for(i in (1:NREPS)) {
>    cat(paste("REP",i,"\n"))
>    T_rexp(N,(lam.e))
>    Delta_rbinom(N,1,logit.inv(1+T))
>    ff_glm(Delta ~ T,family=binomial(logit))
> }
>  
> It often completes all reps, but I occasionally get errors related to
> lengths of various objects, etc.:
...
> --please do not edit the information below--
> 
> Version:
>  platform = alpha-dec-osf5.0
>  arch = alpha
>  os = osf5.0
>  system = alpha, osf5.0
>  status = Patched
>  major = 0
>  minor = 99.0
>  year = 2000
>  month = February
>  day = 9
>  language = R
> 
> Search Path:
>  .GlobalEnv, Autoloads, package:base

I just did the above ~10 times on i386 and nothing happened. We've had
previous reports on trouble in the lm/glm/model.matrix etc. region on
Alpha. 

If you compile with all warnings on, are you getting warnings on
pointer/integer comparisons or assignments?

Can you create a reproducible case (with set.seed to keep the random
generator sequence constant) and would you know how run a debugger on
your version so that we can figure out what is going wrong?

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

==> 452.followup.1 <==
From mcneney@cs.sfu.ca  Sun Feb 20 05:11:05 2000
Received: from cs.sfu.ca (cs.sfu.ca [142.58.111.1])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id FAA17753;
	Sun, 20 Feb 2000 05:11:03 +0100 (MET)
Received: from smahlt.math.sfu.ca (smahlt [199.60.17.25])
	by cs.sfu.ca (8.9.1/8.9.1) with ESMTP id UAA15662;
	Sat, 19 Feb 2000 20:11:12 -0800 (PST)
Received: from localhost by smahlt.math.sfu.ca (8.8.8/1.1.20.8/23Nov99-0751PM)
	id UAA0000433332; Sat, 19 Feb 2000 20:11:12 -0800 (PST)
X-Authentication-Warning: smahlt.math.sfu.ca: mcneney owned process doing -bs
Date: Sat, 19 Feb 2000 20:11:12 -0800 (PST)
From: Brad McNeney <mcneney@cs.sfu.ca>
X-Sender: mcneney@smahlt.math.sfu.ca
To: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
cc: r-devel@stat.math.ethz.ch, R-bugs@biostat.ku.dk
Subject: Re: [Rd] problem with glm (PR#452)
In-Reply-To: <x24sb5l55c.fsf@blueberry.kubism.ku.dk>
Message-ID: <Pine.OSF.4.21.0002191945010.433325-100000@smahlt.math.sfu.ca>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII


> If you compile with all warnings on, are you getting warnings on
> pointer/integer comparisons or assignments?
> 

Yes, all the ones in regex.c that Doug mentioned. Here's a sample
of these and others (warnings related to graphics/X stuff have been
omitted):

uncmin.c: In function `lltslv':
uncmin.c:281: warning: type mismatch in implicit declaration for built-in
function `memcpy'
character.c: In function `stripchars':
character.c:269: warning: subscript has type `char'
character.c:281: warning: subscript has type `char'
character.c:296: warning: subscript has type `char'
character.c:296: warning: subscript has type `char'
character.c:304: warning: subscript has type `char'
character.c:312: warning: subscript has type `char'
character.c:312: warning: subscript has type `char'
character.c:312: warning: subscript has type `char'
character.c:320: warning: subscript has type `char'
character.c:320: warning: subscript has type `char'
character.c:330: warning: subscript has type `char'
character.c:330: warning: subscript has type `char'
character.c:341: warning: subscript has type `char'
character.c: In function `do_makenames':
character.c:384: warning: subscript has type `char'
character.c:395: warning: subscript has type `char'
/usr/share/misc/bison.simple: In function `Rf_yyparse':
/usr/share/misc/bison.simple:254: warning: `yyval' might be used
uninitialized in this function
regex.c: In function `re_match_2':
regex.c:3770: warning: cast from pointer to integer of different size
regex.c:3770: warning: cast from pointer to integer of different size
regex.c:3776: warning: cast to pointer from integer of different size
regex.c:3776: warning: cast to pointer from integer of different size
regex.c:3923: warning: cast to pointer from integer of different size
regex.c:3923: warning: cast to pointer from integer of different size
regex.c:3976: warning: cast to pointer from integer of different size
regex.c:3976: warning: cast to pointer from integer of different size
regex.c:4082: warning: cast from pointer to integer of different size
regex.c:4083: warning: cast from pointer to integer of different size
regex.c:4115: warning: cast to pointer from integer of different size
regex.c:4115: warning: cast to pointer from integer of different size
regex.c:4128: warning: cast to pointer from integer of different size
regex.c:4128: warning: cast to pointer from integer of different size
regex.c:4296: warning: cast from pointer to integer of different size
regex.c:4297: warning: cast from pointer to integer of different size
saveload.c:495: warning: `BinarySave' defined but not used
saveload.c:1775: warning: `NewBinarySave' defined but not used


I'll see what I can do about getting a more reproducible error. 

Any tips on what to look for if I'm running R within GDB? I don't have
much experience with the debugger. I mostly just use it to see where my
programs are dying. But R is not -- it just gives strange error messages.

TIA,
Brad


==> 452.followup.2 <==
From ripley@stats.ox.ac.uk  Sun Feb 20 09:33:06 2000
Received: from toucan.stats.ox.ac.uk (toucan.stats.ox.ac.uk [163.1.20.20])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id JAA17966;
	Sun, 20 Feb 2000 09:33:05 +0100 (MET)
Received: from max168.public.ox.ac.uk (max168.public.ox.ac.uk [192.76.27.168])
	by toucan.stats.ox.ac.uk (8.9.0/8.9.0) with ESMTP id IAA20341;
	Sun, 20 Feb 2000 08:33:06 GMT
Date: Sun, 20 Feb 2000 08:32:05 +0000 (GMT)
From: Prof Brian D Ripley <ripley@stats.ox.ac.uk>
Sender: ripley@auk.stats
To: Brad McNeney <mcneney@cs.sfu.ca>
cc: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>, r-devel@stat.math.ethz.ch,
        R-bugs@biostat.ku.dk
Subject: Re: [Rd] problem with glm (PR#452)
In-Reply-To: <Pine.OSF.4.21.0002191945010.433325-100000@smahlt.math.sfu.ca>
Message-ID: <Pine.GSO.4.05.10002200807420.5046-100000@auk.stats>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII

On Sat, 19 Feb 2000, Brad McNeney wrote:

> 
> > If you compile with all warnings on, are you getting warnings on
> > pointer/integer comparisons or assignments?
> > 
> 
> Yes, all the ones in regex.c that Doug mentioned. Here's a sample
> of these and others (warnings related to graphics/X stuff have been
> omitted):

(Two suggestions which are in the current snapshot follow. Looks like
what is which header varies a bit.)

> uncmin.c: In function `lltslv':
> uncmin.c:281: warning: type mismatch in implicit declaration for built-in
> function `memcpy'

Add a line (third one here) to src/include/R_ext/RS.h:

#ifndef R_RS_H
#define R_RS_H

#include <string.h> /* for memcpy */
#include "Rconfig.h" /* for F77_SYMBOL */


> character.c: In function `stripchars':
> character.c:269: warning: subscript has type `char'
> character.c:281: warning: subscript has type `char'
> character.c:296: warning: subscript has type `char'
> character.c:296: warning: subscript has type `char'
> character.c:304: warning: subscript has type `char'
> character.c:312: warning: subscript has type `char'
> character.c:312: warning: subscript has type `char'
> character.c:312: warning: subscript has type `char'
> character.c:320: warning: subscript has type `char'
> character.c:320: warning: subscript has type `char'
> character.c:330: warning: subscript has type `char'
> character.c:330: warning: subscript has type `char'
> character.c:341: warning: subscript has type `char'
> character.c: In function `do_makenames':
> character.c:384: warning: subscript has type `char'
> character.c:395: warning: subscript has type `char'
> /usr/share/misc/bison.simple: In function `Rf_yyparse':
> /usr/share/misc/bison.simple:254: warning: `yyval' might be used
> uninitialized in this function

Those are all normal.

> regex.c: In function `re_match_2':
> regex.c:3770: warning: cast from pointer to integer of different size
> regex.c:3770: warning: cast from pointer to integer of different size

That looks like a regex bug, with a why? comment in the code. Change
(int) to (long), twice.

> regex.c:3776: warning: cast to pointer from integer of different size
> regex.c:3776: warning: cast to pointer from integer of different size
> regex.c:3923: warning: cast to pointer from integer of different size
> regex.c:3923: warning: cast to pointer from integer of different size
> regex.c:3976: warning: cast to pointer from integer of different size
> regex.c:3976: warning: cast to pointer from integer of different size
> regex.c:4082: warning: cast from pointer to integer of different size
> regex.c:4083: warning: cast from pointer to integer of different size
> regex.c:4115: warning: cast to pointer from integer of different size
> regex.c:4115: warning: cast to pointer from integer of different size
> regex.c:4128: warning: cast to pointer from integer of different size
> regex.c:4128: warning: cast to pointer from integer of different size
> regex.c:4296: warning: cast from pointer to integer of different size
> regex.c:4297: warning: cast from pointer to integer of different size

I've never seen those, but try adding

#define STDC_HEADERS 1

at the top of regex.c.  (I am not convinced that is the cause here.)

> saveload.c:495: warning: `BinarySave' defined but not used
> saveload.c:1775: warning: `NewBinarySave' defined but not used

Normal, on a platform with xdr.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


==> 452.reply.2 <==
From pd@biostat.ku.dk  Sun Feb 20 13:28:12 2000
Received: from biostat.ku.dk (blueberry [130.225.108.193])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id NAA18510;
	Sun, 20 Feb 2000 13:28:12 +0100 (MET)
Received: (from pd@localhost)
	by biostat.ku.dk (8.9.3/8.9.3) id NAA31926;
	Sun, 20 Feb 2000 13:30:08 +0100
Sender: pd@blueberry.kubism.ku.dk
To: Brad McNeney <mcneney@cs.sfu.ca>
Cc: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>, r-devel@stat.math.ethz.ch,
        R-bugs@biostat.ku.dk
Subject: Re: [Rd] problem with glm (PR#452)
References: <Pine.OSF.4.21.0002191945010.433325-100000@smahlt.math.sfu.ca>
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 20 Feb 2000 13:30:07 +0100
In-Reply-To: Brad McNeney's message of "Sat, 19 Feb 2000 20:11:12 -0800 (PST)"
Message-ID: <x2snyogipc.fsf@blueberry.kubism.ku.dk>
Lines: 34
X-Mailer: Gnus v5.7/Emacs 20.4
Mime-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: 7bit

Brad McNeney <mcneney@cs.sfu.ca> writes:

> I'll see what I can do about getting a more reproducible error. 
> 
> Any tips on what to look for if I'm running R within GDB? I don't have
> much experience with the debugger. I mostly just use it to see where my
> programs are dying. But R is not -- it just gives strange error messages.

One technique is to set a breakpoint at the line that displays the
error, then you can inspect the condition that caused it (you may have
to go "up" a couple of times to get into an interesting environment.)

Sometimes, it turns out that a variable contains something that it
shouldn't due to memory corruption and then you may have to set a
breakpoint earlier in the code and then maybe a watchpoint on the
memory location.

Another thing that is useful even without gdb is to investigate the
output of traceback() and maybe set 

options(error=quote(DUMP <<- sys.status()))

which allows you to subsequently investigate any active environment at
the time of the error, e.g. using ls(envir=DUMP$sys.frames[[3]]), and
get("x",envir=DUMP$sys.frames[[3]]).

(Newer snapshots have a more elaborate dump.frames function, but the
above should do). 

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

==> 452.audit <==
Sun Feb 20 21:27:15 2000	ripley	moved from incoming to System-specific
Mon Feb 28 17:30:41 2000	pd	changed notes

==> 452.followup.3 <==
From mcneney@cs.sfu.ca  Sat Mar  4 19:23:48 2000
Received: from cs.sfu.ca (cs.sfu.ca [142.58.111.1])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id TAA25981;
	Sat, 4 Mar 2000 19:23:42 +0100 (MET)
Received: from smahlt.math.sfu.ca (smahlt [199.60.17.25])
	by cs.sfu.ca (8.9.1/8.9.1) with ESMTP id KAA07172;
	Sat, 4 Mar 2000 10:23:52 -0800 (PST)
Received: from localhost by smahlt.math.sfu.ca (8.8.8/1.1.20.8/23Nov99-0751PM)
	id KAA0000263254; Sat, 4 Mar 2000 10:23:52 -0800 (PST)
X-Authentication-Warning: smahlt.math.sfu.ca: mcneney owned process doing -bs
Date: Sat, 4 Mar 2000 10:23:52 -0800 (PST)
From: Brad McNeney <mcneney@cs.sfu.ca>
X-Sender: mcneney@smahlt.math.sfu.ca
To: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
cc: r-devel@stat.math.ethz.ch, R-bugs@biostat.ku.dk
Subject: Re: [Rd] problem with glm (PR#452)
In-Reply-To: <x2snyogipc.fsf@blueberry.kubism.ku.dk>
Message-ID: <Pine.OSF.4.21.0003041022320.263210-100000@smahlt.math.sfu.ca>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII

I looked into the glm problem some more. Seems to be a memory problem that
occurs just after garbage collection. The easiest way for me to
reproduce  the error is in lapply. I take a list and ask lapply to provide
the descriptive stat summary. I do this several times with the same list.
Most often it gives the correct summary, but just after allocSExp calls
R_gc, one of the summaries for a list element will be NULL. 

E.g for a data frame dat with five columns I get the following (having added
print statements in summary.default and in allocSExp just after the test
for whether gc is necessary):

> lapply(as.list(dat), summary, maxsum = maxsum)
[1] "exiting summary.default"
R_FreeSEXP == NULL  
[1] "exiting summary.default"
[1] "exiting summary.default"
[1] "exiting summary.default"
[1] "exiting summary.default"
$Delta
   Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
   0.00    1.00    1.00    1.19    2.00    2.00 

$D
NULL

$R
   Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
   0.00    1.00    1.00    0.86    1.00    1.00 

$V
    Min.  1st Qu.   Median     Mean  3rd Qu.     Max. 
0.004552 0.740700 1.575000 1.754000 3.205000 3.390000 

$X
   Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
    0.0     0.0     0.5     0.5     1.0     1.0 


I don't know if the following is relevant, but for some reason I've found 
I can avoid this particular problem if I make a small change in lapply in 
its main loop.  Around line 50 of apply.c:

    PROTECT(ans = allocVector(VECSXP, n));
    for(i = 0; i < n; i++) {
        INTEGER(ind)[0] = i + 1;
        VECTOR(ans)[i] = eval(R_fcall, rho);
    }

if I change it to make an assignment to a
temporary variable first everything seems to work fine:

    PROTECT(ans = allocVector(VECSXP, n));
    for(i = 0; i < n; i++) {
        INTEGER(ind)[0] = i + 1;
        tem = eval(R_fcall, rho);
        VECTOR(ans)[i] = tem;
    }

hasn't given me any NULLs yet. 



On 20 Feb 2000, Peter Dalgaard BSA wrote:

> Brad McNeney <mcneney@cs.sfu.ca> writes:
> 
> > I'll see what I can do about getting a more reproducible error. 
> > 


==> 452.reply.3 <==
From pd@biostat.ku.dk  Sun Mar  5 01:02:38 2000
Received: from biostat.ku.dk (blueberry [130.225.108.193])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id BAA26687;
	Sun, 5 Mar 2000 01:02:37 +0100 (MET)
Received: (from pd@localhost)
	by biostat.ku.dk (8.9.3/8.9.3) id BAA17617;
	Sun, 5 Mar 2000 01:03:15 +0100
Sender: pd@blueberry.kubism.ku.dk
To: Brad McNeney <mcneney@cs.sfu.ca>
Cc: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>, r-devel@stat.math.ethz.ch,
        R-bugs@biostat.ku.dk
Subject: Re: [Rd] problem with glm (PR#452)
References: <Pine.OSF.4.21.0003041022320.263210-100000@smahlt.math.sfu.ca>
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 05 Mar 2000 01:03:15 +0100
In-Reply-To: Brad McNeney's message of "Sat, 4 Mar 2000 10:23:52 -0800 (PST)"
Message-ID: <x2putauvuk.fsf@blueberry.kubism.ku.dk>
Lines: 47
X-Mailer: Gnus v5.7/Emacs 20.4
Mime-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: 7bit

Brad McNeney <mcneney@cs.sfu.ca> writes:

> I don't know if the following is relevant, but for some reason I've found 
> I can avoid this particular problem if I make a small change in lapply in 
> its main loop.  Around line 50 of apply.c:
> 
>     PROTECT(ans = allocVector(VECSXP, n));
>     for(i = 0; i < n; i++) {
>         INTEGER(ind)[0] = i + 1;
>         VECTOR(ans)[i] = eval(R_fcall, rho);
>     }
> 
> if I change it to make an assignment to a
> temporary variable first everything seems to work fine:
> 
>     PROTECT(ans = allocVector(VECSXP, n));
>     for(i = 0; i < n; i++) {
>         INTEGER(ind)[0] = i + 1;
>         tem = eval(R_fcall, rho);
>         VECTOR(ans)[i] = tem;
>     }
> 
> hasn't given me any NULLs yet. 

Now that is pretty darn odd... Looks quite a bit like a compiler bug.
Those two pieces of code should be equivalent as far as I can see.

One thing that you might do: objdump -dS apply.o allows you to see
what code the compiler generates for the two cases. Also, of course,
you can try reducing the level of optimization.


Alternatively, the mere addition of "tem" changes the local memory use
of that function so that something that got clobbered before doesn't
get clobbered now.

The effect doesn't seem to be present on Intels:

> dfr<-do.call("data.frame",lapply(1:100,function(i)rnorm(100)))
> any(sapply(lapply(dfr,summary),is.null))
[1] FALSE

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

Directory:  TooMuchAtOnce

none

Directory:  Windows

none

Directory:  incoming

* PR# 463 *
Subject: Bug in read.table
From: "E. S. Venkatraman" <venkat@biosta.mskcc.org>
Date: Tue, 29 Feb 2000 17:47:54 -0500 (EST)
-- no notes --
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 463 <==
From venkat@biosta.mskcc.org  Tue Feb 29 23:56:14 2000
Received: from biosta.mskcc.org (biosta.mskcc.org [140.163.130.201])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id XAA20190
	for <r-bugs@biostat.ku.dk>; Tue, 29 Feb 2000 23:56:13 +0100 (MET)
Received: from localhost by biosta.mskcc.org (8.8.8/1.1.10.5/18Nov97-0333PM)
	id RAA0000010506; Tue, 29 Feb 2000 17:47:54 -0500 (EST)
Date: Tue, 29 Feb 2000 17:47:54 -0500 (EST)
From: "E. S. Venkatraman" <venkat@biosta.mskcc.org>
To: r-bugs@biostat.ku.dk
Subject: Bug in read.table
Message-ID: <Pine.OSF.4.05.10002291739570.10358-200000@biosta.mskcc.org>
MIME-Version: 1.0
Content-Type: MULTIPART/MIXED; BOUNDARY="-1062723383-1338110495-951864474=:10358"

  This message is in MIME format.  The first part should be readable text,
  while the remaining parts are likely unreadable without MIME-aware tools.
  Send mail to mime@docserver.cac.washington.edu for more info.

---1062723383-1338110495-951864474=:10358
Content-Type: TEXT/PLAIN; charset=US-ASCII

Hi.

I want to report a bug in read.table.  The attached output demonstrates
the bug.  Unfortunately, the data file contains confidential information
and hence cannot be attached.  Is there any way to figure out the cause 
of the bug and fix it?  Thanks.

Venkat
-----------------------------------------------------------------------
E. S. Venkatraman, Ph.D.     Phone: (212) 639-8520  Fax: (212) 717-3137
Assistant Attending Member     Memorial Sloan-Kettering Cancer Center
-----------------------------------------------------------------------

---1062723383-1338110495-951864474=:10358
Content-Type: TEXT/PLAIN; charset=US-ASCII; name="r1.out"
Content-Transfer-Encoding: BASE64
Content-ID: <Pine.OSF.4.05.10002291747540.10358@biosta.mskcc.org>
Content-Description: Output from R.
Content-Disposition: attachment; filename="r1.out"

W3ZlbmthdEBtc2stMTMwLTE1MyB2ZW5rYXRdJCBSDQogDQpSIDogQ29weXJp
Z2h0IDIwMDAsIFRoZSBSIERldmVsb3BtZW50IENvcmUgVGVhbQ0KVmVyc2lv
biAxLjAuMCAgKEZlYnJ1YXJ5IDI5LCAyMDAwKQ0KIA0KUiBpcyBmcmVlIHNv
ZnR3YXJlIGFuZCBjb21lcyB3aXRoIEFCU09MVVRFTFkgTk8gV0FSUkFOVFku
DQpZb3UgYXJlIHdlbGNvbWUgdG8gcmVkaXN0cmlidXRlIGl0IHVuZGVyIGNl
cnRhaW4gY29uZGl0aW9ucy4NClR5cGUgICAgIj9saWNlbnNlIiBvciAiP2xp
Y2VuY2UiIGZvciBkaXN0cmlidXRpb24gZGV0YWlscy4NCiANClIgaXMgYSBj
b2xsYWJvcmF0aXZlIHByb2plY3Qgd2l0aCBtYW55IGNvbnRyaWJ1dG9ycy4N
ClR5cGUgICAgIj9jb250cmlidXRvcnMiIGZvciBhIGxpc3QuDQogDQpUeXBl
ICAgICJkZW1vKCkiIGZvciBzb21lIGRlbW9zLCAiaGVscCgpIiBmb3Igb24t
bGluZSBoZWxwLCBvcg0KICAgICAgICAiaGVscC5zdGFydCgpIiBmb3IgYSBI
VE1MIGJyb3dzZXIgaW50ZXJmYWNlIHRvIGhlbHAuDQpUeXBlICAgICJxKCki
IHRvIHF1aXQgUi4NCg0KPiBvcHRpb25zKHdpZHRoPTcyKQ0KPiBjb3VudC5m
aWVsZHMoIkNvbnN1bHQva3Jhc2RhdGEiLHNlcD0iXHQiKQ0KICBbMV0gMTgg
MTggMTggMTggMTggMTggMTggMTggMTggMTggMTggMTggMTggMTggMTggMTgg
MTggMTggMTggMTggMTggMTgNCiBbMjNdIDE4IDE4IDE4IDE4IDE4IDE4IDE4
IDE4IDE4IDE4IDE4IDE4IDE4IDE4IDE4IDE4IDE4IDE4IDE4IDE4IDE4IDE4
DQogWzQ1XSAxOCAxOCAxOCAxOCAxOCAxOCAxOCAxOCAxOCAxOCAxOCAxOCAx
OCAxOCAxOCAxOCAxOCAxOCAxOCAxOCAxOCAxOA0KIFs2N10gMTggMTggMTgg
MTggMTggMTggMTggMTggMTggMTggMTggMTggMTggMTggMTggMTggMTggMTgg
MTggMTggMTggMTgNCiBbODldIDE4IDE4IDE4IDE4IDE4IDE4IDE4IDE4IDE4
IDE4IDE4IDE4IDE4IDE4IDE4IDE4IDE4DQo+IHJlYWQudGFibGUoIkNvbnN1
bHQva3Jhc2RhdGEiLHNlcD0iXHQiKQ0KIA0Kcm93LmxlbnM9DQogIFsxXSAx
OCAxOCAxOCAxOCAxOCAxOCAxOCAxOCAxOCAxOCAxOCAxOCAxOCAxOCAxOCAx
OCAxOCAxOCAxOCAxOCAxOCAxOA0KIFsyM10gMTggMTggMTggMTggMTggMTgg
MTggMTggMTggMTggMTggMTggMTggMTggMTggMTggMTggMTggMTggMTggMTgg
MTgNCiBbNDVdIDE4IDE4IDE4IDE4IDE4IDE4IDE4IDE4IDE4IDE4IDE4IDE4
IDE4ICAxICAxIDE4IDE4IDE4IDE4IDE4IDE4IDE4DQogWzY3XSAxOCAxOCAx
OCAxOCAxOCAxOCAxOCAxOCAxOCAxOCAxOCAxOCAxOCAxOCAxOCAxOCAxOCAx
OCAxOCAxOCAxOCAxOA0KIFs4OV0gMTggMTggMTggMTggMTggMTggMTggMTgg
MTggMTggMTggMTggMTggMTggMTggMTggMTgNCkVycm9yIGluIHJlYWQudGFi
bGUoIkNvbnN1bHQva3Jhc2RhdGEiLCBzZXAgPSAiXHQiKSA6DQogICAgICAg
IGFsbCByb3dzIG11c3QgaGF2ZSB0aGUgc2FtZSBsZW5ndGguDQo+IA0KPiB2
ZXJzaW9uDQogICAgICAgICBfDQpwbGF0Zm9ybSBpNjg2LXVua25vd24tbGlu
dXgNCmFyY2ggICAgIGk2ODYNCm9zICAgICAgIGxpbnV4DQpzeXN0ZW0gICBp
Njg2LCBsaW51eA0Kc3RhdHVzDQptYWpvciAgICAxDQptaW5vciAgICAwLjAN
CnllYXIgICAgIDIwMDANCm1vbnRoICAgIEZlYnJ1YXJ5DQpkYXkgICAgICAy
OQ0KbGFuZ3VhZ2UgUg0KPiAgDQoNCg==
---1062723383-1338110495-951864474=:10358--

==> 463.reply.1 <==
From thomas@biostat.washington.edu  Wed Mar  1 00:16:29 2000
Received: from mail.biostat.washington.edu (mail.biostat.washington.edu [128.95.113.21])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id AAA20274
	for <R-bugs@biostat.ku.dk>; Wed, 1 Mar 2000 00:16:28 +0100 (MET)
Received: from mail.biostat.washington.edu (mail.biostat.washington.edu [128.95.113.21])
	by mail.biostat.washington.edu (8.9.3+Sun/8.9.1-fetrow-99-05-16b) with ESMTP id PAA01399;
	Tue, 29 Feb 2000 15:16:33 -0800 (PST)
Date: Tue, 29 Feb 2000 15:16:33 -0800 (PST)
From: Thomas Lumley <thomas@biostat.washington.edu>
To: r-devel@stat.math.ethz.ch
cc: R-bugs@biostat.ku.dk
Subject: Re: [Rd] Bug in read.table (PR#463)
In-Reply-To: <200002292256.XAA20200@pubhealth.ku.dk>
Message-ID: <Pine.GSO.4.21.0002291514300.5673-100000@mail.biostat.washington.edu>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII

On Tue, 29 Feb 2000 venkat@biosta.mskcc.org wrote:

> 
> I want to report a bug in read.table.  The attached output demonstrates
> the bug.  Unfortunately, the data file contains confidential information
> and hence cannot be attached.  Is there any way to figure out the cause 
> of the bug and fix it?  Thanks.


Here's the output in readable form. The bug seems to be that
count.fields() thinks the records are the same length but read.table
doesn't.

	-thomas


[venkat@msk-130-153 venkat]$ R

R : Copyright 2000, The R Development Core Team
Version 1.0.0  (February 29, 2000)

R is free software and comes with ABSOLUTELY NO WARRANTY.
You are welcome to redistribute it under certain conditions.
Type    "?license" or "?licence" for distribution details.

R is a collaborative project with many contributors.
Type    "?contributors" for a list.

Type    "demo()" for some demos, "help()" for on-line help, or
        "help.start()" for a HTML browser interface to help.
Type    "q()" to quit R.

> options(width=72)
> count.fields("Consult/krasdata",sep="\t")
  [1] 18 18 18 18 18 18 18 18 18 18 18 18 18 18 18 18 18 18 18 18 18 18
 [23] 18 18 18 18 18 18 18 18 18 18 18 18 18 18 18 18 18 18 18 18 18 18
 [45] 18 18 18 18 18 18 18 18 18 18 18 18 18 18 18 18 18 18 18 18 18 18
 [67] 18 18 18 18 18 18 18 18 18 18 18 18 18 18 18 18 18 18 18 18 18 18
 [89] 18 18 18 18 18 18 18 18 18 18 18 18 18 18 18 18 18
> read.table("Consult/krasdata",sep="\t")

row.lens=
  [1] 18 18 18 18 18 18 18 18 18 18 18 18 18 18 18 18 18 18 18 18 18 18
 [23] 18 18 18 18 18 18 18 18 18 18 18 18 18 18 18 18 18 18 18 18 18 18
 [45] 18 18 18 18 18 18 18 18 18 18 18 18 18  1  1 18 18 18 18 18 18 18
 [67] 18 18 18 18 18 18 18 18 18 18 18 18 18 18 18 18 18 18 18 18 18 18
 [89] 18 18 18 18 18 18 18 18 18 18 18 18 18 18 18 18 18
Error in read.table("Consult/krasdata", sep = "\t") :
        all rows must have the same length.
>
> version
         _
platform i686-unknown-linux
arch     i686
os       linux
system   i686, linux
status
major    1
minor    0.0
year     2000
month    February
day      29
language R
>



==> 463.reply.2 <==
From thomas@biostat.washington.edu  Wed Mar  1 00:25:49 2000
Received: from mail.biostat.washington.edu (mail.biostat.washington.edu [128.95.113.21])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id AAA20304
	for <R-bugs@biostat.ku.dk>; Wed, 1 Mar 2000 00:25:48 +0100 (MET)
Received: from mail.biostat.washington.edu (mail.biostat.washington.edu [128.95.113.21])
	by mail.biostat.washington.edu (8.9.3+Sun/8.9.1-fetrow-99-05-16b) with ESMTP id PAA01836;
	Tue, 29 Feb 2000 15:25:52 -0800 (PST)
Date: Tue, 29 Feb 2000 15:25:52 -0800 (PST)
From: Thomas Lumley <thomas@biostat.washington.edu>
To: r-devel@stat.math.ethz.ch
cc: venkat@biosta.mskcc.org, R-bugs@biostat.ku.dk
Subject: Re: [Rd] Bug in read.table (PR#463)
In-Reply-To: <Pine.GSO.4.21.0002291514300.5673-100000@mail.biostat.washington.edu>
Message-ID: <Pine.GSO.4.21.0002291519090.5673-100000@mail.biostat.washington.edu>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII

On Tue, 29 Feb 2000, Thomas Lumley wrote:

> On Tue, 29 Feb 2000 venkat@biosta.mskcc.org wrote:
> 
> > 
> > I want to report a bug in read.table.  The attached output demonstrates
> > the bug.  Unfortunately, the data file contains confidential information
> > and hence cannot be attached.  Is there any way to figure out the cause 
> > of the bug and fix it?  Thanks.
> 
> 
> Here's the output in readable form. The bug seems to be that
> count.fields() thinks the records are the same length but read.table
> doesn't.


Ok. read.table and count.fields don't have identical defaults.

R> args(count.fields)
function (file, sep = "", quote = "", skip = 0)

R> args(read.table)
function (file, header = FALSE, sep = "", quote = "\"'", dec = ".",
    row.names, col.names, as.is = FALSE, na.strings = "NA", skip = 0)


So if count.fields likes your data but read.table doesn't, you probably
want

 read.table("Consult/krasdata",sep="\t",quote="")


Please don't use Base64 encoding in attached files -- it was quite hard to
find a program to decode it, and it's really intended for sending binary
files.  Use plain text, and if your mailer insists on encoding attachments
then just cut and paste the output into the message.


	-thomas


Thomas Lumley
Assistant Professor, Biostatistics
University of Washington, Seattle


==> 463.reply.3 <==
From pd@biostat.ku.dk  Wed Mar  1 00:26:50 2000
Received: from biostat.ku.dk (blueberry [130.225.108.193])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id AAA20323;
	Wed, 1 Mar 2000 00:26:50 +0100 (MET)
Received: (from pd@localhost)
	by biostat.ku.dk (8.9.3/8.9.3) id AAA08400;
	Wed, 1 Mar 2000 00:26:58 +0100
Sender: pd@blueberry.kubism.ku.dk
To: Thomas Lumley <thomas@biostat.washington.edu>
Cc: r-devel@stat.math.ethz.ch, R-bugs@biostat.ku.dk
Subject: Re: [Rd] Bug in read.table (PR#463)
References: <Pine.GSO.4.21.0002291514300.5673-100000@mail.biostat.washington.edu>
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 01 Mar 2000 00:26:58 +0100
In-Reply-To: Thomas Lumley's message of "Tue, 29 Feb 2000 15:16:33 -0800 (PST)"
Message-ID: <x2ln43614t.fsf@blueberry.kubism.ku.dk>
Lines: 43
X-Mailer: Gnus v5.7/Emacs 20.4
Mime-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: 7bit

Thomas Lumley <thomas@biostat.washington.edu> writes:

> On Tue, 29 Feb 2000 venkat@biosta.mskcc.org wrote:
> 
> > 
> > I want to report a bug in read.table.  The attached output demonstrates
> > the bug.  Unfortunately, the data file contains confidential information
> > and hence cannot be attached.  Is there any way to figure out the cause 
> > of the bug and fix it?  Thanks.
> 
> 
> Here's the output in readable form. The bug seems to be that
> count.fields() thinks the records are the same length but read.table
> doesn't.

....
> > options(width=72)
> > count.fields("Consult/krasdata",sep="\t")
>   [1] 18 18 18 18 18 18 18 18 18 18 18 18 18 18 18 18 18 18 18 18 18 18
>  [23] 18 18 18 18 18 18 18 18 18 18 18 18 18 18 18 18 18 18 18 18 18 18
>  [45] 18 18 18 18 18 18 18 18 18 18 18 18 18 18 18 18 18 18 18 18 18 18
>  [67] 18 18 18 18 18 18 18 18 18 18 18 18 18 18 18 18 18 18 18 18 18 18
>  [89] 18 18 18 18 18 18 18 18 18 18 18 18 18 18 18 18 18
> > read.table("Consult/krasdata",sep="\t")
> 
> row.lens=
>   [1] 18 18 18 18 18 18 18 18 18 18 18 18 18 18 18 18 18 18 18 18 18 18
>  [23] 18 18 18 18 18 18 18 18 18 18 18 18 18 18 18 18 18 18 18 18 18 18
>  [45] 18 18 18 18 18 18 18 18 18 18 18 18 18  1  1 18 18 18 18 18 18 18
>  [67] 18 18 18 18 18 18 18 18 18 18 18 18 18 18 18 18 18 18 18 18 18 18
>  [89] 18 18 18 18 18 18 18 18 18 18 18 18 18 18 18 18 18
> Error in read.table("Consult/krasdata", sep = "\t") :
>         all rows must have the same length.

read.data and count.fields have different defaults for the quote=
argument (which is arguably a bug). Try read.table(...,quote="") if
the data contain quote marks (single or double).

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
* PR# 465 *
Subject: "is.qr" definition
From: Jonathan Rougier <J.C.Rougier@durham.ac.uk>
Date: Wed, 1 Mar 2000 11:12:37 +0000 (GMT)
-- no notes --
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 465 <==
From J.C.Rougier@durham.ac.uk  Wed Mar  1 12:13:02 2000
Received: from hermes.dur.ac.uk (hermes.dur.ac.uk [129.234.4.9])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id MAA25475
	for <r-bugs@biostat.ku.dk>; Wed, 1 Mar 2000 12:13:01 +0100 (MET)
Received: from euclid (euclid.dur.ac.uk [129.234.21.53])
	by hermes.dur.ac.uk (8.9.1/8.9.1) with ESMTP id LAA02033
	for <r-bugs@biostat.ku.dk>; Wed, 1 Mar 2000 11:12:38 GMT
Received: from laplace by euclid id <LAA23937@euclid>; Wed, 1 Mar 2000 11:12:28 GMT
Date: Wed, 1 Mar 2000 11:12:37 +0000 (GMT)
From: Jonathan Rougier <J.C.Rougier@durham.ac.uk>
X-Sender: dma0jcr@laplace
To: r-bugs@biostat.ku.dk
Subject: "is.qr" definition
Message-ID: <Pine.GSO.4.20.0003011110570.8527-100000@laplace>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII

Might it be possible to tighten the definition of "is.qr".  I
noticed that after I mistakenly typed

example(lm)  # make lm object named lm.D9
qr.Q(lm.D9)

which exhausted the heap memory and produced two warning
messages.  As an object of class "lm" has a "qr" component,
"is.qr" failed to detect that "lm.D9" was not a "qr" object.  The
obvious thing might be to tighten the definition of "is.qr",
perhaps

"is.qr" <-
function(x) all(c("qr", "rank", "qraux", "pivot") %in% names(x))

And may I add my congratulations to the core group.

Cheers, Jonathan.

--please do not edit the information below--

Version:
 platform = sparc-sun-solaris2.7
 arch = sparc
 os = solaris2.7
 system = sparc, solaris2.7
 status = Patched
 major = 0
 minor = 99.0
 year = 2000
 month = February
 day = 9
 language = R

Search Path:
 .GlobalEnv, package:mva, package:patches, Autoloads, package:base


Jonathan Rougier                       Science Laboratories
Department of Mathematical Sciences    South Road
University of Durham                   Durham DH1 3LE
http://www.maths.dur.ac.uk/stats/people/jcr/jcr.html


==> 465.reply.1 <==
From maechler@stat.math.ethz.ch  Wed Mar  1 15:43:37 2000
Received: from stat.math.ethz.ch (daemon@hypatia.ethz.ch [129.132.58.23])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id PAA29625
	for <R-bugs@biostat.ku.dk>; Wed, 1 Mar 2000 15:43:37 +0100 (MET)
Received: (from daemon@localhost)
	by stat.math.ethz.ch (8.9.1/8.9.1) id PAA29827;
	Wed, 1 Mar 2000 15:43:29 +0100 (MET)
Received: from lynne(129.132.58.30), claiming to be "lynne.ethz.ch"
 via SMTP by hypatia, id smtpdAAAa007I0; Wed Mar  1 15:43:20 2000
Received: (maechler@localhost) by lynne.ethz.ch (8.9.3/D-MATH-client) id PAA01017; Wed, 1 Mar 2000 15:43:19 +0100
X-Authentication-Warning: lynne.ethz.ch: maechler set sender to maechler@lynne.ethz.ch using -f
From: Martin Maechler <maechler@stat.math.ethz.ch>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
Message-ID: <14525.11398.674344.77690@lynne.ethz.ch>
Date: Wed, 1 Mar 2000 15:43:18 +0100 (MET)
To: J.C.Rougier@durham.ac.uk
Cc: r-devel@stat.math.ethz.ch, R-bugs@biostat.ku.dk
Subject: Re: [Rd] "is.qr" definition (PR#465)
In-Reply-To: <200003011113.MAA25485@pubhealth.ku.dk>
References: <200003011113.MAA25485@pubhealth.ku.dk>
X-Mailer: VM 6.75 under Emacs 20.5.1
Reply-To: Martin Maechler <maechler@stat.math.ethz.ch>

>>>>> "JonR" == J C Rougier <J.C.Rougier@durham.ac.uk> writes:

    JonR> Might it be possible to tighten the definition of "is.qr".  I
    JonR> noticed that after I mistakenly typed

    JonR> example(lm) # make lm object named lm.D9
    JonR>  qr.Q(lm.D9)

    JonR> which exhausted the heap memory and produced two warning
    JonR> messages.  As an object of class "lm" has a "qr" component,
    JonR> "is.qr" failed to detect that "lm.D9" was not a "qr" object.
indeed.
yes, it should be tightened.

    JonR> The obvious thing might be to tighten the definition of "is.qr",

    JonR> perhaps

    JonR> "is.qr" <- function(x) all(c("qr", "rank", "qraux", "pivot") %in%
    JonR> names(x))

Just checked: 
 S-plus 5.1 checks for  qr and qraux only (but not just for the presence of
 the names, also !is.null(.) as we now do for $qr.

It makes sense to have this a FAST function since it's called quite a few
times in some calculations... maybe change current
    is.qr <- function(x) is.null(x$qr)
to
    is.qr <- function(x) is.null(x$qr) && !is.null(x$rank) && !is.null(x$qraux)

The current behavior is "according to documentation" so that would have to
be updated as well.

    JonR> And may I add my congratulations to the core group.

thank you 

Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
Seminar fuer Statistik, ETH-Zentrum  LEO D10	Leonhardstr. 27
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1228			<><
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
* PR# 466 *
Subject: Re: R-1.0.0 is released
From: bhoel@server.python.net (Berthold=?iso-8859-1?q?_H=F6llmann?=)
Date: 01 Mar 2000 16:00:54 +0100
-- no notes --
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 466 <==
From bhoel@server.python.net  Wed Mar  1 18:12:56 2000
Received: from stat.math.ethz.ch (daemon@hypatia.ethz.ch [129.132.58.23])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id SAA01317
	for <R-bugs@biostat.ku.dk>; Wed, 1 Mar 2000 18:12:55 +0100 (MET)
Received: (from daemon@localhost)
	by stat.math.ethz.ch (8.9.1/8.9.1) id SAA03990
	for <r-bugs@hypatia.math.ethz.ch>; Wed, 1 Mar 2000 18:13:07 +0100 (MET)
Received: from public.rrz.uni-hamburg.de(134.100.32.55), claiming to be "public.uni-hamburg.de"
 via SMTP by hypatia, id smtpdBAAa000yI; Wed Mar  1 18:12:57 2000
Received: from pchoel.privat.uni-hamburg.de (root@max1-055.public.uni-hamburg.de [134.100.43.55])
	by public.uni-hamburg.de (8.8.8/8.8.8) with ESMTP id SAA10846;
	Wed, 1 Mar 2000 18:12:54 +0100
Received: (from hoel@localhost)
	by pchoel.privat.uni-hamburg.de (8.9.3/8.9.3) id QAA27467;
	Wed, 1 Mar 2000 16:00:54 +0100
X-Authentication-Warning: pchoel.privat.uni-hamburg.de: hoel set sender to bhoel@starship.python.net using -f
Sender: hoel@public.uni-hamburg.de
To: r-help@stat.math.ethz.ch, r-bugs@stat.math.ethz.ch
Subject: Re: R-1.0.0 is released
References: <x23dqc5obk.fsf@blueberry.kubism.ku.dk>
From: bhoel@server.python.net (Berthold=?iso-8859-1?q?_H=F6llmann?=)
Date: 01 Mar 2000 16:00:54 +0100
In-Reply-To: Peter Dalgaard BSA's message of "29 Feb 2000 10:51:27 +0100"
Message-ID: <m2zosienvd.fsf@pchoel.privat.uni-hamburg.de>
Lines: 63
User-Agent: Gnus/5.0803 (Gnus v5.8.3) Emacs/20.6
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii

Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk> writes:

> I've rolled up R-1.0.0.tgz a short while ago. 
> 
I've build R-1.0.0 on my

>uname -a
Linux pchoel 2.2.14 #3 Mit Jan 5 08:57:39 MET 2000 i686 unknown

box. Calling "make check" fails with 

...
make[4]: Entering directory `/opt/src/devel/R-1.0.0/tests/Examples'
updating base-Ex.R ...
make[5]: Entering directory `/opt/src/devel/R-1.0.0/src/library'
 >>> Building/Updating help pages for package `base'
     Formats: text example 
make[5]: Leaving directory `/opt/src/devel/R-1.0.0/src/library'
running code in base-Ex.R ...
../../bin/R --vanilla < base-Ex.R > base-Ex.Rout
make[4]: *** [base-Ex.Rout] Error 1
...

and 

>tail tests/Examples/base-Ex.Rout
> 
> cut(rep(1,5),4)#-- dummy
[1] (0.9995,1] (0.9995,1] (0.9995,1] (0.9995,1] (0.9995,1]
Levels:  (0.999,0.9995] (0.9995,1] (1,1.0005] (1.0005,1.001] 
> tx0 <- c(9, 4, 6, 5, 3, 10, 5, 3, 5)
> x <- rep(0:8, tx0)
> tx <- table(x)
> all(tx == tx0)
Error in all(tx == tx0) : dim<- length of dims do not match the length of object
Execution halted

Don't shure what I should think about it. 

my compiler is:

>gcc --version
2.95.2

R is compiled using the

"-fPIC -O3 -fstrict-aliasing -ffast-math -funroll-loops -mpentiumpro -march=pentiumpro -fschedule-insns2"

compiler switches. I used 

./configure --with-g77 --enable-blas_risc --enable-readline --with-x

for configuring.

Cheers

Berthold

-- 
bhoel@starship.python.net / http://starship.python.net/crew/bhoel/
        It is unlawful to use this email address for unsolicited ads
        (USC Title 47 Sec.227). I will assess a US$500 charge for
        reviewing and deleting each unsolicited ad.

==> 466.followup.1 <==
From plummer@iarc.fr  Thu Mar  2 10:59:27 2000
Received: from smtp02.iarc.fr (IDENT:root@uu194-7-167-221.unknown.uunet.be [194.7.167.221])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id KAA06126
	for <R-bugs@biostat.ku.dk>; Thu, 2 Mar 2000 10:59:27 +0100 (MET)
Received: from xena.iarc.fr ([10.10.150.125])
	by smtp02.iarc.fr (8.9.3/8.9.3) with ESMTP id KAA13613;
	Thu, 2 Mar 2000 10:58:59 +0100
Message-ID: <XFMail.000302110739.plummer@iarc.fr>
X-Mailer: XFMail 1.3 [p0] on Linux
X-Priority: 3 (Normal)
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 8bit
MIME-Version: 1.0
In-Reply-To: <200003011712.SAA01327@pubhealth.ku.dk>
Date: Thu, 02 Mar 2000 11:07:39 +0100 (CET)
Organization: International Agency for Research on Cancer
Sender: martyn@xena.iarc.fr
From: Martyn Plummer <plummer@iarc.fr>
To: bhoel@server.python.net
Subject: RE: [Rd] Re: R-1.0.0 is released (PR#466)
Cc: R-bugs@biostat.ku.dk, r-devel@stat.math.ethz.ch

On 01-Mar-00 bhoel@server.python.net wrote:
> R is compiled using the
> 
> "-fPIC -O3 -fstrict-aliasing -ffast-math -funroll-loops -mpentiumpro
> -march=pentiumpro -fschedule-insns2"
> 
> compiler switches. I used 
> 
> ./configure --with-g77 --enable-blas_risc --enable-readline --with-x
> 
> for configuring.

I can't help noticing that you are configuring for a RISC optimized BLAS
library on an Intel x86 processor.  I have no idea if this is serious,
but it seems a bit odd.

Martyn

==> 466.followup.2 <==
From bacon@aerodyne.com  Thu Mar  2 18:01:00 2000
Received: from chi6-1.relay.mail.uu.net (chi6-1.relay.mail.uu.net [199.171.54.98])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id SAA11561
	for <R-bugs@biostat.ku.dk>; Thu, 2 Mar 2000 18:00:59 +0100 (MET)
From: bacon@aerodyne.com
Received: from aerodyne.com by chi6sosrv11.alter.net with ESMTP 
	(peer crosschecked as: [198.4.243.2])
	id QQieuf23702;
	Thu, 2 Mar 2000 15:27:53 GMT
Received: from aerodyne.com (keeshond.aerodyne.com [198.4.242.196]) by aerodyne.com (Hah!/nope) with ESMTP id KAA01933; Thu, 2 Mar 2000 10:27:39 -0500 (EST)
Message-Id: <200003021527.KAA01933@aerodyne.com>
Date: Thu, 2 Mar 2000 10:36:46 -0500 (EST)
Reply-To: bacon@aerodyne.com
Subject: RE: [Rd] Re: R-1.0.0 is released (PR#466)
To: plummer@iarc.fr
cc: bhoel@server.python.net, R-bugs@biostat.ku.dk, r-devel@stat.math.ethz.ch
In-Reply-To: <XFMail.000302110739.plummer@iarc.fr>
MIME-Version: 1.0
Content-Type: TEXT/plain; CHARSET=US-ASCII

On  2 Mar, Martyn Plummer wrote:
>  On 01-Mar-00 bhoel@server.python.net wrote:
> > R is compiled using the
> > 
> > "-fPIC -O3 -fstrict-aliasing -ffast-math -funroll-loops -mpentiumpro
> > -march=pentiumpro -fschedule-insns2"
> > 
> > compiler switches. I used 
> > 
> > ./configure --with-g77 --enable-blas_risc --enable-readline --with-x
> > 
> > for configuring.
>  
>  I can't help noticing that you are configuring for a RISC optimized BLAS
>  library on an Intel x86 processor.  I have no idea if this is serious,
>  but it seems a bit odd.
>  

Since this feature was added for PowerPC Linux distributions at my
request, I'll comment on this.  I would say that it is very unlikely to
be of any help, but it probably won't hurt.  The configure script will
check to see if libblas_risc can be located.  If it can't be found, it
won't be used.  Configure won't even look for it unless you request it
with --enable-blas_risc.

Furthermore, I don't believe that configure will actually use
libblas_risc unless you also --enable-blas.  I could be wrong in that
regard.  Using --enable-blas_risc could implicitly --enable-blas as
well. It's been many months since I wrote that configure option.  I do
know that configure will test if linking -lblas works first.  If that
fails, it won't even bother with -lblas_risc.  

Hope this helps,

-- 
Fred Bacon

==============================================================================
Aerodyne Research, Inc.                        Phone:  (978) 663-9500 ext. 273
45 Manning Rd.                                   FAX:  (978) 663-4918
Billerica, MA 01821-3976                        http://www.aerodyne.com
==============================================================================
"Oh my God!  Space aliens!  Don't eat me, I have a wife and kids!  Eat them."
                                                             -- Homer Simpson


~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
* PR# 467 *
Subject: Re: [R] Re: R-1.0.0 is released
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 01 Mar 2000 20:26:40 +0100
-- no notes --
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 467 <==
From pd@biostat.ku.dk  Wed Mar  1 20:27:42 2000
Received: from stat.math.ethz.ch (daemon@hypatia.ethz.ch [129.132.58.23])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id UAA01870
	for <R-bugs@biostat.ku.dk>; Wed, 1 Mar 2000 20:27:42 +0100 (MET)
Received: (from daemon@localhost)
	by stat.math.ethz.ch (8.9.1/8.9.1) id UAA07371;
	Wed, 1 Mar 2000 20:26:49 +0100 (MET)
Received: from kubism.kubism.ku.dk(130.225.108.10), claiming to be "pubhealth.ku.dk"
 via SMTP by hypatia, id smtpdAAAa001n5; Wed Mar  1 20:26:44 2000
Received: from biostat.ku.dk (blueberry [130.225.108.193])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id UAA01866;
	Wed, 1 Mar 2000 20:26:30 +0100 (MET)
Received: (from pd@localhost)
	by biostat.ku.dk (8.9.3/8.9.3) id UAA10344;
	Wed, 1 Mar 2000 20:26:40 +0100
Sender: pd@blueberry.kubism.ku.dk
To: bhoel@server.python.net (Berthold H?llmann)
Cc: r-help@stat.math.ethz.ch, r-bugs@stat.math.ethz.ch
Subject: Re: [R] Re: R-1.0.0 is released
References: <x23dqc5obk.fsf@blueberry.kubism.ku.dk> <m2zosienvd.fsf@pchoel.privat.uni-hamburg.de>
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 01 Mar 2000 20:26:40 +0100
In-Reply-To: bhoel@server.python.net's message of "01 Mar 2000 16:00:54 +0100"
Message-ID: <x29002cwzz.fsf@blueberry.kubism.ku.dk>
Lines: 52
X-Mailer: Gnus v5.7/Emacs 20.4
Mime-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
X-MIME-Autoconverted: from 8bit to quoted-printable by pubhealth.ku.dk id UAA01866
Content-Transfer-Encoding: 8bit
X-MIME-Autoconverted: from quoted-printable to 8bit by pubhealth.ku.dk id UAA01870

bhoel@server.python.net (Berthold Hllmann) writes:

> Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk> writes:
> 
> > I've rolled up R-1.0.0.tgz a short while ago. 
> > 
> I've build R-1.0.0 on my
> 
> >uname -a
> Linux pchoel 2.2.14 #3 Mit Jan 5 08:57:39 MET 2000 i686 unknown
> 
> box. Calling "make check" fails with 
....
> > all(tx == tx0)
> Error in all(tx == tx0) : dim<- length of dims do not match the length of object
> Execution halted
> 
> Don't shure what I should think about it. 
> 
> my compiler is:
> 
> >gcc --version
> 2.95.2
> 
> R is compiled using the
> 
> "-fPIC -O3 -fstrict-aliasing -ffast-math -funroll-loops -mpentiumpro -march=pentiumpro -fschedule-insns2"
> 
> compiler switches. I used 
> 
> ./configure --with-g77 --enable-blas_risc --enable-readline --with-x
> 
> for configuring.

That's a pretty heavy set of optimization options you're using there!

Basically, there are two possibilities:

1) You've triggered a compiler bug
2) You've triggered a bug in R

In either case, you'll have to dig deeper and see if you can catch the
exact spot where things go wrong. You might start R with the debugger,
run the base-Ex.R with it while having a breakpoint set at the error
message you are getting. But before that try running the example that
triggers the bug by itself and see if the bug is still tickled.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

==> 467.reply.1 <==
From pd@biostat.ku.dk  Wed Mar  1 20:40:32 2000
Received: from biostat.ku.dk (blueberry [130.225.108.193])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id UAA01920;
	Wed, 1 Mar 2000 20:40:32 +0100 (MET)
Received: (from pd@localhost)
	by biostat.ku.dk (8.9.3/8.9.3) id UAA10356;
	Wed, 1 Mar 2000 20:40:48 +0100
Sender: pd@blueberry.kubism.ku.dk
To: p.dalgaard@biostat.ku.dk
Cc: r-devel@stat.math.ethz.ch, R-bugs@biostat.ku.dk, r-help@stat.math.ethz.ch
Subject: Re: [Rd] Re: [R] Re: R-1.0.0 is released (PR#467)
References: <200003011927.UAA01880@pubhealth.ku.dk>
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 01 Mar 2000 20:40:48 +0100
In-Reply-To: p.dalgaard@biostat.ku.dk's message of "Wed, 1 Mar 2000 20:27:43 +0100 (MET)"
Message-ID: <x266v6cwcf.fsf@blueberry.kubism.ku.dk>
Lines: 11
X-Mailer: Gnus v5.7/Emacs 20.4
Mime-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: 7bit

p.dalgaard@biostat.ku.dk writes:

...and notice that it is a very bad idea to mail to both r-help and
r-bugs. Anyone who answers the one on r-help without resetting the
Cc's will generate a new PR# , like I just did!

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
* PR# 474 *
Subject: update fails after specific sequence of steps
From: John Fox <jfox@mcmaster.ca>
Date: Tue, 07 Mar 2000 09:06:21 -0500
-- no notes --
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 474 <==
From jfox@mcmaster.ca  Tue Mar  7 15:08:02 2000
Received: from sunflare.ccs.yorku.ca (sunflare.ccs.yorku.ca [130.63.236.128])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id PAA18926
	for <r-bugs@biostat.ku.dk>; Tue, 7 Mar 2000 15:08:01 +0100 (MET)
Received: from johnfox (dhaka04.slip.yorku.ca [130.63.186.134])
	by sunflare.ccs.yorku.ca (8.9.3/8.9.3) with SMTP id JAA19741
	for <r-bugs@biostat.ku.dk>; Tue, 7 Mar 2000 09:08:09 -0500 (EST)
Message-Id: <3.0.5.32.20000307090621.00a2e870@mcmail.cis.mcmaster.ca>
X-Sender: jfox@mcmail.cis.mcmaster.ca
X-Mailer: QUALCOMM Windows Eudora Light Version 3.0.5 (32)
Date: Tue, 07 Mar 2000 09:06:21 -0500
To: r-bugs@biostat.ku.dk
From: John Fox <jfox@mcmaster.ca>
Subject: update fails after specific sequence of steps
Mime-Version: 1.0
Content-Type: text/plain; charset="us-ascii"

# Your mailer is set to "none" (default on Windows),
# hence we cannot send the bug report directly from R.
# Please copy the bug report (after finishing it) to
# your favorite email program and send it to
#
#       r-bugs@biostat.ku.dk
#
######################################################



I stumbled on this error while doing a classroom demonstration. The error is reproducible, 
but seems to require a specific sequence of operations: (1) fitting a linear model; (2) 
calling the summary function; (3) calling a function of mine, called test.terms; (4) making 
a typing error in a call to update -- typing "~.~" instead of ".~." . (5) After this, a 
correct call to update fails. If any of the steps 1-4 is omitted, everything proceeds 
normally.

I've attached the following: 

 o   several listings illustrating when the error occurs and when it does not; 

 o   a listing of the dataset; 

 o   a listing of the test.terms function and the functions that it uses. 

The dataset, though, seems unremarkable, and test.tests is a straightforward function 
without (intended) side effects. The library fox just contains some functions and datasets; 
I can, of course, supply it if that seems relevant.

I'm not sure that this is a bug in R, but it seemed worth reporting.

Thanks for your trouble,
 John

----------------- first listing, showing error ---------------------------

R : Copyright 2000, The R Development Core Team
Version 1.0.0  (February 29, 2000)

R is free software and comes with ABSOLUTELY NO WARRANTY.
You are welcome to redistribute it under certain conditions.
Type    "?license" or "?licence" for distribution details.

R is a collaborative project with many contributors.
Type    "?contributors" for a list.

Type    "demo()" for some demos, "help()" for on-line help, or
        "help.start()" for a HTML browser interface to help.
Type    "q()" to quit R.

> library(fox)
> data(Moore)
> attach(Moore)
> mod.full<-lm(conform~status*fcategory)
> summary(mod.full)

Call:
lm(formula = conform ~ status * fcategory)

Residuals:
    Min      1Q  Median      3Q     Max 
-8.6250 -2.9000 -0.2727  2.7273 11.3750 

Coefficients:
                          Estimate Std. Error t value Pr(>|t|)    
(Intercept)                11.8571     1.7307   6.851 3.44e-08 ***
statuslow                   0.7679     2.3699   0.324   0.7477    
fcategorylow                5.5429     2.6813   2.067   0.0454 *  
fcategorymedium             2.4156     2.2140   1.091   0.2819    
statuslow.fcategorylow     -9.2679     3.4507  -2.686   0.0106 *  
statuslow.fcategorymedium  -7.7906     3.5728  -2.181   0.0353 *  
---
Signif. codes:  0  `***'  0.001  `**'  0.01  `*'  0.05  `.'  0.1  ` '  1 

Residual standard error: 4.579 on 39 degrees of freedom
Multiple R-Squared: 0.3237,     Adjusted R-squared: 0.237 
F-statistic: 3.734 on 5 and 39 degrees of freedom,      p-value: 0.007397 

> test.terms(mod.full)
                 Sum Sq Df F value    Pr(>F)    
(Intercept)      984.14  1 46.9348 3.436e-08 ***
status             2.20  1  0.1050   0.74767    
fcategory         89.67  2  2.1383   0.13147    
status:fcategory 175.49  2  4.1846   0.02257 *  
Residuals        817.76 39                      
---
Signif. codes:  0  `***'  0.001  `**'  0.01  `*'  0.05  `.'  0.1  ` '  1 
> mod.m<-update(mod.full, ~.~-status:fcategory)
Error in model.frame.default(formula = ~conform ~ 1, drop.unused.levels = TRUE) : 
        object is not a matrix
> mod.m<-update(mod.full, .~.-status:fcategory)  # fails after summary, test.terms, & error
Error in parse(file, n, text, prompt) : parse error
> 

----------------- second listing, omitting error in call to update, everything works -------

R : Copyright 2000, The R Development Core Team
Version 1.0.0  (February 29, 2000)

R is free software and comes with ABSOLUTELY NO WARRANTY.
You are welcome to redistribute it under certain conditions.
Type    "?license" or "?licence" for distribution details.

R is a collaborative project with many contributors.
Type    "?contributors" for a list.

Type    "demo()" for some demos, "help()" for on-line help, or
        "help.start()" for a HTML browser interface to help.
Type    "q()" to quit R.

> library(fox)
> data(Moore)
> attach(Moore)
> mod.full<-lm(conform~status*fcategory)
> summary(mod.full)

Call:
lm(formula = conform ~ status * fcategory)

Residuals:
    Min      1Q  Median      3Q     Max 
-8.6250 -2.9000 -0.2727  2.7273 11.3750 

Coefficients:
                          Estimate Std. Error t value Pr(>|t|)    
(Intercept)                11.8571     1.7307   6.851 3.44e-08 ***
statuslow                   0.7679     2.3699   0.324   0.7477    
fcategorylow                5.5429     2.6813   2.067   0.0454 *  
fcategorymedium             2.4156     2.2140   1.091   0.2819    
statuslow.fcategorylow     -9.2679     3.4507  -2.686   0.0106 *  
statuslow.fcategorymedium  -7.7906     3.5728  -2.181   0.0353 *  
---
Signif. codes:  0  `***'  0.001  `**'  0.01  `*'  0.05  `.'  0.1  ` '  1 

Residual standard error: 4.579 on 39 degrees of freedom
Multiple R-Squared: 0.3237,     Adjusted R-squared: 0.237 
F-statistic: 3.734 on 5 and 39 degrees of freedom,      p-value: 0.007397 

> test.terms(mod.full)
                 Sum Sq Df F value    Pr(>F)    
(Intercept)      984.14  1 46.9348 3.436e-08 ***
status             2.20  1  0.1050   0.74767    
fcategory         89.67  2  2.1383   0.13147    
status:fcategory 175.49  2  4.1846   0.02257 *  
Residuals        817.76 39                      
---
Signif. codes:  0  `***'  0.001  `**'  0.01  `*'  0.05  `.'  0.1  ` '  1 
> mod.m<-update(mod.full, .~.-status:fcategory) # works following summary & test.terms
> mod.m

Call:
lm(formula = conform ~ status + fcategory)

Coefficients:
    (Intercept)        statuslow     fcategorylow  fcategorymedium  
       14.72356         -4.60667          0.08089         -1.09511  

> 

----- third listing, omitting call to test.terms, everything works --------------------

R : Copyright 2000, The R Development Core Team
Version 1.0.0  (February 29, 2000)

R is free software and comes with ABSOLUTELY NO WARRANTY.
You are welcome to redistribute it under certain conditions.
Type    "?license" or "?licence" for distribution details.

R is a collaborative project with many contributors.
Type    "?contributors" for a list.

Type    "demo()" for some demos, "help()" for on-line help, or
        "help.start()" for a HTML browser interface to help.
Type    "q()" to quit R.

> library(fox)
> data(Moore)
> attach(Moore)
> mod.full<-lm(conform~status*fcategory)
> summary(mod.full)

Call:
lm(formula = conform ~ status * fcategory)

Residuals:
    Min      1Q  Median      3Q     Max 
-8.6250 -2.9000 -0.2727  2.7273 11.3750 

Coefficients:
                          Estimate Std. Error t value Pr(>|t|)    
(Intercept)                11.8571     1.7307   6.851 3.44e-08 ***
statuslow                   0.7679     2.3699   0.324   0.7477    
fcategorylow                5.5429     2.6813   2.067   0.0454 *  
fcategorymedium             2.4156     2.2140   1.091   0.2819    
statuslow.fcategorylow     -9.2679     3.4507  -2.686   0.0106 *  
statuslow.fcategorymedium  -7.7906     3.5728  -2.181   0.0353 *  
---
Signif. codes:  0  `***'  0.001  `**'  0.01  `*'  0.05  `.'  0.1  ` '  1 

Residual standard error: 4.579 on 39 degrees of freedom
Multiple R-Squared: 0.3237,     Adjusted R-squared: 0.237 
F-statistic: 3.734 on 5 and 39 degrees of freedom,      p-value: 0.007397 

> mod.m<-update(mod.full, ~.~-status:fcategory)
Error in model.frame.default(formula = ~conform ~ 1, drop.unused.levels = TRUE) : 
        object is not a matrix
> mod.m<-update(mod.full, .~.-status:fcategory) # works following summary and error
> mod.m

Call:
lm(formula = conform ~ status + fcategory)

Coefficients:
    (Intercept)        statuslow     fcategorylow  fcategorymedium  
       14.72356         -4.60667          0.08089         -1.09511  

> 


----------- fourth listing, omitting call to summary, everything works ------------------

R : Copyright 2000, The R Development Core Team
Version 1.0.0  (February 29, 2000)

R is free software and comes with ABSOLUTELY NO WARRANTY.
You are welcome to redistribute it under certain conditions.
Type    "?license" or "?licence" for distribution details.

R is a collaborative project with many contributors.
Type    "?contributors" for a list.

Type    "demo()" for some demos, "help()" for on-line help, or
        "help.start()" for a HTML browser interface to help.
Type    "q()" to quit R.

> library(fox)
> data(Moore)
> attach(Moore)
> mod.full<-lm(conform~status*fcategory)
> test.terms(mod.full)
                 Sum Sq Df F value    Pr(>F)    
(Intercept)      984.14  1 46.9348 3.436e-08 ***
status             2.20  1  0.1050   0.74767    
fcategory         89.67  2  2.1383   0.13147    
status:fcategory 175.49  2  4.1846   0.02257 *  
Residuals        817.76 39                      
---
Signif. codes:  0  `***'  0.001  `**'  0.01  `*'  0.05  `.'  0.1  ` '  1 
> mod.m<-update(mod.full, ~.~-status:fcategory)
Error in model.frame.default(formula = ~conform ~ 1, drop.unused.levels = TRUE) : 
        object is not a matrix
> mod.m<-update(mod.full, .~.-status:fcategory) # works following test.terms and error
> mod.m

Call:
lm(formula = conform ~ status + fcategory)

Coefficients:
    (Intercept)        statuslow     fcategorylow  fcategorymedium  
       14.72356         -4.60667          0.08089         -1.09511  


------------------------ listing of dataset ----------------------------------------

> Moore
   subject status conform fcategory fscore
1        1    low       8       low     37
2        2    low       4      high     57
3        3    low       8      high     65
4        4    low       7       low     20
5        5    low      10       low     36
6        6    low       6       low     18
7        7    low      12    medium     51
8        8    low       4    medium     44
9        9    low      13       low     31
10      10    low      12       low     36
11      11    low       4    medium     42
12      12    low      13      high     56
13      13    low       7       low     28
14      14    low       9    medium     43
15      15    low       9      high     65
16      16    low      24      high     57
17      17    low       6       low     28
18      18    low       7      high     61
19      19    low      23      high     57
20      20    low      13      high     55
21      21    low       8       low     17
22      22    low      12       low     35
23      23   high      19      high     68
24      24   high      12    medium     41
25      25   high      21       low     16
26      26   high       9      high     63
27      27   high      23       low     15
28      28   high       7      high     54
29      29   high      17    medium     48
30      30   high      14    medium     42
31      31   high      11      high     59
32      32   high      16    medium     45
33      33   high      15       low     30
34      34   high      20    medium     44
35      35   high       8    medium     42
36      36   high      12       low     22
37      37   high      14      high     52
38      38   high      14    medium     42
39      39   high      17    medium     41
40      40   high       7    medium     50
41      41   high      17    medium     39
42      42   high      13      high     57
43      43   high      16       low     35
44      44   high      10      high     52
45      45   high      15    medium     44
> 

------------------ function test.terms and functions it calls ------------------------

> test.terms
function (object, ...) 
{
    UseMethod("test.terms")
}

> test.terms.lm
function (mod, error, ...) 
{
    if (!missing(error)) {
        sumry <- summary(error, corr = FALSE)
        s2 <- sumry$sigma^2
        error.df <- error$df.residual
        error.SS <- s2 * error.df
    }
    intercept <- has.intercept(mod)
    p <- length(coefficients(mod))
    I.p <- diag(p)
    Source <- term.names(mod)
    n.terms <- length(Source)
    SS <- rep(0, n.terms + 1)
    df <- rep(0, n.terms + 1)
    F <- rep(0, n.terms + 1)
    p <- rep(0, n.terms + 1)
    assign <- mod$assign
    for (term in 1:n.terms) {
        subs <- which(assign == term - intercept)
        hyp.matrix <- I.p[subs, ]
        test <- if (missing(error)) 
            linear.hypothesis(mod, hyp.matrix, ...)
        else linear.hypothesis(mod, hyp.matrix, error.SS = error.SS, 
            error.df = error.df, ...)
        SS[term] <- test$SS
        df[term] <- test$df[1]
        F[term] <- test$F
        p[term] <- test$p
    }
    Source[n.terms + 1] <- "Residuals"
    df.res <- if (missing(error)) 
        mod$df.residual
    else error.df
    sumry <- summary(mod, corr = FALSE)
    s2 <- sumry$sigma^2
    SS[n.terms + 1] <- if (missing(error)) 
        s2 * df.res
    else error.SS
    df[n.terms + 1] <- df.res
    F[n.terms + 1] <- NA
    p[n.terms + 1] <- NA
    result <- data.frame(SS, df, F, p)
    row.names(result) <- Source
    names(result) <- c("Sum Sq", "Df", "F value", "Pr(>F)")
    class(result) <- c("anova", "data.frame")
    result
}

> has.intercept
function (object, ...) 
{
    UseMethod("has.intercept")
}

> term.names
function (object, ...) 
{
    UseMethod("term.names")
}

> term.names.default
function (model) 
{
    term.names <- labels(terms(model))
    if (has.intercept(model)) 
        c("(Intercept)", term.names)
    else term.names
}

> linear.hypothesis
function (object, ...) 
{
    UseMethod("linear.hypothesis")
}

> linear.hypothesis.lm
function (mod, hypothesis.matrix, rhs = 0, white.adjust = F, 
    error.SS, error.df) 
{
    sumry <- summary(mod, corr = FALSE)
    s2 <- if (missing(error.SS)) 
        sumry$sigma^2
    else error.SS/error.df
    V <- if (white.adjust == FALSE) 
        sumry$cov.unscaled
    else hccm(mod, type = white.adjust)/s2
    b <- coefficients(mod)
    L <- if (is.null(dim(hypothesis.matrix))) 
        t(hypothesis.matrix)
    else hypothesis.matrix
    q <- nrow(L)
    SSH <- t(L %*% b - rhs) %*% inv(L %*% V %*% t(L)) %*% (L %*% 
        b - rhs)
    F <- SSH/(q * s2)
    df <- if (missing(error.df)) 
        mod$df.residual
    else error.df
    p <- 1 - pf(F, q, df)
    list(SS = SSH[1, 1], F = F[1, 1], df = c(q, df), p = p[1, 
        1])
}

> hccm
function (model, type = "hc3") 
{
    if (is.null(class(model)) || class(model) != "lm" || !is.null(weights(mod))) {
        stop("requires unweighted lm")
    }
    sumry <- summary(model, corr = FALSE)
    s2 <- sumry$sigma^2
    V <- sumry$cov.unscaled
    if (type == FALSE) 
        return(s2 * V)
    e <- residuals(model)
    X <- model.matrix(model)
    df.res <- df.residual(model)
    factor <- switch(type, hc0 = 1, hc1 = n/df.res, hc2 = 1/(1 - 
        hat(X)), hc3 = 1/(1 - hat(X))^2)
    V %*% t(X) %*% apply(X, 2, "*", (e^2)/factor) %*% V
}
> 

--please do not edit the information below--

Version:
 platform = Windows
 arch = x86
 os = Win32
 system = x86, Win32
 status = 
 major = 1
 minor = 0.0
 year = 2000
 month = February
 day = 29
 language = R

Windows NT 4.0 (build 1381) Service Pack 3

Search Path:
 .GlobalEnv, Moore, package:fox, Autoloads, package:base


|----------------------------------------------------|
| John Fox                          jfox@McMaster.ca |
| Department of Sociology        McMaster University |
|----------------------------------------------------|

==> 474.reply.1 <==
From pd@biostat.ku.dk  Tue Mar  7 15:42:34 2000
Received: from biostat.ku.dk (blueberry [130.225.108.193])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id PAA19658;
	Tue, 7 Mar 2000 15:42:34 +0100 (MET)
Received: (from pd@localhost)
	by biostat.ku.dk (8.9.3/8.9.3) id PAA12880;
	Tue, 7 Mar 2000 15:43:40 +0100
Sender: pd@blueberry.kubism.ku.dk
To: jfox@mcmaster.ca
Cc: r-devel@stat.math.ethz.ch, R-bugs@biostat.ku.dk
Subject: Re: [Rd] update fails after specific sequence of steps (PR#474)
References: <200003071408.PAA18937@pubhealth.ku.dk>
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 07 Mar 2000 15:43:39 +0100
In-Reply-To: jfox@mcmaster.ca's message of "Tue, 7 Mar 2000 15:08:03 +0100 (MET)"
Message-ID: <x2wvnekfhg.fsf@blueberry.kubism.ku.dk>
Lines: 41
X-Mailer: Gnus v5.7/Emacs 20.4
Mime-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 8bit


Strange things happen on Unix too. 

> source('fox.R')
> Moore<-read.table('Moore.txt')
> attach(Moore)
> mod.full<-lm(conform~status*fcategory)
> summary(mod.full)
...
> mod.m<-update(mod.full, ~.~-status:fcategory)
Error in model.frame.default(formula = ~conform ~ 1, drop.unused.levels = TRUE) : 
	object is not a matrix
> mod.m<-update(mod.full, .~.-status:fcategory) # works following summary and error
> mod.m

Call:
lm(formula = conform ~ status + fcategory)

Coefficients:
    (Intercept)        statuslow     fcategorylow  fcategorymedium  
       14.72356         -4.60667          0.08089         -1.09511  


#### Well you *thought* it worked, but watch: ####
> mod.full<-lm(conform~status*fcategory)
> summary(mod.full)

Call:
lm(formula = conform ~ L@ * fcategory)
                       ^^^^^^^

...and the attached dataframe is corrupted. Must investigate further.

> ls("Moore")
[1] "conform"   "fcategory" "fscore"    "L@"      "subject"  
                                         ^^^^^^^
-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

==> 474.reply.2 <==
From pd@biostat.ku.dk  Wed Mar  8 16:29:50 2000
Received: from biostat.ku.dk (blueberry [130.225.108.193])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id QAA03324;
	Wed, 8 Mar 2000 16:29:49 +0100 (MET)
Received: (from pd@localhost)
	by biostat.ku.dk (8.9.3/8.9.3) id QAA24409;
	Wed, 8 Mar 2000 16:31:06 +0100
Sender: pd@blueberry.kubism.ku.dk
To: jfox@mcmaster.ca, r-devel@stat.math.ethz.ch, R-bugs@biostat.ku.dk
Subject: Re: [Rd] update fails after specific sequence of steps (PR#474)
References: <200003071408.PAA18937@pubhealth.ku.dk> <x2wvnekfhg.fsf@blueberry.kubism.ku.dk>
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 08 Mar 2000 16:31:06 +0100
In-Reply-To: Peter Dalgaard BSA's message of "07 Mar 2000 15:43:39 +0100"
Message-ID: <x2ya7tv5qd.fsf@blueberry.kubism.ku.dk>
Lines: 23
X-Mailer: Gnus v5.7/Emacs 20.4
Mime-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 8bit

Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk> writes:

> Strange things happen on Unix too. 
..
> > mod.m<-update(mod.full, ~.~-status:fcategory)
...
> ...and the attached dataframe is corrupted. Must investigate further.
> 
> > ls("Moore")
> [1] "conform"   "fcategory" "fscore"    "L@"      "subject"  

I think this is fixed now. Apparently model formulas like the above
caused R to become confused as to the number of variables in the
model and overrun the array of names, subsequently confusing the
garbage collector.

(Temporary workaround: Just don't do that...)

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
* PR# 475 *
Subject: Error compiling R on RS6000
From: pgutwin@us.ibm.com
Date: Tue, 7 Mar 2000 16:35:59 +0100 (MET)
-- no notes --
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 475 <==
From pgutwin@us.ibm.com  Tue Mar  7 16:36:00 2000
Received: from localhost (blueberry [130.225.108.193])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id QAA20327
	for <R-bugs@biostat.ku.dk>; Tue, 7 Mar 2000 16:35:59 +0100 (MET)
Date: Tue, 7 Mar 2000 16:35:59 +0100 (MET)
From: pgutwin@us.ibm.com
Message-Id: <200003071535.QAA20327@pubhealth.ku.dk>
To: R-bugs@biostat.ku.dk
Subject: Error compiling R on RS6000

Full_Name: Paul Gutwin
Version: R-1.0.0
OS: AIX 4.2.1
Submission from: (NULL) (198.133.22.67)


R-1.0.0 fails to compile. I'm using the config.cache file from a successful
compliation of R-0.65.0 (prob #290, fixed thanks to Thomas Vogels @ CMU). 
Compiling R-1.0.0 fails with the following error messages:

make
Target "R" is up to date.
	gcc -I. -I../include -I../../src/include -I../../src/include/R_ext 
-DHAVE_CONFIG_H -mno-fp-in-toc -g -O2 -c Rsock.c -o Rsock.o
In file included from Rsock.c:34:
/usr/include/unistd.h:162: parse error before `lseek64'
/usr/include/unistd.h:162: parse error before `off64_t'
/usr/include/unistd.h:162: warning: data definition has no type or storage
class
In file included from /usr/include/sys/lockf.h:41,
                 from /usr/include/unistd.h:382,
                 from Rsock.c:34:
/usr/include/sys/stat.h:127: parse error before `soff_t'
/usr/include/sys/stat.h:127: warning: no semicolon at end of struct or union
/usr/include/sys/stat.h:146: parse error before `st_size'
/usr/include/sys/stat.h:146: warning: data definition has no type or storage
class
In file included from /usr/include/unistd.h:382,
                 from Rsock.c:34:
/usr/include/sys/lockf.h:60: parse error before `off64_t'
In file included from Rsock.c:34:
/usr/include/unistd.h:417: parse error before `off64_t'
/usr/include/unistd.h:438: parse error before `off64_t'
/usr/include/unistd.h:440: parse error before `ualarm'
/usr/include/unistd.h:440: warning: parameter names (without types) in function
declaration
/usr/include/unistd.h:440: warning: data definition has no type or storage
class
/usr/include/unistd.h:441: warning: parameter names (without types) in function
declaration
/usr/include/unistd.h:474: parse error before `fclear64'
/usr/include/unistd.h:474: parse error before `off64_t'
/usr/include/unistd.h:474: warning: data definition has no type or storage
class
/usr/include/unistd.h:475: parse error before `off64_t'
make: 1254-004 The error code from the last command is 1.


Stop.
make: 1254-004 The error code from the last command is 2.


Stop.
make: 1254-004 The error code from the last command is 1.


Stop.
make: 1254-004 The error code from the last command is 1.


Stop.

Compilation exited abnormally with code 2 at Tue Mar  7 10:15:58


==> 475.reply.1 <==
From leisch@ci.tuwien.ac.at  Tue Mar  7 16:45:21 2000
Received: from fangorn.ci.tuwien.ac.at (root@fangorn.ci.tuwien.ac.at [128.131.51.24])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id QAA20521
	for <R-bugs@biostat.ku.dk>; Tue, 7 Mar 2000 16:45:20 +0100 (MET)
Received: from galadriel.ci.tuwien.ac.at (root@galadriel.ci.tuwien.ac.at [128.131.51.37])
	by fangorn.ci.tuwien.ac.at (8.9.3/8.9.3/Debian/GNU) with ESMTP id QAA08997;
	Tue, 7 Mar 2000 16:45:26 +0100
Received: (from leisch@localhost)
	by galadriel.ci.tuwien.ac.at (8.9.3/8.8.5) id QAA23081;
	Tue, 7 Mar 2000 16:45:29 +0100
From: Friedrich Leisch <Friedrich.Leisch@ci.tuwien.ac.at>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
Message-ID: <14533.9241.474692.985917@galadriel.ci.tuwien.ac.at>
Date: Tue, 7 Mar 2000 16:45:29 +0100 (CET)
To: pgutwin@us.ibm.com
Cc: r-devel@stat.math.ethz.ch, R-bugs@biostat.ku.dk
Subject: Re: [Rd] Error compiling R on RS6000 (PR#475)
In-Reply-To: <200003071536.QAA20337@pubhealth.ku.dk>
References: <200003071536.QAA20337@pubhealth.ku.dk>
X-Mailer: VM 6.75 under Emacs 19.34.1

>>>>> On Tue, 7 Mar 2000 16:36:01 +0100 (MET),
>>>>> pgutwin  (p) wrote:

p> Full_Name: Paul Gutwin
p> Version: R-1.0.0
p> OS: AIX 4.2.1
p> Submission from: (NULL) (198.133.22.67)


p> R-1.0.0 fails to compile. I'm using the config.cache file from a successful
p> compliation of R-0.65.0 

Uhm, why would you want to do that???

Have you tried building from a clean (fresh) source tree?

.f

==> 475.reply.2 <==
From pd@biostat.ku.dk  Tue Mar  7 16:46:42 2000
Received: from biostat.ku.dk (blueberry [130.225.108.193])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id QAA20545;
	Tue, 7 Mar 2000 16:46:41 +0100 (MET)
Received: (from pd@localhost)
	by biostat.ku.dk (8.9.3/8.9.3) id QAA13037;
	Tue, 7 Mar 2000 16:47:49 +0100
Sender: pd@blueberry.kubism.ku.dk
To: pgutwin@us.ibm.com
Cc: r-devel@stat.math.ethz.ch, R-bugs@biostat.ku.dk
Subject: Re: [Rd] Error compiling R on RS6000 (PR#475)
References: <200003071536.QAA20337@pubhealth.ku.dk>
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 07 Mar 2000 16:47:47 +0100
In-Reply-To: pgutwin@us.ibm.com's message of "Tue, 7 Mar 2000 16:36:01 +0100 (MET)"
Message-ID: <x2r9dmkcik.fsf@blueberry.kubism.ku.dk>
Lines: 22
X-Mailer: Gnus v5.7/Emacs 20.4
Mime-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: 7bit

pgutwin@us.ibm.com writes:

> Full_Name: Paul Gutwin
> Version: R-1.0.0
> OS: AIX 4.2.1
> Submission from: (NULL) (198.133.22.67)
> 
> 
> R-1.0.0 fails to compile. I'm using the config.cache file from a successful
                            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
> compliation of R-0.65.0 (prob #290, fixed thanks to Thomas Vogels @ CMU). 
  ^^^^^^^^^^^^^^^^^^^^^^^

What on earth gives you the idea that that might work?? The configure
scripts have changed many a time since 0.65.0. Or was config.cache a
typo?

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
* PR# 477 *
Subject: Printing graphs on W98 laptop
From: P.J.Green@bristol.ac.uk
Date: Wed, 8 Mar 2000 18:23:33 +0100 (MET)
-- no notes --
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 477 <==
From P.J.Green@bristol.ac.uk  Wed Mar  8 18:23:34 2000
Received: from localhost (blueberry [130.225.108.193])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id SAA04345
	for <R-bugs@biostat.ku.dk>; Wed, 8 Mar 2000 18:23:33 +0100 (MET)
Date: Wed, 8 Mar 2000 18:23:33 +0100 (MET)
From: P.J.Green@bristol.ac.uk
Message-Id: <200003081723.SAA04345@pubhealth.ku.dk>
To: R-bugs@biostat.ku.dk
Subject: Printing graphs on W98 laptop

Full_Name: Peter Green
Version: 1.0.0 and 0.99.0
OS: windows 98
Submission from: (NULL) (194.83.240.36)


Running R (either 1.0.0 or 0.99.0) under Windows 98 on
my Toshiba laptop (Satellite 4080), I get a problem
when I hit the print toolbar button with the graph window on top.
It declares an illegal operation, and produces the error
messages reproduced below (slightly different in each
version). It then terminates R and returns to the desktop.

The printer is an HP 6MP, directly connected to the laptop,
no network.

All is fine on my desktop with Windows NT4.0.

Is this a known problem?   

R 1.0.0

RGUI caused an exception 10H in module R.DLL at 015f:1002460b.
Registers:
EAX=00000006 CS=015f EIP=1002460b EFLGS=00010246
EBX=00000000 SS=0167 ESP=0253f220 EBP=0253f258
ECX=0045c8f0 DS=0167 ESI=02ee81c8 FS=0e47
EDX=00000001 ES=0167 EDI=0045c8f0 GS=0000
Bytes at CS:EIP:
dd 99 90 0a 00 00 89 81 90 0a 00 00 8b 81 34 24
Stack dump:     
0045c8f0 02ee81c8 0045c8f0 1007449a 00000002 0322a560
0253f258 1001b862 0045c8f0 00000000 0253f298 10023f7d
00455f70 1000e0fd 0253f298 100249a2

R 0.99.0

RGUI caused an exception 10H in module R.DLL at 015f:1002450b.
Registers:
EAX=00000006 CS=015f EIP=1002450b EFLGS=00010246
EBX=00000000 SS=0167 ESP=0253f220 EBP=0253f258
ECX=0045bad0 DS=0167 ESI=02e6c064 FS=3407
EDX=00000001 ES=0167 EDI=0045bad0 GS=0000
Bytes at CS:EIP:
dd 99 90 0a 00 00 89 81 90 0a 00 00 8b 81 34 24
Stack dump:
0045bad0 02e6c064 0045bad0 100737da 00000002 0318a260
0253f258 1001b822 0045bad0 00000000 0253f298 10023e7d
00455fa0 1000e0dd 0253f298 100248a2
                                                                                
                                                      

==> 477.reply.1 <==
From pd@biostat.ku.dk  Thu Mar  9 01:02:54 2000
Received: from biostat.ku.dk (blueberry [130.225.108.193])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id BAA05803;
	Thu, 9 Mar 2000 01:02:53 +0100 (MET)
Received: (from pd@localhost)
	by biostat.ku.dk (8.9.3/8.9.3) id BAA25166;
	Thu, 9 Mar 2000 01:04:11 +0100
Sender: pd@blueberry.kubism.ku.dk
To: P.J.Green@bristol.ac.uk
Cc: r-devel@stat.math.ethz.ch, R-bugs@biostat.ku.dk
Subject: Re: [Rd] Printing graphs on W98 laptop (PR#477)
References: <200003081723.SAA04355@pubhealth.ku.dk>
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 09 Mar 2000 01:04:11 +0100
In-Reply-To: P.J.Green@bristol.ac.uk's message of "Wed, 8 Mar 2000 18:23:34 +0100 (MET)"
Message-ID: <x266ux6mbo.fsf@blueberry.kubism.ku.dk>
Lines: 33
X-Mailer: Gnus v5.7/Emacs 20.4
Mime-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: 7bit

P.J.Green@bristol.ac.uk writes:

> Is this a known problem?   

It's been reported before, but been unreproduceable for any of the
developers... I'm fairly sure this is the exact same spot that tripped
Bendix & coworkers. On their systems it appears to depend on the day
of the week and go away when the system adinistrators are looking!
Yours seems to be the first "plain" system (i.e. non-networked
printers) with the problem. Hmm... Are you any good with a debugger?

> 
> R 1.0.0
> 
> RGUI caused an exception 10H in module R.DLL at 015f:1002460b.
> Registers:
> EAX=00000006 CS=015f EIP=1002460b EFLGS=00010246
> EBX=00000000 SS=0167 ESP=0253f220 EBP=0253f258
> ECX=0045c8f0 DS=0167 ESI=02ee81c8 FS=0e47
> EDX=00000001 ES=0167 EDI=0045c8f0 GS=0000
> Bytes at CS:EIP:
> dd 99 90 0a 00 00 89 81 90 0a 00 00 8b 81 34 24
> Stack dump:     
> 0045c8f0 02ee81c8 0045c8f0 1007449a 00000002 0322a560
> 0253f258 1001b862 0045c8f0 00000000 0253f298 10023f7d
> 00455f70 1000e0fd 0253f298 100249a2


-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
* PR# 480 *
Subject: problem with plot(...., xlim=c(5,0))
From: Rashid Nassar <rnassar@duke.edu>
Date: Sun, 12 Mar 2000 20:19:16 -0500 (EST)
-- no notes --
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 480 <==
From rnassar@duke.edu  Mon Mar 13 02:23:44 2000
Received: from gibson.acpub.duke.edu (gibson.acpub.duke.edu [152.3.233.8])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id CAA03977
	for <r-bugs@biostat.ku.dk>; Mon, 13 Mar 2000 02:23:43 +0100 (MET)
Received: from bio3.acpub.duke.edu (rnassar@bio3.acpub.duke.edu [152.3.233.103]) 
        by gibson.acpub.duke.edu (8.9.3/8.9.3/Duke-5.0.0) with ESMTP id UAA05454 for <r-bugs@biostat.ku.dk>;
        Sun, 12 Mar 2000 20:19:17 -0500 (EST)
Received: (from rnassar@localhost) 
	by bio3.acpub.duke.edu (8.8.5/Duke-4.7.1) id UAA17134;
	Sun, 12 Mar 2000 20:19:17 -0500 (EST)
Date: Sun, 12 Mar 2000 20:19:16 -0500 (EST)
From: Rashid Nassar <rnassar@duke.edu>
X-Sender: rnassar@bio3.acpub.duke.edu
To: r-bugs <r-bugs@biostat.ku.dk>
Subject: problem with plot(...., xlim=c(5,0))
Message-ID: <Pine.SOL.3.91.1000312201602.17127B-100000@bio3.acpub.duke.edu>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII

plot(1:4,1:4,xlim=c(5,0),ylim=c(5,0))

  shows axis labels as:
  
      |    |    |    |    |     |
                                0
  rather than
      |    |    |    |    |    |
      5    4    3    2    1    0

as I believe it used to do in some earlier version.

Thank you for R.

Rashid Nassar

--please do not edit the information below--

Version:
 platform = i586-unknown-linux
 arch = i586
 os = linux
 system = i586, linux
 status = 
 major = 1
 minor = 0.0
 year = 2000
 month = February
 day = 29
 language = R

Search Path:
 .GlobalEnv, Shannon2, Autoloads, package:base





==> 480.followup.1 <==
From ripley@stats.ox.ac.uk  Mon Mar 13 13:44:02 2000
Received: from toucan.stats.ox.ac.uk (toucan.stats.ox.ac.uk [163.1.20.20])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id NAA09698
	for <R-bugs@biostat.ku.dk>; Mon, 13 Mar 2000 13:44:01 +0100 (MET)
Received: from toucan.stats (toucan.stats [163.1.20.20])
	by toucan.stats.ox.ac.uk (8.9.0/8.9.0) with SMTP id MAA07249;
	Mon, 13 Mar 2000 12:44:10 GMT
Message-Id: <200003131244.MAA07249@toucan.stats.ox.ac.uk>
Date: Mon, 13 Mar 2000 12:44:10 +0000 (GMT)
From: Prof Brian Ripley <ripley@stats.ox.ac.uk>
Reply-To: Prof Brian Ripley <ripley@stats.ox.ac.uk>
Subject: Re: [Rd] problem with plot(...., xlim=c(5,0)) (PR#480)
To: r-devel@stat.math.ethz.ch, rnassar@duke.edu
Cc: R-bugs@biostat.ku.dk
MIME-Version: 1.0
Content-Type: TEXT/plain; charset=us-ascii
Content-MD5: tAFWJ8rNqYYxGMa3pw3YMQ==
X-Mailer: dtmail 1.2.1 CDE Version 1.2.1 SunOS 5.6 sun4m sparc 


> From: rnassar@duke.edu
> Date: Mon, 13 Mar 2000 02:23:45 +0100 (MET)
> To: r-devel@stat.math.ethz.ch
> Subject: [Rd] problem with plot(...., xlim=c(5,0)) (PR#480)
> CC: R-bugs@biostat.ku.dk
> X-Loop: R-bugs@biostat.ku.dk
> 
> plot(1:4,1:4,xlim=c(5,0),ylim=c(5,0))
> 
>   shows axis labels as:
>   
>       |    |    |    |    |     |
>                                 0
>   rather than
>       |    |    |    |    |    |
>       5    4    3    2    1    0
> 
> as I believe it used to do in some earlier version.

Up to 0.64.2, not since 0.65.0.


-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


==> 480.reply.1 <==
From maechler@stat.math.ethz.ch  Mon Mar 13 14:08:45 2000
Received: from stat.math.ethz.ch (daemon@hypatia.ethz.ch [129.132.58.23])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id OAA10038
	for <R-bugs@biostat.ku.dk>; Mon, 13 Mar 2000 14:08:45 +0100 (MET)
Received: (from daemon@localhost)
	by stat.math.ethz.ch (8.9.1/8.9.1) id OAA13542;
	Mon, 13 Mar 2000 14:08:21 +0100 (MET)
Received: from lynne(129.132.58.30), claiming to be "lynne.ethz.ch"
 via SMTP by hypatia, id smtpdAAAa003JY; Mon Mar 13 14:08:11 2000
Received: (maechler@localhost) by lynne.ethz.ch (8.9.3/D-MATH-client) id OAA01669; Mon, 13 Mar 2000 14:08:11 +0100
X-Authentication-Warning: lynne.ethz.ch: maechler set sender to maechler@stat.math.ethz.ch using -f
From: Martin Maechler <maechler@stat.math.ethz.ch>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
Message-ID: <14540.59451.128319.746184@lynne.ethz.ch>
Date: Mon, 13 Mar 2000 14:08:11 +0100 (MET)
To: Prof Brian Ripley <ripley@stats.ox.ac.uk>
Cc: r-devel@stat.math.ethz.ch, rnassar@duke.edu, R-bugs@biostat.ku.dk
Subject: Re: [Rd] problem with plot(...., xlim=c(5,0)) (PR#480)
In-Reply-To: <200003131244.MAA07249@toucan.stats.ox.ac.uk>
References: <200003131244.MAA07249@toucan.stats.ox.ac.uk>
X-Mailer: VM 6.75 under Emacs 20.6.1
Reply-To: Martin Maechler <maechler@stat.math.ethz.ch>


>>>>> "BDR" == Prof Brian Ripley <ripley@stats.ox.ac.uk> writes:

    >> From: rnassar@duke.edu
    >> Date: Mon, 13 Mar 2000 02:23:45 +0100 (MET)
    >> To: r-devel@stat.math.ethz.ch
    >> Subject: [Rd] problem with plot(...., xlim=c(5,0)) (PR#480)
    >> CC: R-bugs@biostat.ku.dk
    >> X-Loop: R-bugs@biostat.ku.dk
    >> 
    >> plot(1:4,1:4,xlim=c(5,0),ylim=c(5,0))
    >> 
    >> shows axis labels as:
    >> 
    >> |    |    |    |    |     |
    >> 0
    >> rather than
    >> |    |    |    |    |    |
    >> 5    4    3    2    1    0
    >> 
    >> as I believe it used to do in some earlier version.

    BDR> Up to 0.64.2, not since 0.65.0.

No, unfortunately,  happens here with 1.0.0 (even patched; "R-release")


==> 480.reply.2 <==
From pd@biostat.ku.dk  Mon Mar 13 14:21:54 2000
Received: from biostat.ku.dk (blueberry [130.225.108.193])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id OAA10205;
	Mon, 13 Mar 2000 14:21:53 +0100 (MET)
Received: (from pd@localhost)
	by biostat.ku.dk (8.9.3/8.9.3) id OAA18620;
	Mon, 13 Mar 2000 14:23:54 +0100
Sender: pd@blueberry.kubism.ku.dk
To: Martin Maechler <maechler@stat.math.ethz.ch>
Cc: Prof Brian Ripley <ripley@stats.ox.ac.uk>, r-devel@stat.math.ethz.ch,
        rnassar@duke.edu, R-bugs@biostat.ku.dk
Subject: Re: [Rd] problem with plot(...., xlim=c(5,0)) (PR#480)
References: <200003131244.MAA07249@toucan.stats.ox.ac.uk> <14540.59451.128319.746184@lynne.ethz.ch>
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 13 Mar 2000 14:23:53 +0100
In-Reply-To: Martin Maechler's message of "Mon, 13 Mar 2000 14:08:11 +0100 (MET)"
Message-ID: <x2bt4jj95i.fsf@blueberry.kubism.ku.dk>
Lines: 38
X-Mailer: Gnus v5.7/Emacs 20.4
Mime-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: 7bit

Martin Maechler <maechler@stat.math.ethz.ch> writes:

> >>>>> "BDR" == Prof Brian Ripley <ripley@stats.ox.ac.uk> writes:

>     >> plot(1:4,1:4,xlim=c(5,0),ylim=c(5,0))
>     >> 
>     >> shows axis labels as:
>     >> 
>     >> |    |    |    |    |     |
>     >> 0
>     >> rather than
>     >> |    |    |    |    |    |
>     >> 5    4    3    2    1    0
>     >> 
>     >> as I believe it used to do in some earlier version.
> 
>     BDR> Up to 0.64.2, not since 0.65.0.
> 
> No, unfortunately,  happens here with 1.0.0 (even patched; "R-release")
> 

I think Brian meant that it hasn't done the  5 4 3 2 1 thing since
0.64.2...  

In general, it can be argued that the reversed xy limits are not safe
and shouldn't be, since things are likely not to work at the device
level with a mirrored coordinate system (I.e.: if we decide that it
should work, we may find ourselves fixing lots of small glitches in
devxxx.c). 

Plotting (5-x,5-y) and doing the axes with axis(n, at=0:5, labels=5:0)
will get the plot done in a cleaner, albeit more cumbersome fashion.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

==> 480.followup.2 <==
From rnassar@duke.edu  Wed Mar 15 16:52:25 2000
Received: from jeter.acpub.duke.edu (jeter.acpub.duke.edu [152.3.233.10])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id QAA07442;
	Wed, 15 Mar 2000 16:52:23 +0100 (MET)
Received: from bio3.acpub.duke.edu (rnassar@bio3.acpub.duke.edu [152.3.233.103]) 
        by jeter.acpub.duke.edu (8.9.3/8.9.3/Duke-5.0.0) with ESMTP id KAA22826;
        Wed, 15 Mar 2000 10:44:25 -0500 (EST)
Received: (from rnassar@localhost) 
	by bio3.acpub.duke.edu (8.8.5/Duke-4.7.1) id KAA28486;
	Wed, 15 Mar 2000 10:44:23 -0500 (EST)
Date: Wed, 15 Mar 2000 10:44:23 -0500 (EST)
From: Rashid Nassar <rnassar@duke.edu>
X-Sender: rnassar@bio3.acpub.duke.edu
To: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
cc: Martin Maechler <maechler@stat.math.ethz.ch>,
        Prof Brian Ripley <ripley@stats.ox.ac.uk>, r-devel@stat.math.ethz.ch,
        R-bugs@biostat.ku.dk
Subject: Re: [Rd] problem with plot(...., xlim=c(5,0)) (PR#480)
In-Reply-To: <x2bt4jj95i.fsf@blueberry.kubism.ku.dk>
Message-ID: <Pine.SOL.3.91.1000315103144.28375A-100000@bio3.acpub.duke.edu>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII

Dear Sirs,

Thank you very much for your replies.  If I may, and assuming this makes
sense, I would like to suggest as a low-priority wish-list item for a
future version that perhaps the plot function could take an additional
optional argument (e.g. reverse, which can have values "x", "y" or "xy")
which would make the plot function do the calculations suggested by Dr
Dalgaard below to allow easy plotting with reversed axis values, and even
prehaps issue a warning message for xlim=c(5:2) to make it clear that this
is not supposed to work that way?  Just some thoughts. 

Thank you again!

Rashid Nassar


On 13 Mar 2000, Peter Dalgaard BSA wrote:

> Date: 13 Mar 2000 14:23:53 +0100
> From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
> To: Martin Maechler <maechler@stat.math.ethz.ch>
> Cc: Prof Brian Ripley <ripley@stats.ox.ac.uk>, r-devel@stat.math.ethz.ch,
>     rnassar@duke.edu, R-bugs@biostat.ku.dk
> Subject: Re: [Rd] problem with plot(...., xlim=c(5,0)) (PR#480)
> 
> Martin Maechler <maechler@stat.math.ethz.ch> writes:
> 
> > >>>>> "BDR" == Prof Brian Ripley <ripley@stats.ox.ac.uk> writes:
> 
> >     >> plot(1:4,1:4,xlim=c(5,0),ylim=c(5,0))
> >     >> 
> >     >> shows axis labels as:
> >     >> 
> >     >> |    |    |    |    |     |
> >     >> 0
> >     >> rather than
> >     >> |    |    |    |    |    |
> >     >> 5    4    3    2    1    0
> >     >> 
> >     >> as I believe it used to do in some earlier version.
> > 
> >     BDR> Up to 0.64.2, not since 0.65.0.
> > 
> > No, unfortunately,  happens here with 1.0.0 (even patched; "R-release")
> > 
> 
> I think Brian meant that it hasn't done the  5 4 3 2 1 thing since
> 0.64.2...  
> 
> In general, it can be argued that the reversed xy limits are not safe
> and shouldn't be, since things are likely not to work at the device
> level with a mirrored coordinate system (I.e.: if we decide that it
> should work, we may find ourselves fixing lots of small glitches in
> devxxx.c). 
> 
> Plotting (5-x,5-y) and doing the axes with axis(n, at=0:5, labels=5:0)
> will get the plot done in a cleaner, albeit more cumbersome fashion.
> 
> -- 
>    O__  ---- Peter Dalgaard             Blegdamsvej 3  
>   c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
>  (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
> ~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
> 
> 

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
* PR# 481 *
Subject: check does not accept --vsize option
From: neteler@geog.uni-hannover.de
Date: Mon, 13 Mar 2000 19:04:50 +0100 (MET)
-- no notes --
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 481 <==
From neteler@geog.uni-hannover.de  Mon Mar 13 19:04:50 2000
Received: from localhost (blueberry [130.225.108.193])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id TAA12973
	for <R-bugs@biostat.ku.dk>; Mon, 13 Mar 2000 19:04:50 +0100 (MET)
Date: Mon, 13 Mar 2000 19:04:50 +0100 (MET)
From: neteler@geog.uni-hannover.de
Message-Id: <200003131804.TAA12973@pubhealth.ku.dk>
To: R-bugs@biostat.ku.dk
Subject: check does not accept --vsize option

Full_Name: Markus Neteler
Version: 1.0.0
OS: Linux 2.2.10/i686
Submission from: (NULL) (130.75.72.37)


Hi,

I wanted to "check" the R.GRASS GIS interface from Roger Bivand:
http://www.geog.uni-hannover.de/grass/statsgrasslist.html

using
R CMD check --vsize=10M GRASS

but:

[error message shortened]
> G <- gmeta()
Error: heap memory (6144 Kb) exhausted [needed 1024 Kb more]
       See "help(Memory)" on how to increase the heap size.
Execution halted

It seems that --vsize is ignored. I check R/bin/check, the
parameter is sent properly to R but ignored there. From the
buglist I have seen that this problem occured with --nsize, too.

Hoping for a bug fix!

Kind regards and many thanks for your work

 Markus Neteler
 GRASS GIS 5 coordinator




==> 481.reply.1 <==
From bates@franz.stat.wisc.edu  Mon Mar 13 19:59:28 2000
Received: from franz.stat.wisc.edu (root@franz.stat.wisc.edu [128.105.174.95])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id TAA13153
	for <R-bugs@biostat.ku.dk>; Mon, 13 Mar 2000 19:59:27 +0100 (MET)
Received: by franz.stat.wisc.edu
	via sendmail from stdin
	id <m12Ua6v-000ZTXC@franz.stat.wisc.edu> (Debian Smail3.2.0.102)
	for R-bugs@biostat.ku.dk; Mon, 13 Mar 2000 13:02:37 -0600 (CST) 
Sender: bates@franz.stat.wisc.edu
To: neteler@geog.uni-hannover.de
Cc: r-devel@stat.math.ethz.ch, R-bugs@biostat.ku.dk
Subject: Re: [Rd] check does not accept --vsize option (PR#481)
References: <200003131804.TAA12983@pubhealth.ku.dk>
From: Douglas Bates <bates@stat.wisc.edu>
Date: 13 Mar 2000 13:02:37 -0600
In-Reply-To: neteler@geog.uni-hannover.de's message of "Mon, 13 Mar 2000 19:04:51 +0100 (MET)"
Message-ID: <6rya7msng2.fsf@franz.stat.wisc.edu>
Lines: 29
X-Mailer: Gnus v5.7/Emacs 20.5

neteler@geog.uni-hannover.de writes:

> I wanted to "check" the R.GRASS GIS interface from Roger Bivand:
> http://www.geog.uni-hannover.de/grass/statsgrasslist.html
> 
> using
> R CMD check --vsize=10M GRASS
> 
> but:
> 
> [error message shortened]
> > G <- gmeta()
> Error: heap memory (6144 Kb) exhausted [needed 1024 Kb more]
>        See "help(Memory)" on how to increase the heap size.
> Execution halted
> 
> It seems that --vsize is ignored. I check R/bin/check, the
> parameter is sent properly to R but ignored there. From the
> buglist I have seen that this problem occured with --nsize, too.

An R CMD check is designed to run in a protected environment, which is
the reason that some command line switches are ignored.  A workaround
is to specify the size as a shell or environment variable.  That is, use
 R_VSIZE=10M R CMD check GRASS
from a Bourne shell (or equivalent).  From the C-shell you may need to
use
 setenv R_VSIZE 10M
 R CMD check GRASS


==> 481.followup.1 <==
From ripley@stats.ox.ac.uk  Mon Mar 13 21:28:22 2000
Received: from toucan.stats.ox.ac.uk (toucan.stats.ox.ac.uk [163.1.20.20])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id VAA13667
	for <R-bugs@biostat.ku.dk>; Mon, 13 Mar 2000 21:28:20 +0100 (MET)
Received: from max154.public.ox.ac.uk (max154.public.ox.ac.uk [192.76.27.154])
	by toucan.stats.ox.ac.uk (8.9.0/8.9.0) with ESMTP id UAA20246;
	Mon, 13 Mar 2000 20:28:24 GMT
Date: Mon, 13 Mar 2000 20:28:41 +0000 (GMT)
From: Prof Brian D Ripley <ripley@stats.ox.ac.uk>
Sender: ripley@auk.stats
To: Douglas Bates <bates@stat.wisc.edu>
cc: neteler@geog.uni-hannover.de, r-devel@stat.math.ethz.ch,
        R-bugs@biostat.ku.dk
Subject: Re: [Rd] check does not accept --vsize option (PR#481)
In-Reply-To: <6rya7msng2.fsf@franz.stat.wisc.edu>
Message-ID: <Pine.GSO.4.05.10003132010540.26046-100000@auk.stats>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII

On 13 Mar 2000, Douglas Bates wrote:

> neteler@geog.uni-hannover.de writes:
> 
> > I wanted to "check" the R.GRASS GIS interface from Roger Bivand:
> > http://www.geog.uni-hannover.de/grass/statsgrasslist.html
> > 
> > using
> > R CMD check --vsize=10M GRASS
> > 
> > but:
> > 
> > [error message shortened]
> > > G <- gmeta()
> > Error: heap memory (6144 Kb) exhausted [needed 1024 Kb more]
> >        See "help(Memory)" on how to increase the heap size.
> > Execution halted
> > 
> > It seems that --vsize is ignored. I check R/bin/check, the
> > parameter is sent properly to R but ignored there. From the
> > buglist I have seen that this problem occured with --nsize, too.

What version of R were you using?  That bug report was from 0.99.0,
I think.

> An R CMD check is designed to run in a protected environment, which is
> the reason that some command line switches are ignored.  A workaround
> is to specify the size as a shell or environment variable.  That is, use
>  R_VSIZE=10M R CMD check GRASS
> from a Bourne shell (or equivalent).  From the C-shell you may need to
> use
>  setenv R_VSIZE 10M
>  R CMD check GRASS

I think CMD check _is_ now supposed to accept --vsize and --nsize:

auk%  R CMD check --help
Usage: R CMD check [options] pkgs
...
  --vsize=N             set R's vector heap size to N bytes
  --nsize=N             set R's number of cons cells to N


However, it seems not to work correctly

ARGUMENT '{R_opts}' __ignored__

appears in *.Rout on Solaris, and only one of them is accepted.

In the check script we need

    --nsize=*)
      R_opts="${R_opts} ${1}" ;;
    --vsize=*)
      R_opts="${R_opts} ${1}" ;;

adding a couple of `$'.


On (t)csh I use something like.

env R_VSIZE=10M R CMD check GRASS


-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
* PR# 482 *
Subject: plot(1:10,c(1)$nothing)  yields index plot
From: "Charles C. Berry" <cberry@tajo.ucsd.edu>
Date: Mon, 13 Mar 2000 11:13:18 -0800
-- no notes --
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 482 <==
From cberry@tajo.ucsd.edu  Mon Mar 13 20:11:20 2000
Received: from stat.math.ethz.ch (daemon@hypatia.ethz.ch [129.132.58.23])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id UAA13252
	for <R-bugs@biostat.ku.dk>; Mon, 13 Mar 2000 20:11:20 +0100 (MET)
Received: (from daemon@localhost)
	by stat.math.ethz.ch (8.9.1/8.9.1) id UAA23810
	for <r-bugs@hypatia.math.ethz.ch>; Mon, 13 Mar 2000 20:11:32 +0100 (MET)
Received: from smtp.ucsd.edu(132.239.1.49)
 via SMTP by hypatia, id smtpdAAAa005ns; Mon Mar 13 20:11:25 2000
Received: from tajo.ucsd.edu (tajo.ucsd.edu [132.239.99.2])
	by smtp.ucsd.edu (8.9.3/8.9.3) with ESMTP id LAA07792
	for <r-bugs@lists.r-project.org>; Mon, 13 Mar 2000 11:11:23 -0800 (PST)
Received: from tajo.ucsd.edu by tajo.ucsd.edu (8.9.3+Sun/SMI-SVR4-UCSD.1)
	id LAA26811; Mon, 13 Mar 2000 11:13:19 -0800 (PST)
Sender: cberry@tajo.ucsd.edu
Message-ID: <38CD3DCE.711B133D@tajo.ucsd.edu>
Date: Mon, 13 Mar 2000 11:13:18 -0800
From: "Charles C. Berry" <cberry@tajo.ucsd.edu>
X-Mailer: Mozilla 4.05 [fr] (X11; I; SunOS 5.7 sun4u)
MIME-Version: 1.0
To: r-bugs@stat.math.ethz.ch
Subject: plot(1:10,c(1)$nothing)  yields index plot
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit

<<insert bug report here>>

IMHO, 

	plot(x,c(1)$nothing)

should fail or at least issue a warning.

Instead it produces an index plot of the first argument, i.e. plot(x)

Chuck Berry

--please do not edit the information below--

Version:
 platform = sparc-sun-solaris2.7
 arch = sparc
 os = solaris2.7
 system = sparc, solaris2.7
 status = Patched
 major = 1
 minor = 0.0
 year = 2000
 month = February
 day = 29
 language = R

Search Path:
 .GlobalEnv, Autoloads, package:base

-- 
Charles C. Berry                        (858) 534-2098 
                                         Dept of Family/Preventive
Medicine
E mailto:cberry@tajo.ucsd.edu	         UC San Diego
http://hacuna.ucsd.edu/members/ccb.html  La Jolla, San Diego 92093-0645

==> 482.reply.1 <==
From thomas@biostat.washington.edu  Mon Mar 13 20:27:43 2000
Received: from mail.biostat.washington.edu (mail.biostat.washington.edu [128.95.113.21])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id UAA13318
	for <R-bugs@biostat.ku.dk>; Mon, 13 Mar 2000 20:27:42 +0100 (MET)
Received: from mail.biostat.washington.edu (mail.biostat.washington.edu [128.95.113.21])
	by mail.biostat.washington.edu (8.9.3+Sun/8.9.1-fetrow-99-05-16b) with ESMTP id LAA26887;
	Mon, 13 Mar 2000 11:27:42 -0800 (PST)
Date: Mon, 13 Mar 2000 11:27:42 -0800 (PST)
From: Thomas Lumley <thomas@biostat.washington.edu>
To: cberry@tajo.ucsd.edu
cc: r-devel@stat.math.ethz.ch, R-bugs@biostat.ku.dk
Subject: Re: [Rd] plot(1:10,c(1)$nothing)  yields index plot (PR#482)
In-Reply-To: <200003131911.UAA13262@pubhealth.ku.dk>
Message-ID: <Pine.GSO.4.21.0003131116350.18281-100000@mail.biostat.washington.edu>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII

On Mon, 13 Mar 2000 cberry@tajo.ucsd.edu wrote:

> <<insert bug report here>>
> 
> IMHO, 
> 
> 	plot(x,c(1)$nothing)
> 
> should fail or at least issue a warning.
> 
> Instead it produces an index plot of the first argument, i.e. plot(x)

No, the alternative is worse.

The ability to do plot(x) with x a vector is important.  One might think
that in 
	plot(x,y=NULL)
we could test for missing(y) rather than is.null(y) and issue a warning if
y was NULL but not missing.  More-or-less equivalently we could use
substitute(y) to check whether y was a literal NULL or an expression
evaluating to NULL.

This turns out to be a bad idea, because we must be able to call plot(x)
from other functions (with arbitrarily deep nesting), and it becomes very
messy to trick plot() into handling the arguments correctly as they are
passed from one function to another. 

Since plot(x) can't tell whether the NULL argument is deliberate or
accidental, it shouldn't try to guess and give a warning.


	-thomas

Thomas Lumley
Assistant Professor, Biostatistics
University of Washington, Seattle


==> 482.reply.2 <==
From pd@biostat.ku.dk  Mon Mar 13 20:46:59 2000
Received: from biostat.ku.dk (blueberry [130.225.108.193])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id UAA13462;
	Mon, 13 Mar 2000 20:46:58 +0100 (MET)
Received: (from pd@localhost)
	by biostat.ku.dk (8.9.3/8.9.3) id UAA19014;
	Mon, 13 Mar 2000 20:49:02 +0100
Sender: pd@blueberry.kubism.ku.dk
To: Thomas Lumley <thomas@biostat.washington.edu>
Cc: cberry@tajo.ucsd.edu, r-devel@stat.math.ethz.ch, R-bugs@biostat.ku.dk
Subject: Re: [Rd] plot(1:10,c(1)$nothing)  yields index plot (PR#482)
References: <Pine.GSO.4.21.0003131116350.18281-100000@mail.biostat.washington.edu>
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 13 Mar 2000 20:49:02 +0100
In-Reply-To: Thomas Lumley's message of "Mon, 13 Mar 2000 11:27:42 -0800 (PST)"
Message-ID: <x23dpuabwx.fsf@blueberry.kubism.ku.dk>
Lines: 30
X-Mailer: Gnus v5.7/Emacs 20.4
Mime-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: 7bit

Thomas Lumley <thomas@biostat.washington.edu> writes:

> This turns out to be a bad idea, because we must be able to call plot(x)
> from other functions (with arbitrarily deep nesting), and it becomes very
> messy to trick plot() into handling the arguments correctly as they are
> passed from one function to another. 

Actually, S-plus has that problem, not R:

> f<-function(x,y)g(x,y)
> g<-function(x,y)missing(y)
> f(2)
[1] F

where R propagates missings just fine:

> f<-function(x,y)g(x,y)
> g<-function(x,y)missing(y)
> f(2)
[1] TRUE

but given the amount of ported code we have to deal with, we probably
have to be able to deal with NULLs being passed to signify absent
arguments. 

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
* PR# 483 *
Subject: error in par option xaxt
From: aim@uwo.ca
Date: Mon, 13 Mar 2000 22:02:42 +0100 (MET)
-- no notes --
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 483 <==
From aim@uwo.ca  Mon Mar 13 22:02:43 2000
Received: from localhost (blueberry [130.225.108.193])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id WAA13851
	for <R-bugs@biostat.ku.dk>; Mon, 13 Mar 2000 22:02:42 +0100 (MET)
Date: Mon, 13 Mar 2000 22:02:42 +0100 (MET)
From: aim@uwo.ca
Message-Id: <200003132102.WAA13851@pubhealth.ku.dk>
To: R-bugs@biostat.ku.dk
Subject: error in par option xaxt

Full_Name: Ian McLeod
Version: 1
OS: WinNT
Submission from: (NULL) (129.100.45.131)


The plot optional argument xaxt does not work.  Setting xaxt="n" has no effect,
the axis is annotated. The R online documention provides an example. See
help(axis) and try to execute the illustrative script. The annotated labels are
overwritten.

For convenience, I have extracted the following from the help(axis) page:

plot(1:4, rnorm(4), axes=FALSE)
axis(1, 1:4, LETTERS[1:4])
axis(2)
box() #- to make it look "as usual"

plot(1:7, rnorm(7), type = 's', xaxt='n', col = 'red')
axis(1, 1:7, LETTERS[1:7], col.axis = 'blue')




==> 483.followup.1 <==
From ripley@stats.ox.ac.uk  Mon Mar 13 22:46:32 2000
Received: from toucan.stats.ox.ac.uk (toucan.stats.ox.ac.uk [163.1.20.20])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id WAA14084
	for <R-bugs@biostat.ku.dk>; Mon, 13 Mar 2000 22:46:30 +0100 (MET)
Received: from max68.public.ox.ac.uk (max68.public.ox.ac.uk [192.76.27.68])
	by toucan.stats.ox.ac.uk (8.9.0/8.9.0) with ESMTP id VAA20472;
	Mon, 13 Mar 2000 21:46:39 GMT
Date: Mon, 13 Mar 2000 21:46:59 +0000 (GMT)
From: Prof Brian D Ripley <ripley@stats.ox.ac.uk>
Sender: ripley@auk.stats
To: aim@uwo.ca
cc: r-devel@stat.math.ethz.ch, R-bugs@biostat.ku.dk
Subject: Re: [Rd] error in par option xaxt (PR#483)
In-Reply-To: <200003132102.WAA13861@pubhealth.ku.dk>
Message-ID: <Pine.GSO.4.05.10003132143060.27721-100000@auk.stats>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII

On Mon, 13 Mar 2000 aim@uwo.ca wrote:

> Full_Name: Ian McLeod
> Version: 1
> OS: WinNT
> Submission from: (NULL) (129.100.45.131)
> 
> 
> The plot optional argument xaxt does not work.  Setting xaxt="n" has no effect,
> the axis is annotated. The R online documention provides an example. See
> help(axis) and try to execute the illustrative script. The annotated labels are
> overwritten.

You mean 1.0.0, I think. That bug is already fixed for R-release: as you
are on Windows you will just need to compile it up from source

As a workaround, 

par(xaxt='n')
plot(1:7, rnorm(7), type = 's', col = 'red')

_does_ work: it is only the inline setting that is broken, and only in that
version.

[I don't understand why this was sent out twice with different PR# numbers?
Did you submit it twice?]

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
* PR# 484 *
Subject: error in par option xaxt
From: aim@uwo.ca
Date: Mon, 13 Mar 2000 22:03:00 +0100 (MET)
-- no notes --
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 484 <==
From aim@uwo.ca  Mon Mar 13 22:03:01 2000
Received: from localhost (blueberry [130.225.108.193])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id WAA13865
	for <R-bugs@biostat.ku.dk>; Mon, 13 Mar 2000 22:03:00 +0100 (MET)
Date: Mon, 13 Mar 2000 22:03:00 +0100 (MET)
From: aim@uwo.ca
Message-Id: <200003132103.WAA13865@pubhealth.ku.dk>
To: R-bugs@biostat.ku.dk
Subject: error in par option xaxt

Full_Name: Ian McLeod
Version: 1
OS: WinNT
Submission from: (NULL) (129.100.45.131)


The plot optional argument xaxt does not work.  Setting xaxt="n" has no effect,
the axis is annotated. The R online documention provides an example. See
help(axis) and try to execute the illustrative script. The annotated labels are
overwritten.

For convenience, I have extracted the following from the help(axis) page:

plot(1:4, rnorm(4), axes=FALSE)
axis(1, 1:4, LETTERS[1:4])
axis(2)
box() #- to make it look "as usual"

plot(1:7, rnorm(7), type = 's', xaxt='n', col = 'red')
axis(1, 1:7, LETTERS[1:7], col.axis = 'blue')



~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
* PR# 485 *
Subject: Install R1.0.0
From: Lynn Zhang <lyzhang@umich.edu>
Date: Mon, 13 Mar 2000 16:10:52 -0500 (EST)
-- no notes --
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 485 <==
From lyzhang@umich.edu  Mon Mar 13 22:13:28 2000
Received: from shiwala.admin.lsa.umich.edu (shiwala.admin.lsa.umich.edu [141.211.75.248])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id WAA13925
	for <r-bugs@biostat.ku.dk>; Mon, 13 Mar 2000 22:13:26 +0100 (MET)
Received: from kongzi.admin.lsa.umich.edu (lyzhang@kongzi.admin.lsa.umich.edu [141.211.32.160])
	by shiwala.admin.lsa.umich.edu (8.9.3/8.9.3/LSA 8.9.3 1999/10/05 22:57:41 lyzhang) with ESMTP id QAA15200
	for <r-bugs@biostat.ku.dk>; Mon, 13 Mar 2000 16:13:31 -0500 (EST)
Received: from localhost by kongzi.admin.lsa.umich.edu (8.9.3/8.9.3) with SMTP id QAA23357
	for <r-bugs@biostat.ku.dk>; Mon, 13 Mar 2000 16:10:52 -0500 (EST)
X-Authentication-Warning: kongzi.admin.lsa.umich.edu: lyzhang owned process doing -bs
Date: Mon, 13 Mar 2000 16:10:52 -0500 (EST)
From: Lynn Zhang <lyzhang@umich.edu>
X-Sender: lyzhang@kongzi.admin.lsa.umich.edu
To: r-bugs@biostat.ku.dk
Subject: Install R1.0.0
Message-ID: <Pine.SOL.3.95.1000313160825.18282A-100000@kongzi.admin.lsa.umich.edu>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII


Hello,

I tried to compile and install R. After I ran
make 2>&1 | tee log
., I got the following error:

making system.d from system.c
system.c:37: readline/readline.h: No such file or directory
make[3]: *** [system.d] Error 1
make[3]: Leaving directory
`/afs/lsa.umich.edu/group/admin/software/build/R/R-1.
0.0/src/unix'
make[2]: *** [R] Error 2
make[2]: Leaving directory
`/afs/lsa.umich.edu/group/admin/software/build/R/R-1.
0.0/src/unix'
make[1]: *** [R] Error 1
make[1]: Leaving directory
`/afs/lsa.umich.edu/group/admin/software/build/R/R-1.
0.0/src'
make: *** [R] Error 1



Please help.

Lots aof thanks!

*=======================================* 
*	Lynn Zhang             	        *
*	LS&A System Services Team       *
*	lyzhang@umich.edu               *
*=======================================*


==> 485.reply.1 <==
From thomas@biostat.washington.edu  Mon Mar 13 22:24:59 2000
Received: from mail.biostat.washington.edu (mail.biostat.washington.edu [128.95.113.21])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id WAA13978
	for <R-bugs@biostat.ku.dk>; Mon, 13 Mar 2000 22:24:58 +0100 (MET)
Received: from mail.biostat.washington.edu (mail.biostat.washington.edu [128.95.113.21])
	by mail.biostat.washington.edu (8.9.3+Sun/8.9.1-fetrow-99-05-16b) with ESMTP id NAA03758;
	Mon, 13 Mar 2000 13:25:00 -0800 (PST)
Date: Mon, 13 Mar 2000 13:24:59 -0800 (PST)
From: Thomas Lumley <thomas@biostat.washington.edu>
To: lyzhang@umich.edu
cc: r-devel@stat.math.ethz.ch, R-bugs@biostat.ku.dk
Subject: Re: [Rd] Install R1.0.0 (PR#485)
In-Reply-To: <200003132113.WAA13935@pubhealth.ku.dk>
Message-ID: <Pine.GSO.4.21.0003131315460.18281-100000@mail.biostat.washington.edu>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII

On Mon, 13 Mar 2000 lyzhang@umich.edu wrote:

> 
> Hello,
> 
> I tried to compile and install R. After I ran
> make 2>&1 | tee log
> ., I got the following error:
> 
> making system.d from system.c
> system.c:37: readline/readline.h: No such file or directory

It looks as though you are trying to use GNU readline without it being
present.  This shouldn't be allowed by configure.

Try 
     make distclean
     ./configure
     make

again, to see if the problem goes away. If it doesn't then
look at src/include/config.h to see if you have something like
/* GNU Readline Library */
#define HAVE_LIBREADLINE 1
#define HAVE_READLINE_HISTORY_H 1
#define HAVE_READLINE_READLINE_H 1
indicating that configure thinks you have readline or like
/* GNU Readline Library */
/* #undef HAVE_LIBREADLINE */
/* #undef HAVE_READLINE_HISTORY_H */
/* #undef HAVE_READLINE_READLINE_H */
indicating that it doesn't.

In either case there would be a problem with configure, but a different
one. It's possible, for example, that configure is finding the readline
headers but that the compiler isn't looking in the same place.

Of course this is assuming you do have the GNU readline library and
headers. If you don't, then
	./configure --without-readline
is a workaround, though we would still like to know why configure thinks
you have it.


	-thomas

Thomas Lumley
Assistant Professor, Biostatistics
University of Washington, Seattle




> make[3]: *** [system.d] Error 1
> make[3]: Leaving directory
> `/afs/lsa.umich.edu/group/admin/software/build/R/R-1.
> 0.0/src/unix'
> make[2]: *** [R] Error 2
> make[2]: Leaving directory
> `/afs/lsa.umich.edu/group/admin/software/build/R/R-1.
> 0.0/src/unix'
> make[1]: *** [R] Error 1
> make[1]: Leaving directory
> `/afs/lsa.umich.edu/group/admin/software/build/R/R-1.
> 0.0/src'
> make: *** [R] Error 1
> 
> 
> 
> Please help.
> 
> Lots aof thanks!
> 
> *=======================================* 
> *	Lynn Zhang             	        *
> *	LS&A System Services Team       *
> *	lyzhang@umich.edu               *
> *=======================================*
> 
> 
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
> 

Thomas Lumley
Assistant Professor, Biostatistics
University of Washington, Seattle


==> 485.followup.1 <==
From lyzhang@umich.edu  Tue Mar 14 22:36:11 2000
Received: from shiwala.admin.lsa.umich.edu (shiwala.admin.lsa.umich.edu [141.211.75.248])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id WAA25640
	for <R-bugs@biostat.ku.dk>; Tue, 14 Mar 2000 22:36:10 +0100 (MET)
Received: from kongzi.admin.lsa.umich.edu (lyzhang@kongzi.admin.lsa.umich.edu [141.211.32.160])
	by shiwala.admin.lsa.umich.edu (8.9.3/8.9.3/LSA 8.9.3 1999/10/05 22:57:41 lyzhang) with ESMTP id QAA22968;
	Tue, 14 Mar 2000 16:36:17 -0500 (EST)
Received: from localhost by kongzi.admin.lsa.umich.edu (8.9.3/8.9.3) with SMTP id QAA09313;
	Tue, 14 Mar 2000 16:33:30 -0500 (EST)
X-Authentication-Warning: kongzi.admin.lsa.umich.edu: lyzhang owned process doing -bs
Date: Tue, 14 Mar 2000 16:33:30 -0500 (EST)
From: Lynn Zhang <lyzhang@umich.edu>
X-Sender: lyzhang@kongzi.admin.lsa.umich.edu
To: Thomas Lumley <thomas@biostat.washington.edu>
cc: r-devel@stat.math.ethz.ch, R-bugs@biostat.ku.dk
Subject: Re: [Rd] Install R1.0.0 (PR#485)
In-Reply-To: <Pine.GSO.4.21.0003131315460.18281-100000@mail.biostat.washington.edu>
Message-ID: <Pine.SOL.3.95.1000314163154.17926J-100000@kongzi.admin.lsa.umich.edu>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII


Hello,

After I run make, I got the following error,

__d_sign                            /usr/lsa/lib/libblas.a(drotg.o)
ld: fatal: Symbol referencing errors. No output written to ../../bin/R.X11
make[3]: *** [../../bin/R.X11] Error 1
make[3]: Leaving directory
`/afs/lsa.umich.edu/group/admin/software/build/R/R-1.0.0/src/main'
make[2]: *** [R] Error 2
make[2]: Leaving directory
`/afs/lsa.umich.edu/group/admin/software/build/R/R-1.0.0/src/main'
make[1]: *** [R] Error 1
make[1]: Leaving directory
`/afs/lsa.umich.edu/group/admin/software/build/R/R-1.0.0/src'
make: *** [R] Error 1


Would you please help me on that?

Lots of thanks!




*=======================================* 
*	Lynn Zhang             	        *
*	LS&A System Services Team       *
*	lyzhang@umich.edu               *
*=======================================*

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
* PR# 486 *
Subject: Re: autoload error in profile {was anova-bug in R-version  1.0.0?}
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Tue, 14 Mar 2000 10:32:43 +0100 (MET)
-- no notes --
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 486 <==
From maechler@stat.math.ethz.ch  Tue Mar 14 10:32:36 2000
Received: from stat.math.ethz.ch (daemon@hypatia.ethz.ch [129.132.58.23])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id KAA17249
	for <R-bugs@biostat.ku.dk>; Tue, 14 Mar 2000 10:32:35 +0100 (MET)
Received: (from daemon@localhost)
	by stat.math.ethz.ch (8.9.1/8.9.1) id KAA21252;
	Tue, 14 Mar 2000 10:32:48 +0100 (MET)
Received: from lynne(129.132.58.30), claiming to be "lynne.ethz.ch"
 via SMTP by hypatia, id smtpdAAAa005C1; Tue Mar 14 10:32:44 2000
Received: (maechler@localhost) by lynne.ethz.ch (8.9.3/D-MATH-client) id KAA03934; Tue, 14 Mar 2000 10:32:44 +0100
X-Authentication-Warning: lynne.ethz.ch: maechler set sender to maechler@stat.math.ethz.ch using -f
From: Martin Maechler <maechler@stat.math.ethz.ch>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
Message-ID: <14542.1851.731086.380@lynne.ethz.ch>
Date: Tue, 14 Mar 2000 10:32:43 +0100 (MET)
To: Prof Brian D Ripley <ripley@stats.ox.ac.uk>
Cc: R-bugs@stat.math.ethz.ch
Subject: Re: autoload error in profile {was anova-bug in R-version  1.0.0?}
 (PR#470)
In-Reply-To: <Pine.GSO.4.05.10003071100180.20079-100000@auk.stats>
References: <14532.56910.278837.379365@lynne.ethz.ch>
	<Pine.GSO.4.05.10003071100180.20079-100000@auk.stats>
X-Mailer: VM 6.75 under Emacs 20.6.1
Reply-To: Martin Maechler <maechler@stat.math.ethz.ch>

>>>>> "BDR" == Prof Brian D Ripley <ripley@stats.ox.ac.uk> writes:

    BDR> On Tue, 7 Mar 2000, Martin Maechler wrote:
    >> >>>>> "BDR" == Prof Brian D Ripley <ripley@stats.ox.ac.uk> writes:
    >> 
    BDR> On Tue, 7 Mar 2000, Trenkler, Dietrich wrote:
    >> >> I think I've discovered what went wrong.
    >> >> 
    >> >> My workspace included a function wilcox.test formerly copied from
    >> >> ctest. Now ctest ist part of the distribution and because of that I
    >> >> always got the message:
    >> >> 
    >> >> [Previously saved workspace restored]
    >> >> 
    >> >> Error in autoload("wilcox.test", "ctest") :
    >> >> Object already exists
    >> >> 
    >> >> I didn't take care of this message. Now I removed wilcox.test, saved
    >> >> the WS, restarted R without the vanilla-option and alas, anova
    >> >> now works.
    >> >> 
    >> >> It seems that R stops initializing after encountering the error
    >> >> mentioned above. Is this correct?   
    >> 
    BDR> Yes, in that the rest of the system Rprofile file is skipped
    BDR> and hence options show.signif.stars and show.coef.Pvalues are not set.
    >> but other options as well..
    >> I think this shouldn't happen and *is* a bug.

    BDR> It looks to me as if a bit more protection is needed in print.coefmat,
    BDR> at least.

	 which Brian has implemented in the mean time.

	 ....

    >> For the 1.0.x patches, at least, I'll move the autoload()'s to the end of
    >> profile/Common.R

    BDR> I _think_ they should have try() around them, which is what S-PLUS 
    BDR> now does with all startup code.

I tried this, but it does not work :

try(autoload(..)) works okay when used after startup, but not *during*
startup.  However, I'll put a workaround into Common.R

Should this {try(.) not working during startup} be another bug report ?

Martin
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
* PR# 487 *
Subject: Bug in sub?
From: "Trenkler, Dietrich" <dtrenkler@nts6.oec.uni-osnabrueck.de>
Date: Tue, 14 Mar 2000 12:15:54 +0100
-- no notes --
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 487 <==
From dtrenkler@nts6.oec.uni-osnabrueck.de  Tue Mar 14 12:16:26 2000
Received: from omecihuatl.rz.Uni-Osnabrueck.DE (root@omecihuatl.rz.Uni-Osnabrueck.DE [131.173.17.35])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id MAA19346
	for <r-bugs@biostat.ku.dk>; Tue, 14 Mar 2000 12:16:26 +0100 (MET)
Received: from nts6.oec.uni-osnabrueck.de (nts6.oec.Uni-Osnabrueck.DE [131.173.130.59])
	by omecihuatl.rz.Uni-Osnabrueck.DE (8.9.3/8.9.3) with ESMTP id MAA09848
	for <r-bugs@biostat.ku.dk>; Tue, 14 Mar 2000 12:16:39 +0100
Received: by nts6.oec.Uni-Osnabrueck.DE with Internet Mail Service (5.5.1960.3)
	id <GNFJ7T00>; Tue, 14 Mar 2000 12:15:55 +0100
Message-ID: <51615E1449A4D111AE9900008322A88025CD2D@nts6.oec.Uni-Osnabrueck.DE>
From: "Trenkler, Dietrich" <dtrenkler@nts6.oec.uni-osnabrueck.de>
To: "'r-bugs@biostat.ku.dk'" <r-bugs@biostat.ku.dk>
Subject: Bug in sub?
Date: Tue, 14 Mar 2000 12:15:54 +0100
MIME-Version: 1.0
X-Mailer: Internet Mail Service (5.5.1960.3)
Content-Type: text/plain

I suspect that there is bug in sub when using "?":

> string_"This is a bug!"
>  sub("!", ", or isn't it?", string)
[1] "This is a bug, or isn't it?"
> string_"This is a bug?"
>  sub("?", ", or isn't it?", string)
[1] "This is a bug?"


Regards,

  *** D.Trenkler ***

====================================================================
Dietrich Trenkler                   (trenkler@oec.uni-osnabrueck.de)
Statistik / Empirische Wirtschaftsforschung
Universitaet Osnabrueck
Rolandstrasse 8                           Phone: +49(0) 541-969-2753
D-49069 Osnabrueck                        Fax  : +49(0) 541-969-2745
GERMANY
====================================================================


--please do not edit the information below--

Version:
 platform = Windows
 arch = x86
 os = Win32
 system = x86, Win32
 status = 
 major = 1
 minor = 0.0
 year = 2000
 month = February
 day = 29
 language = R

Windows NT 4.0 (build 1381) Service Pack 3

Search Path:
 .GlobalEnv, Autoloads, package:base

==> 487.followup.1 <==
From hothorn@ci.tuwien.ac.at  Tue Mar 14 12:22:58 2000
Received: from fangorn.ci.tuwien.ac.at (root@fangorn.ci.tuwien.ac.at [128.131.51.24])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id MAA19484
	for <R-bugs@biostat.ku.dk>; Tue, 14 Mar 2000 12:22:57 +0100 (MET)
Received: from boromir.ci.tuwien.ac.at (boromir.ci.tuwien.ac.at [128.131.51.39])
	by fangorn.ci.tuwien.ac.at (8.9.3/8.9.3/Debian/GNU) with ESMTP id MAA06096;
	Tue, 14 Mar 2000 12:22:48 +0100
Received: from localhost (hothorn@localhost)
	by boromir.ci.tuwien.ac.at (8.9.3/8.8.5) with ESMTP id MAA18955;
	Tue, 14 Mar 2000 12:22:54 +0100
X-Authentication-Warning: boromir.ci.tuwien.ac.at: hothorn owned process doing -bs
Date: Tue, 14 Mar 2000 12:22:54 +0100 (CET)
From: Torsten Hothorn <hothorn@ci.tuwien.ac.at>
To: dtrenkler@nts6.oec.uni-osnabrueck.de
cc: r-devel@stat.math.ethz.ch, R-bugs@biostat.ku.dk
Subject: Re: [Rd] Bug in sub? (PR#487)
In-Reply-To: <200003141116.MAA19358@pubhealth.ku.dk>
Message-ID: <Pine.LNX.4.21.0003141221520.18407-100000@boromir.ci.tuwien.ac.at>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII


> I suspect that there is bug in sub when using "?":
> 
> > string_"This is a bug!"
> >  sub("!", ", or isn't it?", string)
> [1] "This is a bug, or isn't it?"
> > string_"This is a bug?"
> >  sub("?", ", or isn't it?", string)
> [1] "This is a bug?"


R> string_"This is a bug?"
R> sub("[?]", ", or isn't it?", string)
[1] "This is a bug, or isn't it?"

works, has "?" a special meaning in regexp?

Torsten


> 
> 
> Regards,
> 
>   *** D.Trenkler ***
> 
> ====================================================================
> Dietrich Trenkler                   (trenkler@oec.uni-osnabrueck.de)
> Statistik / Empirische Wirtschaftsforschung
> Universitaet Osnabrueck
> Rolandstrasse 8                           Phone: +49(0) 541-969-2753
> D-49069 Osnabrueck                        Fax  : +49(0) 541-969-2745
> GERMANY
> ====================================================================
> 
> 
> --please do not edit the information below--
> 
> Version:
>  platform = Windows
>  arch = x86
>  os = Win32
>  system = x86, Win32
>  status = 
>  major = 1
>  minor = 0.0
>  year = 2000
>  month = February
>  day = 29
>  language = R
> 
> Windows NT 4.0 (build 1381) Service Pack 3
> 
> Search Path:
>  .GlobalEnv, Autoloads, package:base
> 
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
> 


==> 487.reply.1 <==
From pd@biostat.ku.dk  Tue Mar 14 12:31:32 2000
Received: from biostat.ku.dk (blueberry [130.225.108.193])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id MAA19629;
	Tue, 14 Mar 2000 12:31:31 +0100 (MET)
Received: (from pd@localhost)
	by biostat.ku.dk (8.9.3/8.9.3) id MAA20157;
	Tue, 14 Mar 2000 12:33:39 +0100
Sender: pd@blueberry.kubism.ku.dk
To: dtrenkler@nts6.oec.uni-osnabrueck.de
Cc: r-devel@stat.math.ethz.ch, R-bugs@biostat.ku.dk
Subject: Re: [Rd] Bug in sub? (PR#487)
References: <200003141116.MAA19358@pubhealth.ku.dk>
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 14 Mar 2000 12:33:38 +0100
In-Reply-To: dtrenkler@nts6.oec.uni-osnabrueck.de's message of "Tue, 14 Mar 2000 12:16:27 +0100 (MET)"
Message-ID: <x266up4wh9.fsf@blueberry.kubism.ku.dk>
Lines: 30
X-Mailer: Gnus v5.7/Emacs 20.4
Mime-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: 7bit

dtrenkler@nts6.oec.uni-osnabrueck.de writes:

> I suspect that there is bug in sub when using "?":
> 
> > string_"This is a bug!"
> >  sub("!", ", or isn't it?", string)
> [1] "This is a bug, or isn't it?"
> > string_"This is a bug?"
> >  sub("?", ", or isn't it?", string)
> [1] "This is a bug?"

Hmm. If there is a bug it may not where you think...

'?' is an operator of extended regular expressions, so you're not
looking for a question mark there: 

>  sub("\\?", ", or isn't it?", string)
[1] "This is a bug, or isn't it?"

>  sub("?", ", or isn't it?", ext=F, string)
[1] "This is a bug, or isn't it?"

One might expect that a null RE would always match the beginning of a
string, but it doesn't...

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
* PR# 488 *
Subject: Error in lme?
From: simon.frost@ed.ac.uk
Date: Tue, 14 Mar 2000 14:15:52 +0100 (MET)
-- no notes --
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 488 <==
From simon.frost@ed.ac.uk  Tue Mar 14 14:15:53 2000
Received: from localhost (blueberry [130.225.108.193])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id OAA21597
	for <R-bugs@biostat.ku.dk>; Tue, 14 Mar 2000 14:15:52 +0100 (MET)
Date: Tue, 14 Mar 2000 14:15:52 +0100 (MET)
From: simon.frost@ed.ac.uk
Message-Id: <200003141315.OAA21597@pubhealth.ku.dk>
To: R-bugs@biostat.ku.dk
Subject: Error in lme?

Full_Name: Simon Frost
Version: 1.0.0
OS: Windows
Submission from: (NULL) (129.215.60.79)


Hi everyone,

I've just installed R for Windows - I've previously been using it on Linux -
and I've run into a problem when using lme.

The lme routine throws up an error in the getGroups.data.frame command,
complaining about an error in the formula:

Error in getGroups.data.frame(dataMix, groups) : 
        Invalid formula for groups

getGroups works just fine, and I haven't run into this problem previously.

Any ideas?

Best wishes
Simon

==> 488.reply.1 <==
From bates@franz.stat.wisc.edu  Tue Mar 14 14:41:32 2000
Received: from franz.stat.wisc.edu (root@franz.stat.wisc.edu [128.105.174.95])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id OAA22170
	for <R-bugs@biostat.ku.dk>; Tue, 14 Mar 2000 14:41:31 +0100 (MET)
Received: by franz.stat.wisc.edu
	via sendmail from stdin
	id <m12Urd2-000ZTZC@franz.stat.wisc.edu> (Debian Smail3.2.0.102)
	for R-bugs@biostat.ku.dk; Tue, 14 Mar 2000 07:44:56 -0600 (CST) 
Sender: bates@franz.stat.wisc.edu
To: simon.frost@ed.ac.uk
Cc: r-devel@stat.math.ethz.ch, R-bugs@biostat.ku.dk
Subject: Re: [Rd] Error in lme? (PR#488)
References: <200003141315.OAA21607@pubhealth.ku.dk>
From: Douglas Bates <bates@stat.wisc.edu>
Date: 14 Mar 2000 07:44:56 -0600
In-Reply-To: simon.frost@ed.ac.uk's message of "Tue, 14 Mar 2000 14:15:54 +0100 (MET)"
Message-ID: <6rg0ttll7r.fsf@franz.stat.wisc.edu>
Lines: 15
X-Mailer: Gnus v5.7/Emacs 20.5

simon.frost@ed.ac.uk writes:

> I've just installed R for Windows - I've previously been using it on Linux -
> and I've run into a problem when using lme.
> 
> The lme routine throws up an error in the getGroups.data.frame command,
> complaining about an error in the formula:
> 
> Error in getGroups.data.frame(dataMix, groups) : 
>         Invalid formula for groups
> 
> getGroups works just fine, and I haven't run into this problem previously.

Could you send us an example call that generates this error
(preferably using one of the data sets that comes with R)?
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
* PR# 489 *
Subject: r-base_1.0.0-1_i386.deb install problem
From: "Gregory R. Warnes" <warnes@biostat.washington.edu>
Date: Thu, 16 Mar 2000 04:02:26 +0000 (GMT)
-- no notes --
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 489 <==
From warnes@warnes.net  Thu Mar 16 05:07:00 2000
Received: from hydra.warnes.net (mail@c877378-a.sttln1.wa.home.com [24.9.60.166])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id FAA10876
	for <r-bugs@biostat.ku.dk>; Thu, 16 Mar 2000 05:04:16 +0100 (MET)
Received: from warnes (helo=localhost)
	by hydra.warnes.net with local-esmtp (Exim 3.12 #1 (Debian))
	id 12VRUQ-0001Qh-00; Wed, 15 Mar 2000 20:02:26 -0800
Date: Thu, 16 Mar 2000 04:02:26 +0000 (GMT)
From: "Gregory R. Warnes" <warnes@biostat.washington.edu>
X-Sender: warnes@hydra.warnes.net
To: Douglas Bates <bates@stat.wisc.edu>
cc: r-bugs@biostat.ku.dk
Subject: r-base_1.0.0-1_i386.deb install problem
Message-ID: <Pine.LNX.4.21.0003160350390.5005-201000@hydra.warnes.net>
MIME-Version: 1.0
Content-Type: MULTIPART/MIXED; BOUNDARY="152610364-605908981-953179346=:5491"
Sender: "Gregory R. Warnes" <warnes@warnes.net>

  This message is in MIME format.  The first part should be readable text,
  while the remaining parts are likely unreadable without MIME-aware tools.
  Send mail to mime@docserver.cac.washington.edu for more info.

--152610364-605908981-953179346=:5491
Content-Type: TEXT/PLAIN; charset=US-ASCII


Hi Doug,

The debian binary package from CRAN r-base_1.0.0-1_i386.deb won't install
on current debian 2.2 (potato) systems because it requires the package
"perl" which is perl version 5.004 while the default perl for potatoe is
currently perl 5.005. 

On my system, simply changing the dependency in the control file from
"perl" to "perl-5.005" corrects the problem.  

I've attached both the modified control file, and a complete debian
package which is identical to the original except for this change.

-Gregory 


--152610364-605908981-953179346=:5491
Content-Type: APPLICATION/x-debian-package; name="r-base_1.0.0-2_i386.deb"
Content-Transfer-Encoding: BASE64
Content-ID: <Pine.LNX.4.21.0003160402260.5491@hydra.warnes.net>
Content-Description: 
Content-Disposition: attachment; filename="r-base_1.0.0-2_i386.deb"

ITxhcmNoPgpkZWJpYW4tYmluYXJ5ICAgOTUzMTc4NDk2ICAgMCAgICAgMCAg
ICAgMTAwNjQ0ICA0ICAgICAgICAgYAoyLjAKY29udHJvbC50YXIuZ3ogIDk1
MzE3ODQ5NiAgIDAgICAgIDAgICAgIDEwMDY0NCAgNzk1MzMgICAgIGAKH4sI
AH9Z0DgCA+y923Jkx5UlWM/nK2D90tNmIuT3S9lM21AUq8QyimJnUlX91uOX
7UBUBiKgiEBmQl8/a52IQKYoEp4v1WNjVimRyAQzNs5x35e13Pfl9rf/8B/+
Symnovf4uv76+dfz76MKTnnrgsX3YzTuH278P/xv+PV0PJXDzc0/HPb702t/
b/bf/3/66/a3bb87Hfbb/8j91wqb635t/43lfzvvv3Mx4u9ra/0/3Kj/3P//
8F8/lvau3Mk/3hy+quUoy7/K4bjZ7/7xRt+qW/WVWd5KO63feCin++XHw2Z/
2Jye//Fm/8hvl+3y9aHdb074W08HiNnYFJbfy6Ps+vEfbx7lsP3K3yrlf3Pz
tPvr5vE3N9vyiB+Jr5vawvpl154ORzm69Q8HKX272cmdufk//vv/dWNu9Vfa
/Lff3HzEfwt36/fsrb01t7Z8xe//Fd/X5+/rf9S3+tb+t+Xt092dHE/4+Xcx
rlIfC57k7jc3cjwu3+x3Y7tp/M+Hr9qh7JbvdtCB7Vb6V283f8U7aJ19XP5Y
NrsT/pHDP978fv90ty3Hm9+Vkxxv/s/KL/83PnS6/bA5tlvpT/8dL31sh83j
ebH+n3/+4c83b//rzVc3X+ONd3dPWOObsus3snu/Oex3D7I73Yz94YZCNsfT
ppXtTds/PD6dNru72+Xmzc3meNNXkVX6TX2+2ZyON+XpdL8/4Ovx5r/s9ies
6XbzTv7Lzdvf3Hy437R7fqi8/MAFAt7Ldv8IAeV08zvZbm++L3V/KCdsIl7k
Vx9gfdS7Q3mE0COe5rvTzeNh/36DB7o5Pj0+7g/npy837wsknZ5v9uNvJH32
+fVPZfuMLb6+V7k5HZ7k8uPk8GmFzi9Bj4SF59/bPT1U/AVIv7ipr8Z2/2Hh
n46Qsarm+T2ggngv/HH92WWLP+7WP9/e8PGxv/sPx5unI/T75rS/Kb0v/Nfm
rMU342nXzr+FdnO5u4zNjkuxkw8v//UIYf+El4fWrD/mGz5Jx5vgz1Wgabt3
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
40zElsJ5y6q/1u6K0n4nx6NsL8+FkFnhmIxOzESEwnQ2IGabXiaptZmkUznL
EZNr4nrxBI8tYNlEAhS7ZMexwGYiZ4Nd35TLM0krycEEsOuJJ/Oes0NdD7C0
9RLldVnflKd2/3yWZL2xHT6vBwcdcl4Kz+GhV1bxHtlPJN1vjn95Kgc5CyNR
8lCG4gXmhQgDjJA7K3INvvlapFmF7R8ey2Fz3O/O0jLHn1tmLymwIQUAmQc7
GhdEnKRfc6xnabvjqexOx4uwVIEGA0sBIwh85FBc33LVkS0iXzvHugg7HfaX
xQcQsPAXyoJb2rp2G1cDaFy7nF+/P6So38vab+4saoRguqHS4304NA+8BMED
4B446lWkehbF3GZOgbgsfyGQym3NmTICHN4ULzQIfFgSPZP2ftPkslwg4Aka
ilXj9BwDTeVgAMeiDwFRrq+L+vbj437H5pdXfTVsBeI656AVegqoWsuWVy/M
XzBmJm6NaWdR5AC5gu+EWjoghGXjbWHbc7ZM824uSh6ubxmUr5yhu9Yirq1/
nIus0jFMHC0TWf/0ezaKOi9X7uyhmZj5zBbK2jHd3nAEKE+NZCJofwCMvWg9
/ItJhtemiZ3wOJ2XbTtBmpP3w6mpqIey7XL/3C82qYFLbOS/TOnJN+dYRy6w
hsiJAv11ef9cHh7Kp/fkvRsQicPqGzASIEmgWQVyQxapXztLW4UJAtfpcHXR
+Omc2MDpKYh7CniHBfeFo2lN9LPV/0PZHL59lm84mPMsz7OOU7EfMEQhMI6E
0MpXB3aRV7u8rPLkcLyXi1esIWjOjNKutWT1SthVhk/0EF9m0eMPz49yqPvt
9UXxRJwDEaMWk6KtnFjABqNwQEm92mLwRdrd3y6dyizJH26M7H2BX4zrLCUe
sXQTZSLxu//x5iyGl7mxsyE1J34OXhmaiJ2IgSMM6kQ3vtsdQZXfPh7K88We
HPRhNF5FMcVCAUZXC8YbWEAVsvIzeSc57K4uQ5VsEU4QGuMAbVelaA6C7KBj
Ib+aikNZ/1JYG3m82EACY2ZDBsVkB8UaLOM5PQVP65TzE2/2fYH6r83+LxYV
w+qy4cs0ROrSWNbcOBmyBhcmb/n9Zsg3z20rb8t7svJLeGLVUKmZ5zDMWWS/
+h4BMGPh+dLE6r/f312iOZvyAmNo3iWodYi2i5z0mCoHW/mpmBfb5BgEeDFe
7cEAOphRYrvDzHokHftc0PEFinGkPQcIW9hQ4CyrrAqkBDcUAGzKU1m71ald
3b/mhNyc2BrVdhZPdHiQ4BCg7KvHBRT2x3K6vyx4hk4xb1ZHDWIcwS/A2QDE
OSTOxElE+uO5Ec5ZUjTrsCRAgqxH0Lm6xIy+7Dl3sU2i7g9fX0JRBOxSFSzf
88IEIcBEKIUj1WET0YmUP3///QX3esM5MXUEcZ1NE5Wwl1wtHHhR8sRz/SB3
fws0E92BgTuAFbOIVeAvImA6J/GybctE3Gcbx/Zb0CfedvAgxQFfQGS1GVFE
OT2BOn86sPS0f+5soJgZaNd1zun2tejSA7j/2r43w4BeF/gjbyUvcQNbZxGK
8E/zQD1wpa2CyzfYD7OpJ4K2AJn/fNh/eNGsxvoXTUTXYxjMQ+wsOwaTZnlA
n4pbizYvi+YQzIDyYTWIkoXhm20HwFcz73AmWvHjfnN8QdPComxEG0sNVySu
kjnJqlVpcIgTNf3xsHnYsBH1BWk6U5lvwrbxkTeDrBAAlYWBF5kizTcF7PPh
q6ejXCI3XgwACjYDhjUc89maG8nxGl7FVxMeP4m7KAXQpU0KIJMt+bvhcX+M
bDaQY1MzIPZG2MXsAs0BkHhil+Gi4L2CtpzJKeAQiLBmBgHe3CNeXzyWsBAC
ZI2Dlxx8IEhyDQB4bLaSZlztzR5U/aKnbIWasbxss6lGYd91nlcBsjo1Zhb0
FggTK/Xu8naiivFgjIGhQTf8S5TuLL9m/2A9kfUo7cVFAL3pwZYnLPTknDbP
ihOYjuL8Gz3RhbfMLnt6vNKhwUws0/BY63g8UHg2ggeMoJOfPNVPn3CqXiGz
Y9kfNEmyIDyHymQb1bRJk837aQPieI1e7KsHrQQ35qVYjU55ZbsLTLAi/Z6I
YmuGz73DgFJ1Vrx7zw5jLMGivzHruANQmIm4w+YS6QHWEHXGQMhgw2lmLbjU
ZTBVIys1Icc/Pb27Ql1Ot1YIGCzH5gF3LMOwUI4lTLX1icX8+Zvffd3X5meg
2xdjtiDoEUolJiR4BWH3T3AOhAzAGzMT+PbrA4sWLsJk7XAQsdY6seiXtVre
asWxIdnMHOCf3/7LU7+TN+X0GdJS4iLRM7CvwJK9NZnVwOxRDGffZhJ/BE/Y
A6WC48qub5itdnnUUUvxOVhYI8BgK7zg13k4K+ytObHzP+82n9x+d5YK0gCk
lTadaeTFJCFhq0bVyRL+69e/F+Ccy/uuMxMriKRPvTt4aGngDNnzED/6NFGU
f8Xbbl5CiAfqbQH8u3nwR9BcaRZRBRGJTnvyhv8mm/p09a7s6CwsT2Znb5aE
e+BoY9gNHlxmZgb/ttm2/ceXcyJ4riqmFkPG4ThQIkE1ijAHuOjJG5ZaDxyz
e7pso5fCGcagZcASgfmZnCjIfihFc/LtTBqTiK8rr0dtDTheBTgNYSFyYI0g
O4FMcW/pXV+cWW78+S1AVuNQWFeEfWIMoubrNwOrnLu7g9y9vJ4pIXT4sQIA
0SEqGqAvgFfLwofeJ+gEnPuBjbEvlh7dwKMZY5iB35hrYV0DFihD4XllKusv
T2W7OV1xdGL7rcyqRxYMyvAd6hZ9BjQ3tc62kXdCF1Y7AMU5mdBDIZJAWmsD
oSlVLF+eHaq9AADEWmgTM98EC92gUiOYgEBSPeui+1yM8P0u8L4Fpir3Cj1I
2lkElRzXYbyZsxn1VNjaCO+yUNYO3TWcfF5LXBD/TWN5GMgZqN5MFrOwL65f
r7fZiB+lclR95GhpG4CBIV7GbKF2x7Z/qFeKjbjYOuinDWuf5tQL8IAGWipW
pRFmsi5KgM+OYjne2pkeeLhaTAFX4KgnE2ZhrezfX5aIMya9rVBqxCIwGPbp
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
* PR# 490 *
Subject: R-1.0.0 on alpha/osf1 memory glitch
From: Ray Brownrigg <Ray.Brownrigg@mcs.vuw.ac.nz>
Date: Fri, 17 Mar 2000 11:25:30 +1300 (NZDT)
-- no notes --
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 490 <==
From ray@mcs.vuw.ac.nz  Thu Mar 16 23:25:28 2000
Received: from kaukau.mcs.vuw.ac.nz (kaukau.mcs.vuw.ac.nz [130.195.5.20])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id XAA21828
	for <r-bugs@biostat.ku.dk>; Thu, 16 Mar 2000 23:25:25 +0100 (MET)
Received: from aqua.mcs.vuw.ac.nz (aqua.mcs.vuw.ac.nz [130.195.6.201])
	by kaukau.mcs.vuw.ac.nz (8.10.0.Beta6/8.10.0.Beta6) with ESMTP id e2GMPUS01452
	for <r-bugs@biostat.ku.dk>; Fri, 17 Mar 2000 11:25:31 +1300 (NZDT)
From: Ray Brownrigg <Ray.Brownrigg@mcs.vuw.ac.nz>
Received: (from ray@localhost)
	by aqua.mcs.vuw.ac.nz (8.9.2/8.8.6) id LAA25041
	for r-bugs@biostat.ku.dk; Fri, 17 Mar 2000 11:25:30 +1300 (NZDT)
Date: Fri, 17 Mar 2000 11:25:30 +1300 (NZDT)
Message-Id: <200003162225.LAA25041@aqua.mcs.vuw.ac.nz>
To: r-bugs@biostat.ku.dk
Subject: R-1.0.0 on alpha/osf1 memory glitch

Digital Alpha (various), Digital UNIX V4.0[EF], R-1.0.0, gcc, f77

When using batch mode with the save option, an error message is issued.
However [I have just discovered that] it appears that the operation
does complete, i.e. the .RData file is saved successfully.  The main
problem is that the return code is non-zero (and so it is impossible to
distinguish this "non-error" from some other error in a script).

Reproduce by:

    bats>  echo 'x <- 1' | R --save
    
    R : Copyright 2000, The R Development Core Team
    Version 1.0.0  (February 29, 2000)
    
    R is free software and comes with ABSOLUTELY NO WARRANTY.
    You are welcome to redistribute it under certain conditions.
    Type    "?license" or "?licence" for distribution details.
    
    R is a collaborative project with many contributors.
    Type    "?contributors" for a list.
    
    Type    "demo()" for some demos, "help()" for on-line help, or
            "help.start()" for a HTML browser interface to help.
    Type    "q()" to quit R.
    
    > x <- 1
    >
    xmalloc: out of virtual memory
    bats> 

Note that an alternate form that achieves the same desired effect does
not issue any error messages:

    echo 'x <- 1; save(list = ls(), file = ".RData")' | R --no-save

I can't find any record of the configure summary output (is it saved
anywhere, or does it only appear on the screen?) but I could reproduce
this if necessary.

Ray Brownrigg
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
* PR# 491 *
Subject: lag
From: kthaka@uta.fi
Date: Fri, 17 Mar 2000 10:16:09 +0100 (MET)
-- no notes --
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 491 <==
From kthaka@uta.fi  Fri Mar 17 10:16:10 2000
Received: from localhost (blueberry [130.225.108.193])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id KAA24525
	for <R-bugs@biostat.ku.dk>; Fri, 17 Mar 2000 10:16:09 +0100 (MET)
Date: Fri, 17 Mar 2000 10:16:09 +0100 (MET)
From: kthaka@uta.fi
Message-Id: <200003170916.KAA24525@pubhealth.ku.dk>
To: R-bugs@biostat.ku.dk
Subject: lag

Full_Name: Hannu Kahra
Version: 1.0.0
OS: Windows
Submission from: (NULL) (153.1.50.127)


x1 <- lag(x, k=1) returns the original series x. The time series is not
shiftet at all. Only the time is shiftet: for x1 new start = old start -1 
and new end = old end -1. When I run, e.g. lm(x~x1) the result is not what
I expect. Both x and x1 are time series. Is this a bug or am I forgetting
something?

Regards
Hannu Kahra 

==> 491.followup.1 <==
From ripley@stats.ox.ac.uk  Fri Mar 17 10:38:01 2000
Received: from toucan.stats.ox.ac.uk (toucan.stats.ox.ac.uk [163.1.20.20])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id KAA24879
	for <R-bugs@biostat.ku.dk>; Fri, 17 Mar 2000 10:38:00 +0100 (MET)
Received: from max120.public.ox.ac.uk (max120.public.ox.ac.uk [192.76.27.120])
	by toucan.stats.ox.ac.uk (8.9.0/8.9.0) with ESMTP id JAA22034;
	Fri, 17 Mar 2000 09:38:06 GMT
Date: Fri, 17 Mar 2000 09:38:18 +0000 (GMT)
From: Prof Brian D Ripley <ripley@stats.ox.ac.uk>
Sender: ripley@auk.stats
To: kthaka@uta.fi
cc: r-devel@stat.math.ethz.ch, R-bugs@biostat.ku.dk
Subject: Re: [Rd] lag (PR#491)
In-Reply-To: <200003170916.KAA24535@pubhealth.ku.dk>
Message-ID: <Pine.GSO.4.05.10003170931560.26211-100000@auk.stats>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII

On Fri, 17 Mar 2000 kthaka@uta.fi wrote:

> Full_Name: Hannu Kahra
> Version: 1.0.0
> OS: Windows
> Submission from: (NULL) (153.1.50.127)
> 
> 
> x1 <- lag(x, k=1) returns the original series x. The time series is not
> shiftet at all. Only the time is shiftet: for x1 new start = old start -1 
> and new end = old end -1. When I run, e.g. lm(x~x1) the result is not what

So that is _not_ the original series!

> I expect. Both x and x1 are time series. Is this a bug or am I forgetting
> something?

Your description is exactly as documented:

Lag a Time Series

Description:

     Computed a lagged version of a time series, shifting the time base
     back by `k' observations.

[Please read the documentation before submitting a bug report. The FAQ
tells you what a bug is.]

Don't apply regression (a non-time-series technique) to time series, and
expect the implicit conversion to vectors to preserve the time alignment.
Do something like

library(ts)
data(lh)
df <- cbind(x=lh, x1 =lag(lh, 1))
lm(x ~ x1, data=df)

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
* PR# 492 *
Subject: the R bug
From: "Robertas Geistoraitis" <robertasg@takas.lt>
Date: Fri, 17 Mar 2000 17:17:23 +0100
-- no notes --
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 492 <==
From robertasg@takas.lt  Fri Mar 17 16:35:37 2000
Received: from stat.math.ethz.ch (daemon@hypatia.ethz.ch [129.132.58.23])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id QAA01198
	for <R-bugs@biostat.ku.dk>; Fri, 17 Mar 2000 16:35:36 +0100 (MET)
Received: (from daemon@localhost)
	by stat.math.ethz.ch (8.9.1/8.9.1) id QAA04174
	for <r-bugs@hypatia.math.ethz.ch>; Fri, 17 Mar 2000 16:35:47 +0100 (MET)
Received: from srvr3.telecom.lt(212.59.0.2), claiming to be "mail.takas.lt"
 via SMTP by hypatia, id smtpdAAAa0010y; Fri Mar 17 16:35:36 2000
Received: from centras (knban6.ot.lt [194.176.33.198])
	by mail.takas.lt (8.9.1/8.9.0) with SMTP id RAA05838
	for <r-bugs@lists.r-project.org>; Fri, 17 Mar 2000 17:34:50 +0200 (EET)
Message-ID: <000801bf902c$4df92e80$c621b0c2@betonika.lt>
From: "Robertas Geistoraitis" <robertasg@takas.lt>
To: <r-bugs@stat.math.ethz.ch>
Subject: the R bug
Date: Fri, 17 Mar 2000 17:17:23 +0100
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----=_NextPart_000_0005_01BF9034.A9183BA0"
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 5.00.2615.200
X-MimeOLE: Produced By Microsoft MimeOLE V5.00.2615.200

This is a multi-part message in MIME format.

------=_NextPart_000_0005_01BF9034.A9183BA0
Content-Type: text/plain;
	charset="iso-8859-4"
Content-Transfer-Encoding: quoted-printable

Hello, i am from Lithuania=20
I am workink with program R. But i have problem, if i need work with =
more als 220Mb disk space. Free disk space i have 2Gb.=20
Can you help me??

Sincerly Robertas Geistoraitis form Lithuania from Genetic Laboratory=20
University of Veterinary



------=_NextPart_000_0005_01BF9034.A9183BA0
Content-Type: text/html;
	charset="iso-8859-4"
Content-Transfer-Encoding: quoted-printable

<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<HTML><HEAD>
<META content=3D"text/html; charset=3Diso-8859-4" =
http-equiv=3DContent-Type>
<META content=3D"MSHTML 5.00.2614.3500" name=3DGENERATOR>
<STYLE></STYLE>
</HEAD>
<BODY bgColor=3D#ffffff>
<DIV><FONT face=3DArial size=3D2>Hello, i am from Lithuania =
</FONT></DIV>
<DIV><FONT face=3DArial size=3D2>I am workink with program R. But i have =
problem, if=20
i need work with more als 220Mb disk space. Free disk space i have 2Gb.=20
</FONT></DIV>
<DIV><FONT face=3DArial size=3D2>Can you help me??</FONT></DIV>
<DIV>&nbsp;</DIV>
<DIV><FONT face=3DArial size=3D2>Sincerly Robertas Geistoraitis form =
Lithuania from=20
Genetic Laboratory </FONT></DIV>
<DIV><FONT face=3DArial size=3D2>University of Veterinary</FONT></DIV>
<DIV>&nbsp;</DIV>
<DIV>&nbsp;</DIV></BODY></HTML>

------=_NextPart_000_0005_01BF9034.A9183BA0--

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
* PR# 493 *
Subject: optim: problem with additional arguments
From: "Dirk F. Moore" <dirk@surfer.sbm.temple.edu>
Date: Fri, 17 Mar 2000 12:05:32 -0500
-- no notes --
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 493 <==
From dirk@surfer.sbm.temple.edu  Fri Mar 17 18:02:47 2000
Received: from surfer.sbm.temple.edu (root@surfer.sbm.temple.edu [155.247.185.2])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id SAA01902
	for <r-bugs@biostat.ku.dk>; Fri, 17 Mar 2000 18:02:46 +0100 (MET)
Received: from sbm.temple.edu (dirk.sbm.temple.edu [155.247.29.3])
	by surfer.sbm.temple.edu (8.9.3/8.9.3) with ESMTP id MAA52105
	for <r-bugs@biostat.ku.dk>; Sat, 18 Mar 2000 12:01:36 -0500 (EST)
Message-ID: <38D265DC.AD8F7349@sbm.temple.edu>
Date: Fri, 17 Mar 2000 12:05:32 -0500
From: "Dirk F. Moore" <dirk@surfer.sbm.temple.edu>
X-Mailer: Mozilla 4.7 [en] (Win98; I)
X-Accept-Language: en
MIME-Version: 1.0
To: r-bugs@biostat.ku.dk
Subject: optim: problem with additional arguments
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit

The R function "optim" fails when a function requires additional
arguments, if the option "hessian=T" is specified.  I am using R Version
1.0.0 on Windows 98.

Here is an example of the Rosenbrock Banana function from the optim help
example, with the function and gradient modified to take an additonal
argument.  Note that the call to optim works fine unless a hessian is
requested.


     ## Rosenbrock Banana function, modified to take an additional
argument
     fra <- function(x,a) {
         x1 <- x[1]
         x2 <- x[2]
         a * (x2 - x1 * x1)^2 + (1 - x1)^2
     }

     grra <- function(x,a) {
         x1 <- x[1]
         x2 <- x[2]
         c(-4*a * x1 * (x2 - x1 * x1) - 2 * (1 - x1), 2*a * (x2 - x1 *
x1))
     }
a <- 100
xx <- c(-2.1,1)
optim(c(-1.2,1), fra, grra, method = "BFGS",a=100)             # this
works
optim(c(-1.2,1), fra, grra, method = "BFGS",hessian=T,a=100)   # this
doesn't



Dirk Moore
Dept. of Statistics
Temple University
dirk@sbm.temple.edu




==> 493.reply.1 <==
From pd@biostat.ku.dk  Fri Mar 17 19:41:05 2000
Received: from biostat.ku.dk (blueberry [130.225.108.193])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id TAA02402;
	Fri, 17 Mar 2000 19:41:04 +0100 (MET)
Received: (from pd@localhost)
	by biostat.ku.dk (8.9.3/8.9.3) id TAA06114;
	Fri, 17 Mar 2000 19:43:42 +0100
Sender: pd@blueberry.kubism.ku.dk
To: dirk@surfer.sbm.temple.edu
Cc: r-devel@stat.math.ethz.ch, R-bugs@biostat.ku.dk
Subject: Re: [Rd] optim: problem with additional arguments (PR#493)
References: <200003171702.SAA01912@pubhealth.ku.dk>
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 17 Mar 2000 19:43:42 +0100
In-Reply-To: dirk@surfer.sbm.temple.edu's message of "Fri, 17 Mar 2000 18:02:48 +0100 (MET)"
Message-ID: <x2zorxfndt.fsf@blueberry.kubism.ku.dk>
Lines: 30
X-Mailer: Gnus v5.7/Emacs 20.4
Mime-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: 7bit

dirk@surfer.sbm.temple.edu writes:

> The R function "optim" fails when a function requires additional
> arguments, if the option "hessian=T" is specified.  I am using R Version
> 1.0.0 on Windows 98.
....
> optim(c(-1.2,1), fra, grra, method = "BFGS",a=100)             # this
> works
> optim(c(-1.2,1), fra, grra, method = "BFGS",hessian=T,a=100)   # this
> doesn't

Yes. However, you can easily fix it for yourself. In optim(), the line

    hess <- .Internal(optimhess(res$par, fn, gr, con))

needs to be modified along the lines of

    res <- .Internal(optim(par, function(par) fn(par, ...),
                           function(par) gr(par, ...),
                           method, con, lower, upper))

(although that might get you in trouble if gr is NULL, so a permanent
fix would be slightly different.)


-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
* PR# 494 *
Subject:  minor problem in barplot legend 
From: Ben Bolker <bolker@zoo.ufl.edu>
Date: Mon, 20 Mar 2000 17:31:36 -0500
-- no notes --
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 494 <==
From ben@bolker.zoo.ufl.edu  Mon Mar 20 23:34:48 2000
Received: from triarch.zoo.ufl.edu (triarch.zoo.ufl.edu [128.227.60.248])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id XAA19624
	for <r-bugs@biostat.ku.dk>; Mon, 20 Mar 2000 23:34:47 +0100 (MET)
Received: from bolker.zoo.ufl.edu ([10.227.60.45]) by triarch.zoo.ufl.edu
          (Netscape Messaging Server 3.5)  with ESMTP id 304;
          Mon, 20 Mar 2000 17:34:57 -0500
Received: (from ben@localhost)
	by bolker.zoo.ufl.edu (8.9.3/8.9.3) id RAA08685;
	Mon, 20 Mar 2000 17:31:36 -0500
Date: Mon, 20 Mar 2000 17:31:36 -0500
From: Ben Bolker <bolker@zoo.ufl.edu>
Message-Id: <200003202231.RAA08685@bolker.zoo.ufl.edu>
To: r-bugs@biostat.ku.dk
Subject:  minor problem in barplot legend 
Cc: ben@bolker.zoo.ufl.edu


  If length(col)<length(legend.txt) in barplot, then the reversal of
the legend leads to funny results.  For example:

x <- matrix(runif(25),nrow=5)
barplot(x,col=c("red","green","black"),legend=as.character(1:5),ylim=c(0,5))

The (easy) fix is to replace

       legend.col <- col

with

         legend.col <- rep(col,length=length(legend.text))

on line 94 of barplot.default.

  Trivia, but hey, it confused me for a little while, it might as well
be fixed.

--please do not edit the information below--

Version:
 platform = i686-unknown-linux
 arch = i686
 os = linux
 system = i686, linux
 status = 
 major = 1
 minor = 0.0
 year = 2000
 month = February
 day = 29
 language = R

Search Path:
 .GlobalEnv, Autoloads, package:base

==> 494.reply.1 <==
From maechler@stat.math.ethz.ch  Wed Mar 22 11:40:44 2000
Received: from stat.math.ethz.ch (daemon@hypatia.ethz.ch [129.132.58.23])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id LAA07965
	for <R-bugs@biostat.ku.dk>; Wed, 22 Mar 2000 11:40:42 +0100 (MET)
Received: (from daemon@localhost)
	by stat.math.ethz.ch (8.9.1/8.9.1) id LAA19322;
	Wed, 22 Mar 2000 11:40:56 +0100 (MET)
Received: from lynne(129.132.58.30), claiming to be "lynne.ethz.ch"
 via SMTP by hypatia, id smtpdAAAa004hs; Wed Mar 22 11:40:47 2000
Received: (maechler@localhost) by lynne.ethz.ch (8.9.3/D-MATH-client) id LAA07022; Wed, 22 Mar 2000 11:40:41 +0100
X-Authentication-Warning: lynne.ethz.ch: maechler set sender to maechler@stat.math.ethz.ch using -f
From: Martin Maechler <maechler@stat.math.ethz.ch>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
Message-ID: <14552.41769.636394.376038@lynne.ethz.ch>
Date: Wed, 22 Mar 2000 11:40:41 +0100 (MET)
To: Ben Bolker <bolker@zoo.ufl.edu>
Cc: R-bugs@biostat.ku.dk
Subject: Re: [Rd] minor problem in barplot legend (PR#494)
In-Reply-To: <200003202234.XAA19634@pubhealth.ku.dk>
References: <200003202234.XAA19634@pubhealth.ku.dk>
X-Mailer: VM 6.75 under Emacs 20.6.1
Reply-To: Martin Maechler <maechler@stat.math.ethz.ch>

>>>>> "Ben" == Ben Bolker <bolker@zoo.ufl.edu> writes:

    Ben> If length(col)<length(legend.txt) in barplot, then the reversal of
    Ben> the legend leads to funny results.  For example:

    Ben> x <- matrix(runif(25),nrow=5)
    Ben> barplot(x,col=c("red","green","black"),legend=as.character(1:5),ylim=c(0,5))

    Ben> The (easy) fix is to replace

    Ben>     legend.col <- col

    Ben> with

    Ben>	legend.col <- rep(col,length=length(legend.text))

    Ben> on line 94 of barplot.default.

    Ben> Trivia, but hey, it confused me for a little while, it might as well
    Ben> be fixed.

Now done for "R-release", i.e. the (unreleased) future R 1.0.1

Thank you, Ben!
Martin
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
* PR# 495 *
Subject: barplot
From: skala@incoma.cz
Date: Tue, 21 Mar 2000 09:20:33 +0100 (MET)
-- no notes --
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 495 <==
From skala@incoma.cz  Tue Mar 21 09:20:34 2000
Received: from localhost (blueberry [130.225.108.193])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id JAA22354
	for <R-bugs@biostat.ku.dk>; Tue, 21 Mar 2000 09:20:33 +0100 (MET)
Date: Tue, 21 Mar 2000 09:20:33 +0100 (MET)
From: skala@incoma.cz
Message-Id: <200003210820.JAA22354@pubhealth.ku.dk>
To: R-bugs@biostat.ku.dk
Subject: barplot

Full_Name: Zdenek Skala
Version: 1.0.0
OS: MS Windows 95
Submission from: (NULL) (194.108.127.14)


Dear all,
a problem with barplot() was already discussed on R-help for R 0.90.0 - sorry,
if this is a known bug, but I was unable to find it in the bugs database.
In:
> barplot(c(.1,.5,1), ylim=(0:1))
or
> barplot(c(.1,.5,1), ylim=c(0,1))
the y axis is drawn from 0.2 to 0.8, in:
> barplot(c(.1,.5,1))
the y axis is drawn from 0.0 to 0.8.
As I was notified earlier by Peter Dalgaard, "the axis settings use yaxs='i' 
(or xaxs if horizontal) which sets the plot boundaries equal to the ylim 
(stated or computed) and marks the axes "internally". The endpoints of the 
axes are not considered to be internal."
Sorry again if this is already reported.
With regards
Zdenek Skala

==> 495.reply.1 <==
From pd@biostat.ku.dk  Tue Mar 21 09:53:22 2000
Received: from biostat.ku.dk (blueberry [130.225.108.193])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id JAA22811;
	Tue, 21 Mar 2000 09:53:21 +0100 (MET)
Received: (from pd@localhost)
	by biostat.ku.dk (8.9.3/8.9.3) id JAA13278;
	Tue, 21 Mar 2000 09:56:30 +0100
Sender: pd@blueberry.kubism.ku.dk
To: skala@incoma.cz
Cc: r-devel@stat.math.ethz.ch, R-bugs@biostat.ku.dk
Subject: Re: [Rd] barplot (PR#495)
References: <200003210820.JAA22364@pubhealth.ku.dk>
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 21 Mar 2000 09:56:30 +0100
In-Reply-To: skala@incoma.cz's message of "Tue, 21 Mar 2000 09:20:35 +0100 (MET)"
Message-ID: <x2aejs66rl.fsf@blueberry.kubism.ku.dk>
Lines: 21
X-Mailer: Gnus v5.7/Emacs 20.4
Mime-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: 7bit

skala@incoma.cz writes:

> > barplot(c(.1,.5,1), ylim=c(0,1))
> the y axis is drawn from 0.2 to 0.8, in:

> As I was notified earlier by Peter Dalgaard, "the axis settings use yaxs='i' 
> (or xaxs if horizontal) which sets the plot boundaries equal to the ylim 
> (stated or computed) and marks the axes "internally". The endpoints of the 
> axes are not considered to be internal."
> Sorry again if this is already reported.

I actually thought we had that one fixed, but obviously not ...
As usual, the workaround is to extend the ylim a tiny bit:

barplot(c(.1,.5,1), ylim=c(-.001,1.001))

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
* PR# 496 *
From: bonneau@epi.roazhon.inra.fr (en148)
Date: Tue, 21 Mar 2000 10:57:13 +0100 (MET)
-- no notes --
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 496 <==
From bonneau@epi.roazhon.inra.fr  Tue Mar 21 11:40:23 2000
Received: from stat.math.ethz.ch (daemon@hypatia.ethz.ch [129.132.58.23])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id LAA24613
	for <R-bugs@biostat.ku.dk>; Tue, 21 Mar 2000 11:40:21 +0100 (MET)
Received: (from daemon@localhost)
	by stat.math.ethz.ch (8.9.1/8.9.1) id LAA00472
	for <r-bugs@hypatia.math.ethz.ch>; Tue, 21 Mar 2000 11:40:33 +0100 (MET)
Received: from epi.roazhon.inra.fr(194.167.76.1)
 via SMTP by hypatia, id smtpdAAAa0007L; Tue Mar 21 11:40:28 2000
Received: from (bonneau@localhost)
          by epi.roazhon.inra.fr (8.8.8/jtpda-5.3) id KAA09010
          for r-bugs@lists.r-project.org; Tue, 21 Mar 2000 10:57:13 +0100 (MET)
Date: Tue, 21 Mar 2000 10:57:13 +0100 (MET)
From: bonneau@epi.roazhon.inra.fr (en148)
Message-Id: <200003210957.KAA09010@epi.roazhon.inra.fr>

I am using R 0.65.1 under linux (Redhat 6.0),
and I have a problem with the est.variogram function when the first lag is empty (I am trying to estimate anisotropic varios)

fittedpnt<-point(fitted, x="X2", y="X3")
fittedpair<-pair(fittedpnt, num.lags=15, type="anisotropic", theta=60, dtheta=20, maxdist=maxfittedist)
fittedvario<-est.variogram(fittedpnt, fittedpair, "fit")

With my datas I have no pair in lags 1 to 3 and the error message is :
Error in psort(x, partial) : index 0 outside bounds

What can I do, in order to fix the bug ?
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
* PR# 497 *
Subject: par help wrong: xlog & ylog
From: wsi@gcal.ac.uk
Date: Tue, 21 Mar 2000 14:57:57 +0100 (MET)
-- no notes --
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 497 <==
From wsi@gcal.ac.uk  Tue Mar 21 14:57:58 2000
Received: from localhost (blueberry [130.225.108.193])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id OAA29215
	for <R-bugs@biostat.ku.dk>; Tue, 21 Mar 2000 14:57:57 +0100 (MET)
Date: Tue, 21 Mar 2000 14:57:57 +0100 (MET)
From: wsi@gcal.ac.uk
Message-Id: <200003211357.OAA29215@pubhealth.ku.dk>
To: R-bugs@biostat.ku.dk
Subject: par help wrong: xlog & ylog

Full_Name: 
Version: 1.0.0
OS: linux
Submission from: (NULL) (193.62.250.209)


    

?par lists and describes xlog and ylog, though these are obsolete. It does not
list
log. I found out about log from ?plot.defaults--so that help is OK.

==> 497.reply.1 <==
From pd@biostat.ku.dk  Tue Mar 21 15:14:51 2000
Received: from biostat.ku.dk (blueberry [130.225.108.193])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id PAA29492;
	Tue, 21 Mar 2000 15:14:50 +0100 (MET)
Received: (from pd@localhost)
	by biostat.ku.dk (8.9.3/8.9.3) id PAA13502;
	Tue, 21 Mar 2000 15:18:04 +0100
Sender: pd@blueberry.kubism.ku.dk
To: wsi@gcal.ac.uk
Cc: r-devel@stat.math.ethz.ch, R-bugs@biostat.ku.dk
Subject: Re: [Rd] par help wrong: xlog & ylog (PR#497)
References: <200003211357.OAA29225@pubhealth.ku.dk>
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 21 Mar 2000 15:18:04 +0100
In-Reply-To: wsi@gcal.ac.uk's message of "Tue, 21 Mar 2000 14:57:59 +0100 (MET)"
Message-ID: <x266ugs8yr.fsf@blueberry.kubism.ku.dk>
Lines: 26
X-Mailer: Gnus v5.7/Emacs 20.4
Mime-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: 7bit

wsi@gcal.ac.uk writes:

> Full_Name: 
> Version: 1.0.0
> OS: linux
> Submission from: (NULL) (193.62.250.209)
> 
> 
>     
> 
> ?par lists and describes xlog and ylog, though these are obsolete. It does not
> list
> log. I found out about log from ?plot.defaults--so that help is OK.

Not a bug, not obsolete, and works as documented:

> plot(1,log="y")
> par("ylog")    
[1] TRUE


-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

==> 497.followup.1 <==
From wsi@gcal.ac.uk  Tue Mar 21 15:24:30 2000
Received: from localhost.localdomain (IDENT:root@cbe207.gcal.ac.uk [193.62.250.209])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id PAA29571
	for <R-bugs@biostat.ku.dk>; Tue, 21 Mar 2000 15:24:29 +0100 (MET)
Received: from localhost (wsimpson@localhost)
	by localhost.localdomain (8.9.3/8.9.3) with ESMTP id PAA09918;
	Tue, 21 Mar 2000 15:27:26 GMT
X-Authentication-Warning: localhost.localdomain: wsimpson owned process doing -bs
Date: Tue, 21 Mar 2000 15:27:25 +0000 (GMT)
From: Bill Simpson <wsi@gcal.ac.uk>
X-Sender: wsimpson@localhost.localdomain
To: r-devel@stat.math.ethz.ch
cc: R-bugs@biostat.ku.dk
Subject: Re: [Rd] par help wrong: xlog & ylog (PR#497)
In-Reply-To: <200003211357.OAA29225@pubhealth.ku.dk>
Message-ID: <Pine.LNX.4.10.10003211522090.9897-100000@localhost.localdomain>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII


> Full_Name: 
> Version: 1.0.0
> OS: linux
> Submission from: (NULL) (193.62.250.209)
> 
> ?par lists and describes xlog and ylog, though these are obsolete. It does not
> list
> log. I found out about log from ?plot.defaults--so that help is OK.
Reading through ?par again, I see that xlog and ylog are "read only". (I
initially thought xlog and ylog were obsolete because I could set them) I
don't find the help to be very clear:

ylog: R.O..  A logical value (see `log' in `plot.default').  See
          `xlog' above.

Instead of (see `log' in `plot.default'), why not have log listed here in
the par help? Or is it an argument to plot()? In which case, why not list
it in the help for plot()? I find it hard to find info for plots because
this info seems to be spread out in several places

Bill



==> 497.followup.2 <==
From wsi@gcal.ac.uk  Tue Mar 21 15:27:34 2000
Received: from localhost.localdomain (IDENT:root@cbe207.gcal.ac.uk [193.62.250.209])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id PAA29628;
	Tue, 21 Mar 2000 15:27:34 +0100 (MET)
Received: from localhost (wsimpson@localhost)
	by localhost.localdomain (8.9.3/8.9.3) with ESMTP id PAA09925;
	Tue, 21 Mar 2000 15:30:31 GMT
X-Authentication-Warning: localhost.localdomain: wsimpson owned process doing -bs
Date: Tue, 21 Mar 2000 15:30:31 +0000 (GMT)
From: Bill Simpson <wsi@gcal.ac.uk>
X-Sender: wsimpson@localhost.localdomain
To: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
cc: wsi@gcal.ac.uk, r-devel@stat.math.ethz.ch, R-bugs@biostat.ku.dk
Subject: Re: [Rd] par help wrong: xlog & ylog (PR#497)
In-Reply-To: <x266ugs8yr.fsf@blueberry.kubism.ku.dk>
Message-ID: <Pine.LNX.4.10.10003211528091.9897-100000@localhost.localdomain>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII



On 21 Mar 2000, Peter Dalgaard BSA wrote:

> wsi@gcal.ac.uk writes:
> 
> > Full_Name: 
> > Version: 1.0.0
> > OS: linux
> > Submission from: (NULL) (193.62.250.209)
> > 
> > 
> >     
> > 
> > ?par lists and describes xlog and ylog, though these are obsolete. It does not
> > list
> > log. I found out about log from ?plot.defaults--so that help is OK.
> 
> Not a bug, not obsolete, and works as documented:
True. True. Not documented in plot help. It is documented in plot.default.
Why not in par, where xlog and ylog are? I find it confusing.

> 
> > plot(1,log="y")
> > par("ylog")    
> [1] TRUE

Bill


==> 497.reply.2 <==
From maechler@stat.math.ethz.ch  Tue Mar 21 17:05:40 2000
Received: from stat.math.ethz.ch (daemon@hypatia.ethz.ch [129.132.58.23])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id RAA00830
	for <R-bugs@biostat.ku.dk>; Tue, 21 Mar 2000 17:05:39 +0100 (MET)
Received: (from daemon@localhost)
	by stat.math.ethz.ch (8.9.1/8.9.1) id RAA06904;
	Tue, 21 Mar 2000 17:05:53 +0100 (MET)
Received: from lynne(129.132.58.30), claiming to be "lynne.ethz.ch"
 via SMTP by hypatia, id smtpdAAAa001fo; Tue Mar 21 17:05:44 2000
Received: (maechler@localhost) by lynne.ethz.ch (8.9.3/D-MATH-client) id RAA03693; Tue, 21 Mar 2000 17:05:43 +0100
X-Authentication-Warning: lynne.ethz.ch: maechler set sender to maechler@stat.math.ethz.ch using -f
From: Martin Maechler <maechler@stat.math.ethz.ch>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
Message-ID: <14551.40407.662833.214623@lynne.ethz.ch>
Date: Tue, 21 Mar 2000 17:05:43 +0100 (MET)
To: Bill Simpson <wsi@gcal.ac.uk>
Cc: R-bugs@biostat.ku.dk
Subject: Re: [Rd] par help wrong: xlog & ylog (PR#497)
In-Reply-To: <Pine.LNX.4.10.10003211528091.9897-100000@localhost.localdomain>
References: <x266ugs8yr.fsf@blueberry.kubism.ku.dk>
	<Pine.LNX.4.10.10003211528091.9897-100000@localhost.localdomain>
X-Mailer: VM 6.75 under Emacs 20.6.1
Reply-To: Martin Maechler <maechler@stat.math.ethz.ch>


>>>>> "Bill" == Bill Simpson <wsi@gcal.ac.uk> writes:

    Bill> On 21 Mar 2000, Peter Dalgaard BSA wrote:

    >> wsi@gcal.ac.uk writes:
    >> 
    >> > Full_Name: 
    >> > Version: 1.0.0
    >> > OS: linux
    >> > Submission from: (NULL) (193.62.250.209)
    >> > 
    >> > 
    >> >     
    >> > 
    >> > ?par lists and describes xlog and ylog, though these are
    >> > obsolete. It does not list log. I found out about log from
    >> > ?plot.defaults--so that help is OK.
    >> 
    >> Not a bug, not obsolete, and works as documented:
    Bill> True. True. Not documented in plot help. It is documented in plot.default.
    Bill> Why not in par, where xlog and ylog are? I find it confusing.

    >> 
    >> > plot(1,log="y")
    >> > par("ylog")    
    >> [1] TRUE

log is *not* a valid  par(.) argument, what makes you think it should be
documented there ?

  > par(log = "x")
  Warning message: 
  parameter "log" can't be set in: par(args) 


It *is* a valid argument to most(?) plot methods;
plot is the generic function, and the idea is that it only documents what
*ALL* plot methods have in common.  This is the reason that "log = .." is
documented with the default  plot method, plot.default.

You might have a point:  We could (should we?) consider requiring a 
"log =" argument for *ALL* plot methods, and then have it 
documented and possibly even among the listed arguements (the "non ..." ones)
of the generic  plot.

Opinions?

==> 497.reply.3 <==
From thomas@biostat.washington.edu  Tue Mar 21 17:33:44 2000
Received: from mail.biostat.washington.edu (mail.biostat.washington.edu [128.95.113.21])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id RAA01034
	for <R-bugs@biostat.ku.dk>; Tue, 21 Mar 2000 17:33:42 +0100 (MET)
Received: from mail.biostat.washington.edu (mail.biostat.washington.edu [128.95.113.21])
	by mail.biostat.washington.edu (8.9.3+Sun/8.9.1-fetrow-99-05-16b) with ESMTP id IAA14766;
	Tue, 21 Mar 2000 08:33:51 -0800 (PST)
Date: Tue, 21 Mar 2000 08:33:51 -0800 (PST)
From: Thomas Lumley <thomas@biostat.washington.edu>
To: maechler@stat.math.ethz.ch
cc: r-devel@stat.math.ethz.ch, R-bugs@biostat.ku.dk
Subject: Re: [Rd] par help wrong: xlog & ylog (PR#497)
In-Reply-To: <200003211605.RAA00840@pubhealth.ku.dk>
Message-ID: <Pine.GSO.4.21.0003210829030.14323-100000@mail.biostat.washington.edu>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII

On Tue, 21 Mar 2000 maechler@stat.math.ethz.ch wrote:

> You might have a point:  We could (should we?) consider requiring a 
> "log =" argument for *ALL* plot methods, and then have it 
> documented and possibly even among the listed arguements (the "non ..." ones)
> of the generic  plot.
> 
> Opinions?
> 

Aaagh! No!  What about plots that intrinsically contain zero x or y
values, such as mortality plots (ie upside-down survival plots) or
Receiver Operating Characteristic curves?

Going further, some plot methods have a ... option but don't pass it to
plot. If the method uses plot to set up axes and then calls points() or
lines() to handle the actual drawing it may make sense to pass ... to
points() or lines().  These functions don't understand log=, so it would
be necessary to have an explicit log= option for the method, even if it
was completely inappropriate.

	-thomas

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
* PR# 498 *
Subject: Use of Rd2txt on .Rd files from rw-1.0.0
Subject: Use of Rd2txt on .Rd files from rw-1.0.0
From: John Maindonald <john.maindonald@anu.edu.au>
Date: Wed, 22 Mar 2000 09:15:20 +1100 (EST)
-- no notes --
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 498 <==
From john.maindonald@leonard.anu.edu.au  Tue Mar 21 23:15:11 2000
Received: from leonard.anu.edu.au (leonard.anu.edu.au [150.203.2.15])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id XAA03286
	for <r-bugs@biostat.ku.dk>; Tue, 21 Mar 2000 23:15:09 +0100 (MET)
Received: (from e980153@localhost)
	by leonard.anu.edu.au (8.9.3/8.9.3) id JAA15521
	for r-bugs@biostat.ku.dk; Wed, 22 Mar 2000 09:15:20 +1100 (EST)
Date: Wed, 22 Mar 2000 09:15:20 +1100 (EST)
From: John Maindonald <john.maindonald@anu.edu.au>
Message-Id: <200003212215.JAA15521@leonard.anu.edu.au>
To: r-bugs@biostat.ku.dk
Subject: Use of Rd2txt on .Rd files from rw-1.0.0

From e980153 Tue Mar 21 18:50:55 2000
To: bates@stat.wisc.edu
Subject: Use of Rd2txt on .Rd files from rw-1.0.0

Files generated using prompt.data.frame() under rw-1.0.0 get
scrambled (mildly) when I process them under Rd2txt on Solaris,
(using R-devel 1.1.0).
Files generated under R-devel 1.1 on Solaris are processed ok.

The .Rd files from the two sources look identical. The problem 
is likely to be with Rd2txt, I guess.

Here is an example.  I give only the first part of the output,
where the problem occurs.
=========================================================
Kiwifruit data

Description:

 Kiwifruitkiwishade' data frame has 48 rows and 3 columns.
     shading trial

Format:

     This data frame contains the following columns:

      yield a numeric vector

 `west'  ck a factor with levels

 `Feb2May'  a factor with levels
            `none' 

Details:

............
=========================================================

Here is what I expected to get, and do get when the .Rd file
is generated under Solaris:

=========================================================
Kiwifruit data

Description:

     The `kiwishade' data frame has 48 rows and 3 columns. Kiwifruit
     shading trial

Format:

     This data frame contains the following columns:

      yield a numeric vector

      block a factor with levels `east'  `north'  `west' 

      shade a factor with levels `Aug2Dec'  `Dec2Feb'  `Feb2May' 
            `none'
............
=========================================================

Here is the .Rd file, from the PC, then editing using emacs
under Solaris.  However the same scrambling occurs when the
files is processed without editing.
=========================================================
\name{kiwishade}
\alias{kiwishade}
\non_function{}
\title{Kiwifruit data}
\description{
The \code{kiwishade} data frame has 48 rows and 3 columns.
Kiwifruit shading trial
}
\format{
This data frame contains the following columns:
\describe{
\item{yield}{
a numeric vector
}
\item{block}{
a factor with levels
\code{east} 
\code{north} 
\code{west} 
}
\item{shade}{
a factor with levels
\code{Aug2Dec} 
\code{Dec2Feb} 
\code{Feb2May} 
\code{none} 
}
}
}
\details{

}
\source{
Snelgar at al.
}
\examples{
data(kiwishade)
}
\keyword{datasets}
=========================================================

John Maindonald               email : john.maindonald@anu.edu.au        
Statistical Consulting Unit,  phone : (6249)3998        
c/o CMA, SMS,                 fax   : (6249)5549  
John Dedman Mathematical Sciences Building
Australian National University
Canberra ACT 0200
Australia

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
* PR# 499 *
Subject: help system does not work
From: jgm@qed.econ.queensu.ca
Date: Wed, 22 Mar 2000 05:40:06 +0100 (MET)
-- no notes --
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 499 <==
From jgm@qed.econ.queensu.ca  Wed Mar 22 05:40:07 2000
Received: from localhost (blueberry [130.225.108.193])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id FAA04336
	for <R-bugs@biostat.ku.dk>; Wed, 22 Mar 2000 05:40:06 +0100 (MET)
Date: Wed, 22 Mar 2000 05:40:06 +0100 (MET)
From: jgm@qed.econ.queensu.ca
Message-Id: <200003220440.FAA04336@pubhealth.ku.dk>
To: R-bugs@biostat.ku.dk
Subject: help system does not work

Full_Name: James MacKinnon
Version: Version 1.0.0
OS: Debian 2.1
Submission from: (NULL) (24.141.113.138)


I am a novice at R, so I am not totally sure that this is a bug, but I think it
must
be. When I type help.start() or ?help, Netscape starts up, as it should, but it
displays my normal home page, not any help for R. The relevant documents exist
in
/usr/lib/R/doc/html, but Netscape does not seem to know about them when it is
started
from within R. I cannot figure out how to tell Netscape about them.

I simply installed the Debian package from one of the R websites. The file I
used
is r-base_1.0.0-1_i386.deb.

==> 499.reply.1 <==
From bates@franz.stat.wisc.edu  Wed Mar 22 16:12:43 2000
Received: from franz.stat.wisc.edu (root@franz.stat.wisc.edu [128.105.174.95])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id QAA12439
	for <R-bugs@biostat.ku.dk>; Wed, 22 Mar 2000 16:12:42 +0100 (MET)
Received: by franz.stat.wisc.edu
	via sendmail from stdin
	id <m12Xmq2-000ZS4C@franz.stat.wisc.edu> (Debian Smail3.2.0.102)
	for R-bugs@biostat.ku.dk; Wed, 22 Mar 2000 09:14:26 -0600 (CST) 
Sender: bates@franz.stat.wisc.edu
To: jgm@qed.econ.queensu.ca
Cc: R-bugs@biostat.ku.dk
Subject: Re: [Rd] help system does not work (PR#499)
References: <200003220440.FAA04346@pubhealth.ku.dk>
From: Douglas Bates <bates@stat.wisc.edu>
Date: 22 Mar 2000 09:14:26 -0600
In-Reply-To: jgm@qed.econ.queensu.ca's message of "Wed, 22 Mar 2000 05:40:08 +0100 (MET)"
Message-ID: <6rhfdzm3zh.fsf@franz.stat.wisc.edu>
Lines: 57
X-Mailer: Gnus v5.7/Emacs 20.5

jgm@qed.econ.queensu.ca writes:

> Full_Name: James MacKinnon
> Version: Version 1.0.0
> OS: Debian 2.1
> Submission from: (NULL) (24.141.113.138)
> 
> 
> I am a novice at R, so I am not totally sure that this is a bug, but
> I think it must be. When I type help.start() or ?help, Netscape
> starts up, as it should, but it displays my normal home page, not
> any help for R. The relevant documents exist in /usr/lib/R/doc/html,
> but Netscape does not seem to know about them when it is started
> from within R. I cannot figure out how to tell Netscape about them.
> 
> I simply installed the Debian package from one of the R
> websites. The file I used is r-base_1.0.0-1_i386.deb.

Hello James,

When you use help.start it is supposed to create and populate a
directory ~/.R.  Within there there should be an html directory and
links to several of the html files in /usr/lib/R/doc/html.

Could you check that this directory exists?  My version (under Debian
2.2 and using an experimental r-base_1.0.1-0) looks like

  /u9/bates/.R/doc/html:
  total 19
  drwxrwxr-x    3 bates    bates        1024 Mar 22 09:05 .
  drwxrwxr-x    3 bates    bates        1024 Mar 22 09:05 ..
  lrwxrwxrwx    1 bates    bates          25 Mar 22 09:05 R.css -> /usr/lib/R/doc/html/R.css
  lrwxrwxrwx    1 bates    bates          30 Mar 22 09:05 about.html -> /usr/lib/R/doc/html/about.html
  lrwxrwxrwx    1 bates    bates          28 Mar 22 09:05 faq.html -> /usr/lib/R/doc/html/faq.html
  lrwxrwxrwx    1 bates    bates          33 Mar 22 09:05 function.html -> /usr/lib/R/doc/html/function.html
  lrwxrwxrwx    1 bates    bates          30 Mar 22 09:05 index.html -> /usr/lib/R/doc/html/index.html
  lrwxrwxrwx    1 bates    bates          28 Mar 22 09:05 left.jpg -> /usr/lib/R/doc/html/left.jpg
  lrwxrwxrwx    1 bates    bates          28 Mar 22 09:05 logo.jpg -> /usr/lib/R/doc/html/logo.jpg
  lrwxrwxrwx    1 bates    bates          30 Mar 22 09:05 logosm.jpg -> /usr/lib/R/doc/html/logosm.jpg
  lrwxrwxrwx    1 bates    bates          38 Mar 22 09:05 packages-foot.html -> /usr/lib/R/doc/html/packages-foot.html
  lrwxrwxrwx    1 bates    bates          38 Mar 22 09:05 packages-head.html -> /usr/lib/R/doc/html/packages-head.html
  -rw-r--r--    1 bates    bates       14580 Mar 22 09:05 packages.html
  lrwxrwxrwx    1 bates    bates          33 Mar 22 09:05 resource.html -> /usr/lib/R/doc/html/resource.html
  lrwxrwxrwx    1 bates    bates          29 Mar 22 09:05 right.jpg -> /usr/lib/R/doc/html/right.jpg
  drwxrwxr-x    2 bates    bates        1024 Mar 22 09:05 search
  lrwxrwxrwx    1 bates    bates          33 Mar 22 09:05 template.html -> /usr/lib/R/doc/html/template.html
  lrwxrwxrwx    1 bates    bates          31 Mar 22 09:05 thanks.html -> /usr/lib/R/doc/html/thanks.html
  lrwxrwxrwx    1 bates    bates          26 Mar 22 09:05 up.jpg -> /usr/lib/R/doc/html/up.jpg

BTW, my daughter, who is a student at Queen's, tells me that you are
having wonderful weather right now.  She was down to the lakefront to
do some reading yesterday.

--
Douglas Bates                            bates@stat.wisc.edu
Statistics Department                    608/262-2598
University of Wisconsin - Madison        http://www.stat.wisc.edu/~bates/

==> 499.followup.1 <==
From jgm@jgm.econ.queensu.ca  Wed Mar 22 17:27:35 2000
Received: from jgm.econ.queensu.ca (jgm.econ.QueensU.CA [130.15.78.2])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id RAA13188
	for <R-bugs@biostat.ku.dk>; Wed, 22 Mar 2000 17:27:34 +0100 (MET)
Received: by jgm.econ.queensu.ca
	via sendmail from stdin
	id <m12Xnz7-00038kC@jgm.econ.queensu.ca> (Debian Smail3.2.0.102)
	for R-bugs@biostat.ku.dk; Wed, 22 Mar 2000 11:27:53 -0500 (EST) 
Date: Wed, 22 Mar 2000 11:27:53 -0500 (EST)
From: "James G. MacKinnon" <jgm@qed.econ.queensu.ca>
X-Sender: jgm@jgm.econ.queensu.ca
Reply-To: "James G. MacKinnon" <jgm@qed.econ.queensu.ca>
To: Douglas Bates <bates@stat.wisc.edu>
cc: R-bugs@biostat.ku.dk
Subject: Re: [Rd] help system does not work (PR#499)
In-Reply-To: <6rhfdzm3zh.fsf@franz.stat.wisc.edu>
Message-ID: <Pine.LNX.3.96.1000322110502.21123C-100000@jgm.econ.queensu.ca>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII

Thanks for the very speedy response.

I just tried again, but this time on my office machine, and I am extremely
embarrassed to report that everything seems to work fine! The only problem
is that the headings under "Data Analysis with R" are not actually links,
but no doubt that is because they are not (yet) supposed to be. 

It seems to be only on my home machine, where I was trying to experiment
with R last night, that there is a problem. I think the problem must have
something to do with the way in which netscape is installed on the two
machines. "which netscape" yields different results on the two of them.

I am pretty sure I can solve the problem now. I presume that R is passing
a command like "netscape URL" to the operating system, and I am pretty
sure that "URL" is not getting through on my home machine because it is
finding a script instead of the real executable. I think I just need to
change the script to pass its arguments to netscape. Unfortunately, I
cannot check the fix while I am at the office.

Incidentally, is there some way I can change the command that R is
issuing? That way, I could point it directly to a particular executable (I
have several netscapes).  Also, I would like to experiment with having it
fire up lynx in an xterm rather than netscape, if that is possible.

On 22 Mar 2000, Douglas Bates wrote:

> When you use help.start it is supposed to create and populate a
> directory ~/.R.  Within there there should be an html directory and
> links to several of the html files in /usr/lib/R/doc/html.

Yes, these directories are present on both machines, and the contents seem
to be fine. I think R itself is working fine.
 
> BTW, my daughter, who is a student at Queen's, tells me that you are
> having wonderful weather right now.  She was down to the lakefront to
> do some reading yesterday.

Incredible weather, actually. It is bright and sunny and warm enough that
a jacket really isn't needed.

I am very sorry to have bothered you. Should I do something to close the
bug report?

Cheers, James.

James G. MacKinnon                       Department of Economics
    phone: 613 533-2293                  Queen's University
      Fax: 613 533-2257                  Kingston, Ontario, Canada
    Email: jgm@qed.econ.queensu.ca       K7L 3N6



==> 499.reply.2 <==
From thomas@biostat.washington.edu  Wed Mar 22 17:46:54 2000
Received: from mail.biostat.washington.edu (mail.biostat.washington.edu [128.95.113.21])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id RAA13378
	for <R-bugs@biostat.ku.dk>; Wed, 22 Mar 2000 17:46:52 +0100 (MET)
Received: from mail.biostat.washington.edu (mail.biostat.washington.edu [128.95.113.21])
	by mail.biostat.washington.edu (8.9.3+Sun/8.9.1-fetrow-99-05-16b) with ESMTP id IAA29594;
	Wed, 22 Mar 2000 08:43:09 -0800 (PST)
Date: Wed, 22 Mar 2000 08:43:09 -0800 (PST)
From: Thomas Lumley <thomas@biostat.washington.edu>
To: jgm@qed.econ.queensu.ca
cc: r-devel@stat.math.ethz.ch, R-bugs@biostat.ku.dk
Subject: Re: [Rd] help system does not work (PR#499)
In-Reply-To: <200003221627.RAA13198@pubhealth.ku.dk>
Message-ID: <Pine.GSO.4.21.0003220832480.28978-100000@mail.biostat.washington.edu>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII

On Wed, 22 Mar 2000 jgm@qed.econ.queensu.ca wrote:
> 
> Incidentally, is there some way I can change the command that R is
> issuing? That way, I could point it directly to a particular executable (I
> have several netscapes).  Also, I would like to experiment with having it
> fire up lynx in an xterm rather than netscape, if that is possible.

options(browser="browser")

However, to start in a xterm you need to be a bit clever. The browser is
invoked as
 
browser URL &

and you will probably need a script to set up lynx in a xterm in such a
way that it opens the file and stays open. The first four things I tried
didn't work.


Thomas Lumley
Assistant Professor, Biostatistics
University of Washington, Seattle


==> 499.reply.3 <==
From pd@biostat.ku.dk  Wed Mar 22 18:13:38 2000
Received: from biostat.ku.dk (blueberry [130.225.108.193])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id SAA13634;
	Wed, 22 Mar 2000 18:13:37 +0100 (MET)
Received: (from pd@localhost)
	by biostat.ku.dk (8.9.3/8.9.3) id SAA10192;
	Wed, 22 Mar 2000 18:17:01 +0100
Sender: pd@blueberry.kubism.ku.dk
To: Thomas Lumley <thomas@biostat.washington.edu>
Cc: jgm@qed.econ.queensu.ca, r-devel@stat.math.ethz.ch, R-bugs@biostat.ku.dk
Subject: Re: [Rd] help system does not work (PR#499)
References: <Pine.GSO.4.21.0003220832480.28978-100000@mail.biostat.washington.edu>
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 22 Mar 2000 18:17:00 +0100
In-Reply-To: Thomas Lumley's message of "Wed, 22 Mar 2000 08:43:09 -0800 (PST)"
Message-ID: <x2wvmux6ur.fsf@blueberry.kubism.ku.dk>
Lines: 23
X-Mailer: Gnus v5.7/Emacs 20.4
Mime-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: 7bit

Thomas Lumley <thomas@biostat.washington.edu> writes:


> However, to start in a xterm you need to be a bit clever. The browser is
> invoked as
>  
> browser URL &
> 
> and you will probably need a script to set up lynx in a xterm in such a
> way that it opens the file and stays open. The first four things I tried
> didn't work.

Actually, the real problem is that it is getting passed

 -remote openURL(file:/long/and/winded/path/ls.html)

so you'd need to feed it to something (perl?) to extract the actual
URL. Then just use "xterm -e lynx $URL".
-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
* PR# 500 *
Subject:  segmentation fault with 1D array 
From: J.C.Rougier@durham.ac.uk
Date: Wed, 22 Mar 2000 18:25:24 GMT
-- no notes --
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 500 <==
From J.C.Rougier@durham.ac.uk  Wed Mar 22 19:25:40 2000
Received: from hermes.dur.ac.uk (hermes.dur.ac.uk [129.234.4.9])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id TAA14296
	for <r-bugs@biostat.ku.dk>; Wed, 22 Mar 2000 19:25:39 +0100 (MET)
From: J.C.Rougier@durham.ac.uk
Received: from euclid (euclid.dur.ac.uk [129.234.21.53])
	by hermes.dur.ac.uk (8.9.1/8.9.1) with ESMTP id SAA04531
	for <r-bugs@biostat.ku.dk>; Wed, 22 Mar 2000 18:25:25 GMT
Received: from laplace by euclid id <SAA20472@euclid>; Wed, 22 Mar 2000 18:25:22 GMT
Date: Wed, 22 Mar 2000 18:25:24 GMT
Message-Id: <2891.200003221825@laplace>
To: r-bugs@biostat.ku.dk
Cc: dma0jcr@laplace.dur.ac.uk
Subject:  segmentation fault with 1D array 

Here's a nasty one.  The following has caused a segmentation
fault and possibly also a bus error.

fred <- 1:6
dim(fred) <- 6
dimnames(fred) <- list(LETTERS[1:6])
mm <- matrix(1:12, 2, 6)

mm %*% fred # segmentation fault here

In the case without the dimnames assignment the result is OK.

Cheers, Jonathan.


--please do not edit the information below--

Version:
 platform = sparc-sun-solaris2.7
 arch = sparc
 os = solaris2.7
 system = sparc, solaris2.7
 status = Patched
 major = 0
 minor = 99.0
 year = 2000
 month = February
 day = 9
 language = R

Search Path:
 .GlobalEnv, Autoloads, package:base

==> 500.followup.1 <==
From ben@zoo.ufl.edu  Wed Mar 22 19:47:04 2000
Received: from smtp.ufl.edu (sp28fe.nerdc.ufl.edu [128.227.128.108])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id TAA14492
	for <R-bugs@biostat.ku.dk>; Wed, 22 Mar 2000 19:47:03 +0100 (MET)
Received: from bolker.zoo.ufl.edu (bolker.zoo.ufl.edu [10.227.60.45])
	by smtp.ufl.edu (8.9.3/8.9.3/2.2.1) with ESMTP id NAA13690;
	Wed, 22 Mar 2000 13:46:50 -0500
Date: Wed, 22 Mar 2000 13:43:27 -0500 (EST)
From: Ben Bolker <ben@zoo.ufl.edu>
Reply-To: bolker@zoo.ufl.edu
To: J.C.Rougier@durham.ac.uk
cc: r-devel@stat.math.ethz.ch, R-bugs@biostat.ku.dk
Subject: Re: [Rd] segmentation fault with 1D array (PR#500)
In-Reply-To: <200003221825.TAA14306@pubhealth.ku.dk>
Message-ID: <Pine.LNX.4.10.10003221342370.10699-100000@bolker.zoo.ufl.edu>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII

On Wed, 22 Mar 2000 J.C.Rougier@durham.ac.uk wrote:

> Here's a nasty one.  The following has caused a segmentation
> fault and possibly also a bus error.
> 
> fred <- 1:6
> dim(fred) <- 6
> dimnames(fred) <- list(LETTERS[1:6])
> mm <- matrix(1:12, 2, 6)
> 
> mm %*% fred # segmentation fault here
> 
> In the case without the dimnames assignment the result is OK.

  Here (1.0.0 on RH 6.0) I get

Error: invalid type for dimname (must be a vector)

instead of a segmentation fault.

> 
> --please do not edit the information below--
> 
> Version:
>  platform = sparc-sun-solaris2.7
>  arch = sparc
>  os = solaris2.7
>  system = sparc, solaris2.7
>  status = Patched
>  major = 0
>  minor = 99.0
>  year = 2000
>  month = February
>  day = 9
>  language = R
> 
> Search Path:
>  .GlobalEnv, Autoloads, package:base
> 
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
> 
> 

-- 
Ben Bolker                                  bolker@zoo.ufl.edu
Zoology Department, University of Florida   http://www.zoo.ufl.edu/bolker
318 Carr Hall/Box 118525                    tel: (352) 392-5697
Gainesville, FL 32611-8525                  fax: (352) 392-3704


==> 500.reply.1 <==
From pd@biostat.ku.dk  Wed Mar 22 19:56:00 2000
Received: from biostat.ku.dk (blueberry [130.225.108.193])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id TAA14596;
	Wed, 22 Mar 2000 19:55:59 +0100 (MET)
Received: (from pd@localhost)
	by biostat.ku.dk (8.9.3/8.9.3) id TAA10297;
	Wed, 22 Mar 2000 19:59:23 +0100
Sender: pd@blueberry.kubism.ku.dk
To: J.C.Rougier@durham.ac.uk
Cc: r-devel@stat.math.ethz.ch, R-bugs@biostat.ku.dk
Subject: Re: [Rd] segmentation fault with 1D array (PR#500)
References: <200003221825.TAA14306@pubhealth.ku.dk>
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 22 Mar 2000 19:59:23 +0100
In-Reply-To: J.C.Rougier@durham.ac.uk's message of "Wed, 22 Mar 2000 19:25:41 +0100 (MET)"
Message-ID: <x2zorqkf04.fsf@blueberry.kubism.ku.dk>
Lines: 21
X-Mailer: Gnus v5.7/Emacs 20.4
Mime-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: 7bit

J.C.Rougier@durham.ac.uk writes:

> Here's a nasty one.  The following has caused a segmentation
> fault and possibly also a bus error.
> 
> fred <- 1:6
> dim(fred) <- 6
> dimnames(fred) <- list(LETTERS[1:6])
> mm <- matrix(1:12, 2, 6)
> 
> mm %*% fred # segmentation fault here
> 
> In the case without the dimnames assignment the result is OK.

Still present... Some pretty odd things appear to be going on there.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

==> 500.reply.2 <==
From pd@biostat.ku.dk  Wed Mar 22 20:03:34 2000
Received: from biostat.ku.dk (blueberry [130.225.108.193])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id UAA14675;
	Wed, 22 Mar 2000 20:03:33 +0100 (MET)
Received: (from pd@localhost)
	by biostat.ku.dk (8.9.3/8.9.3) id UAA10340;
	Wed, 22 Mar 2000 20:06:58 +0100
Sender: pd@blueberry.kubism.ku.dk
To: bolker@zoo.ufl.edu
Cc: J.C.Rougier@durham.ac.uk, r-devel@stat.math.ethz.ch, R-bugs@biostat.ku.dk
Subject: Re: [Rd] segmentation fault with 1D array (PR#500)
References: <Pine.LNX.4.10.10003221342370.10699-100000@bolker.zoo.ufl.edu>
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 22 Mar 2000 20:06:57 +0100
In-Reply-To: Ben Bolker's message of "Wed, 22 Mar 2000 13:43:27 -0500 (EST)"
Message-ID: <x2wvmukeni.fsf@blueberry.kubism.ku.dk>
Lines: 30
X-Mailer: Gnus v5.7/Emacs 20.4
Mime-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: 7bit

Ben Bolker <ben@zoo.ufl.edu> writes:

> On Wed, 22 Mar 2000 J.C.Rougier@durham.ac.uk wrote:
> 
> > Here's a nasty one.  The following has caused a segmentation
> > fault and possibly also a bus error.
> > 
> > fred <- 1:6
> > dim(fred) <- 6
> > dimnames(fred) <- list(LETTERS[1:6])
> > mm <- matrix(1:12, 2, 6)
> > 
> > mm %*% fred # segmentation fault here
> > 
> > In the case without the dimnames assignment the result is OK.
> 
>   Here (1.0.0 on RH 6.0) I get
> 
> Error: invalid type for dimname (must be a vector)
> 
> instead of a segmentation fault.

Hm? 1.0.0 on RH 6.1 gives the segfault for me as does later patch
versions...

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

==> 500.followup.2 <==
From ben@zoo.ufl.edu  Wed Mar 22 20:14:08 2000
Received: from smtp.ufl.edu (sp28fe.nerdc.ufl.edu [128.227.128.108])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id UAA14747;
	Wed, 22 Mar 2000 20:14:07 +0100 (MET)
Received: from bolker.zoo.ufl.edu (bolker.zoo.ufl.edu [10.227.60.45])
	by smtp.ufl.edu (8.9.3/8.9.3/2.2.1) with ESMTP id OAA138564;
	Wed, 22 Mar 2000 14:14:20 -0500
Date: Wed, 22 Mar 2000 14:10:55 -0500 (EST)
From: Ben Bolker <ben@zoo.ufl.edu>
Reply-To: bolker@zoo.ufl.edu
To: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
cc: J.C.Rougier@durham.ac.uk,
        R development mailing list <r-devel@stat.math.ethz.ch>,
        R-bugs@biostat.ku.dk
Subject: Re: [Rd] segmentation fault with 1D array (PR#500)
In-Reply-To: <x2wvmukeni.fsf@blueberry.kubism.ku.dk>
Message-ID: <Pine.LNX.4.10.10003221408110.10733-100000@bolker.zoo.ufl.edu>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII


  Weird.  It does crash if I run it in a new session.  I tried the
commands out in a session that I'd already done a whole lot in, so maybe
it's just corrupting some little piece of my (large) environment rather
than segfaulting.

On 22 Mar 2000, Peter Dalgaard BSA wrote:

> Ben Bolker <ben@zoo.ufl.edu> writes:
> 
> > On Wed, 22 Mar 2000 J.C.Rougier@durham.ac.uk wrote:
> > 
> > > Here's a nasty one.  The following has caused a segmentation
> > > fault and possibly also a bus error.
> > > 
> > > fred <- 1:6
> > > dim(fred) <- 6
> > > dimnames(fred) <- list(LETTERS[1:6])
> > > mm <- matrix(1:12, 2, 6)
> > > 
> > > mm %*% fred # segmentation fault here
> > > 
> > > In the case without the dimnames assignment the result is OK.
> > 
> >   Here (1.0.0 on RH 6.0) I get
> > 
> > Error: invalid type for dimname (must be a vector)
> > 
> > instead of a segmentation fault.
> 
> Hm? 1.0.0 on RH 6.1 gives the segfault for me as does later patch
> versions...
> 
> 

-- 
Ben Bolker                                  bolker@zoo.ufl.edu
Zoology Department, University of Florida   http://www.zoo.ufl.edu/bolker
318 Carr Hall/Box 118525                    tel: (352) 392-5697
Gainesville, FL 32611-8525                  fax: (352) 392-3704


==> 500.reply.3 <==
From pd@biostat.ku.dk  Wed Mar 22 21:07:03 2000
Received: from biostat.ku.dk (blueberry [130.225.108.193])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id VAA15006;
	Wed, 22 Mar 2000 21:07:02 +0100 (MET)
Received: (from pd@localhost)
	by biostat.ku.dk (8.9.3/8.9.3) id VAA10412;
	Wed, 22 Mar 2000 21:10:28 +0100
Sender: pd@blueberry.kubism.ku.dk
To: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Cc: bolker@zoo.ufl.edu, J.C.Rougier@durham.ac.uk, r-devel@stat.math.ethz.ch,
        R-bugs@biostat.ku.dk
Subject: Re: [Rd] segmentation fault with 1D array (PR#500)
References: <Pine.LNX.4.10.10003221342370.10699-100000@bolker.zoo.ufl.edu> <x2wvmukeni.fsf@blueberry.kubism.ku.dk>
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 22 Mar 2000 21:10:28 +0100
In-Reply-To: Peter Dalgaard BSA's message of "22 Mar 2000 20:06:57 +0100"
Message-ID: <x2bt466a17.fsf@blueberry.kubism.ku.dk>
Lines: 35
X-Mailer: Gnus v5.7/Emacs 20.4
Mime-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: 7bit

Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk> writes:

> Ben Bolker <ben@zoo.ufl.edu> writes:
> 
> > On Wed, 22 Mar 2000 J.C.Rougier@durham.ac.uk wrote:
> > 
> > > Here's a nasty one.  The following has caused a segmentation
> > > fault and possibly also a bus error.
> > > 
> > > fred <- 1:6
> > > dim(fred) <- 6
> > > dimnames(fred) <- list(LETTERS[1:6])
> > > mm <- matrix(1:12, 2, 6)
> > > 
> > > mm %*% fred # segmentation fault here
> > > 
> > > In the case without the dimnames assignment the result is OK.
> > 
> >   Here (1.0.0 on RH 6.0) I get
> > 
> > Error: invalid type for dimname (must be a vector)
> > 
> > instead of a segmentation fault.
> 
> Hm? 1.0.0 on RH 6.1 gives the segfault for me as does later patch
> versions...

Squished... Will commit to release track in a moment (if it survives
"make check").

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
* PR# 501 *
Subject: kernel {ts}, kernel.dirichlet calling with one arg
From: santini@dsi.unimi.it
Date: Fri, 24 Mar 2000 11:12:49 +0100 (MET)
-- no notes --
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 501 <==
From santini@dsi.unimi.it  Fri Mar 24 11:12:51 2000
Received: from localhost (blueberry [130.225.108.193])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id LAA29922
	for <R-bugs@biostat.ku.dk>; Fri, 24 Mar 2000 11:12:49 +0100 (MET)
Date: Fri, 24 Mar 2000 11:12:49 +0100 (MET)
From: santini@dsi.unimi.it
Message-Id: <200003241012.LAA29922@pubhealth.ku.dk>
To: R-bugs@biostat.ku.dk
Subject: kernel {ts}, kernel.dirichlet calling with one arg

Full_Name: Massimo Santini
Version: 1.0.0
OS: Linux
Submission from: (NULL) (159.149.147.89)


At line 1269 of .../R/library/ts/R/ts there is the following call

	dirichlet = dirichlet.kernel(m), 

but since dirichlet.kernel is declared somewhre above to take two arguments, 
I suspect that that line should read as

	dirichlet = dirichlet.kernel(m, r), 

Without this correction the call
	
	kernel("dirichlet",m=10,r=1);
	
always returns the following error

	Error in dirichlet.kernel(m) : Argument "r" is missing, with no default

while after the proposed patch if correctly outputs the desider kernel.

I hope this helps,

			best regards, Massimo
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
* PR# 502 *
Subject: quantiles of the hypergeometric distribution
From: Ludwig Baringhaus <lbaring@stochastik.uni-hannover.de>
Date: Fri, 24 Mar 2000 14:21:20 +0100
-- no notes --
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 502 <==
From lbaring@stochastik.uni-hannover.de  Fri Mar 24 13:23:24 2000
Received: from gauss.stochastik.uni-hannover.de (gauss.stochastik.uni-hannover.de [130.75.129.4])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id NAA02102
	for <r-bugs@biostat.ku.dk>; Fri, 24 Mar 2000 13:23:23 +0100 (MET)
Received: from stochastik.uni-hannover.de (lbaring@wiener.stochastik.uni-hannover.de [130.75.129.14])
	by gauss.stochastik.uni-hannover.de (8.9.3/8.9.3) with ESMTP id NAA15819
	for <r-bugs@biostat.ku.dk>; Fri, 24 Mar 2000 13:23:29 +0100 (MET)
Sender: lbaring@stochastik.uni-hannover.de
Message-ID: <38DB6BD0.7B9DE1A4@stochastik.uni-hannover.de>
Date: Fri, 24 Mar 2000 14:21:20 +0100
From: Ludwig Baringhaus <lbaring@stochastik.uni-hannover.de>
Organization: Mathematische Stochastik
X-Mailer: Mozilla 4.7 [en] (X11; I; Linux 2.2.13 i686)
X-Accept-Language: de, en
MIME-Version: 1.0
To: r-bugs@biostat.ku.dk
Subject: quantiles of the hypergeometric distribution
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit

Hello!

I use R-version 1.0.0
To get the 0.95 quantile of the hypergeometric
distribution with the parameters m=45000,n=5000 and
k=600 I use the R-command 

> qhyper(0.95,45000,5000,600).


The value obtained is 600. However, the true value
is 552. The latter can be obtained for example by
calling the corresponding distribution function 
with the R commands 

> x<-540:580
> phyper(x,45000,5000,600)   

The value 552 is obtained also by the usual normal
approximation.


Overall, it seems that R produces errors when calling
qhyper(p,m,n,k) for large values of the parametes 
m,n or k.

Sincerely
L. Baringhaus

==> 502.followup.1 <==
From hothorn@ci.tuwien.ac.at  Fri Mar 24 14:40:25 2000
Received: from fangorn.ci.tuwien.ac.at (root@fangorn.ci.tuwien.ac.at [128.131.51.24])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id OAA03284
	for <R-bugs@biostat.ku.dk>; Fri, 24 Mar 2000 14:40:24 +0100 (MET)
Received: from boromir.ci.tuwien.ac.at (boromir.ci.tuwien.ac.at [128.131.51.39])
	by fangorn.ci.tuwien.ac.at (8.9.3/8.9.3/Debian/GNU) with ESMTP id OAA27322;
	Fri, 24 Mar 2000 14:40:10 +0100
Received: from localhost (hothorn@localhost)
	by boromir.ci.tuwien.ac.at (8.9.3/8.8.5) with ESMTP id OAA26443;
	Fri, 24 Mar 2000 14:40:14 +0100
X-Authentication-Warning: boromir.ci.tuwien.ac.at: hothorn owned process doing -bs
Date: Fri, 24 Mar 2000 14:40:13 +0100 (CET)
From: Torsten Hothorn <hothorn@ci.tuwien.ac.at>
To: lbaring@stochastik.uni-hannover.de
cc: r-devel@stat.math.ethz.ch, R-bugs@biostat.ku.dk
Subject: Re: [Rd] quantiles of the hypergeometric distribution (PR#502)
In-Reply-To: <200003241223.NAA02113@pubhealth.ku.dk>
Message-ID: <Pine.LNX.4.21.0003241433160.21466-100000@boromir.ci.tuwien.ac.at>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII


> Hello!
> 
> I use R-version 1.0.0
> To get the 0.95 quantile of the hypergeometric
> distribution with the parameters m=45000,n=5000 and
> k=600 I use the R-command 
> 
> > qhyper(0.95,45000,5000,600).
> 
> 
> The value obtained is 600. However, the true value
> is 552. 

Well, 

had a short look. The problem arises in qhyper.c at line 56:

 term = exp(lfastchoose(NR, xr) + lfastchoose(NB, xb) - lfastchoose(N, n));

The expression inside the exp() function gives -1415.411856 and exp()
returns 0. So term and sum in 

 while(sum < p && xr < xend) {
        xr++;
        NB++;
        term *= (NR / xr) * (xb / NB);
        sum += term;
        xb--;
        NR--;
    }

are 0 all the time and xend = 600 is returned. 

R-Core: How to fix this?

Torsten

*****************************************************************
*				                                *
* Torsten Hothorn, Statistician 		                *
* at the moment: Institut fuer Statistik, TU Wien	        *
* Tel: 0043 1 58801 10772                  			*
* Fax: 0043 1 58801 10798                                       *
*                                                               *
*****************************************************************



==> 502.reply.1 <==
From pd@biostat.ku.dk  Fri Mar 24 15:55:00 2000
Received: from biostat.ku.dk (blueberry [130.225.108.193])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id PAA04952;
	Fri, 24 Mar 2000 15:54:59 +0100 (MET)
Received: (from pd@localhost)
	by biostat.ku.dk (8.9.3/8.9.3) id PAA13705;
	Fri, 24 Mar 2000 15:58:39 +0100
Sender: pd@blueberry.kubism.ku.dk
To: Torsten Hothorn <hothorn@ci.tuwien.ac.at>
Cc: lbaring@stochastik.uni-hannover.de, r-devel@stat.math.ethz.ch,
        R-bugs@biostat.ku.dk
Subject: Re: [Rd] quantiles of the hypergeometric distribution (PR#502)
References: <Pine.LNX.4.21.0003241433160.21466-100000@boromir.ci.tuwien.ac.at>
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 24 Mar 2000 15:58:39 +0100
In-Reply-To: Torsten Hothorn's message of "Fri, 24 Mar 2000 14:40:13 +0100 (CET)"
Message-ID: <x2wvmswh28.fsf@blueberry.kubism.ku.dk>
Lines: 36
X-Mailer: Gnus v5.7/Emacs 20.4
Mime-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: 7bit

Torsten Hothorn <hothorn@ci.tuwien.ac.at> writes:

>  term = exp(lfastchoose(NR, xr) + lfastchoose(NB, xb) - lfastchoose(N, n));
> 
> The expression inside the exp() function gives -1415.411856 and exp()
> returns 0. So term and sum in 
> 
>  while(sum < p && xr < xend) {
>         xr++;
>         NB++;
>         term *= (NR / xr) * (xb / NB);
>         sum += term;
>         xb--;
>         NR--;
>     }
> 
> are 0 all the time and xend = 600 is returned. 
> 
> R-Core: How to fix this?

Ick! That is of course only to be expected with recurrence relations
like this applied to large numbers. Since the term formula (as far as
I remember!) applies to all the point probabilities, I suppose that
one could start the recurrence from a "known positive" value and work
both forwards and backwards from there. Since you still want to do the
sums from the low end (although that is perhaps not all that
important?) you might need an intermediate array to hold the values.
One idea could be to start from the normal approximation of the
desired quantile. Probably a bit more than an afternoons work, but
hardly several weeks...

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

==> 502.reply.2 <==
From thomas@biostat.washington.edu  Fri Mar 24 17:10:32 2000
Received: from mail.biostat.washington.edu (mail.biostat.washington.edu [128.95.113.21])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id RAA05569;
	Fri, 24 Mar 2000 17:10:30 +0100 (MET)
Received: from mail.biostat.washington.edu (mail.biostat.washington.edu [128.95.113.21])
	by mail.biostat.washington.edu (8.9.3+Sun/8.9.1-fetrow-99-05-16b) with ESMTP id IAA02622;
	Fri, 24 Mar 2000 08:10:38 -0800 (PST)
Date: Fri, 24 Mar 2000 08:10:38 -0800 (PST)
From: Thomas Lumley <thomas@biostat.washington.edu>
To: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
cc: Torsten Hothorn <hothorn@ci.tuwien.ac.at>,
        lbaring@stochastik.uni-hannover.de, r-devel@stat.math.ethz.ch,
        R-bugs@biostat.ku.dk
Subject: Re: [Rd] quantiles of the hypergeometric distribution (PR#502)
In-Reply-To: <x2wvmswh28.fsf@blueberry.kubism.ku.dk>
Message-ID: <Pine.GSO.4.21.0003240807090.2323-100000@mail.biostat.washington.edu>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII

On 24 Mar 2000, Peter Dalgaard BSA wrote:

> Torsten Hothorn <hothorn@ci.tuwien.ac.at> writes:
> 
> >  term = exp(lfastchoose(NR, xr) + lfastchoose(NB, xb) - lfastchoose(N, n));
> > 
> > The expression inside the exp() function gives -1415.411856 and exp()
> > returns 0. So term and sum in 
> > 
> >  while(sum < p && xr < xend) {
> >         xr++;
> >         NB++;
> >         term *= (NR / xr) * (xb / NB);
> >         sum += term;
> >         xb--;
> >         NR--;
> >     }
> > 
> > are 0 all the time and xend = 600 is returned. 
> > 
> > R-Core: How to fix this?
> 
> Ick! That is of course only to be expected with recurrence relations
> like this applied to large numbers. Since the term formula (as far as
> I remember!) applies to all the point probabilities, I suppose that
> one could start the recurrence from a "known positive" value and work
> both forwards and backwards from there. Since you still want to do the
> sums from the low end (although that is perhaps not all that
> important?) you might need an intermediate array to hold the values.
> One idea could be to start from the normal approximation of the
> desired quantile. Probably a bit more than an afternoons work, but
> hardly several weeks...

As phyper seems to work we could just start at the Normal approximation to
qhyper and search for x such  that phyper(x)=p. Since it's a discrete
distribution this shouldn't take that long.

	-thomas






==> 502.reply.3 <==
From pd@biostat.ku.dk  Fri Mar 24 17:28:58 2000
Received: from biostat.ku.dk (blueberry [130.225.108.193])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id RAA05677;
	Fri, 24 Mar 2000 17:28:57 +0100 (MET)
Received: (from pd@localhost)
	by biostat.ku.dk (8.9.3/8.9.3) id RAA13783;
	Fri, 24 Mar 2000 17:32:38 +0100
Sender: pd@blueberry.kubism.ku.dk
To: Thomas Lumley <thomas@biostat.washington.edu>
Cc: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>,
        Torsten Hothorn <hothorn@ci.tuwien.ac.at>,
        lbaring@stochastik.uni-hannover.de, r-devel@stat.math.ethz.ch,
        R-bugs@biostat.ku.dk
Subject: Re: [Rd] quantiles of the hypergeometric distribution (PR#502)
References: <Pine.GSO.4.21.0003240807090.2323-100000@mail.biostat.washington.edu>
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 24 Mar 2000 17:32:37 +0100
In-Reply-To: Thomas Lumley's message of "Fri, 24 Mar 2000 08:10:38 -0800 (PST)"
Message-ID: <x2r9d0wcpm.fsf@blueberry.kubism.ku.dk>
Lines: 21
X-Mailer: Gnus v5.7/Emacs 20.4
Mime-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: 7bit

Thomas Lumley <thomas@biostat.washington.edu> writes:

> As phyper seems to work we could just start at the Normal approximation to
> qhyper and search for x such  that phyper(x)=p. Since it's a discrete
> distribution this shouldn't take that long.

Or apply the same fixup:

        sum += (small_N ? term : exp(term));
        ...
        if(small_N) term *= (NR / xr) * (xb / NB);
        else    term += log((NR / xr) * (xb / NB));

which is pretty obviously not optimized for speed, but certainly
avoids the multiply-by-zero effect.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
* PR# 503 *
Subject: dmvnorm() bug in e1071
From: "Gregory R. Warnes" <warnes@biostat.washington.edu>
Date: Fri, 24 Mar 2000 03:24:45 +0000 (GMT)
-- no notes --
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 503 <==
From warnes@warnes.net  Fri Mar 24 20:26:17 2000
Received: from hydra.warnes.net (mail@c877378-a.sttln1.wa.home.com [24.9.60.166])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id UAA06279
	for <r-bugs@biostat.ku.dk>; Fri, 24 Mar 2000 20:25:43 +0100 (MET)
Received: from warnes (helo=localhost)
	by hydra.warnes.net with local-esmtp (Exim 3.12 #1 (Debian))
	id 12YKiM-0003AT-00
	for <r-bugs@biostat.ku.dk>; Thu, 23 Mar 2000 19:24:46 -0800
Date: Fri, 24 Mar 2000 03:24:45 +0000 (GMT)
From: "Gregory R. Warnes" <warnes@biostat.washington.edu>
X-Sender: warnes@hydra.warnes.net
To: r-bugs@biostat.ku.dk
Subject: dmvnorm() bug in e1071
Message-ID: <Pine.LNX.4.21.0003240321480.575-100000@hydra.warnes.net>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
Sender: "Gregory R. Warnes" <warnes@warnes.net>


When dmvnorm is applied to matrices it fails.  The offending lines are

  if (length(x) != ncol(sigma)) {
    stop("x and sigma have non-conforming size")
  }

which works fine if x is a dataframe, but not if x is a matrix.

Replacing this test with

  if (ncol(x) != ncol(sigma)) {
    stop("x and sigma have non-conforming size")
  }

Corrects the problem, and still works for data frames and
vectors.  (Vectors have already been converted to matrices).

-Gregory

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
