=================================================
This is an automated collection of open reports in
the R-bugs repository.
=================================================

Directory:  Accuracy

* PR# 751 *
Subject: BUG: polyroot()
From: "Li Dongfeng" <mavip1@inet.polyu.edu.hk>
Date: Tue, 28 Nov 2000 13:24:33 +0800
--Numerical instability. We may want a better algorithm!
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 751 <==
From mavip1@inet.polyu.edu.hk  Tue Nov 28 06:25:25 2000
Received: from hkpa04.polyu.edu.hk (hkpa04.PolyU.edu.hk [158.132.14.21])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id GAA06942
	for <r-bugs@biostat.ku.dk>; Tue, 28 Nov 2000 06:25:20 +0100 (MET)
Received: from hkpu01 ([158.132.174.240]) by hkpa04.polyu.edu.hk
          (Netscape Messaging Server 4.15) with SMTP id G4PZ0X01.43N for
          <r-bugs@biostat.ku.dk>; Tue, 28 Nov 2000 13:24:33 +0800 
Message-ID: <001b01c058fb$7db19700$f0ae849e@polyu.edu.hk>
From: "Li Dongfeng" <mavip1@inet.polyu.edu.hk>
To: <r-bugs@biostat.ku.dk>
Subject: BUG: polyroot()
Date: Tue, 28 Nov 2000 13:24:33 +0800
MIME-Version: 1.0
Content-Type: text/plain;
	charset="gb2312"
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 5.50.4133.2400
X-MimeOLE: Produced By Microsoft MimeOLE V5.50.4133.2400
Content-Transfer-Encoding: 8bit
X-MIME-Autoconverted: from base64 to 8bit by pubhealth.ku.dk id GAA06942

I have found that the polyroot()
function in R-1.1.1(both solaris
and Win32 version) gives totally
incorrect result. Here is the offending
code:

# Polyroot bug report:
# from R-1.1.1
> sort(abs(polyroot(c(1, -2,1,0,0,0,0,0,0,0,0,0,-2,5,-2,0,0,0,0,0,0,0,0,0,1,-2,1))))
 [1] 0.8758259 0.9486499 0.9731015 1.5419189 1.7466214 1.7535362 1.7589484
 [8] 2.0216317 2.4421509 2.5098488 2.6615572 2.7717724 2.8444048 2.9147685
[15] 2.9302278 2.9757159 3.2037151 3.2052962 3.2498510 3.2815881 3.3250881
[22] 4.6593700 4.7048556 5.2738258 5.7369920 5.9017094
# from Splus 2000
> sort(abs(polyroot(c(1, -2,1,0,0,0,0,0,0,0,0,0,-2,5,-2,0,0,0,0,0,0,0,0,0,1,-2,1))))
 [1] 0.8038812 0.8038812 0.8758259 0.8758259 0.9235722
 [6] 0.9235722 0.9439788 0.9439788 0.9536692 0.9536692
[11] 0.9582403 0.9582403 0.9596028 1.0420978 1.0435796
[16] 1.0435796 1.0485816 1.0485816 1.0593458 1.0593458
[21] 1.0827524 1.0827524 1.1417794 1.1417794 1.2439649
[26] 1.2439649

From mathematical theory I know that the Splus result
is correct while the R result is wrong. I would have
checked the source if I had the time.



==> 751.reply.1 <==
From pd@biostat.ku.dk  Thu Dec  7 00:53:06 2000
Received: from biostat.ku.dk (blueberry [130.225.108.193])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id AAA04390;
	Thu, 7 Dec 2000 00:53:05 +0100 (MET)
Received: (from pd@localhost)
	by biostat.ku.dk (8.9.3/8.9.3) id AAA28616;
	Thu, 7 Dec 2000 00:58:28 +0100
Sender: pd@blueberry.kubism.ku.dk
To: mavip1@inet.polyu.edu.hk
Cc: r-devel@stat.math.ethz.ch, R-bugs@biostat.ku.dk
Subject: Re: [Rd] BUG: polyroot() (PR#751)
References: <200011280525.GAA06952@pubhealth.ku.dk>
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 07 Dec 2000 00:58:27 +0100
In-Reply-To: mavip1@inet.polyu.edu.hk's message of "Tue, 28 Nov 2000 06:25:26 +0100 (MET)"
Message-ID: <x2k89dxfto.fsf@blueberry.kubism.ku.dk>
Lines: 96
X-Mailer: Gnus v5.7/Emacs 20.7
Mime-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: 7bit

mavip1@inet.polyu.edu.hk writes:

> I have found that the polyroot()
> function in R-1.1.1(both solaris
> and Win32 version) gives totally
> incorrect result. Here is the offending
> code:
> 
> # Polyroot bug report:
> # from R-1.1.1
> > sort(abs(polyroot(c(1, -2,1,0,0,0,0,0,0,0,0,0,-2,5,-2,0,0,0,0,0,0,0,0,0,1,-2,1))))
>  [1] 0.8758259 0.9486499 0.9731015 1.5419189 1.7466214 1.7535362 1.7589484
>  [8] 2.0216317 2.4421509 2.5098488 2.6615572 2.7717724 2.8444048 2.9147685
> [15] 2.9302278 2.9757159 3.2037151 3.2052962 3.2498510 3.2815881 3.3250881
> [22] 4.6593700 4.7048556 5.2738258 5.7369920 5.9017094
> # from Splus 2000
> > sort(abs(polyroot(c(1, -2,1,0,0,0,0,0,0,0,0,0,-2,5,-2,0,0,0,0,0,0,0,0,0,1,-2,1))))
>  [1] 0.8038812 0.8038812 0.8758259 0.8758259 0.9235722
>  [6] 0.9235722 0.9439788 0.9439788 0.9536692 0.9536692
> [11] 0.9582403 0.9582403 0.9596028 1.0420978 1.0435796
> [16] 1.0435796 1.0485816 1.0485816 1.0593458 1.0593458
> [21] 1.0827524 1.0827524 1.1417794 1.1417794 1.2439649
> [26] 1.2439649
> 
> >From mathematical theory I know that the Splus result
> is correct while the R result is wrong. I would have
> checked the source if I had the time.

There seems to be a rather bad numerical instability with the R code.
If we define

 polyeval<-function(coef,x){v<-0;for (i in rev(coef)) v<-v*x+i; v}

(Horner's scheme), we get 

> polyeval(1:5,polyroot(1:5))
[1] -2.220446e-16-2.664833e-16i -2.220446e-16-1.554475e-16i
[3] -2.220446e-16+1.436839e-16i -2.220446e-16-5.076235e-16i

which is kind of OK except that it looks odd that the real part is the
same for all 4 roots. Increasing the degree gives

> polyeval(10:1,polyroot(10:1))
[1] 9.230968e-08+5.257143e-08i 9.230977e-08+5.257158e-08i
[3] 9.230961e-08+5.257162e-08i 9.230956e-08+5.257151e-08i
[5] 9.230974e-08+5.257145e-08i 9.230975e-08+5.257161e-08i
[7] 9.230949e-08+5.257178e-08i 9.230974e-08+5.257161e-08i
[9] 9.230969e-08+5.257184e-08i

which is fairly OK, but it does look odd that we can't get closer to
zero than that since there are no multiple roots, and again it is
peculiar that the values are so similar. The next items in the
sequence are -ahem- interesting:

> polyeval(11:1,polyroot(11:1))
 [1] 2.305607e-06+1.791577e-05i 2.309550e-06+1.791714e-05i
 [3] 2.307622e-06+1.792101e-05i 2.304150e-06+1.791869e-05i
 [5] 2.307087e-06+1.791537e-05i 2.309716e-06+1.791873e-05i
 [7] 2.306030e-06+1.792098e-05i 2.304727e-06+1.792011e-05i
 [9] 2.308569e-06+1.791588e-05i 2.308994e-06+1.792018e-05i
> polyeval(12:1,polyroot(12:1))
 [1] 70.94521-90.6597i 70.94521-90.6597i 70.94521-90.6597i 70.94521-90.6597i
 [5] 70.94521-90.6597i 70.94521-90.6597i 70.94521-90.6597i 70.94521-90.6597i
 [9] 70.94521-90.6597i 70.94521-90.6597i 70.94521-90.6597i
> polyeval(13:1,polyroot(13:1))
 [1] -9.076647e-05-0.0003440688i -1.253803e-04-0.0003691299i
 [3] -8.894859e-05-0.0003941022i -7.310528e-05-0.0003638818i
 [5] -1.144849e-04-0.0003471283i -1.221901e-04-0.0003814892i
 [7] -7.857251e-05-0.0003869614i -7.284137e-05-0.0003760067i
 [9] -1.029218e-04-0.0003424790i -1.136443e-04-0.0003910680i
[11] -1.016283e-04-0.0003956270i -1.225930e-04-0.0003567609i
> polyeval(14:1,polyroot(14:1))
 [1]     11.28833+   28.72917i     11.28833+   28.72917i
 [3]   5809.74030-  427.90119i -19407.81458+ 3462.91985i
 [5]  -2823.47547-  494.63498i -40909.65435-10789.57874i
 [7]  -8336.95783+ 5241.26935i    344.71455- 1520.94876i
 [9]   5357.44530-24665.94094i  57313.79892-43530.37668i
[11]  11464.67537+29484.08287i  30010.79343+24624.25551i
[13]  25799.32156+53755.92101i
> polyeval(15:1,polyroot(15:1))
 [1]  4.110828e+01+5.028631e+01i  4.123746e+01+5.033469e+01i
 [3]  4.113423e+01+5.043357e+01i  4.106175e+01+5.031924e+01i
 [5]  2.130747e+06+7.226414e+05i -1.088699e+08+1.096129e+09i
 [7]  1.785940e+09+1.407187e+09i  9.750674e+10-5.059480e+10i
 [9] -3.102572e+09-9.212065e+10i  7.213065e+09-1.023845e+10i
[11]  1.682049e+10+2.202050e+10i  1.889123e+10-1.046838e+11i
[13] -6.220741e+10-4.563469e+10i -1.477005e+10-3.393510e+10i

Root finding in high-degree polynomials is known to be nasty business,
but this looks more than ordinarily bad.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

==> 751.audit <==
Sun Dec 10 14:32:11 2000	pd	changed notes
Sun Dec 10 14:32:11 2000	pd	foobar
Sun Dec 10 14:32:11 2000	pd	moved from incoming to Accuracy

==> 751.followup.1 <==
From mark0060@tc.umn.edu  Wed Jan 17 03:51:59 2001
Received: from amethyst.tc.umn.edu (amethyst.tc.umn.edu [160.94.153.1])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id DAA19519
	for <r-bugs@biostat.ku.dk>; Wed, 17 Jan 2001 03:51:58 +0100 (MET)
Received: from [134.84.252.67] by amethyst.tc.umn.edu for r-bugs@biostat.ku.dk; Tue, 16 Jan 2001 20:51:40 -0600
Message-Id: <001b01c08041$2de9cae0$43fc5486@c9wz101>
Reply-To: "Kristian Markon" <mark0060@tc.umn.edu>
From: "Kristian Markon" <mark0060@tc.umn.edu>
To: <r-bugs@biostat.ku.dk>
Subject: PR#751
Date: Tue, 16 Jan 2001 20:51:38 -0800
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 5.00.2615.200
X-MimeOLE: Produced By Microsoft MimeOLE V5.00.2615.200

I'd just like to report a possible R bug--or rather, confirm an existing one
(bug #751).

I have had some difficulty using the polyroot() function.

For example, in Win 98, R 1.1.1,

> polyroot(c(2,1,1))

correctly (per the help index) gives the roots of  1 + (1*x) + (2*x^2) as

[1] -0.5+1.322876i -0.5-1.322876i

However,

> polyroot(c(-100,0,1))

gives the roots of

[1]  10+0i -10+0i

which corresponds to -100 + x^2, not 1 - (100*x^2).

Also,

> polyroot(c(0,0,0,1))

gives

[1]   0+0i   0+0i -10+0i

which aren't all roots of x^3.


Thanks for all your efforts.

I apologize if I'm missing something.

Kristian Markon











==> 751.reply.2 <==
From pd@biostat.ku.dk  Wed Jan 17 08:02:05 2001
Received: from biostat.ku.dk (blueberry [130.225.108.193])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id HAA19898;
	Wed, 17 Jan 2001 07:59:35 +0100 (MET)
Received: (from pd@localhost)
	by biostat.ku.dk (8.9.3/8.9.3) id IAA01976;
	Wed, 17 Jan 2001 08:01:11 +0100
Sender: pd@blueberry.kubism.ku.dk
To: mark0060@tc.umn.edu
Cc: r-devel@stat.math.ethz.ch, R-bugs@biostat.ku.dk
Subject: Re: [Rd] PR#751
References: <200101170252.DAA19529@pubhealth.ku.dk>
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 17 Jan 2001 08:01:11 +0100
In-Reply-To: mark0060@tc.umn.edu's message of "Wed, 17 Jan 2001 03:52:00 +0100 (MET)"
Message-ID: <x2hf2yirwo.fsf@blueberry.kubism.ku.dk>
Lines: 71
X-Mailer: Gnus v5.7/Emacs 20.7
Mime-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: 7bit

mark0060@tc.umn.edu writes:

> I'd just like to report a possible R bug--or rather, confirm an existing one
> (bug #751).
> 
> I have had some difficulty using the polyroot() function.
> 
> For example, in Win 98, R 1.1.1,
> 
> > polyroot(c(2,1,1))
> 
> correctly (per the help index) gives the roots of  1 + (1*x) + (2*x^2) as
> 
> [1] -0.5+1.322876i -0.5-1.322876i

Mm, no. The coefficients are by increasing degree, so these are the
roots of 2+x+x^2

> x<-polyroot(c(2,1,1))
> x
[1] -0.5+1.322876i -0.5-1.322876i
> 2+x+x^2
[1] -2.220446e-16+4.440892e-16i -2.220446e-16-4.440892e-16i


> However,
> 
> > polyroot(c(-100,0,1))
> 
> gives the roots of
> 
> [1]  10+0i -10+0i
> 
> which corresponds to -100 + x^2, not 1 - (100*x^2).

as it should.

> 
> Also,
> 
> > polyroot(c(0,0,0,1))
> 
> gives
> 
> [1]   0+0i   0+0i -10+0i
> 
> which aren't all roots of x^3.

That one is way out, however. Even more "fun":

> polyroot(c(-100,0,1))
[1]  10+0i -10+0i
> x<- polyroot(c(0,0,0,1))
> x
[1]   0+0i   0+0i -10+0i
> x<-polyroot(c(2,1,1))
> x<- polyroot(c(0,0,0,1))
> x
[1]  0.0+0.000000i  0.0+0.000000i -0.5-1.322876i

I.e. the result of polyroot(c(0,0,0,1)) depends on the previous
polyroot calculation! So there's more to the problem than numerical
instability.

Thanks for pointing it out.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

==> 751.followup.2 <==
From apjaworski@mmm.com  Wed Jan 17 17:21:34 2001
Received: from sulu.mmm.com (sulu.mmm.com [192.28.4.21])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id RAA00032
	for <R-bugs@biostat.ku.dk>; Wed, 17 Jan 2001 17:21:33 +0100 (MET)
From: apjaworski@mmm.com
Received: from us-ritahayworth.mmm.com (us-ritahayworth.mmm.com [169.10.9.87])
	by sulu.mmm.com (8.8.7/8.8.7) with ESMTP id KAA23813;
	Wed, 17 Jan 2001 10:21:14 -0600 (CST)
Subject: Re: [Rd] PR#751
X-Priority: 3 (Normal)
To: r-devel@stat.math.ethz.ch, R-bugs@biostat.ku.dk
X-Mailer: Lotus Notes Release 5.0.3  March 21, 2000
Message-ID: <OF636EC57A.115D0ABC-ON862569D7.00599413@mmm.com>
Date: Wed, 17 Jan 2001 10:21:10 -0600
X-MIMETrack: Serialize by Router on US-RitaHayworth/US-Corporate/3M/US(Release 5.0.3 |March
 21, 2000) at 01/17/2001 10:21:14 AM
MIME-Version: 1.0
Content-type: text/plain; charset=us-ascii


... snip ...

> For example, in Win 98, R 1.1.1,
>
> > polyroot(c(2,1,1))
>
> correctly (per the help index) gives the roots of  1 + (1*x) + (2*x^2) as
>
> [1] -0.5+1.322876i -0.5-1.322876i

Mm, no. The coefficients are by increasing degree, so these are the
roots of 2+x+x^2

... snip ...

The manual page seems to have a typo.  It says (1.2.0 on Win)

Arguments:

       z: the vector of polynomial coefficients in decreasing order.


Andy


==> 751.reply.3 <==
From pd@biostat.ku.dk  Wed Jan 17 17:58:58 2001
Received: from biostat.ku.dk (blueberry [130.225.108.193])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id RAA00346;
	Wed, 17 Jan 2001 17:58:58 +0100 (MET)
Received: (from pd@localhost)
	by biostat.ku.dk (8.9.3/8.9.3) id SAA02739;
	Wed, 17 Jan 2001 18:00:38 +0100
Sender: pd@blueberry.kubism.ku.dk
To: apjaworski@mmm.com
Cc: r-devel@stat.math.ethz.ch, R-bugs@biostat.ku.dk
Subject: Re: [Rd] PR#751
References: <OF636EC57A.115D0ABC-ON862569D7.00599413@mmm.com>
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 17 Jan 2001 18:00:38 +0100
In-Reply-To: apjaworski@mmm.com's message of "Wed, 17 Jan 2001 10:21:10 -0600"
Message-ID: <x2zogqru4p.fsf@blueberry.kubism.ku.dk>
Lines: 37
X-Mailer: Gnus v5.7/Emacs 20.7
Mime-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: 7bit

apjaworski@mmm.com writes:

> ... snip ...
> 
> > For example, in Win 98, R 1.1.1,
> >
> > > polyroot(c(2,1,1))
> >
> > correctly (per the help index) gives the roots of  1 + (1*x) + (2*x^2) as
> >
> > [1] -0.5+1.322876i -0.5-1.322876i
> 
> Mm, no. The coefficients are by increasing degree, so these are the
> roots of 2+x+x^2
> 
> ... snip ...
> 
> The manual page seems to have a typo.  It says (1.2.0 on Win)
> 
> Arguments:
> 
>        z: the vector of polynomial coefficients in decreasing order.
> 

I suppose that could be clearer (it kind of depends on what you
consider the "normal" order), but it also has

              p(x) = z1 + z2 * x + ... + z[n] * x^(n-1)

which should be clear enough.


-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

==> 751.reply.4 <==
From pd@biostat.ku.dk  Wed Jan 17 20:45:51 2001
Received: from biostat.ku.dk (blueberry [130.225.108.193])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id UAA01167;
	Wed, 17 Jan 2001 20:45:50 +0100 (MET)
Received: (from pd@localhost)
	by biostat.ku.dk (8.9.3/8.9.3) id UAA15273;
	Wed, 17 Jan 2001 20:47:29 +0100
Sender: pd@blueberry.kubism.ku.dk
To: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Cc: mark0060@tc.umn.edu, r-devel@stat.math.ethz.ch, R-bugs@biostat.ku.dk
Subject: Re: [Rd] PR#751
References: <200101170252.DAA19529@pubhealth.ku.dk> <x2hf2yirwo.fsf@blueberry.kubism.ku.dk>
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 17 Jan 2001 20:47:27 +0100
In-Reply-To: Peter Dalgaard BSA's message of "17 Jan 2001 08:01:11 +0100"
Message-ID: <x2vgreyn8v.fsf@blueberry.kubism.ku.dk>
Lines: 47
X-Mailer: Gnus v5.7/Emacs 20.7
Mime-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: 7bit

Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk> writes:

> > [1]   0+0i   0+0i -10+0i
> > 
> > which aren't all roots of x^3.
> 
> That one is way out, however. Even more "fun":
> 
> > polyroot(c(-100,0,1))
> [1]  10+0i -10+0i
> > x<- polyroot(c(0,0,0,1))
> > x
> [1]   0+0i   0+0i -10+0i
> > x<-polyroot(c(2,1,1))
> > x<- polyroot(c(0,0,0,1))
> > x
> [1]  0.0+0.000000i  0.0+0.000000i -0.5-1.322876i
> 
> I.e. the result of polyroot(c(0,0,0,1)) depends on the previous
> polyroot calculation! So there's more to the problem than numerical
> instability.
> 
> Thanks for pointing it out.

Found and fixed. Unfortunately the code had just forgotten to test for
the case where you end with a zero-degree polynomial after zero-root
removal, so the fix has zero effect on the accuracy issue. 

The fix is simply 

--- src/appl/cpoly.c    2000/11/24 21:34:31     1.20
+++ src/appl/cpoly.c    2001/01/17 19:45:24
@@ -148,6 +148,8 @@
     nn++;
     /*-- Now, global var.  nn := #{coefficients} = (relevant degree)+1 */
 
+    if (nn == 1) return;
+
     /* make a copy of the coefficients and shr[] = | p[] | */
     for (i = 0; i < nn; i++) {
        pr[i] = opr[i];

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

Directory:  Add-ons

* PR# 966 *
Subject: update.packages() and parse(text="A B")
From: Uwe Ligges <ligges@statistik.uni-dortmund.de>
Date: Sun, 03 Jun 2001 15:34:41 +0200
--Error in DESCRIPTION file of gregmisc
--Windows pre-compiled version is fixed
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 966 <==
From ligges@statistik.uni-dortmund.de  Sun Jun  3 15:34:23 2001
Received: from nx5.HRZ.Uni-Dortmund.DE (nx5.HRZ.Uni-Dortmund.DE [129.217.131.21])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id PAA07810
	for <R-bugs@biostat.ku.dk>; Sun, 3 Jun 2001 15:34:22 +0200 (MET DST)
Received: from amadeus.statistik.uni-dortmund.de by nx5.HRZ.Uni-Dortmund.DE
          via smtp-local with ESMTP; Sun, 3 Jun 2001 15:34:17 +0200
Received: from statistik.uni-dortmund.de ([129.217.207.201])
	by amadeus.statistik.uni-dortmund.de (8.9.3+Sun/8.9.3) with ESMTP id PAA05233
	for <R-bugs@biostat.ku.dk>; Sun, 3 Jun 2001 15:34:17 +0200 (MET DST)
Message-ID: <3B1A3CF1.431C6C4A@statistik.uni-dortmund.de>
Date: Sun, 03 Jun 2001 15:34:41 +0200
From: Uwe Ligges <ligges@statistik.uni-dortmund.de>
Organization: Fachbereich Statistik, Universitaet Dortmund
X-Mailer: Mozilla 4.77 [en] (WinNT; U)
X-Accept-Language: en
MIME-Version: 1.0
To: r-bugs <R-bugs@biostat.ku.dk>
Subject: update.packages() and parse(text="A B")
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit

Hi!

I just used the following command on our NT-Server:

  update.packages()
Error in parse(file, n, text, prompt) : parse error

The problem is caused by the package gregmisc:

  x <- CRAN.packages()
  x[which(x == "gregmisc"),]

   Package    Version   Priority     Bundle    Depends 
"gregmisc"    "0.1.3"       "NA"       "NA"       "R " 


The error occurs in the line

  z[k] <- eval(parse(text = comptext))

in package.dependencies(), because in this case is:

  comptext
[1] "\"1.2.3\"  \"R \""


Best regards,
Uwe Ligges


--please do not edit the information below--

Version:
 platform = i386-pc-mingw32
 arch = x86
 os = Win32
 system = x86, Win32
 status = 
 major = 1
 minor = 2.3
 year = 2001
 month = 04
 day = 26
 language = R

Windows NT 4.0 (build 1381) Service Pack 6

Search Path:
 .GlobalEnv, package:ctest, Autoloads, package:base

==> 966.followup.1 <==
From ripley@stats.ox.ac.uk  Sun Jun  3 16:48:50 2001
Received: from toucan.stats.ox.ac.uk (toucan.stats.ox.ac.uk [163.1.20.20])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id QAA08060
	for <R-bugs@biostat.ku.dk>; Sun, 3 Jun 2001 16:48:50 +0200 (MET DST)
Received: from max106.public.ox.ac.uk (max106.public.ox.ac.uk [192.76.27.106])
	by toucan.stats.ox.ac.uk (8.9.0/8.9.0) with ESMTP id PAA07024;
	Sun, 3 Jun 2001 15:44:58 +0100 (BST)
Date: Sun, 3 Jun 2001 15:45:19 +0100 (BST)
From: Prof Brian D Ripley <ripley@stats.ox.ac.uk>
Sender: <ripley@auk.stats>
To: <ligges@statistik.uni-dortmund.de>
cc: <R-bugs@biostat.ku.dk>
Subject: Re: [Rd] update.packages() and parse(text="A B") (PR#966)
In-Reply-To: <200106031334.PAA07820@pubhealth.ku.dk>
Message-ID: <Pine.GSO.4.31.0106031539350.15393-100000@auk.stats>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII

This is a known problem with gregmisc already reported to maintainer and
fixed on my server (so it will propagate to CRAN shortly).  An update
to gregmisc is promised shortly.

Something similar happens on Unix (which is where I spotted it).  I
think you need to REMOVE gregmisc to fix it.


On Sun, 3 Jun 2001 ligges@statistik.uni-dortmund.de wrote:

> Hi!
>
> I just used the following command on our NT-Server:
>
>   update.packages()
> Error in parse(file, n, text, prompt) : parse error
>
> The problem is caused by the package gregmisc:
>
>   x <- CRAN.packages()
>   x[which(x == "gregmisc"),]
>
>    Package    Version   Priority     Bundle    Depends
> "gregmisc"    "0.1.3"       "NA"       "NA"       "R "
>
>
> The error occurs in the line
>
>   z[k] <- eval(parse(text = comptext))
>
> in package.dependencies(), because in this case is:
>
>   comptext
> [1] "\"1.2.3\"  \"R \""
>
>
> Best regards,
> Uwe Ligges
>
>
> --please do not edit the information below--
>
> Version:
>  platform = i386-pc-mingw32
>  arch = x86
>  os = Win32
>  system = x86, Win32
>  status =
>  major = 1
>  minor = 2.3
>  year = 2001
>  month = 04
>  day = 26
>  language = R
>
> Windows NT 4.0 (build 1381) Service Pack 6
>
> Search Path:
>  .GlobalEnv, package:ctest, Autoloads, package:base
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


==> 966.audit <==
Mon Jun  4 09:27:22 2001	ripley	changed notes
Mon Jun  4 09:27:22 2001	ripley	foobar
Mon Jun  4 09:27:22 2001	ripley	moved from incoming to Add-ons

==> 966.followup.2 <==
From gregory_r_warnes@groton.pfizer.com  Tue Jun  5 20:52:37 2001
Received: from mailrelay4.pfizer.com (ns2.pfizer.com [192.77.198.2])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id UAA16433
	for <R-bugs@biostat.ku.dk>; Tue, 5 Jun 2001 20:52:35 +0200 (MET DST)
Received: from gsun56.pfizer.com (localhost [127.0.0.1])
	by mailrelay4.pfizer.com (8.9.3/Pro-8.9.3) with ESMTP id OAA22137
	for <R-bugs@biostat.ku.dk>; Tue, 5 Jun 2001 14:51:59 -0400 (EDT)
Received: from groexms02.pfizer.com (localhost [127.0.0.1])
	by gsun56.pfizer.com (Pro-8.9.3/Pro-8.9.3) with ESMTP id OAA01027
	for <R-bugs@biostat.ku.dk>; Tue, 5 Jun 2001 14:53:16 -0400 (EDT)
Received: from groexcncr05.pfizer.com (unverified) by groexms02.pfizer.com
 (Content Technologies SMTPRS 4.2.1) with ESMTP id <T53f57a3415ac1e08e4162@groexms02.pfizer.com>;
 Tue, 5 Jun 2001 14:51:52 -0400
Received: by groexcncr05.pfizer.com with Internet Mail Service (5.5.2650.21)
	id <L0WSPJJK>; Tue, 5 Jun 2001 14:51:51 -0400
Message-ID: <5429125E11E4D411AF7300805FE603A8014CEB23@groexmbcr02.pfizer.com>
From: "Warnes, Gregory R" <gregory_r_warnes@groton.pfizer.com>
To: "'ripley@stats.ox.ac.uk'" <ripley@stats.ox.ac.uk>,
        r-devel@stat.math.ethz.ch
Cc: R-bugs@biostat.ku.dk
Subject: RE: [Rd] update.packages() and parse(text="A B") (PR#966)
Date: Tue, 5 Jun 2001 14:51:41 -0400 
MIME-Version: 1.0
X-Mailer: Internet Mail Service (5.5.2650.21)
Content-Type: text/plain; charset="ISO-8859-1"

A fixed version of gregmisc has been uploaded.  It should show up in CRAN
shortly.

-Greg



  > -----Original Message-----
  > From: ripley@stats.ox.ac.uk [mailto:ripley@stats.ox.ac.uk]
  > Sent: Sunday, June 03, 2001 10:49 AM
  > To: r-devel@stat.math.ethz.ch
  > Cc: R-bugs@biostat.ku.dk
  > Subject: Re: [Rd] update.packages() and parse(text="A B") (PR#966)
  > 
  > 
  > This is a known problem with gregmisc already reported to 
  > maintainer and
  > fixed on my server (so it will propagate to CRAN shortly).  
  > An update
  > to gregmisc is promised shortly.
  > 
  > Something similar happens on Unix (which is where I spotted it).  I
  > think you need to REMOVE gregmisc to fix it.
  > 
  > 
  > On Sun, 3 Jun 2001 ligges@statistik.uni-dortmund.de wrote:
  > 
  > > Hi!
  > >
  > > I just used the following command on our NT-Server:
  > >
  > >   update.packages()
  > > Error in parse(file, n, text, prompt) : parse error
  > >
  > > The problem is caused by the package gregmisc:
  > >
  > >   x <- CRAN.packages()
  > >   x[which(x == "gregmisc"),]
  > >
  > >    Package    Version   Priority     Bundle    Depends
  > > "gregmisc"    "0.1.3"       "NA"       "NA"       "R "
  > >
  > >
  > > The error occurs in the line
  > >
  > >   z[k] <- eval(parse(text = comptext))
  > >
  > > in package.dependencies(), because in this case is:
  > >
  > >   comptext
  > > [1] "\"1.2.3\"  \"R \""
  > >
  > >
  > > Best regards,
  > > Uwe Ligges
  > >
  > >
  > > --please do not edit the information below--
  > >
  > > Version:
  > >  platform = i386-pc-mingw32
  > >  arch = x86
  > >  os = Win32
  > >  system = x86, Win32
  > >  status =
  > >  major = 1
  > >  minor = 2.3
  > >  year = 2001
  > >  month = 04
  > >  day = 26
  > >  language = R
  > >
  > > Windows NT 4.0 (build 1381) Service Pack 6
  > >
  > > Search Path:
  > >  .GlobalEnv, package:ctest, Autoloads, package:base
  > >
  > > 
  > -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.
  > -.-.-.-.-.-.-.-.-.-
  > > r-devel mailing list -- Read 
  > http://www.ci.tuwien.ac.at/~hornik/R/R-  > FAQ.html
  > > Send 
  > "info", "help", or "[un]subscribe"
  > > (in 
  > the "body", not the subject !)  To: 
  > r-devel-request@stat.math.ethz.ch
  > > 
  > _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._.
  > _._._._._._._._._._
  > >
  > 
  > -- 
  > Brian D. Ripley,                  ripley@stats.ox.ac.uk
  > Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
  > University of Oxford,             Tel:  +44 1865 272861 (self)
  > 1 South Parks Road,                     +44 1865 272860 (secr)
  > Oxford OX1 3TG, UK                Fax:  +44 1865 272595
  > 
  > 
  > -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.
  > -.-.-.-.-.-.-.-.-.-
  > r-devel mailing list -- Read 
  > http://www.ci.tuwien.ac.at/~hornik/R/R-  > FAQ.html
  > Send 
  > "info", "help", or "[un]subscribe"
  > (in the 
  > "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
  > _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._.
  > _._._._._._._._._._
  > 


LEGAL NOTICE
Unless expressly stated otherwise, this message is confidential and may be privileged. It is intended for the addressee(s) only. Access to this E-mail by anyone else is unauthorized. If you are not an addressee, any disclosure or copying of the contents of this E-mail or any action taken (or not taken) in reliance on it is unauthorized and may be unlawful. If you are not an addressee, please inform the sender immediately.
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
* PR# 496 *
From: bonneau@epi.roazhon.inra.fr (en148)
Date: Tue, 21 Mar 2000 10:57:13 +0100 (MET)
--base R has no est.variogram function.
--This appears to be a bug report on sgeostat.
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 496 <==
From bonneau@epi.roazhon.inra.fr  Tue Mar 21 11:40:23 2000
Received: from stat.math.ethz.ch (daemon@hypatia.ethz.ch [129.132.58.23])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id LAA24613
	for <R-bugs@biostat.ku.dk>; Tue, 21 Mar 2000 11:40:21 +0100 (MET)
Received: (from daemon@localhost)
	by stat.math.ethz.ch (8.9.1/8.9.1) id LAA00472
	for <r-bugs@hypatia.math.ethz.ch>; Tue, 21 Mar 2000 11:40:33 +0100 (MET)
Received: from epi.roazhon.inra.fr(194.167.76.1)
 via SMTP by hypatia, id smtpdAAAa0007L; Tue Mar 21 11:40:28 2000
Received: from (bonneau@localhost)
          by epi.roazhon.inra.fr (8.8.8/jtpda-5.3) id KAA09010
          for r-bugs@lists.r-project.org; Tue, 21 Mar 2000 10:57:13 +0100 (MET)
Date: Tue, 21 Mar 2000 10:57:13 +0100 (MET)
From: bonneau@epi.roazhon.inra.fr (en148)
Message-Id: <200003210957.KAA09010@epi.roazhon.inra.fr>

I am using R 0.65.1 under linux (Redhat 6.0),
and I have a problem with the est.variogram function when the first lag is empty (I am trying to estimate anisotropic varios)

fittedpnt<-point(fitted, x="X2", y="X3")
fittedpair<-pair(fittedpnt, num.lags=15, type="anisotropic", theta=60, dtheta=20, maxdist=maxfittedist)
fittedvario<-est.variogram(fittedpnt, fittedpair, "fit")

With my datas I have no pair in lags 1 to 3 and the error message is :
Error in psort(x, partial) : index 0 outside bounds

What can I do, in order to fix the bug ?

==> 496.audit <==
Sat Apr 01 07:32:27 2000	ripley	changed notes
Sat Apr 01 07:32:27 2000	ripley	moved from incoming to Add-ons
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
* PR# 930 *
Subject: Re: [R] Crazy plots of time-series against dates
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 01 May 2001 21:33:53 +0200
--error in chron package
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 930 <==
From postmaster@franz.stat.wisc.edu  Tue May  1 21:24:22 2001
Received: from franz.stat.wisc.edu (root@franz.stat.wisc.edu [128.105.174.95])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id VAA02135
	for <r-bugs@biostat.ku.dk>; Tue, 1 May 2001 21:24:22 +0200 (MET DST)
Received: from pubhealth.ku.dk (really [130.225.108.10]) by franz.stat.wisc.edu
	via smail with esmtp
	id <m14ufl9-000JdgC@franz.stat.wisc.edu> (Debian Smail3.2.0.111)
	for <r-bugs@r-project.org>; Tue, 1 May 2001 14:24:31 -0500 (CDT) 
Received: from blueberry.kubism.ku.dk (blueberry [130.225.108.193])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id VAA02130;
	Tue, 1 May 2001 21:24:00 +0200 (MET DST)
Received: (from pd@localhost)
	by blueberry.kubism.ku.dk (8.9.3/8.9.3) id VAA15871;
	Tue, 1 May 2001 21:33:53 +0200
Sender: pd@pubhealth.ku.dk
To: "Marco Taboga" <mtaboga@tiscalinet.it>
Cc: <r-help@stat.math.ethz.ch>, r-bugs@r-project.org
Subject: Re: [R] Crazy plots of time-series against dates
References: <Pine.A41.4.33.0104300957140.85214-100000@homer11.u.washington.edu> <005f01c0d25d$c85cf2a0$7e2a0a3e@xxxx> <x2wv81klse.fsf@blueberry.kubism.ku.dk> <001301c0d26f$215cb320$c7220a3e@xxxx>
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 01 May 2001 21:33:53 +0200
In-Reply-To: "Marco Taboga"'s message of "Tue, 1 May 2001 20:47:09 +0200"
Message-ID: <x2zocwdftq.fsf@blueberry.kubism.ku.dk>
Lines: 29
X-Mailer: Gnus v5.7/Emacs 20.7
Mime-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: 7bit

"Marco Taboga" <mtaboga@tiscalinet.it> writes:

> OK, it works.  xlab and ylab had to be set properly.
> If you want to see what actually goes on, try:
> a<-chron(1:2000)
> b<-1:2000
> plot(a,b,type="l")
> 

One of the standard blunders with R's lazy evaluation and substitute is
to change the value of part of a substitute expression before it is
evaluated. I think the chron maintainer even inserted a note in the
FAQ about that (Hi, Kurt ;) )

In plot.times insert the line below to fix it

    if (!is.null(type <- dots$type)) 
        if (any(type == c("l", "b", "o"))) {
            xlab ; ylab  # force promises
            nas <- is.na(x)
            ...

Cc'ed to R-bugs so that it gets filed and eventually fixed.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

==> 930.audit <==
Wed May  2 19:05:45 2001	ripley	changed notes
Wed May  2 19:05:45 2001	ripley	foobar
Wed May  2 19:05:45 2001	ripley	moved from incoming to Add-ons
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
* PR# 950 *
Subject:  lattice: dev.print(postscript) gives probl. false background Info 
From: Peter Malewski <p.malewski@tu-bs.de>
Date: Sat, 26 May 2001 23:20:29 +0200
-- no notes --
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 950 <==
From postmaster@franz.stat.wisc.edu  Sat May 26 23:28:58 2001
Received: from franz.stat.wisc.edu (root@franz.stat.wisc.edu [128.105.174.95])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id XAA28783
	for <r-bugs@biostat.ku.dk>; Sat, 26 May 2001 23:28:58 +0200 (MET DST)
Received: from mout0.freenet.de (really [194.97.50.131]) by franz.stat.wisc.edu
	via smail with esmtp (ident exim using rfc1413)
	id <m153lcC-000JIzC@franz.stat.wisc.edu> (Debian Smail3.2.0.111)
	for <r-bugs@r-project.org>; Sat, 26 May 2001 16:28:52 -0500 (CDT) 
Received: from [194.97.50.144] (helo=mx1.freenet.de)
	by mout0.freenet.de with esmtp (Exim 3.22 #1)
	id 153lcB-00030a-00; Sat, 26 May 2001 23:28:51 +0200
Received: from b8fba.pppool.de ([213.7.143.186] helo=Uranus)
	by mx1.freenet.de with esmtp (Exim 3.22 #1)
	id 153lcA-0003LO-00; Sat, 26 May 2001 23:28:51 +0200
Received: from peter by Uranus with local (Exim 3.12 #1 (Debian))
	id 153lU5-0005aI-00; Sat, 26 May 2001 23:20:29 +0200
To: r-bugs@r-project.org
Subject:  lattice: dev.print(postscript) gives probl. false background Info 
Cc: p.malewski@tu-bs.de
Message-Id: <E153lU5-0005aI-00@Uranus>
From: Peter Malewski <p.malewski@tu-bs.de>
Date: Sat, 26 May 2001 23:20:29 +0200

There seems to be a problem with the background margins (I only recognized it in a latex ):

xyplot(rnorm(100) ~ rnorm(100))
dev.print(postscript,"/tmp/tmp.ps")

whereas this works on the 1.2.3 version but not with 1.3.0:

dev.copy2eps("/tmp/tmp.ps")                 

both times a warning appears:
Warning message: 
unknown postscript font family, using Helvetica 


Here is the latex-file:

\documentclass{book}
\usepackage{graphicx}

\begin{document}
text texttext texttext texttext texttext texttext text
 \begin{figure}[htb!]
   \begin{center}
     \includegraphics[width=\columnwidth]{/tmp/tmp}      
     \caption{asdas}
   \end{center}
 \end{figure}
texttexttexttexttexttexttexttexttexttexttext
\end{document}

Peter


<<insert bug report here>>



--please do not edit the information below--

Version:
 platform = i686-pc-linux-gnu
 arch = i686
 os = linux-gnu
 system = i686, linux-gnu
 status = Under development (unstable)
 major = 1
 minor = 3.0
 year = 2001
 month = 05
 day = 25
 language = R

Search Path:
 .GlobalEnv, package:grid, package:lattice, package:ctest, Autoloads, package:base

==> 950.audit <==
Mon May 28 21:41:02 2001	thomas	moved from incoming to Add-ons
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
* PR# 948 *
Subject:  xyplot,grid.text segfault 
From: Peter Malewski <p.malewski@tu-bs.de>
Date: Sat, 26 May 2001 13:24:11 +0200
-- no notes --
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 948 <==
From postmaster@franz.stat.wisc.edu  Sat May 26 13:24:02 2001
Received: from franz.stat.wisc.edu (root@franz.stat.wisc.edu [128.105.174.95])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id NAA27393
	for <r-bugs@biostat.ku.dk>; Sat, 26 May 2001 13:24:02 +0200 (MET DST)
Received: from mout0.freenet.de (really [194.97.50.131]) by franz.stat.wisc.edu
	via smail with esmtp (ident exim using rfc1413)
	id <m153cAm-000JIqC@franz.stat.wisc.edu> (Debian Smail3.2.0.111)
	for <r-bugs@r-project.org>; Sat, 26 May 2001 06:23:56 -0500 (CDT) 
Received: from [194.97.50.135] (helo=mx2.freenet.de)
	by mout0.freenet.de with esmtp (Exim 3.22 #1)
	id 153cAj-0006kz-00; Sat, 26 May 2001 13:23:53 +0200
Received: from b90b8.pppool.de ([213.7.144.184] helo=Uranus)
	by mx2.freenet.de with esmtp (Exim 3.22 #1)
	id 153cAi-0005E0-00; Sat, 26 May 2001 13:23:53 +0200
Received: from peter by Uranus with local (Exim 3.12 #1 (Debian))
	id 153cB1-00014k-00; Sat, 26 May 2001 13:24:11 +0200
To: r-bugs@r-project.org
Subject:  xyplot,grid.text segfault 
Cc: p.malewski@tu-bs.de
Message-Id: <E153cB1-00014k-00@Uranus>
From: Peter Malewski <p.malewski@tu-bs.de>
Date: Sat, 26 May 2001 13:24:11 +0200

First, thank you very much for that lattice-package, second, the code
below segfaults R:

zz <- data.frame(
                 y=rnorm(100),x=rnorm(100),z=round(rnorm(100)),
                 g=as.character(rep(1:2,50)))
xyplot(y~ x|z,data=zz,groups=g,
            panel = function(x, y, subscripts, groups)  
            grid.text(x=x, y=y, label=groups[subscripts])
       )

I'm not sure if I have understood that panel stuff right, but anyway,
it shouldn't segfault. BTW: I also unsure if I have to use the
develop-version of R & whether lattice bugs should be submitted
(because of the devel-status??).

Peter

--please do not edit the information below--

Version:
 platform = i686-pc-linux-gnu
 arch = i686
 os = linux-gnu
 system = i686, linux-gnu
 status = 
 major = 1
 minor = 2.3
 year = 2001
 month = 04
 day = 26
 language = R

Search Path:
 .GlobalEnv, package:grid, package:lattice, package:ctest, Autoloads, package:base

==> 948.reply.1 <==
From pd@blueberry.kubism.ku.dk  Sat May 26 16:13:26 2001
Received: from blueberry.kubism.ku.dk (blueberry [130.225.108.193])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id QAA27829;
	Sat, 26 May 2001 16:13:25 +0200 (MET DST)
Received: (from pd@localhost)
	by blueberry.kubism.ku.dk (8.9.3/8.9.3) id QAA28846;
	Sat, 26 May 2001 16:18:09 +0200
Sender: pd@pubhealth.ku.dk
To: p.malewski@tu-bs.de
Cc: r-devel@stat.math.ethz.ch, R-bugs@biostat.ku.dk
Subject: Re: [Rd] xyplot,grid.text segfault (PR#948)
References: <200105261124.NAA27403@pubhealth.ku.dk>
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 26 May 2001 16:18:08 +0200
In-Reply-To: p.malewski@tu-bs.de's message of "Sat, 26 May 2001 13:24:03 +0200 (MET DST)"
Message-ID: <x2ae40p527.fsf@blueberry.kubism.ku.dk>
Lines: 37
X-Mailer: Gnus v5.7/Emacs 20.7
Mime-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: 7bit

p.malewski@tu-bs.de writes:

> First, thank you very much for that lattice-package, second, the code
> below segfaults R:
> 
> zz <- data.frame(
>                  y=rnorm(100),x=rnorm(100),z=round(rnorm(100)),
>                  g=as.character(rep(1:2,50)))
> xyplot(y~ x|z,data=zz,groups=g,
>             panel = function(x, y, subscripts, groups)  
>             grid.text(x=x, y=y, label=groups[subscripts])
>        )
> 
> I'm not sure if I have understood that panel stuff right, but anyway,
> it shouldn't segfault. BTW: I also unsure if I have to use the
> develop-version of R & whether lattice bugs should be submitted
> (because of the devel-status??).

Well, it is easier for us to deal with erroneously submitted bug than
erroneously unsubmitted ones. We have an Add-Ons category on r-bugs to
put it in. 

Lattice is closely associated with the core team, so we'd be able to
track this kind of problem. With some other packages which we do not
maintain, we have some trouble figuring out whether a report has been
solved or whether it was even a bug in the first place (it would be
nice if the original submitters would lend a hand there).

As I remember it, Paul and Deepayan were somewhat vague about exactly
what was required, except that you'd need something relatively recent.
A segfault certainly looks like a real bug.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

==> 948.reply.2 <==
From pd@blueberry.kubism.ku.dk  Sat May 26 18:30:14 2001
Received: from blueberry.kubism.ku.dk (blueberry [130.225.108.193])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id SAA28262;
	Sat, 26 May 2001 18:30:13 +0200 (MET DST)
Received: (from pd@localhost)
	by blueberry.kubism.ku.dk (8.9.3/8.9.3) id SAA28920;
	Sat, 26 May 2001 18:34:57 +0200
Sender: pd@pubhealth.ku.dk
To: p.malewski@tu-bs.de
Cc: R-bugs@biostat.ku.dk
Subject: Re: [Rd] xyplot,grid.text segfault (PR#948)
References: <200105261124.NAA27403@pubhealth.ku.dk> <x2ae40p527.fsf@blueberry.kubism.ku.dk>
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 26 May 2001 18:34:57 +0200
In-Reply-To: Peter Dalgaard BSA's message of "26 May 2001 16:18:08 +0200"
Message-ID: <x2r8xcm5la.fsf@blueberry.kubism.ku.dk>
Lines: 15
X-Mailer: Gnus v5.7/Emacs 20.7
Mime-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: 7bit

Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk> writes:


> As I remember it, Paul and Deepayan were somewhat vague about exactly
> what was required, except that you'd need something relatively recent.
> A segfault certainly looks like a real bug.

...and your example crashes with the current development version of R
too, anyway.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

==> 948.reply.3 <==
From pd@blueberry.kubism.ku.dk  Sat May 26 20:48:38 2001
Received: from blueberry.kubism.ku.dk (blueberry [130.225.108.193])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id UAA28449;
	Sat, 26 May 2001 20:48:37 +0200 (MET DST)
Received: (from pd@localhost)
	by blueberry.kubism.ku.dk (8.9.3/8.9.3) id UAA28992;
	Sat, 26 May 2001 20:53:22 +0200
Sender: pd@pubhealth.ku.dk
To: p.malewski@tu-bs.de
Cc: r-devel@stat.math.ethz.ch, R-bugs@biostat.ku.dk
Subject: Re: [Rd] xyplot,grid.text segfault (PR#948)
References: <200105261124.NAA27403@pubhealth.ku.dk>
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 26 May 2001 20:53:22 +0200
In-Reply-To: p.malewski@tu-bs.de's message of "Sat, 26 May 2001 13:24:03 +0200 (MET DST)"
Message-ID: <x2k834eycd.fsf@blueberry.kubism.ku.dk>
Lines: 43
X-Mailer: Gnus v5.7/Emacs 20.7
Mime-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: 7bit

p.malewski@tu-bs.de writes:

> First, thank you very much for that lattice-package, second, the code
> below segfaults R:
> 
> zz <- data.frame(
>                  y=rnorm(100),x=rnorm(100),z=round(rnorm(100)),
>                  g=as.character(rep(1:2,50)))
> xyplot(y~ x|z,data=zz,groups=g,
>             panel = function(x, y, subscripts, groups)  
>             grid.text(x=x, y=y, label=groups[subscripts])
>        )
> 
> I'm not sure if I have understood that panel stuff right, but anyway,
> it shouldn't segfault. BTW: I also unsure if I have to use the
> develop-version of R & whether lattice bugs should be submitted
> (because of the devel-status??).
> 
> Peter

grid.text() seems unhappy with being passed a non-character vector for
the label argument. I think Paul muttered something to the effect that
he knew there would be that kind of weaknesses in the code.

The following runs successfully (well, at least it doesn't crash - the
result looks a bit weird):

library(lattice)
zz <- data.frame(
                 y=rnorm(100),x=rnorm(100),z=round(rnorm(100)),
                 g=as.character(rep(1:2,50)))
xyplot(y~ x|z,data=zz,groups=g,
            panel = function(x, y, subscripts, groups)
            grid.text(x=x, y=y,
                      label=as.character(groups[subscripts]))
       )


-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

==> 948.audit <==
Mon May 28 21:40:24 2001	thomas	moved from incoming to Add-ons

==> 948.followup.1 <==
From paul@stat.auckland.ac.nz  Tue May 29 01:31:51 2001
Received: from mailhost.auckland.ac.nz (mailhost.auckland.ac.nz [130.216.1.4] (may be forged))
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id BAA14283;
	Tue, 29 May 2001 01:31:48 +0200 (MET DST)
Received: from stat1.stat.auckland.ac.nz (stat1.stat.auckland.ac.nz [130.216.93.1])
	by mailhost.auckland.ac.nz (8.9.2/8.9.2/8.9.2-ua) with ESMTP id LAA14430;
	Tue, 29 May 2001 11:31:40 +1200 (NZST)
Received: from murrell (murrell.stat.auckland.ac.nz [130.216.93.23])
	by stat1.stat.auckland.ac.nz (8.9.3+Sun/8.8.8) with SMTP id LAA08200;
	Tue, 29 May 2001 11:31:40 +1200 (NZST)
Message-ID: <019001c0e7d0$fb44fc70$175dd882@stat.auckland.ac.nz>
From: "Paul Murrell" <paul@stat.auckland.ac.nz>
To: <p.malewski@tu-bs.de>, "Peter Dalgaard BSA" <p.dalgaard@biostat.ku.dk>
Cc: <r-devel@stat.math.ethz.ch>, <R-bugs@biostat.ku.dk>
References: <200105261124.NAA27403@pubhealth.ku.dk> <x2k834eycd.fsf@blueberry.kubism.ku.dk>
Subject: Re: [Rd] xyplot,grid.text segfault (PR#948)
Date: Tue, 29 May 2001 11:50:31 +1200
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 5.00.2014.211
X-MimeOLE: Produced By Microsoft MimeOLE V5.00.2014.211

Hi


> grid.text() seems unhappy with being passed a non-character vector for
> the label argument. I think Paul muttered something to the effect that
> he knew there would be that kind of weaknesses in the code.
>
> The following runs successfully (well, at least it doesn't crash - the
> result looks a bit weird):
>
> library(lattice)
> zz <- data.frame(
>                  y=rnorm(100),x=rnorm(100),z=round(rnorm(100)),
>                  g=as.character(rep(1:2,50)))
> xyplot(y~ x|z,data=zz,groups=g,
>             panel = function(x, y, subscripts, groups)
>             grid.text(x=x, y=y,
>                       label=as.character(groups[subscripts]))
>        )


The results look weird because the x and y locations in grid.text are in
"npc" units by default (that is, they are taken as proportions of the
dimensions of the region they are being drawn in).  This means that values
outside the range 0..1 are drawn outside the limits of the plotting region.
You need to specify "native" units in the call so that the x and y locations
are relative to the scales on the axes of the plotting region.  For example,

    grid.text(x=x, y=y,
                  label=as.character(groups[subscripts]),
                  default.units="native")

This unit stuff is a "feature" of the underlying grid graphics, which is
probably why you did not notice it.  The default panel functions do,
however, provide examples of what needs to be done.  See, for example,
panel.xyplot.

Paul


~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

Directory:  Analyses

none

Directory:  Documentation

* PR# 942 *
Subject: Minor documentation issue
From: jebacklund@dowagro.com
Date: Wed, 16 May 2001 19:58:13 +0200 (MET DST)
--There is an objects() function, and help(objects) documents it. I don't see the
--problem here.
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 942 <==
From jebacklund@dowagro.com  Wed May 16 19:58:14 2001
Received: from blueberry.kubism.ku.dk (blueberry [130.225.108.193])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id TAA02501
	for <R-bugs@biostat.ku.dk>; Wed, 16 May 2001 19:58:13 +0200 (MET DST)
Date: Wed, 16 May 2001 19:58:13 +0200 (MET DST)
From: jebacklund@dowagro.com
Message-Id: <200105161758.TAA02501@pubhealth.ku.dk>
To: R-bugs@biostat.ku.dk
Subject: Minor documentation issue

Full_Name: Jan Erik Backlund
Version: 1.2.3
OS: Windows 98
Submission from: (NULL) (216.99.65.32)


R is fantastic and I greatly appreciate your efforts and creativity in
developing it.

Minor documentation suggestion:
Include an 'objects' function listing in the base section of the reference
manual.  It need only say 'Please see function ls'.

Is this the preferred way of submitting suggestions regarding the documentation?

==> 942.audit <==
Mon May 21 08:54:07 2001	ripley	moved from incoming to Documentation
Mon May 28 21:32:53 2001	thomas	changed notes
Mon May 28 21:32:53 2001	thomas	foobar
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
* PR# 899 *
Subject: documentation problems in str.Rd
From: Kurt Hornik <Kurt.Hornik@ci.tuwien.ac.at>
Date: Sat, 7 Apr 2001 23:08:23 +0200
--fixed (both code and documentation) for 1.3  (MM).
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 899 <==
From postmaster@franz.stat.wisc.edu  Sat Apr  7 23:56:52 2001
Received: from franz.stat.wisc.edu (root@franz.stat.wisc.edu [128.105.174.95])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id XAA01835
	for <r-bugs@biostat.ku.dk>; Sat, 7 Apr 2001 23:56:51 +0200 (MET DST)
Received: from mr.tuwien.ac.at (really [128.130.2.10]) by franz.stat.wisc.edu
	via smail with esmtp
	id <m14m0hY-000JGHC@franz.stat.wisc.edu> (Debian Smail3.2.0.111)
	for <r-bugs@r-project.org>; Sat, 7 Apr 2001 16:57:00 -0500 (CDT) 
Received: from mithrandir.hornik.net (a119.dialin.tuwien.ac.at [192.35.240.9])
	by mr.tuwien.ac.at (8.11.1/8.11.1) with ESMTP id f37Lukf23525
	for <r-bugs@r-project.org>; Sat, 7 Apr 2001 23:56:52 +0200 (MET DST)
Received: from hornik by mithrandir.hornik.net with local (Exim 3.12 #1 (Debian))
	id 14lzwV-0007VQ-00
	for <r-bugs@r-project.org>; Sat, 07 Apr 2001 23:08:23 +0200
From: Kurt Hornik <Kurt.Hornik@ci.tuwien.ac.at>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
Message-ID: <15055.33223.701136.778150@mithrandir.hornik.net>
Date: Sat, 7 Apr 2001 23:08:23 +0200
To: r-bugs@r-project.org
Subject: documentation problems in str.Rd
X-Mailer: VM 6.92 under Emacs 20.7.2
Reply-To: Kurt.Hornik@ci.tuwien.ac.at
Sender: Kurt Hornik <hornik@ci.tuwien.ac.at>

File `src/library/base/man/str.Rd' shows the usage

  ls.str(name, pattern, mode = "any", max.level = 1, give.attr = FALSE)

whereas the code for ls.str() really has

  function (..., mode = "any", max.level = 1, give.attr = FALSE)

where the `...' is passed to ls().

The usage indicates `pattern' as a positional argument, which it is not.
Hence, e.g.
  ls.str("package:base", "^a")
will not work as documented.

I think one needs to document the `...' structure and say that the ...
args are passed on to ls().

Also, currently arguments `name', `pattern' and `mode' to ls.str() and
argument `...' to lsf.str() and the str* functions are not documented.

--please do not edit the information below--

Version:
 platform = i686-pc-linux-gnu
 arch = i686
 os = linux-gnu
 system = i686, linux-gnu
 status = Patched
 major = 1
 minor = 2.2
 year = 2001
 month = 04
 day = 07
 language = R

Search Path:
 .GlobalEnv, package:kh, Autoloads, package:base

==> 899.audit <==
Sun Apr 15 07:52:40 2001	ripley	moved from incoming to Documentation
Fri May 11 09:49:04 2001	maechler	changed notes
Fri May 11 09:49:04 2001	maechler	foobar
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

Directory:  Graphics

* PR# 943 *
Subject: legend() with xpd=T; omission of initial plot character
From: John Maindonald <john.maindonald@anu.edu.au>
Date: Sun, 20 May 2001 10:35:16 +1000
-- no notes --
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 943 <==
From postmaster@franz.stat.wisc.edu  Sun May 20 02:32:40 2001
Received: from franz.stat.wisc.edu (franz.stat.wisc.edu [128.105.174.95])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id CAA02494
	for <r-bugs@biostat.ku.dk>; Sun, 20 May 2001 02:32:39 +0200 (MET DST)
Received: from mail.anu.edu.au (really [150.203.2.7]) by franz.stat.wisc.edu
	via smail with esmtp
	id <m151H95-000JH8C@franz.stat.wisc.edu> (Debian Smail3.2.0.111)
	for <r-bugs@r-project.org>; Sat, 19 May 2001 19:32:31 -0500 (CDT) 
Received: from anugpo.anu.edu.au (anugpo.anu.edu.au [150.203.2.6])
	by mail.anu.edu.au (8.9.3/8.9.3) with ESMTP id KAA18515
	for <r-bugs@r-project.org>; Sun, 20 May 2001 10:32:27 +1000 (EST)
Received: from soda.anu.edu.au (soda.anu.edu.au [150.203.33.17])
	by anugpo.anu.edu.au (8.9.3+Sun/8.9.3) with ESMTP id KAA22405
	for <r-bugs@r-project.org>; Sun, 20 May 2001 10:32:27 +1000 (EST)
Message-Id: <5.0.2.1.1.20010520103337.00ac8b10@pophost.anu.edu.au>
X-Sender: u9801539@pophost.anu.edu.au (Unverified)
X-Mailer: QUALCOMM Windows Eudora Version 5.0.2
Date: Sun, 20 May 2001 10:35:16 +1000
To: r-bugs@r-project.org
From: John Maindonald <john.maindonald@anu.edu.au>
Subject: legend() with xpd=T; omission of initial plot character
Mime-Version: 1.0
Content-Type: text/plain; charset="us-ascii"; format=flowed


In the following:

plot(0:1, 0:1)
legend(x=0, y=1.2, pch=c(1,2), legend=c("May","June"))

the first plot character is omitted when plotting to
the screen.

I obtained the same behaviour when placing a legend
in the margin following use of pairs()

-please do not edit the information below--

Version:
  platform = i386-pc-mingw32
  arch = x86
  os = Win32
  system = x86, Win32
  status =
  major = 1
  minor = 2.3
  year = 2001
  month = 04
  day = 26
  language = R

Windows 98 SE 4.10 (build 2222)  A

Search Path:
  .GlobalEnv, package:ctest, Autoloads, package:base
John Maindonald               email : john.maindonald@anu.edu.au
Statistical Consulting Unit,  phone : (6125)3998
c/o CMA, SMS,                 fax   : (6125)5549
John Dedman Mathematical Sciences Building
Australian National University
Canberra ACT 0200
Australia


==> 943.audit <==
Mon May 21 08:54:07 2001	ripley	moved from incoming to Graphics
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
* PR# 660 *
Subject: identify.default ignores any setting of cex.
From: Prof Brian Ripley <ripley@stats.ox.ac.uk>
Date: Fri, 15 Sep 2000 10:23:39 +0100 (BST)
-- no notes --
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 660 <==
From postmaster@franz.stat.wisc.edu  Fri Sep 15 11:23:32 2000
Received: from stat.math.ethz.ch (daemon@hypatia.ethz.ch [129.132.58.23])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id LAA13327
	for <R-bugs@biostat.ku.dk>; Fri, 15 Sep 2000 11:23:32 +0200 (MET DST)
Received: (from daemon@localhost)
	by stat.math.ethz.ch (8.9.1/8.9.1) id LAA17846
	for <r-bugs@hypatia.math.ethz.ch>; Fri, 15 Sep 2000 11:23:49 +0200 (MET DST)
Received: from franz.stat.wisc.edu(128.105.174.95)
 via SMTP by hypatia, id smtpdAAAa004Mn; Fri Sep 15 11:23:42 2000
Received: from toucan.stats.ox.ac.uk (really [163.1.20.20]) by franz.stat.wisc.edu
	via in.smtpd with esmtp
	id <m13Zrkl-000IW0C@franz.stat.wisc.edu> (Debian Smail3.2.0.102)
	for <R-bugs@r-project.org>; Fri, 15 Sep 2000 04:25:51 -0500 (CDT) 
Received: from localhost (ripley@localhost)
	by toucan.stats.ox.ac.uk (8.9.0/8.9.0) with ESMTP id KAA14892
	for <R-bugs@r-project.org>; Fri, 15 Sep 2000 10:23:39 +0100 (BST)
X-Authentication-Warning: toucan.stats: ripley owned process doing -bs
Date: Fri, 15 Sep 2000 10:23:39 +0100 (BST)
From: Prof Brian Ripley <ripley@stats.ox.ac.uk>
X-Sender: ripley@toucan.stats
To: R-bugs@r-project.org
Subject: identify.default ignores any setting of cex.
Message-ID: <Pine.GSO.4.05.10009151011510.14885-100000@toucan.stats>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII

R 1.1.1 on Windows, but I think this is widespread.

Using either

par(cex=0.5)
plot(1:10)
identify(1:10)

or

plot(1:10)
identify(1:10, cex=0.5)

ignores the cex setting.  The root cause is that par(cex=0.5)
alters cexbase for the device but sets cex=1.0, and the internal
text plotting routines use cex and not cexbase.

The obvious fix is to set cex to cexbase in do_identify. However,
if this is fixed, there is another problem, The offset of the label
is related to the cex in use for the label, and not for the symbol.
So

plot(1:10, type="n")
points(1:10, cex=5)
identify(1:10)

is not sensible in placing the labels.  That may be hard to anticipate,
but 

plot(1:10)
identify(1:10, cex=0.5)

needs to use cex=1 not cex=0.5 for the adjustment.  Perhaps identify is
trying too hard, and should give the user more control over the precise
position of the label (as S-PLUS does).

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


==> 660.audit <==
Wed Oct 25 06:57:35 2000	ripley	moved from incoming to Graphics

==> 660.followup.1 <==
From ligges@statistik.uni-dortmund.de  Wed Apr 25 17:24:42 2001
Received: from nx5.HRZ.Uni-Dortmund.DE (nx5.HRZ.Uni-Dortmund.DE [129.217.131.21])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id RAA02114
	for <R-bugs@biostat.ku.dk>; Wed, 25 Apr 2001 17:24:42 +0200 (MET DST)
Received: from amadeus.statistik.uni-dortmund.de by nx5.HRZ.Uni-Dortmund.DE
          via smtp-local with ESMTP; Wed, 25 Apr 2001 17:24:51 +0200
Received: from statistik.uni-dortmund.de ([129.217.207.201])
	by amadeus.statistik.uni-dortmund.de (8.9.3+Sun/8.9.3) with ESMTP id RAA01760;
	Wed, 25 Apr 2001 17:24:50 +0200 (MET DST)
Message-ID: <3AE6EC55.6C1D8C7A@statistik.uni-dortmund.de>
Date: Wed, 25 Apr 2001 17:25:09 +0200
From: Uwe Ligges <ligges@statistik.uni-dortmund.de>
Organization: Fachbereich Statistik, Universitaet Dortmund
X-Mailer: Mozilla 4.76 [en] (WinNT; U)
X-Accept-Language: en
MIME-Version: 1.0
To: r-bugs <R-bugs@biostat.ku.dk>
CC: "Brian D. Ripley" <ripley@stats.ox.ac.uk>
Subject: Re: identify.default ignores any setting of cex (PR#660)
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit

A follow-up to PR#660 (15 Sep 2000) from Brian Ripley:

> R 1.1.1 on Windows, but I think this is widespread.
>
> Using either
>
> par(cex=0.5)
> plot(1:10)
> identify(1:10)
>
> or
> 
> plot(1:10)
> identify(1:10, cex=0.5)
> 
> ignores the cex setting.  The root cause is that par(cex=0.5)
> alters cexbase for the device but sets cex=1.0, and the internal
> text plotting routines use cex and not cexbase.
> 
> The obvious fix is to set cex to cexbase in do_identify. However,
> if this is fixed, there is another problem, The offset of the label
> is related to the cex in use for the label, and not for the symbol.
> So
> 
> plot(1:10, type="n")
> points(1:10, cex=5)
> identify(1:10)
> 
> is not sensible in placing the labels.  That may be hard to anticipate,
> but 
> 
> plot(1:10)
> identify(1:10, cex=0.5)
> 
> needs to use cex=1 not cex=0.5 for the adjustment.  Perhaps identify is
> trying too hard, and should give the user more control over the precise
> position of the label (as S-PLUS does).


The same with 

 par(cex=1); plot(1:10); text(4, 5, "Hello World") # OK
 par(cex=2); plot(1:10); text(4, 5, "Hello World") # OK
 par(cex=2); plot(1:10); text(4, 5, "Hello World", cex = 1) # NOT OK
 par(cex=2); plot(1:10); text(4, 5, "Hello World", cex = 0.5)

So the scaling with cex in text() is relative to the par() settings,
which is not the expected behaviour.


[R-1.2.2 on WinNT 4.0]

Uwe Ligges

==> 660.followup.2 <==
From ripley@stats.ox.ac.uk  Wed Apr 25 20:00:09 2001
Received: from toucan.stats.ox.ac.uk (toucan.stats.ox.ac.uk [163.1.20.20])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id UAA03187
	for <R-bugs@biostat.ku.dk>; Wed, 25 Apr 2001 20:00:09 +0200 (MET DST)
Received: from max166.public.ox.ac.uk (max166.public.ox.ac.uk [192.76.27.166])
	by toucan.stats.ox.ac.uk (8.9.0/8.9.0) with ESMTP id SAA06061;
	Wed, 25 Apr 2001 18:56:30 +0100 (BST)
Date: Wed, 25 Apr 2001 18:55:47 +0100 (GMT Daylight Time)
From: Prof Brian D Ripley <ripley@stats.ox.ac.uk>
To: <ligges@statistik.uni-dortmund.de>
cc: <r-devel@stat.math.ethz.ch>, <R-bugs@biostat.ku.dk>
Subject: Re: [Rd] Re: identify.default ignores any setting of cex (PR#660)
In-Reply-To: <200104251524.RAA02124@pubhealth.ku.dk>
Message-ID: <Pine.WNT.4.31.0104251852500.300-100000@tern.stats>
Sender: ripley@stats.ox.ac.uk
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII

On Wed, 25 Apr 2001 ligges@statistik.uni-dortmund.de wrote:

> A follow-up to PR#660 (15 Sep 2000) from Brian Ripley:

[...]

> The same with
>
>  par(cex=1); plot(1:10); text(4, 5, "Hello World") # OK
>  par(cex=2); plot(1:10); text(4, 5, "Hello World") # OK
>  par(cex=2); plot(1:10); text(4, 5, "Hello World", cex = 1) # NOT OK
>  par(cex=2); plot(1:10); text(4, 5, "Hello World", cex = 0.5)
>
> So the scaling with cex in text() is relative to the par() settings,
> which is not the expected behaviour.

It is the documented behaviour, though: see the description of cex in
?help.

     cex: numeric character expansion factor; multiplied by
          `par("cex")' yields the final character size.

Brian

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
* PR# 202 *
Subject: persp box occlusion bug
From: wsi@gcal.ac.uk
Date: Wed, 2 Jun 1999 15:02:03 +0200 (MET DST)
--The persp algorithm does not apply the occlusion rules to the frame, 
--which is always plotted first. 
--A bug, but not very simple to fix.
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 202 <==
From wsi@gcal.ac.uk  Wed Jun  2 15:02:10 1999
Received: from localhost (blueberry [130.225.108.193])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id PAA27126
	for <R-bugs@biostat.ku.dk>; Wed, 2 Jun 1999 15:02:03 +0200 (MET DST)
Date: Wed, 2 Jun 1999 15:02:03 +0200 (MET DST)
From: wsi@gcal.ac.uk
Message-Id: <199906021302.PAA27126@pubhealth.ku.dk>
To: R-bugs@biostat.ku.dk
Subject: persp box occlusion bug

Full_Name: Bill Simpson
Version: 64.1
OS: linux
Submission from: (NULL) (193.62.250.209)


Bug in persp() bounding box:
If the surface being plotted extends below the lower z-axis boundary, the box
is
drawn with the wrong occlusion. The box is shown as being occluded by the
surface
even though it should be in front of the surface.

The box is correct for surface extending above the box. Problem is only for
surface extending below the box.

This exhibits the bug:

std<-rep(seq(-32,32,8),9)/1000 * 60
cf<-rep(seq(-32,32,8),rep(9,9))/1000 *60 
dp<-(cf-std)/.6
std<-unique(std)
cf<-unique(cf)
dp<-t(matrix(dp,length(cf),length(std)))
persp(std,cf,dp, xlim=c(-2,2), ylim=c(-2,2), zlim=c(0,5),theta=-40,    
phi=45,
box=TRUE,ltheta=-120, lphi=120,
d=1.5, shade=.7)


==> 202.audit <==
Wed Jun 30 19:31:18 1999	pd	moved from incoming to Graphics
Thu Jul 01 18:19:48 1999	pd	changed notes
Sun Feb 20 10:07:11 2000	ripley	changed notes
Mon Feb 28 17:17:51 2000	pd	changed notes
Mon Feb 28 17:18:28 2000	pd	changed notes
Mon Feb 28 17:19:35 2000	pd	changed notes
Mon Feb 28 17:20:17 2000	pd	changed notes
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
* PR# 776 *
Subject: strwidth does not take font into account
From: Martyn Plummer <plummer@iarc.fr>
Date: Tue, 19 Dec 2000 14:56:01 +0100 (CET)
--This needs a substantial redesign.
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 776 <==
From postmaster@franz.stat.wisc.edu  Tue Dec 19 14:53:40 2000
Received: from franz.stat.wisc.edu (franz.stat.wisc.edu [128.105.174.95])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id OAA05819
	for <r-bugs@biostat.ku.dk>; Tue, 19 Dec 2000 14:53:39 +0100 (MET)
Received: from smtp02.iarc.fr (really [212.157.236.234]) by franz.stat.wisc.edu
	via in.smtpd with esmtp
	id <m148NHG-000IYiC@franz.stat.wisc.edu> (Debian Smail3.2.0.102)
	for <r-bugs@r-project.org>; Tue, 19 Dec 2000 07:58:02 -0600 (CST) 
Received: from xena.iarc.fr ([10.10.150.125])
	by smtp02.iarc.fr (8.9.3/8.9.3) with ESMTP id OAA21720
	for <r-bugs@r-project.org>; Tue, 19 Dec 2000 14:53:55 +0100
Message-ID: <XFMail.001219145601.plummer@iarc.fr>
X-Mailer: XFMail 1.3 [p0] on Linux
X-Priority: 3 (Normal)
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 8bit
MIME-Version: 1.0
Date: Tue, 19 Dec 2000 14:56:01 +0100 (CET)
Organization: International Agency for Research on Cancer
Sender: martyn@xena.iarc.fr
From: Martyn Plummer <plummer@iarc.fr>
To: r-bugs@r-project.org
Subject: strwidth does not take font into account

One for the wishlist.

The text() function permits the use of different fonts with the arguments
"font" or "vfont".  These create text strings of the same height as the
default font, but of different widths: bold face is slightly wider; vector
fonts are usually much wider.  I think the strwidth() function needs to
take the font into account by also having "font" and "vfont" arguments.
Currently it reports the string width using the default font, which can
be quite different.

Here is a little test function you can use to see how far off the
reported string width is.

test.strwidth <-
function(text, vfont=NULL, cex=NULL, ...)
{
 plot(0,0,xlim=c(-1,1),ylim=c(-1,1), type="n")
 text(0,0, text, adj=c(0,0), offset=0, cex=cex, vfont=vfont, ...)
 abline(h=c(0, strheight(text, cex=cex)), lty=2)
 abline(v=c(0, strwidth(text, cex=cex)), lty=2)
}

e.g.

test.strwidth("This is some text", cex=2)
test.strwidth("This is some text", cex=2, font=2)
test.strwidth("This is some text", vfont=c("sans serif", "plain"))

Martyn

Please do not edit the information below--

Version:
 platform = i686-pc-linux-gnu
 arch = i686
 os = linux-gnu
 system = i686, linux-gnu
 status =
 major = 1
 minor = 2.0
 year = 2000
 month = 12
 day = 15
 language = R

Search Path:
 .GlobalEnv, package:ctest, Autoloads, package:base




==> 776.audit <==
Tue Dec 26 10:31:10 2000	ripley	moved from incoming to Graphics
Sat Feb 24 08:55:28 2001	ripley	changed notes
Sat Feb 24 08:55:28 2001	ripley	foobar
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
* PR# 750 *
Subject: abline() does not obey "xpd" (clipping rules)
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Mon, 27 Nov 2000 18:27:11 +0100
-- no notes --
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 750 <==
From maechler@stat.math.ethz.ch  Mon Nov 27 18:27:05 2000
Received: from stat.math.ethz.ch (daemon@hypatia.ethz.ch [129.132.58.23])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id SAA04861
	for <R-bugs@biostat.ku.dk>; Mon, 27 Nov 2000 18:27:04 +0100 (MET)
Received: (from daemon@localhost)
	by stat.math.ethz.ch (8.9.1/8.9.1) id SAA21229
	for <R-bugs@stat.math.ethz.ch>; Mon, 27 Nov 2000 18:27:14 +0100 (MET)
Received: from UNKNOWN(129.132.58.30), claiming to be "lynne.ethz.ch"
 via SMTP by hypatia, id smtpdAAAa005Bf; Mon Nov 27 18:27:12 2000
Received: (maechler@localhost) by lynne.ethz.ch (8.9.3/D-MATH-client) id SAA01940; Mon, 27 Nov 2000 18:27:11 +0100
X-Authentication-Warning: lynne.ethz.ch: maechler set sender to maechler@stat.math.ethz.ch using -f
From: Martin Maechler <maechler@stat.math.ethz.ch>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
Message-ID: <14882.39279.553452.20503@gargle.gargle.HOWL>
Date: Mon, 27 Nov 2000 18:27:11 +0100
To: R-bugs@stat.math.ethz.ch
Subject: abline() does not obey "xpd" (clipping rules)
X-Mailer: VM 6.76 under Emacs 20.7.1
Reply-To: Martin Maechler <maechler@stat.math.ethz.ch>

This is not a bug in the very strict sense,
but for consistency,  
I feel that
    abline() 
should obey  par("xpd") setting, even by ...-argument.
The following code shows how  lines() ``works'' and abline() does not :

  par(mfrow=c(2,1))
  plot(1:4)
  plot(1:10)
  par(xpd=NA); abline(v=1:10); par(xpd=FALSE)
  ## or even
  abline(v=1:10, xpd = NA, col = "purple")
  ## lines() *does* work with xpd arg:
  lines(4:5,c(1,40), col = 2, xpd = FALSE)# clip to plot
  lines(5:6,c(1,40), col = 3, xpd = TRUE)# clip to figure
  lines(6:7,c(1,20), col = 4, xpd = NA)# clip to device 
  text(4:6, 10.5, "xpd =", xpd = TRUE, col = 2:4)
  text(4:6, 10, c("FALSE","TRUE","NA"), col = 2:4, adj = 0)


Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
Seminar fuer Statistik, ETH-Zentrum  LEO D10	Leonhardstr. 27
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1228			<><

==> 750.reply.1 <==
From maechler@stat.math.ethz.ch  Wed Nov 29 14:02:47 2000
Received: from stat.math.ethz.ch (daemon@hypatia.ethz.ch [129.132.58.23])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id OAA24751
	for <R-bugs@biostat.ku.dk>; Wed, 29 Nov 2000 14:02:46 +0100 (MET)
Received: (from daemon@localhost)
	by stat.math.ethz.ch (8.9.1/8.9.1) id OAA15367
	for <R-bugs@biostat.ku.dk>; Wed, 29 Nov 2000 14:03:01 +0100 (MET)
Received: from UNKNOWN(129.132.58.30), claiming to be "lynne.ethz.ch"
 via SMTP by hypatia, id smtpdAAAa003k0; Wed Nov 29 14:02:57 2000
Received: (maechler@localhost) by lynne.ethz.ch (8.9.3/D-MATH-client) id OAA05829; Wed, 29 Nov 2000 14:02:56 +0100
X-Authentication-Warning: lynne.ethz.ch: maechler set sender to maechler@stat.math.ethz.ch using -f
From: Martin Maechler <maechler@stat.math.ethz.ch>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
Message-ID: <14884.65152.785676.980519@gargle.gargle.HOWL>
Date: Wed, 29 Nov 2000 14:02:56 +0100
To: R-bugs@biostat.ku.dk
Subject: abline() AND rect() do not obey "xpd" (clipping) (PR#750)
In-Reply-To: <200011271727.SAA04871@pubhealth.ku.dk>
References: <200011271727.SAA04871@pubhealth.ku.dk>
X-Mailer: VM 6.86 under Emacs 20.7.1
Reply-To: Martin Maechler <maechler@stat.math.ethz.ch>

>>>>> "MM" == Martin Maechler <maechler@stat.math.ethz.ch> writes:

    MM> This is not a bug in the very strict sense,
    MM> but for consistency,  
    MM> I feel that
    MM> abline() 
    MM> should obey  par("xpd") setting, even by ...-argument.
    MM> The following code shows how  lines() ``works'' and abline() does not :

    MM> par(mfrow=c(2,1))
    MM> plot(1:4)
    MM> plot(1:10)
    MM> par(xpd=NA); abline(v=1:10); par(xpd=FALSE)
    MM> ## or even
    MM> abline(v=1:10, xpd = NA, col = "purple")
    MM> ## lines() *does* work with xpd arg:
    MM> lines(4:5,c(1,40), col = 2, xpd = FALSE)# clip to plot
    MM> lines(5:6,c(1,40), col = 3, xpd = TRUE)# clip to figure
    MM> lines(6:7,c(1,20), col = 4, xpd = NA)# clip to device 
    MM> text(4:6, 10.5, "xpd =", xpd = TRUE, col = 2:4)
    MM> text(4:6, 10, c("FALSE","TRUE","NA"), col = 2:4, adj = 0)

Also, 
      rect() 
fails similarly.
This gives funny legend()s :

 plot(1:10)
 legend(1,7.5,  c("1st", "2nd", "third"), col = 1:3, lwd = 1:3, pch = 1:3)
 op <- par(xpd = NA)
 legend(1,11.5, c("1st", "2nd", "third"), col = 1:3, lwd = 1:3, pch = 1:3)
 ## pch = 1 also doesn't ?!?? ?? why??  It does here :
 points(2+ 1:8, rep(11, 8), pch = 1:8, col = "purple")
 ## and other pch's do here
 legend(4,11.9, c("1st", "2nd", "third"), col = 1:3, lwd = 1:3, pch = 6:4)
 par(op)

## Note that there seems another peculiar clipping bug 
##       with pch = 1 in legend

Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
Seminar fuer Statistik, ETH-Zentrum  LEO D10	Leonhardstr. 27
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1228			<><

==> 750.audit <==
Wed Nov 29 14:17:37 2000	ripley	moved from incoming to Graphics
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
* PR# 816 *
Subject: dotplot: character size of labels
From: RINNER Heinrich <H.RINNER@TIROL.GV.AT>
Date: Thu, 18 Jan 2001 14:54:32 +0100
--Suggested fix is incorporated in 1.2.2.
--
--There is a deeper problem:  mtext() ignores par(cex=.5) in general.  
--To see the problem try:  par(cex=.5); mtext("hi")
--Paul thinks the right fix is to change the argument list for mtext so that
--cex=par(cex) by default rather than cex=NA by default (plus corresponding
--internal changes to  do_mtext in plot.c).
--This needs to be done very carefully because (i) the change suggested above 
--mayhave side-effects in many other pieces of interpreted code 
--(ii) do_mtext ignores dd->gp.cexbase unlike, for example, do_plot_xy 
--and anything to do with cexbase needs extreme care.
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 816 <==
From postmaster@franz.stat.wisc.edu  Thu Jan 18 16:57:16 2001
Received: from franz.stat.wisc.edu (franz.stat.wisc.edu [128.105.174.95])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id QAA13627
	for <r-bugs@biostat.ku.dk>; Thu, 18 Jan 2001 16:57:15 +0100 (MET)
Received: from ingw1.tirol.gv.at (really [212.183.27.1]) by franz.stat.wisc.edu
	via in.smtpd with esmtp
	id <m14JHRE-000IWyC@franz.stat.wisc.edu> (Debian Smail3.2.0.102)
	for <r-bugs@r-project.org>; Thu, 18 Jan 2001 09:57:24 -0600 (CST) 
Received: from xms.tirol.gv.at (xms.tirol.gv.at [10.11.128.200])
	by ingw1.tirol.gv.at (Mailer) with ESMTP id 22ADE2825
	for <r-bugs@r-project.org>; Thu, 18 Jan 2001 14:49:47 +0100 (NFT)
Received: from xms.tirol.gv.at (unverified) by xms.tirol.gv.at
 (Content Technologies SMTPRS 4.1.5) with ESMTP id <T0a0b80c8512ecf1400@xms.tirol.gv.at> for <r-bugs@r-project.org>;
 Thu, 18 Jan 2001 14:54:33 +0100
Received: by xms.tirol.gv.at with Internet Mail Service (5.5.2650.21)
	id <CLGLQ6B7>; Thu, 18 Jan 2001 14:54:33 +0100
Message-ID: <C4D44AB4CB62D311BA6500041202E8862640F8@xms1.tirol.gv.at>
From: RINNER Heinrich <H.RINNER@TIROL.GV.AT>
To: "'r-bugs@r-project.org'" <r-bugs@r-project.org>
Subject: dotplot: character size of labels
Date: Thu, 18 Jan 2001 14:54:32 +0100
Return-Receipt-To: RINNER Heinrich <H.RINNER@TIROL.GV.AT>
MIME-Version: 1.0
X-Mailer: Internet Mail Service (5.5.2650.21)
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: 8bit
X-MIME-Autoconverted: from quoted-printable to 8bit by pubhealth.ku.dk id QAA13627

There seems to be a bug in "dotplot" concerning the "cex" parameter. Setting
cex has no effect on the character size of the labels of the points.
This problem was posted to r-help today (Thu, 18 Jan 2001); the solution
given by Brian Ripley (and Uwe Ligges) seems to work for me.

Heinrich Rinner.
 
> version
         _              
platform i386-pc-mingw32
arch     x86            
os       Win32          
system   x86, Win32     
status                  
major    1              
minor    2.0            
year     2000           
month    12             
day      15             
language R              

> ----------
> Von: 	Prof Brian Ripley[SMTP:ripley@stats.ox.ac.uk]
> Gesendet: 	Donnerstag, 18. Jnner 2001 10:35
> An: 	RINNER Heinrich
> Cc: 	'r-help@stat.math.ethz.ch'
> Betreff: 	Re: [R] dotplot: character size of labels
> 
> On Thu, 18 Jan 2001, RINNER Heinrich wrote:
> 
> > Dear R users,
> >
> > using dotplot (R1.2.0, WinNT4.0), I am trying to change the character
> size
> > of the labels of the points:
> >
> > > # example
> > > data(VADeaths)
> > > dotplot(VADeaths, main = "Death Rates in Virginia - 1940")
> > > # I'd like to have smaller character size of the labels (for age and
> > population groups)
> > > ?dotplot
> > > # for argument "cex", this says: "Setting cex to a value smaller than
> one
> > can be a useful way of avoiding label overlap."
> > > dotplot(VADeaths, main = "Death Rates in Virginia - 1940", cex = 0.5)
> > > # the main title and the plotting characters are smaller now, but not
> the
> > labels
> > > # trying to set other graphics parameters seems to have no effect:
> > > dotplot(VADeaths, main = "Death Rates in Virginia - 1940", cex.axis =
> 0.5)
> > > dotplot(VADeaths, main = "Death Rates in Virginia - 1940", cex.lab =
> 0.5)
> >
> > I'd be grateful for any hint how to do this correctly;
> 
> Looks like a bug. Inside dotplot alter to
> 
>         for (i in 1:n) mtext(labs[i], side = 2, line = loffset,
>             at = y[i], adj = 0, col = color, las = 2, cex = cex, ...)
> 
>         for (i in 1:nlevels(groups)) mtext(glabels[i], side = 2,
>             line = goffset, at = gpos[i], adj = 0, col = gcolor,
>             las = 2, cex = cex, ...)
> 
> However, it really needs more than that to calculate the spaces for the
> labels correctly.
> 
> 
> -- 
> Brian D. Ripley,                  ripley@stats.ox.ac.uk
> Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
> University of Oxford,             Tel:  +44 1865 272861 (self)
> 1 South Parks Road,                     +44 1865 272860 (secr)
> Oxford OX1 3TG, UK                Fax:  +44 1865 272595
> 

==> 816.audit <==
Sat Jan 20 10:24:14 2001	ripley	moved from incoming to Graphics
Tue Jan 23 03:38:23 2001	paul	changed notes
Tue Jan 23 03:38:23 2001	paul	foobar
Sun Feb 18 10:11:12 2001	ripley	changed notes
Sun Feb 18 10:11:12 2001	ripley	foobar
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
* PR# 791 *
Subject:  par(lab= *) / axis(*) bug 
From: maechler@stat.math.ethz.ch
Date: Fri, 22 Dec 2000 10:59:26 +0100
-- no notes --
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 791 <==
From postmaster@franz.stat.wisc.edu  Fri Dec 22 10:59:23 2000
Received: from franz.stat.wisc.edu (franz.stat.wisc.edu [128.105.174.95])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id KAA08619
	for <r-bugs@biostat.ku.dk>; Fri, 22 Dec 2000 10:59:23 +0100 (MET)
Received: from stat.math.ethz.ch (really [129.132.58.23]) by franz.stat.wisc.edu
	via in.smtpd with esmtp (ident daemon using rfc1413)
	id <m149OzA-000IXMC@franz.stat.wisc.edu> (Debian Smail3.2.0.102)
	for <r-bugs@r-project.org>; Fri, 22 Dec 2000 03:59:36 -0600 (CST) 
Received: (from daemon@localhost)
	by stat.math.ethz.ch (8.9.1/8.9.1) id KAA02617;
	Fri, 22 Dec 2000 10:59:34 +0100 (MET)
Received: from UNKNOWN(129.132.58.33), claiming to be "florence.ethz.ch"
 via SMTP by hypatia, id smtpdAAAa000cp; Fri Dec 22 10:59:26 2000
Received: (maechler@localhost) by florence.ethz.ch (8.9.3/D-MATH-client) id KAA23075; Fri, 22 Dec 2000 10:59:26 +0100
Date: Fri, 22 Dec 2000 10:59:26 +0100
From: maechler@stat.math.ethz.ch
Message-Id: <200012220959.KAA23075@florence.ethz.ch>
To: r-bugs@r-project.org
Subject:  par(lab= *) / axis(*) bug 
Cc: maechler@stat.math.ethz.ch

As the subject says,
here is example code (with comments) showing the problem:

p1 <- function(lab = c(8,12,7))
{
    ## This `fails' (on a virgin device)
    clab <- paste(lab,collapse=",")
    plot(1,1, xlim = c(0,15), ylim = c(-.8,1), type ="n", axes = FALSE,
         main=paste("plot(*,axes=F); par(lab= c(",clab,"));  axis(*) x 2",sep=""))
    box(col="gray80")
    op <- par(lab = lab) ; on.exit(par(op))
    axis(1, pos = 0)
    axis(2, pos = 0, las = 1)
    par(op)
    op
}

p2 <- function(lab = c(8,12,7))
{
    ## This works  [par()  *BEFORE*  plot() ]
    clab <- paste(lab,collapse=",")
    op <- par(lab = lab) ; on.exit(par(op))

    plot(1,1, xlim = c(0,15), ylim = c(-.8,1), type ="n", axes = FALSE,
         main=paste("par(lab= c(",clab,")); plot(*,axes=F); axis(*) x 2",sep=""))
    box(col="gray80")
    axis(1, pos = 0)
    axis(2, pos = 0, las = 1)
    op ## lab 5 5 7
}

dev.off()
par(mfrow=c(2,1), mar=c(2,2,3,1))
p1()
p2()




--please do not edit the information below--

Version:
 platform = i686-pc-linux-gnu
 arch = i686
 os = linux-gnu
 system = i686, linux-gnu
 status = Patched
 major = 1
 minor = 2.0
 year = 2000
 month = 12
 day = 19
 language = R

Search Path:
 .GlobalEnv, package:nls, package:splines, package:lqs, package:modreg, package:stepfun, package:mva, package:eda, package:ts, package:VLMC, package:ctest, package:SfS, Autoloads, package:base

==> 791.audit <==
Tue Dec 26 10:31:10 2000	ripley	moved from incoming to Graphics
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
* PR# 828 *
Subject: termplot fails for composite non-factor terms
From: John Maindonald <john.maindonald@anu.edu.au>
Date: Sat, 27 Jan 2001 11:57:37 +1100 (EST)
--Neither of the proposed changes actually works in sufficient generality.
--
--The easy and unimportant part of this, the labels, is fixed in 1.2.2. Getting
--the data right is a project for 1.3
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 828 <==
From postmaster@franz.stat.wisc.edu  Sat Jan 27 01:57:37 2001
Received: from franz.stat.wisc.edu (franz.stat.wisc.edu [128.105.174.95])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id BAA07865
	for <r-bugs@biostat.ku.dk>; Sat, 27 Jan 2001 01:57:36 +0100 (MET)
Received: from leonard.anu.edu.au (really [150.203.2.15]) by franz.stat.wisc.edu
	via in.smtpd with esmtp
	id <m14MJgZ-000IWyC@franz.stat.wisc.edu> (Debian Smail3.2.0.102)
	for <r-bugs@r-project.org>; Fri, 26 Jan 2001 18:57:47 -0600 (CST) 
Received: (from u9801539@localhost)
	by leonard.anu.edu.au (8.9.3/8.9.3) id LAA25063
	for r-bugs@r-project.org; Sat, 27 Jan 2001 11:57:37 +1100 (EST)
Date: Sat, 27 Jan 2001 11:57:37 +1100 (EST)
From: John Maindonald <john.maindonald@anu.edu.au>
Message-Id: <200101270057.LAA25063@leonard.anu.edu.au>
To: r-bugs@r-project.org
Subject: termplot fails for composite non-factor terms

I am running R 1.2.1 under Windows 98SE.

termplot() currently fails when there are composite terms, thus:
  > library(mass)
  > data(hills)
  > hills.lm <- lm(time ~ climb + poly(dist, 2), data = hills)
  > termplot(hills.lm)
  Hit <Return> to see next plot: 
  Error in eval(expr, envir, enclos) : Object "dist" not found

The call
  > termplot(hills.lm,data=hills)
does run without generating an error message, i.e. there is a 
problem with the default setting for the parameter 'data'. 
However the x-axis for the term poly(dist,2) is then incorrectly 
labelled as poly(dist,2), rather than dist
The label poly(dist,2) surely belongs as part of the y-axis label.

Here are suggested fixes

1. In the default parameters for the function call change
   data = model.frame(model)
to
   data = get(as.character(model$call$data))

[This does not work if the variable values are specified in the
function call.  It is not clear to me how to fix that.]

2. A few lines from the beginning, replace
    if (is.null(xlabs)) 
        xlabs <- nmt
    if (is.null(ylab)) 
        ylab <- substitute(link(foo), list(foo = formula(model)[[2]]))
with
   if (is.null(xlabs)) 
        xlabs <- unlist(lapply(cn,function(x)
        if(length(x)>1)as.character(x[[2]]) else as.character(x)))
   if (is.null(ylab)) 
        ylab <- paste("Partial for", nmt)

[The current y-label is "link(<yvar>)".  If it is thought necessary
to specify this, it should be additional to e.g., in my example,
"Partial for poly(dist,2)"]

Replace ylab = ylab with 
   ylab = ylab[i]
in the two places (arguments to plot()) where it appears.

John Maindonald               email : john.maindonald@anu.edu.au        
Statistical Consulting Unit,  phone : (6125)3998        
c/o CMA, SMS,                 fax   : (6125)5549  
John Dedman Mathematical Sciences Building
Australian National University
Canberra ACT 0200
Australia

==> 828.followup.1 <==
From tlumley@u.washington.edu  Sat Jan 27 02:08:54 2001
Received: from jason02.u.washington.edu (root@jason02.u.washington.edu [140.142.8.52])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id CAA07896
	for <R-bugs@biostat.ku.dk>; Sat, 27 Jan 2001 02:08:53 +0100 (MET)
Received: from homer06.u.washington.edu (tlumley@homer06.u.washington.edu [140.142.15.40])
	by jason02.u.washington.edu (8.9.3+UW00.05/8.9.3+UW00.12) with ESMTP id RAA28204;
	Fri, 26 Jan 2001 17:09:04 -0800
Received: from localhost (tlumley@localhost)
	by homer06.u.washington.edu (8.9.3+UW00.05/8.9.3+UW00.12) with ESMTP id RAA186066;
	Fri, 26 Jan 2001 17:09:03 -0800
Date: Fri, 26 Jan 2001 17:09:03 -0800 (PST)
From: Thomas Lumley <tlumley@u.washington.edu>
To: john.maindonald@anu.edu.au
cc: r-devel@stat.math.ethz.ch, R-bugs@biostat.ku.dk
Subject: Re: [Rd] termplot fails for composite non-factor terms (PR#828)
In-Reply-To: <200101270057.BAA07875@pubhealth.ku.dk>
Message-ID: <Pine.A41.4.21.0101261704120.21498-100000@homer06.u.washington.edu>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII

On Sat, 27 Jan 2001 john.maindonald@anu.edu.au wrote:

> I am running R 1.2.1 under Windows 98SE.
> 
> termplot() currently fails when there are composite terms, thus:
>   > library(mass)
>   > data(hills)
>   > hills.lm <- lm(time ~ climb + poly(dist, 2), data = hills)
>   > termplot(hills.lm)
>   Hit <Return> to see next plot: 
>   Error in eval(expr, envir, enclos) : Object "dist" not found
> 
> The call
>   > termplot(hills.lm,data=hills)
> does run without generating an error message, i.e. there is a 
> problem with the default setting for the parameter 'data'. 
> However the x-axis for the term poly(dist,2) is then incorrectly 
> labelled as poly(dist,2), rather than dist
> The label poly(dist,2) surely belongs as part of the y-axis label.
> 
> Here are suggested fixes
> 
> 1. In the default parameters for the function call change
>    data = model.frame(model)
> to
>    data = get(as.character(model$call$data))
> 
> [This does not work if the variable values are specified in the
> function call.  It is not clear to me how to fix that.]

Also, it does not specify where to get() the data: what environment to
use. The reason that the data= argument is present in termplot() is that
we can't tell where to find the data in general.

The situation is better as of R1.2, since we can look up variables in the
environment of the model formula. This would fix not only termplot() but a
number of other prediction-related problems.


> 2. A few lines from the beginning, replace
>     if (is.null(xlabs)) 
>         xlabs <- nmt
>     if (is.null(ylab)) 
>         ylab <- substitute(link(foo), list(foo = formula(model)[[2]]))
> with
>    if (is.null(xlabs)) 
>         xlabs <- unlist(lapply(cn,function(x)
>         if(length(x)>1)as.character(x[[2]]) else as.character(x)))
>    if (is.null(ylab)) 
>         ylab <- paste("Partial for", nmt)
> 
> [The current y-label is "link(<yvar>)".  If it is thought necessary
> to specify this, it should be additional to e.g., in my example,
> "Partial for poly(dist,2)"]
> 
> Replace ylab = ylab with 
>    ylab = ylab[i]
> in the two places (arguments to plot()) where it appears.


This looks like a good idea. 

	-thomas


==> 828.audit <==
Mon Jan 29 08:36:10 2001	ripley	moved from incoming to Graphics
Fri Feb 16 22:43:59 2001	thomas	changed notes
Fri Feb 16 22:43:59 2001	thomas	foobar
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
* PR# 820 *
Subject: interaction.plot
From: "Mark M. Span" <span@psy.uva.nl>
Date: Mon, 22 Jan 2001 10:47:39 +0100
--mtext is unscaled by default.  It is not clear if this should
--use the par("cex") setting or an inline cex setting such as cex.axis.
--It might make more sense to use axis rather than mtext, as boxplot does.
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 820 <==
From postmaster@franz.stat.wisc.edu  Mon Jan 22 10:43:38 2001
Received: from franz.stat.wisc.edu (franz.stat.wisc.edu [128.105.174.95])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id KAA09043
	for <r-bugs@biostat.ku.dk>; Mon, 22 Jan 2001 10:43:37 +0100 (MET)
Received: from mail.psy.uva.nl (really [145.18.113.16]) by franz.stat.wisc.edu
	via in.smtpd with esmtp
	id <m14KdVr-000IWyC@franz.stat.wisc.edu> (Debian Smail3.2.0.102)
	for <r-bugs@r-project.org>; Mon, 22 Jan 2001 03:43:47 -0600 (CST) 
Received: from rea2205 (rea2205.psy.uva.nl [145.18.152.205])
	by mail.psy.uva.nl (8.9.3/8.9.3) with SMTP id KAA21513
	for <r-bugs@r-project.org>; Mon, 22 Jan 2001 10:43:45 +0100 (MET)
Message-ID: <008501c08458$5bfc6530$cd981291@psy.uva.nl>
From: "Mark M. Span" <span@psy.uva.nl>
To: <r-bugs@r-project.org>
Subject: interaction.plot
Date: Mon, 22 Jan 2001 10:47:39 +0100
Organization: UvA
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 5.50.4133.2400
X-MimeOLE: Produced By Microsoft MimeOLE V5.50.4133.2400

I notices some indesireable behaviour in interaction.plot. The scaling of
the x-axis labels discards the overall settings for the 'cex' attribute,
leading to unscaled labels. The source for this behaviour is the line

mtext(xlabs, 1, at = xvals)

in interaction.plot.

to get this function to perform conform the manual, change this line to

mtext(xlabs, 1, at = xvals, cex=par("cex"))

and all is well.

because of the simplicity of this 'fix' I assume that it is a crossplatform
thingie, but for the record:

I use R-Win in winNT, 1.2.0, upgrading soon.

just my .02 euro..

I'll just end this mail with a standard declaration of love for R

greetz. Mark M. Span


==> 820.audit <==
Thu Jan 25 00:05:53 2001	ripley	moved from incoming to Graphics
Sat Feb 24 08:53:40 2001	ripley	changed notes
Sat Feb 24 08:53:40 2001	ripley	foobar
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
* PR# 837 *
Subject: screen doesn't handle redrawing properly
From: Thomas Vogels <tov@ece.cmu.edu>
Date: 01 Feb 2001 14:20:52 -0500
-- no notes --
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 837 <==
From tov@ece.cmu.edu  Thu Feb  1 20:20:40 2001
Received: from infiniti.ece.cmu.edu (INFINITI.ECE.CMU.EDU [128.2.133.84])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id UAA08721
	for <r-bugs@biostat.ku.dk>; Thu, 1 Feb 2001 20:20:39 +0100 (MET)
Received: (from tov@localhost) by infiniti.ece.cmu.edu (AIX4.3/UCB 8.8.8/8.8.8) id OAA30464; Thu, 1 Feb 2001 14:20:52 -0500
X-Authentication-Warning: infiniti.ece.cmu.edu: tov set sender to tov@ece.cmu.edu using -f
Sender: tov@infiniti.ece.cmu.edu
To: r-bugs@biostat.ku.dk
Cc: Thomas Vogels <tov@ece.cmu.edu>
Subject: screen doesn't handle redrawing properly
Reply-To: Thomas Vogels <tov@ece.cmu.edu>
X-URI: http://www.ece.cmu.edu/~tov
From: Thomas Vogels <tov@ece.cmu.edu>
Date: 01 Feb 2001 14:20:52 -0500
Message-ID: <pxitmub46j.fsf@infiniti.ece.cmu.edu>
Lines: 74
User-Agent: Gnus/5.0807 (Gnus v5.8.7) Emacs/20.7
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii


Hi.  As far as I understand it, there is a list of graphic primitives
stored for a device.  So for example, when I iconify/deiconify an X11
window, the plot will be redrawn.  Now screen (split.screen and
friends) appear not to handle this list properly, the list is reset or
not reset at odd times.  The commands below will show clearly what I
mean.  There are two effects:

  - After splitting the device real estate into two screens, I can
    plot on these screens, alternating between them.  When I then
    touch the window to force a redraw, *all* the plots are redrawn,
    not just the last (and visible) ones.
    [This happens when the X server runs on AIX, R runs on AIX or Sun.]

  - Again, after splitting, plotting on one screen can affect the
    other screen.  I.e. plot(...); plot (...) on the left screen can
    erase the *right* screen.
    [This happens for all platforms I have access to, AIX, Linux, Sun.]

The first effect may be due to a bad interaction with the X server,
but the second effect is surely not desirable, is it?  Am I mis-using
'screen' here?

R> split.screen (c(1,2))
[1] 1 2
R> # Draw 10000 points to make the effect obvious
R> screen (1)
R> plot (1:10000, 1:10000, main="1")
R> screen (2)
R> plot (1:10000, 1:10000, main="2")
R> # Ok, go back to screen 1, draw plots 3 and 4
R> screen (1)
R> plot (1:10000, 10000:1, main="3")
R> screen (2)
R> plot (1:10000, 10000:1, main="4")
R> 
R> ########################################
R> # NOW lower/raise window, do something to force device to redraw itself.
R> # You'll see again plot 1 (!), 2 (!), 3, and 4.  Why 1 and 2?
R> ########################################
R> 
R> # Here's how to erase screen 2 from screen 1 (!)
R> screen (1)
R> plot (1:10, 1:10, main="3a")
R> ########################################
R> # The following plot will erase screen 2
R> ########################################
R> plot (1:10, 1:10, main="3b")
R> 
R> # The good news is that this resets the list of graphic ops:
R> screen (2)
R> plot (1:10, 1:10, main="4")
R> # Now if you touch the window, you'll see only plot 3b and 4.

Regards,
  -tom

R> R.version
         _                   
platform sparc-sun-solaris2.7
arch     sparc               
os       solaris2.7          
system   sparc, solaris2.7   
status   Patched             
major    1                   
minor    2.1                 
year     2001                
month    01                  
day      31                  
language R                   

-- 
mailto:tov@ece.cmu.edu (Tom Vogels)   Tel: (412) 268-6638   FAX: -3204


==> 837.audit <==
Wed Feb  7 08:51:14 2001	ripley	moved from incoming to Graphics
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
* PR# 831 *
Subject: screen can't go back to (split) screen with log="y" plot
From: Thomas Vogels <tov@ece.cmu.edu>
Date: 30 Jan 2001 00:39:41 -0500
--Still there. Suggested fix included in followups, but we didn't get around to
--try it in time for 1.2.3.
--
--Fix doesn't work. One problem is that the opar<-par();par(opar) idiom updates
--xaxp before xlog, and the new value of xaxp may only be valid under the new
--value of xlog.
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 831 <==
From postmaster@franz.stat.wisc.edu  Tue Jan 30 06:39:31 2001
Received: from franz.stat.wisc.edu (franz.stat.wisc.edu [128.105.174.95])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id GAA28455
	for <r-bugs@biostat.ku.dk>; Tue, 30 Jan 2001 06:39:30 +0100 (MET)
Received: from infiniti.ece.cmu.edu (really [128.2.216.84]) by franz.stat.wisc.edu
	via in.smtpd with esmtp
	id <m14NTW2-000IWyC@franz.stat.wisc.edu> (Debian Smail3.2.0.102)
	for <r-bugs@r-project.org>; Mon, 29 Jan 2001 23:39:42 -0600 (CST) 
Received: (from tov@localhost) by infiniti.ece.cmu.edu (AIX4.3/UCB 8.8.8/8.8.8) id AAA26672; Tue, 30 Jan 2001 00:39:42 -0500
X-Authentication-Warning: infiniti.ece.cmu.edu: tov set sender to tov@ece.cmu.edu using -f
Sender: tov@infiniti.ece.cmu.edu
To: r-bugs@r-project.org
Cc: Thomas Vogels <tov@ece.cmu.edu>
Subject: screen can't go back to (split) screen with log="y" plot
Reply-To: Thomas Vogels <tov@ece.cmu.edu>
X-URI: http://www.ece.cmu.edu/~tov
From: Thomas Vogels <tov@ece.cmu.edu>
User-Agent: Gnus/5.0807 (Gnus v5.8.7) Emacs/20.7
Date: 30 Jan 2001 00:39:41 -0500
Message-ID: <pxsnm1egyq.fsf@infiniti.ece.cmu.edu>
Lines: 76
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii


Hi.  Let's try to explain the subject line with some code:

> split.screen (c(2,1))
[1] 1 2
> screen(1)
> plot (1:2, 1:2, log="y", main="1")
> screen (2)
> plot (1:2, 1:2, main="2")
> screen (1)
Error in par(.split.screens[[n]]) : invalid value specified for graphics parameter "yaxp".
> close.screen(all=TRUE)

Let's add comments:

> split.screen (c(2,1))
[1] 1 2

OK, plot in the top half screen:
> screen(1)
> plot (1:2, 1:2, log="y", main="1")
> par("yaxp")
[1]  1  2 -5

OK, switch to bottom half:
> screen (2)
> plot (1:2, 1:2, main="2")
> par("yaxp")
[1] 1 2 5

OK, looks fine, let's go back up:
> screen (1)
Error in par(.split.screens[[n]]) : invalid value specified for graphics parameter "yaxp".

Bummer.
> close.screen(all=TRUE)

Somehow I'm hoping you'll tell me I'm doing something wrong, because
I'd really would like to be able to do the following:
  repeat {
    #calculate
    screen(1)
    #fancy plot
    screen (2)
    #even fancier plot ;-)
    if (user.bored()) break
  }
Which is roughly what I was doing when the error messages started
popping up.

Thanks,
  -tom

--please do not edit the information below--

Version:
 platform = i386-pc-linux-gnu
 arch = i386
 os = linux-gnu
 system = i386, linux-gnu
 status = 
 major = 1
 minor = 2.1
 year = 2001
 month = 01
 day = 15
 language = R

Search Path:
 .GlobalEnv, package:ctest, Autoloads, package:base



-- 
mailto:tov@ece.cmu.edu (Tom Vogels)   Tel: (412) 268-6638   FAX: -3204


==> 831.followup.1 <==
From ripley@stats.ox.ac.uk  Tue Jan 30 08:40:46 2001
Received: from toucan.stats.ox.ac.uk (toucan.stats.ox.ac.uk [163.1.20.20])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id IAA28901
	for <R-bugs@biostat.ku.dk>; Tue, 30 Jan 2001 08:40:46 +0100 (MET)
Received: from max144.public.ox.ac.uk (max144.public.ox.ac.uk [192.76.27.144])
	by toucan.stats.ox.ac.uk (8.9.0/8.9.0) with ESMTP id HAA21509;
	Tue, 30 Jan 2001 07:40:54 GMT
Date: Tue, 30 Jan 2001 07:39:25 +0000 (GMT)
From: Prof Brian D Ripley <ripley@stats.ox.ac.uk>
Sender: <ripley@auk.stats>
To: <tov@ece.cmu.edu>
cc: <R-bugs@biostat.ku.dk>
Subject: Re: [Rd] screen can't go back to log="y" plot (PR#831)
In-Reply-To: <200101300539.GAA28465@pubhealth.ku.dk>
Message-ID: <Pine.GSO.4.31.0101300725290.17104-100000@auk.stats>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII

[I have abbreviated the subject as jitterbug has been having probems
with long subjects.]

The issue here is that one cannot mix log/non-log axes in the calls to
screen(), as the appropriate par() parameter is read-only, but the
meaning of yaxp depends on it.  But beyond that you can't set
x/yaxp for log axes.

You should be able to do this: you can in the S original.

A simpler version:

plot (1:2, 1:2, log="y", main="1")
zz <- par("yaxp")
zz
[1]  1  2 -5
par(yaxp=zz)
Error in par(yaxp = zz) : invalid value specified for graphics parameter
"yaxp".

So you can't reset the yaxp parameter to what it is reported as!


Additional bug: the meaning of x/yaxp for log axes is not defined
in help(par).


On Tue, 30 Jan 2001 tov@ece.cmu.edu wrote:

>
> Hi.  Let's try to explain the subject line with some code:
>
> > split.screen (c(2,1))
> [1] 1 2
> > screen(1)
> > plot (1:2, 1:2, log="y", main="1")
> > screen (2)
> > plot (1:2, 1:2, main="2")
> > screen (1)
> Error in par(.split.screens[[n]]) : invalid value specified for graphics parameter "yaxp".
> > close.screen(all=TRUE)
>
> Let's add comments:
>
> > split.screen (c(2,1))
> [1] 1 2
>
> OK, plot in the top half screen:
> > screen(1)
> > plot (1:2, 1:2, log="y", main="1")
> > par("yaxp")
> [1]  1  2 -5
>
> OK, switch to bottom half:
> > screen (2)
> > plot (1:2, 1:2, main="2")
> > par("yaxp")
> [1] 1 2 5
>
> OK, looks fine, let's go back up:
> > screen (1)
> Error in par(.split.screens[[n]]) : invalid value specified for graphics parameter "yaxp".
>
> Bummer.
> > close.screen(all=TRUE)
>
> Somehow I'm hoping you'll tell me I'm doing something wrong, because
> I'd really would like to be able to do the following:
>   repeat {
>     #calculate
>     screen(1)
>     #fancy plot
>     screen (2)
>     #even fancier plot ;-)
>     if (user.bored()) break
>   }
> Which is roughly what I was doing when the error messages started
> popping up.
>
> Thanks,
>   -tom
>
> --please do not edit the information below--
>
> Version:
>  platform = i386-pc-linux-gnu
>  arch = i386
>  os = linux-gnu
>  system = i386, linux-gnu
>  status =
>  major = 1
>  minor = 2.1
>  year = 2001
>  month = 01
>  day = 15
>  language = R
>
> Search Path:
>  .GlobalEnv, package:ctest, Autoloads, package:base
>
>
>
> --
> mailto:tov@ece.cmu.edu (Tom Vogels)   Tel: (412) 268-6638   FAX: -3204
>
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


==> 831.followup.2 <==
From tov@ece.cmu.edu  Thu Feb  1 02:13:08 2001
Received: from infiniti.ece.cmu.edu (INFINITI.ECE.CMU.EDU [128.2.133.84])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id CAA25173
	for <R-bugs@biostat.ku.dk>; Thu, 1 Feb 2001 02:13:07 +0100 (MET)
Received: (from tov@localhost) by infiniti.ece.cmu.edu (AIX4.3/UCB 8.8.8/8.8.8) id UAA19026; Wed, 31 Jan 2001 20:12:41 -0500
X-Authentication-Warning: infiniti.ece.cmu.edu: tov set sender to tov@ece.cmu.edu using -f
Sender: tov@infiniti.ece.cmu.edu
To: Prof Brian D Ripley <ripley@stats.ox.ac.uk>
Cc: <R-bugs@biostat.ku.dk>
Subject: Re: [Rd] screen can't go back to log="y" plot (PR#831)
References: <Pine.GSO.4.31.0101300725290.17104-100000@auk.stats>
Reply-To: Thomas Vogels <tov@ece.cmu.edu>
X-URI: http://www.ece.cmu.edu/~tov
From: Thomas Vogels <tov@ece.cmu.edu>
Date: 31 Jan 2001 20:12:41 -0500
In-Reply-To: Prof Brian D Ripley's message of "Tue, 30 Jan 2001 07:39:25 +0000 (GMT)"
Message-ID: <px7l3bcik6.fsf@infiniti.ece.cmu.edu>
Lines: 81
User-Agent: Gnus/5.0807 (Gnus v5.8.7) Emacs/20.7
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii


Prof Brian D Ripley <ripley@stats.ox.ac.uk> writes:

> [I have abbreviated the subject as jitterbug has been having probems
> with long subjects.]
> 
> The issue here is that one cannot mix log/non-log axes in the calls to
> screen(), as the appropriate par() parameter is read-only, but the
> meaning of yaxp depends on it.  But beyond that you can't set
> x/yaxp for log axes.
> 
> You should be able to do this: you can in the S original.
> 
> A simpler version:
> 
> plot (1:2, 1:2, log="y", main="1")
> zz <- par("yaxp")
> zz
> [1]  1  2 -5
> par(yaxp=zz)
> Error in par(yaxp = zz) : invalid value specified for graphics parameter
> "yaxp".
> 
> So you can't reset the yaxp parameter to what it is reported as!
[snip]

The code in main/par.c ignores the value of xlog (or ylog) when
setting xaxp (or yaxp).  Right now you have in Specify (and Specify2):

... else if (streql(what, "xaxp")) {
	value = coerceVector(value, REALSXP);
	lengthCheck(what, value, 3);
	naRealCheck(REAL(value)[0], what);
	naRealCheck(REAL(value)[1], what);
        posIntCheck((int) (REAL(value)[2]), what);

Shouldn't that be something like:

... else if (streql(what, "xaxp")) {
	value = coerceVector(value, REALSXP);
	lengthCheck(what, value, 3);
	naRealCheck(REAL(value)[0], what);
	naRealCheck(REAL(value)[1], what);
        if (dd->gp.xlog)
            logAxpCheck((int) (REAL(value)[2]), what);
        else
            posIntCheck((int) (REAL(value)[2]), what);

Where logAxpCheck is suitably defined as:

static void logAxpCheck(int x, char *s)
{
    if (x == NA_INTEGER || x == 0 || x > 4)
	par_error(s);
}

since only values < 0 or the values 1, 2, 3 are allowed?


> Additional bug: the meaning of x/yaxp for log axes is not defined
> in help(par).

excerpt from help(par):

    xaxp: A vector of the form `c(x1, x2, n)' giving the coordinates
          of the extreme tick marks and the number of intervals
          between tick-marks.

Could you add:

          The value of n must be positive for linear scale axes.  For
          logarithmic scale axes n must be either negative (then there
          will be (1-n) ticks at a linear distance) or one of 1, 2, or
          3 where n then indicates the number of ticks per decade.

similar for yaxp?  What am I missing?
Regards,
  -tom

-- 
mailto:tov@ece.cmu.edu (Tom Vogels)   Tel: (412) 268-6638   FAX: -3204

==> 831.audit <==
Wed Feb  7 08:51:14 2001	ripley	moved from incoming to Graphics
Thu Apr 26 12:13:40 2001	pd	changed notes
Thu Apr 26 12:13:40 2001	pd	foobar
Thu Jun  7 19:13:15 2001	thomas	changed notes
Thu Jun  7 19:13:15 2001	thomas	foobar
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
* PR# 865 *
Subject:  axis(...,las=1) breaks postscript code in certain cases 
From: maechler@stat.math.ethz.ch
Date: Wed, 7 Mar 2001 18:08:58 +0100
-- no notes --
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 865 <==
From postmaster@franz.stat.wisc.edu  Wed Mar  7 18:09:00 2001
Received: from franz.stat.wisc.edu (root@franz.stat.wisc.edu [128.105.174.95])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id SAA29209
	for <r-bugs@biostat.ku.dk>; Wed, 7 Mar 2001 18:08:59 +0100 (MET)
Received: from stat.math.ethz.ch (really [129.132.58.23]) by franz.stat.wisc.edu
	via smail with esmtp (ident daemon using rfc1413)
	id <m14ahQz-000J39C@franz.stat.wisc.edu> (Debian Smail3.2.0.111)
	for <r-bugs@r-project.org>; Wed, 7 Mar 2001 11:09:09 -0600 (CST) 
Received: (from daemon@localhost)
	by stat.math.ethz.ch (8.9.1/8.9.1) id SAA01076;
	Wed, 7 Mar 2001 18:09:06 +0100 (MET)
Received: from florence(129.132.58.33), claiming to be "florence.ethz.ch"
 via SMTP by hypatia, id smtpdAAAa000G_; Wed Mar  7 18:08:58 2001
Received: (maechler@localhost) by florence.ethz.ch (8.9.3/D-MATH-client) id SAA16747; Wed, 7 Mar 2001 18:08:58 +0100
Date: Wed, 7 Mar 2001 18:08:58 +0100
From: maechler@stat.math.ethz.ch
Message-Id: <200103071708.SAA16747@florence.ethz.ch>
To: r-bugs@r-project.org
Subject:  axis(...,las=1) breaks postscript code in certain cases 
Cc: maechler@stat.math.ethz.ch

A colleage of mine (Roland Brun) has found the following 
reproducible problem: 

  In some circumstances, incorrect (for gv/gs) PostScript seems to be
  created when "las = 1".

  {for many versions of R (Linux) at least}

The following code shows you the symptom
    (gv pops up an error message window) :


##- Generate data 
y1 <- 10^seq(0,6)   ##- positive exponents 
y2 <- 10^seq(-4,2)  ##- including negative exponents 

postscript("test.ps")

par(mfrow=c(2,2),mar=c(3,6,0,0)+0.1,oma=c(3,1,1,1),mgp=c(4.5,1,0))

##- Plot1: works perfectly (y1 and las=0)
plot(1:length(y1),y1,type="p",axes=F,log="y")
  box()
  axis(1,at=1:length(y1))
  axis(2,at=y1,las=0) 

##- Plot2: works perfectly (y1 and las=1)
plot(1:length(y1),y1,type="p",axes=F,log="y")
  box()
  axis(1,at=1:length(y1))
  axis(2,at=y1,las=1) 

##- Plot3: works perfectly (y2 and las=0)
plot(1:length(y2),y2,type="p",axes=F,log="y")
  box()
  axis(1,at=1:length(y2))
  axis(2,at=y2,las=0) 

##- Plot4: breaks postscript code (y2 and las=1)
plot(1:length(y2),y2,type="p",axes=F,log="y")
  box()
  axis(1,at=1:length(y2))
  axis(2,at=y2,las=1) 

dev.off()
system("gv test.ps")




--please do not edit the information below--

Version:
 platform = i686-pc-linux-gnu
 arch = i686
 os = linux-gnu
 system = i686, linux-gnu
 status = Under development (unstable)
 major = 1
 minor = 3.0
 year = 2001
 month = 03
 day = 07
 language = R

Search Path:
 .GlobalEnv, package:ctest, package:SfS, Autoloads, package:base

==> 865.audit <==
Thu Mar  8 18:23:52 2001	ripley	moved from incoming to Graphics
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
* PR# 857 *
Subject: Plotting points on a filled.contour plot
From: marchini@stats.ox.ac.uk
Date: Tue, 27 Feb 2001 10:00:30 +0100 (MET)
--This needs at least to be documented, and preferably par("usr")
--set to the coordinate system of the plotting region after use.
--
--Added note and example to help file to explain how to annotate
--filled contour.  Paul 24/5/01
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 857 <==
From marchini@stats.ox.ac.uk  Tue Feb 27 10:00:31 2001
Received: from blueberry.kubism.ku.dk (blueberry [130.225.108.193])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id KAA23867
	for <R-bugs@biostat.ku.dk>; Tue, 27 Feb 2001 10:00:30 +0100 (MET)
Date: Tue, 27 Feb 2001 10:00:30 +0100 (MET)
From: marchini@stats.ox.ac.uk
Message-Id: <200102270900.KAA23867@pubhealth.ku.dk>
To: R-bugs@biostat.ku.dk
Subject: Plotting points on a filled.contour plot

Full_Name: Jonathan Marchini
Version: R 1.2.2
OS: linux-gnu
Submission from: (NULL) (163.1.103.108)


When adding points to a filled.contour plot they do not appear at the correct
coordinates.
The following code demonstrates this.
 
a<-expand.grid(1:20,1:20)
b<-matrix(a[,1]+a[,2],20)
filled.contour(x=1:20,y=1:20,z=b)
points(10,10)  

==> 857.followup.1 <==
From paul@stat.auckland.ac.nz  Tue Feb 27 22:56:18 2001
Received: from mailhost.auckland.ac.nz (mailhost.auckland.ac.nz [130.216.1.4] (may be forged))
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id WAA03530
	for <R-bugs@biostat.ku.dk>; Tue, 27 Feb 2001 22:56:16 +0100 (MET)
Received: from stat1.stat.auckland.ac.nz (stat1.stat.auckland.ac.nz [130.216.93.1])
	by mailhost.auckland.ac.nz (8.9.2/8.9.2/8.9.2-ua) with ESMTP id KAA09588;
	Wed, 28 Feb 2001 10:56:25 +1300 (NZDT)
Received: from murrell (murrell.stat.auckland.ac.nz [130.216.93.23])
	by stat1.stat.auckland.ac.nz (8.9.3+Sun/8.8.8) with SMTP id KAA24060;
	Wed, 28 Feb 2001 10:56:25 +1300 (NZDT)
Message-ID: <003501c0a10a$77f7b040$175dd882@stat.auckland.ac.nz>
From: "Paul Murrell" <paul@stat.auckland.ac.nz>
To: <marchini@stats.ox.ac.uk>, <r-devel@stat.math.ethz.ch>
Cc: <R-bugs@biostat.ku.dk>
References: <200102270900.KAA23881@pubhealth.ku.dk>
Subject: Re: [Rd] Plotting points on a filled.contour plot (PR#857)
Date: Wed, 28 Feb 2001 11:13:09 +1300
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 5.00.2014.211
X-MimeOLE: Produced By Microsoft MimeOLE V5.00.2014.211

Hi


> When adding points to a filled.contour plot they do not appear at the
correct
> coordinates.
> The following code demonstrates this.
>
> a<-expand.grid(1:20,1:20)
> b<-matrix(a[,1]+a[,2],20)
> filled.contour(x=1:20,y=1:20,z=b)
> points(10,10)


The problem here is that filled.contour is actually a combination of two
plots;  one is the filled contour and one is the legend.  filled.contour
sets up two separate coordinate systems for these two plots, but only does
so internally - once the function has returned these coordinate systems are
lost.  In order to access the coordinate system of the main contour plot you
can specify graphics commands in the plot.axes argument.  For example, in
your case, replace your call to filled.contour with the following, and all
is as it should be ...

filled.contour(x=1:20,y=1:20,z=b,plot.axes={axis(1);axis(2);points(10,10)})

Paul



==> 857.audit <==
Sun Mar  4 10:15:11 2001	ripley	moved from incoming to Graphics
Sun Mar  4 10:17:53 2001	ripley	changed notes
Sun Mar  4 10:17:53 2001	ripley	foobar
Thu May 24 04:51:13 2001	paul	changed notes
Thu May 24 04:51:14 2001	paul	foobar
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
* PR# 940 *
Subject: GCircle(): fails for non-clippable devices under certain circumstances (see below)
From: "Thomas Hoffmann" <thoffman@zappa.sax.de>
Date: Tue, 15 May 01 23:34:17 +0100
-- no notes --
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 940 <==
From postmaster@franz.stat.wisc.edu  Tue May 15 23:36:36 2001
Received: from franz.stat.wisc.edu (root@franz.stat.wisc.edu [128.105.174.95])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id XAA19114
	for <r-bugs@biostat.ku.dk>; Tue, 15 May 2001 23:36:35 +0200 (MET DST)
Received: from sax.sax.de (really [193.175.26.33]) by franz.stat.wisc.edu
	via smail with esmtp
	id <m14zmUW-000JGWC@franz.stat.wisc.edu> (Debian Smail3.2.0.111)
	for <r-bugs@r-project.org>; Tue, 15 May 2001 16:36:28 -0500 (CDT) 
Received: (from uucp@localhost)
	by sax.sax.de (8.9.3/8.9.3) with UUCP id XAA02964
	for r-bugs@r-project.org; Tue, 15 May 2001 23:36:22 +0200 (CEST)
Received:  by zappa.sax.de (UUPC/extended 1.13f);
           Tue, 15 May 2001 23:34:19 +0100
From: "Thomas Hoffmann" <thoffman@zappa.sax.de>
To: "r-bugs@r-project.org" <r-bugs@r-project.org>
Date: Tue, 15 May 01 23:34:17 +0100
Reply-To: "Thomas Hoffmann" <thoffman@zappa.sax.de>
Priority: Normal
X-Mailer: PMMail 1.9 For OS/2 UNREGISTERED SHAREWARE
X-Mailer-Gate: PMMail<->UUPC/extended Gateway v1.01
MIME-Version: 1.0
Content-Type: text/plain; charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
Subject: GCircle(): fails for non-clippable devices under certain circumstances (see below)
Message-ID: <3b01aeeb.thoffman.zappa@zappa.sax.de>

The following code snippet from graphics.c: GCircle() (around line 3100) fails for devices which 
can not clip (dd->dp.canClip==0) and try to plot a circle that does not fit into the plot region, but
fits into the device region, see inserted comments:

....
    result = clipCircleCode(x, y, coords, ir, dd);
// result>0, because circle does not fit into plot region (for dd->gp.xpd=0)

    switch (result) {
    case -2: /* No clipping;  draw all of circle */
        dd->dp.circle(x, y, coords, ir, bg, fg, dd);
        break;
    case -1: /* Total clipping; draw nothing */
        break;
    default: /* Partial clipping; draw poly[line|gon] */
// we proceed here:
        dd->gp.xpd = 2;
// check clipping for the device region:
        result = clipCircleCode(x, y, coords, ir, dd);
// ...if it fits, result=-2: ouch, we have thrown away the result from the 1st check!
        dd->gp.xpd = xpdsaved;
        if (dd->dp.canClip && result == -2) {
// ...but it does not matter if we can clip!
            GClip(dd);
            dd->dp.circle(x, y, coords, ir, bg, fg, dd);
        }
        else {
//...BUT if we can not clip, then we call for trouble:
            vmax = vmaxget();$

....
    default: /* Partial clipping; draw poly[line|gon] */
      if (dd->dp.canClip) {
	dd->gp.xpd = 2;
	result = clipCircleCode(x, y, coords, ir, dd);
	dd->gp.xpd = xpdsaved;
	if (result == -2) {
	    GClip(dd);
	    dd->dp.circle(x, y, coords, ir, bg, fg, dd);
	    break;
	}
      }
      vmax = vmaxget();
      xc = (double*)R_alloc(result+1, sizeof(double));
      yc = (double*)R_alloc(result+1, sizeof(double));
      GConvert(&x, &y, coords, DEVICE, dd);
      convertCircle(x, y, ir, result, xc, yc, dd);
      if (bg == NA_INTEGER) {
	dd->gp.col = fg;
	GPolyline(result+1, xc, yc, DEVICE, dd);
      }
      else {
	int npts;
	double *xcc, *ycc;
	xcc = ycc = 0;	/* -Wall */
	npts = GClipPolygon(xc, yc, result, DEVICE, 0, xcc, ycc, dd);
	if (npts > 1) {
	  xcc = (double*)R_alloc(npts, sizeof(double));
	  ycc = (double*)R_alloc(npts, sizeof(double));
	  npts = GClipPolygon(xc, yc, result, DEVICE, 1,
			      xcc, ycc, dd);
	  dd->dp.polygon(npts, xcc, ycc, DEVICE, bg, fg, dd);
	}
      }
      vmaxset(vmax);
    }
}


This works at least in my test case at

> version
         _
platform i386-pc-os2_emx
arch     i386
os       os2_emx
system   i386, os2_emx
status
major    1
minor    2.2
year     2001
month    02
day      26
language R


Thomas Hoffmann.


==> 940.audit <==
Mon May 21 08:54:07 2001	ripley	moved from incoming to Graphics
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
* PR# 916 *
Subject:  par(mgp) bug 
From: paul@stat.auckland.ac.nz
Date: Fri, 20 Apr 2001 08:33:45 +1200 (NZST)
-- no notes --
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 916 <==
From postmaster@franz.stat.wisc.edu  Thu Apr 19 22:33:54 2001
Received: from franz.stat.wisc.edu (root@franz.stat.wisc.edu [128.105.174.95])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id WAA02208
	for <r-bugs@biostat.ku.dk>; Thu, 19 Apr 2001 22:33:53 +0200 (MET DST)
Received: from mailhost.auckland.ac.nz (really [130.216.1.4]) by franz.stat.wisc.edu
	via smail with esmtp
	id <m14qL7p-000J8eC@franz.stat.wisc.edu> (Debian Smail3.2.0.111)
	for <r-bugs@r-project.org>; Thu, 19 Apr 2001 15:34:01 -0500 (CDT) 
Received: from stat1.stat.auckland.ac.nz (stat1.stat.auckland.ac.nz [130.216.93.1])
	by mailhost.auckland.ac.nz (8.9.2/8.9.2/8.9.2-ua) with ESMTP id IAA16455
	for <r-bugs@r-project.org>; Fri, 20 Apr 2001 08:33:45 +1200 (NZST)
Received: (from paul@localhost)
	by stat1.stat.auckland.ac.nz (8.9.3+Sun/8.8.8) id IAA18528;
	Fri, 20 Apr 2001 08:33:45 +1200 (NZST)
Date: Fri, 20 Apr 2001 08:33:45 +1200 (NZST)
Message-Id: <200104192033.IAA18528@stat1.stat.auckland.ac.nz>
From: paul@stat.auckland.ac.nz
To: r-bugs@r-project.org
Cc: paul@stat1.stat.auckland.ac.nz
Subject:  par(mgp) bug 

Hi

The behaviour of the third argument of par(mgp), which controls the
placement of the axis ticks, is not working.  

In the following example, the plots should NOT be
identical; the axis ticks plus the axis major line should be drawn one
line out from the edges of the plot region.

par(mfrow=c(2,1))
plot(1:10)
par(mgp=c(3,1,1))
plot(1:10)

Paul

<<insert bug report here>>



--please do not edit the information below--

Version:
 platform = sparc-sun-solaris2.7
 arch = sparc
 os = solaris2.7
 system = sparc, solaris2.7
 status = Under development (unstable)
 major = 1
 minor = 3.0
 year = 2001
 month = 02
 day = 18
 language = R

Search Path:
 .GlobalEnv, package:ctest, Autoloads, package:base

==> 916.audit <==
Sat Apr 21 12:59:42 2001	ripley	moved from incoming to Graphics
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
* PR# 887 *
Subject: axis(adj=anything) has no effect
From: jhallman@frb.gov
Date: Wed, 28 Mar 2001 20:51:05 +0200 (MET DST)
-- no notes --
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 887 <==
From jhallman@frb.gov  Wed Mar 28 20:51:06 2001
Received: from blueberry.kubism.ku.dk (blueberry [130.225.108.193])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id UAA23265
	for <R-bugs@biostat.ku.dk>; Wed, 28 Mar 2001 20:51:05 +0200 (MET DST)
Date: Wed, 28 Mar 2001 20:51:05 +0200 (MET DST)
From: jhallman@frb.gov
Message-Id: <200103281851.UAA23265@pubhealth.ku.dk>
To: R-bugs@biostat.ku.dk
Subject: axis(adj=anything) has no effect

Full_Name: Jeff Hallman
Version: 1.2.2
OS: SunOS5.6
Submission from: (NULL) (132.200.32.33)


Giving an adj argument to axis() seems to have no effect.  In Splus, adj = 0 
left-justifies the labels under the ticks, adj = 1 right justifies them, and 
numbers in between can also be used.  I like to use adj = 0.9 to get something
that looks like this:

-----------+-----------+-----------+------------+---------
        1980        1981        1982         1983

as an axis for a plot of monthly time series data.



==> 887.audit <==
Sat Apr  7 10:29:17 2001	ripley	moved from incoming to Graphics
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

Directory:  In-Out

none

Directory:  Installation

* PR# 924 *
Subject: bug when compiling using --with-f2c option
From: wang@rjka.com
Date: Thu, 26 Apr 2001 19:58:17 +0200 (MET DST)
--same as 923
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 924 <==
From wang@rjka.com  Thu Apr 26 19:58:18 2001
Received: from blueberry.kubism.ku.dk (blueberry [130.225.108.193])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id TAA17907
	for <R-bugs@biostat.ku.dk>; Thu, 26 Apr 2001 19:58:17 +0200 (MET DST)
Date: Thu, 26 Apr 2001 19:58:17 +0200 (MET DST)
From: wang@rjka.com
Message-Id: <200104261758.TAA17907@pubhealth.ku.dk>
To: R-bugs@biostat.ku.dk
Subject: bug when compiling using --with-f2c option

Full_Name: Huayin Wang
Version: 1.2.2
OS: solaris
Submission from: (NULL) (38.158.182.2)


when configure using --with-f2c option, the f2c library should be linked.  It
maybe
just adding a -lf2c somewhere, but I do not know enough about it to fix it.  As
it is
now, errors will be generated complaining some symbols such as "i_len" etc. not
found.

==> 924.audit <==
Wed May  2 19:09:41 2001	ripley	changed notes
Wed May  2 19:09:41 2001	ripley	foobar
Wed May  2 19:09:41 2001	ripley	moved from incoming to Installation
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
* PR# 923 *
Subject: bug when compiling using --with-f2c option
From: wang@rjka.com
Date: Thu, 26 Apr 2001 19:56:59 +0200 (MET DST)
--too little information
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 923 <==
From wang@rjka.com  Thu Apr 26 19:57:00 2001
Received: from blueberry.kubism.ku.dk (blueberry [130.225.108.193])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id TAA17882
	for <R-bugs@biostat.ku.dk>; Thu, 26 Apr 2001 19:56:59 +0200 (MET DST)
Date: Thu, 26 Apr 2001 19:56:59 +0200 (MET DST)
From: wang@rjka.com
Message-Id: <200104261756.TAA17882@pubhealth.ku.dk>
To: R-bugs@biostat.ku.dk
Subject: bug when compiling using --with-f2c option

Full_Name: Huayin Wang
Version: 1.2.2
OS: solaris
Submission from: (NULL) (38.158.182.2)


when configure using --with-f2c option, the f2c library should be linked.  It
maybe
just adding a -lf2c somewhere, but I do not know enough about it to fix it.  As
it is
now, errors will be generated complaining some symbols such as "i_len" etc. not
found.

==> 923.reply.1 <==
From hornik@ci.tuwien.ac.at  Fri Apr 27 08:00:10 2001
Received: from mr.tuwien.ac.at (mr.tuwien.ac.at [128.130.2.10])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id IAA19819
	for <R-bugs@biostat.ku.dk>; Fri, 27 Apr 2001 08:00:10 +0200 (MET DST)
Received: from mithrandir.hornik.net (beren.ci.tuwien.ac.at [128.131.51.40])
	by mr.tuwien.ac.at (8.11.1/8.11.1) with ESMTP id f3R5x2U06832;
	Fri, 27 Apr 2001 07:59:06 +0200 (MET DST)
Received: from hornik by mithrandir.hornik.net with local (Exim 3.12 #1 (Debian))
	id 14t1HT-0007Jj-00; Fri, 27 Apr 2001 07:59:03 +0200
From: Kurt Hornik <Kurt.Hornik@ci.tuwien.ac.at>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
Message-ID: <15081.2727.221988.723146@mithrandir.hornik.net>
Date: Fri, 27 Apr 2001 07:59:03 +0200
To: wang@rjka.com
Cc: r-devel@stat.math.ethz.ch, R-bugs@biostat.ku.dk
Subject: Re: [Rd] bug when compiling using --with-f2c option (PR#923)
In-Reply-To: <200104261757.TAA17892@pubhealth.ku.dk>
References: <200104261757.TAA17892@pubhealth.ku.dk>
X-Mailer: VM 6.92 under Emacs 20.7.2
Reply-To: Kurt.Hornik@ci.tuwien.ac.at
Sender: Kurt Hornik <hornik@ci.tuwien.ac.at>

>>>>> wang  writes:

> Full_Name: Huayin Wang
> Version: 1.2.2
> OS: solaris
> Submission from: (NULL) (38.158.182.2)


> when configure using --with-f2c option, the f2c library should be
> linked.  It maybe just adding a -lf2c somewhere, but I do not know
> enough about it to fix it.  As it is now, errors will be generated
> complaining some symbols such as "i_len" etc. not found.

How do you think we can solve your problem based on the information you
gave?

In case of --with-f2c, configure tests for -lf2c or -lF77/-lI77, and
stops if neither is found.  Have a look at config.log to see what
happened in your case.

-k

==> 923.audit <==
Wed May  2 19:09:10 2001	ripley	changed notes
Wed May  2 19:09:10 2001	ripley	foobar
Wed May  2 19:09:10 2001	ripley	moved from incoming to Installation
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

Directory:  Language

* PR# 937 *
Subject: name creation with index arrays
From: sint@oeaw.ac.at
Date: Thu, 10 May 2001 23:31:58 +0200 (MET DST)
-- no notes --
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 937 <==
From sint@oeaw.ac.at  Thu May 10 23:31:58 2001
Received: from blueberry.kubism.ku.dk (blueberry [130.225.108.193])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id XAA12154
	for <R-bugs@biostat.ku.dk>; Thu, 10 May 2001 23:31:58 +0200 (MET DST)
Date: Thu, 10 May 2001 23:31:58 +0200 (MET DST)
From: sint@oeaw.ac.at
Message-Id: <200105102131.XAA12154@pubhealth.ku.dk>
To: R-bugs@biostat.ku.dk
Subject: name creation with index arrays
MIME-Version: 1.0
Content-Type: text/plain; charset=unknown-8bit
Content-Transfer-Encoding: 8bit

Full_Name: Peter Sint
Version: 1.22
OS: MacOS 9.04
Submission from: (NULL) (193.170.84.51)


The not so serious problem is probably not specific to Macintosh although I
found it there:

The small example from  R-intro works .
> x <- array(1:20,dim=c(4,5))
> i <- array(c(1:3,3:1),dim=c(3,2))
> i
  [,1] [,2]
[1,] 1 3
[2,] 2 2
[3,] 3 1
> x[i]
[1] 9 6 3

x[i] has no attribute!
> x
  [,1] [,2] [,3] [,4] [,5]
[1,] 1 5 9 13 17
[2,] 2 6 10 14 18
[3,] 3 7 11 15 19
[4,] 4 8 12 16 20
> x[i] <- 0
> x
  [,1] [,2] [,3] [,4] [,5]
[1,] 1 5 0 13 17
[2,] 2 0 10 14 18
[3,] 0 7 11 15 19
[4,] 4 8 12 16 20
>

>  colnames(x)<- c("c1","c2","c3","c4","c5")
> x[i]
[1] 9 6 3

BUT
> rownames(x)<- c("r1","r2","r3","r4")
> x[i]
NA NA r3 
 9  6  3 
> 
Rownames result in unsuccessful name formation (colnames do most likely not, but
this may depend on the order in the index array i). Better drop name making if
not o.k.

(Replacement [<- still works. 
Index matrices do not work on data frames, not a bug but a missing feature with
work around)
Reproduce:
x <- array(1:20,dim=c(4,5))
i <- array(c(1:3,3:1),dim=c(3,2))
i
x[i]
x
x[i] <- 0
x
colnames(x)<- c("c1","c2","c3","c4","c5")
x[i]
rownames(x)<- c("r1","r2","r3","r4")
x[i]

==> 937.audit <==
Mon May 21 08:57:05 2001	ripley	moved from incoming to Language
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
* PR# 412 *
Subject: anomalies with call objects
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 06 Feb 2000 01:18:50 +0100
-- no notes --
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 412 <==
From postmaster@franz.stat.wisc.edu  Sun Feb  6 01:16:33 2000
Received: from stat.math.ethz.ch (daemon@hypatia.ethz.ch [129.132.58.23])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id BAA26868
	for <R-bugs@biostat.ku.dk>; Sun, 6 Feb 2000 01:16:31 +0100 (MET)
Received: (from daemon@localhost)
	by stat.math.ethz.ch (8.9.1/8.9.1) id BAA18080
	for <r-bugs@hypatia.math.ethz.ch>; Sun, 6 Feb 2000 01:16:38 +0100 (MET)
Received: from franz.stat.wisc.edu(128.105.174.95)
 via SMTP by hypatia, id smtpdAAAa004QS; Sun Feb  6 01:16:33 2000
Received: from pubhealth.ku.dk (really [130.225.108.10]) by franz.stat.wisc.edu
	via smail with esmtp
	id <m12HFNP-000ZSxC@franz.stat.wisc.edu> (Debian Smail3.2.0.102)
	for <r-bugs@r-project.org>; Sat, 5 Feb 2000 18:16:31 -0600 (CST) 
Received: from biostat.ku.dk (blueberry [130.225.108.193])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id BAA26864
	for <r-bugs@r-project.org>; Sun, 6 Feb 2000 01:16:18 +0100 (MET)
Received: (from pd@localhost)
	by biostat.ku.dk (8.9.3/8.9.3) id BAA12311;
	Sun, 6 Feb 2000 01:18:51 +0100
Sender: pd@blueberry.kubism.ku.dk
To: r-bugs@r-project.org
Subject: anomalies with call objects
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 06 Feb 2000 01:18:50 +0100
Message-ID: <x2900zyyhh.fsf@blueberry.kubism.ku.dk>
Lines: 51
X-Mailer: Gnus v5.7/Emacs 20.4
Mime-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: 7bit


Call objects don't always behave as you'd expect. They're mostly
list-like, but with exceptions:

> f<-function(x,y,...)match.call(expand.dots=FALSE)
> xx <- f(y=1,2,z=3,4)
> dd <- xx$...
> xx$... <- NULL
> c(xx,dd)
[[1]]
f(x = 2, y = 1)

$z
[1] 3

[[3]]
[1] 4

> as.call(c(as.list(xx),dd))
f(x = 2, y = 1, z = 3, 4)

(Splus has this rather differently, since dd becomes a call to list()
rather than a list of promises:

S> c(xx,dd)
f(x = 2, y = 1, list, z = 3, 4)
S> as.call(c(as.list(xx),dd))
f(x = 2, y = 1, list, z = 3, 4)

...but at least gives the same in both cases)

Also, the names of arguments added with [[<- is getting dropped if a
new element is required:

> xx[["abc"]]<-123
> xx
f(x = 2, y = 1, 123)

S has what I'd expect there:

S> xx[["abc"]]<-123
S> xx
f(x = 2, y = 1, abc = 123)

[R-0.99.0 prerelease on RedHat6.1, but this is likely not a new thing.]

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

==> 412.audit <==
Wed Feb 16 19:26:57 2000	ripley	moved from incoming to Language
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
* PR# 408 *
Subject: convolution bug
From: wsimpson@gcal.ac.uk
Date: Fri, 28 Jan 2000 11:17:36 +0100 (MET)
-- no notes --
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 408 <==
From wsimpson@gcal.ac.uk  Fri Jan 28 11:17:36 2000
Received: from localhost (blueberry [130.225.108.193])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id LAA11325
	for <R-bugs@biostat.ku.dk>; Fri, 28 Jan 2000 11:17:36 +0100 (MET)
Date: Fri, 28 Jan 2000 11:17:36 +0100 (MET)
From: wsimpson@gcal.ac.uk
Message-Id: <200001281017.LAA11325@pubhealth.ku.dk>
To: R-bugs@biostat.ku.dk
Subject: convolution bug

Full_Name: Bill Simpson
Version: 65.1 , 0.90.1
OS: Linux
Submission from: (NULL) (193.62.250.209)


I reported this on r-help, but here is official bug report.

The present convolve() does not do convolution by default. Its default behaviour
is
correlation. This is a bug.

The default argument conj should be set to FALSE.

The zero-padding should be on the right for linear convolution (don't ask me
why you call this type="open"; I suggest type="linear").

Here is what I expect linear convolution to do:
myconvolve<-function (x,h) 
{
    nx <- length(x)
    nh <- length(h)
    #zero pad
    if(nx>nh)
       {
       x <- c(x,rep(0, nh-1))
       h<-c(h,rep(0,nx-1))
       }
    else
       {
       h <- c(h,rep(0, nx-1))
       x<-c(x,rep(0,nh-1))
       }
    x <- fft(fft(x) * fft(h), inv = TRUE)
    Re(x)/length(x)
#I am not sure about this, the R IFFT is weird
}

What "circular" convolution should do is just
eliminate the zero-padding:

myconvolve2<-function (x,h)
{
#no padding, circular convolution
    nx <- length(x)
    nh <- length(h)
    x <- fft(fft(x) * fft(h), inv = TRUE)
    Re(x)/(nx)
}


I suggest that you create two functions, convolve() and correlate(), and get
rid
of the conj argument in convolve().

==> 408.audit <==
Wed Feb 16 19:28:42 2000	ripley	moved from incoming to Language
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
* PR# 921 *
Subject:  Managed to confuse match.arg 
From: J.C.Rougier@durham.ac.uk
Date: Wed, 25 Apr 2001 12:22:54 +0100 (BST)
-- no notes --
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 921 <==
From postmaster@franz.stat.wisc.edu  Wed Apr 25 13:23:07 2001
Received: from franz.stat.wisc.edu (root@franz.stat.wisc.edu [128.105.174.95])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id NAA14338
	for <r-bugs@biostat.ku.dk>; Wed, 25 Apr 2001 13:23:06 +0200 (MET DST)
Received: from hermes.dur.ac.uk (really [129.234.4.9]) by franz.stat.wisc.edu
	via smail with esmtp
	id <m14sNO6-000JH1C@franz.stat.wisc.edu> (Debian Smail3.2.0.111)
	for <r-bugs@r-project.org>; Wed, 25 Apr 2001 06:23:14 -0500 (CDT) 
Received: from euclid (euclid.dur.ac.uk [129.234.21.53])
	by hermes.dur.ac.uk (8.11.1/8.11.1) with ESMTP id f3PBMtl04590
	for <r-bugs@r-project.org>; Wed, 25 Apr 2001 12:22:55 +0100 (BST)
Received: from laplace by euclid id <MAA23210@euclid>; Wed, 25 Apr 2001 12:22:49 +0100 (BST)
From: J.C.Rougier@durham.ac.uk
Date: Wed, 25 Apr 2001 12:22:54 +0100 (BST)
Message-Id: <8522.200104251122@laplace>
To: r-bugs@r-project.org
Cc: dma0jcr@laplace.dur.ac.uk
Subject:  Managed to confuse match.arg 

This one may not strictly be a bug, and it was certainly my
fault, but it took me a while to track it down and it is rather
strange:

funOne <- function(x)
{
  funTwo <- 1:10
  funTwo(x)
}

funTwo <- function(v) 2*v

funOne(5) # answer is 10 as expected

# now a different definition for funTwo with a match.arg

funTwo <- function(v, foo=c("small", "large"))
{
  foo <- match.arg(foo)
  print(foo)
  2*v
}

funOne(5) # answer is 10, but foo is NULL

What happens is that in funOne I mask funTwo with a vector, but
that doesn't matter as the call to funTwo specifies
mode="function" (or something similar).  But what happens when
funTwo includes a match.arg?  In this case match.arg fails, and
the reason it fails is that sys.function(sys.parent()) in
match.arg evaluates to 1:10.  If there is a bug here it is the
failure of sys.function to grab a function, with the result that
formal.args in match.fun is NULL.

Cheers, Jonathan.

--please do not edit the information below--

Version:
 platform = sparc-sun-solaris2.7
 arch = sparc
 os = solaris2.7
 system = sparc, solaris2.7
 status = 
 major = 1
 minor = 2.1
 year = 2001
 month = 01
 day = 15
 language = R

Search Path:
 .GlobalEnv, Autoloads, package:base

==> 921.reply.1 <==
From postmaster@franz.stat.wisc.edu  Thu Apr 26 01:01:48 2001
Received: from franz.stat.wisc.edu (root@franz.stat.wisc.edu [128.105.174.95])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id BAA04470
	for <r-bugs@biostat.ku.dk>; Thu, 26 Apr 2001 01:01:47 +0200 (MET DST)
Received: from pubhealth.ku.dk (really [130.225.108.10]) by franz.stat.wisc.edu
	via smail with esmtp
	id <m14sYIG-000JdlC@franz.stat.wisc.edu> (Debian Smail3.2.0.111)
	for <r-bugs@r-project.org>; Wed, 25 Apr 2001 18:01:56 -0500 (CDT) 
Received: from blueberry.kubism.ku.dk (blueberry [130.225.108.193])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id BAA04466
	for <r-bugs@r-project.org>; Thu, 26 Apr 2001 01:01:27 +0200 (MET DST)
Received: (from pd@localhost)
	by blueberry.kubism.ku.dk (8.9.3/8.9.3) id BAA30388;
	Thu, 26 Apr 2001 01:10:27 +0200
Sender: pd@pubhealth.ku.dk
To: r-bugs@r-project.org
Subject: match.arg confusion (PR#921)
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 26 Apr 2001 01:10:27 +0200
Message-ID: <x2zod4r2xo.fsf@blueberry.kubism.ku.dk>
Lines: 22
X-Mailer: Gnus v5.7/Emacs 20.7
Mime-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: 7bit


[sys.function fails sometimes (sorry, our mail system decide to throw
away the original mail)]

Yes, I bumped into something similar recently. The problem is that we
only actually store the call in the context structure, not the
function, so sys.function has to grab the call, take the 1st element,
and reevaluate it in the parent frame. It is quite easy to think up
examples where a second evaluation does not give the same value as
the first. 

Your particular case is of a slightly different natur and should be
easily fixable by replacing findVar in R_sysfunction by findVar1 and
looking specifically for objects of mode "function", but the basic
problem persists. I don't think I want to risk fixing this (and maybe
unfixing something else) for 1.2.3 tomorrow though.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

==> 921.audit <==
Thu Apr 26 12:30:31 2001	pd	moved from incoming to Language
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
* PR# 669 *
Subject: Bug(s) w/ rbind.data.frame(); fix also read.table(*, as.is = TRUE) ?
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Mon, 25 Sep 2000 10:17:15 +0200
--status of AsIs columns
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 669 <==
From maechler@stat.math.ethz.ch  Mon Sep 25 10:17:01 2000
Received: from stat.math.ethz.ch (daemon@hypatia.ethz.ch [129.132.58.23])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id KAA01907
	for <R-bugs@biostat.ku.dk>; Mon, 25 Sep 2000 10:17:01 +0200 (MET DST)
Received: (from daemon@localhost)
	by stat.math.ethz.ch (8.9.1/8.9.1) id KAA07627
	for <R-bugs@stat.math.ethz.ch>; Mon, 25 Sep 2000 10:17:19 +0200 (MET DST)
Received: from lynne(129.132.58.30), claiming to be "lynne.ethz.ch"
 via SMTP by hypatia, id smtpdAAAa001r9; Mon Sep 25 10:17:15 2000
Received: (maechler@localhost) by lynne.ethz.ch (8.9.3/D-MATH-client) id KAA01475; Mon, 25 Sep 2000 10:17:15 +0200
X-Authentication-Warning: lynne.ethz.ch: maechler set sender to maechler@stat.math.ethz.ch using -f
From: Martin Maechler <maechler@stat.math.ethz.ch>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
Message-ID: <14799.2571.494467.836722@gargle.gargle.HOWL>
Date: Mon, 25 Sep 2000 10:17:15 +0200
To: R-bugs@stat.math.ethz.ch
Subject: Bug(s) w/ rbind.data.frame(); fix also read.table(*, as.is = TRUE) ?
X-Mailer: VM 6.76 under Emacs 20.7.1
Reply-To: Martin Maechler <maechler@stat.math.ethz.ch>

This is not only bug report, but also a RFC (request for comments):

The basic problem is that there are (at least) two ways of easily getting
non-factor character columns in data.frames.
The first is  
    read.table(*, as.is = TRUE) 
and the second is
    data.frame(.., I(...), ..)	      

which differ in their result. Whereas the first produces `pure' character
columns in the data.frame, the second approach gives `AsIs' classed
columns (character, or, e.g. logical).

Now, as the following shows,  rbind.data.frame()  *is* buggy anyway,
I wonder if we shouldn't change read.table(*, as.is = TRUE)
such that the non-numeric columns of its result become "AsIs" classed as
well:

-----------

str(d1 <- data.frame(a=1:3, b = I(letters[1:3])))
## d1 is `alright'
## d0: The same but a `character' *not* protected by AsIs:
d0 <- d1
d0$b <- unclass(d0$b)
str(d0)
## Note that this is *really* the same as a what you get from
##  read.table(*, as.is = TRUE)
##  ----------
##  R's read.table() is S+ compatible; however I wonder if
##  we shouldn't add  "AsIs" classes to all non-numeric components...
##  the classes, shouldn't harm, but ensure consistency of treatment..

str(d11 <- rbind(d1, new = c(7, "N"))) ## alright
str(d01 <- rbind(d0, new = c(7, "N"))) ## all wrong :
## Both columns were coerced to factors !!
##-- S-PLUS 5 coerces both to "character" -- which is better,
##  since the new row *is* all character

## R makes nonsense with 'b' [factor w/ 1 level "N": NA NA NA 1]
## S+ 5.1 does exactly the right thing [both a & b still look like in d0,d1 :
str(d12 <- rbind(d1, new = data.frame(a= 7, b="N")))##
str(d02 <- rbind(d0, new = data.frame(a= 7, b="N")))##

---------

Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
Seminar fuer Statistik, ETH-Zentrum  LEO D10	Leonhardstr. 27
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1228			<><

==> 669.audit <==
Wed Oct 25 20:31:21 2000	ripley	changed notes
Wed Oct 25 20:31:21 2000	ripley	foobar
Wed Oct 25 20:31:21 2000	ripley	moved from incoming to Language
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

Directory:  Low-level

none

Directory:  Misc

none

Directory:  Models

none

Directory:  Startup

* PR# 486 *
Subject: Re: autoload error in profile {was anova-bug in R-version  1.0.0?}
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Tue, 14 Mar 2000 10:32:43 +0100 (MET)
--workaround to the origin problem in 1.0.1
--New report: try does not work from the profile.
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 486 <==
From maechler@stat.math.ethz.ch  Tue Mar 14 10:32:36 2000
Received: from stat.math.ethz.ch (daemon@hypatia.ethz.ch [129.132.58.23])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id KAA17249
	for <R-bugs@biostat.ku.dk>; Tue, 14 Mar 2000 10:32:35 +0100 (MET)
Received: (from daemon@localhost)
	by stat.math.ethz.ch (8.9.1/8.9.1) id KAA21252;
	Tue, 14 Mar 2000 10:32:48 +0100 (MET)
Received: from lynne(129.132.58.30), claiming to be "lynne.ethz.ch"
 via SMTP by hypatia, id smtpdAAAa005C1; Tue Mar 14 10:32:44 2000
Received: (maechler@localhost) by lynne.ethz.ch (8.9.3/D-MATH-client) id KAA03934; Tue, 14 Mar 2000 10:32:44 +0100
X-Authentication-Warning: lynne.ethz.ch: maechler set sender to maechler@stat.math.ethz.ch using -f
From: Martin Maechler <maechler@stat.math.ethz.ch>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
Message-ID: <14542.1851.731086.380@lynne.ethz.ch>
Date: Tue, 14 Mar 2000 10:32:43 +0100 (MET)
To: Prof Brian D Ripley <ripley@stats.ox.ac.uk>
Cc: R-bugs@stat.math.ethz.ch
Subject: Re: autoload error in profile {was anova-bug in R-version  1.0.0?}
 (PR#470)
In-Reply-To: <Pine.GSO.4.05.10003071100180.20079-100000@auk.stats>
References: <14532.56910.278837.379365@lynne.ethz.ch>
	<Pine.GSO.4.05.10003071100180.20079-100000@auk.stats>
X-Mailer: VM 6.75 under Emacs 20.6.1
Reply-To: Martin Maechler <maechler@stat.math.ethz.ch>

>>>>> "BDR" == Prof Brian D Ripley <ripley@stats.ox.ac.uk> writes:

    BDR> On Tue, 7 Mar 2000, Martin Maechler wrote:
    >> >>>>> "BDR" == Prof Brian D Ripley <ripley@stats.ox.ac.uk> writes:
    >> 
    BDR> On Tue, 7 Mar 2000, Trenkler, Dietrich wrote:
    >> >> I think I've discovered what went wrong.
    >> >> 
    >> >> My workspace included a function wilcox.test formerly copied from
    >> >> ctest. Now ctest ist part of the distribution and because of that I
    >> >> always got the message:
    >> >> 
    >> >> [Previously saved workspace restored]
    >> >> 
    >> >> Error in autoload("wilcox.test", "ctest") :
    >> >> Object already exists
    >> >> 
    >> >> I didn't take care of this message. Now I removed wilcox.test, saved
    >> >> the WS, restarted R without the vanilla-option and alas, anova
    >> >> now works.
    >> >> 
    >> >> It seems that R stops initializing after encountering the error
    >> >> mentioned above. Is this correct?   
    >> 
    BDR> Yes, in that the rest of the system Rprofile file is skipped
    BDR> and hence options show.signif.stars and show.coef.Pvalues are not set.
    >> but other options as well..
    >> I think this shouldn't happen and *is* a bug.

    BDR> It looks to me as if a bit more protection is needed in print.coefmat,
    BDR> at least.

	 which Brian has implemented in the mean time.

	 ....

    >> For the 1.0.x patches, at least, I'll move the autoload()'s to the end of
    >> profile/Common.R

    BDR> I _think_ they should have try() around them, which is what S-PLUS 
    BDR> now does with all startup code.

I tried this, but it does not work :

try(autoload(..)) works okay when used after startup, but not *during*
startup.  However, I'll put a workaround into Common.R

Should this {try(.) not working during startup} be another bug report ?

Martin

==> 486.audit <==
Sat Mar 25 09:44:47 2000	maechler	moved from incoming to Startup
Sat Apr 08 07:41:36 2000	ripley	changed notes
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

Directory:  System-specific

* PR# 964 *
Subject: R-1.2.3 OSF precompiled binary doesn't run under DU4.0D
From: paul@gromit.dlib.vt.edu
Date: Fri, 1 Jun 2001 17:47:10 +0200 (MET DST)
-- no notes --
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 964 <==
From paul@gromit.dlib.vt.edu  Fri Jun  1 17:47:11 2001
Received: from blueberry.kubism.ku.dk (blueberry [130.225.108.193])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id RAA03063
	for <R-bugs@biostat.ku.dk>; Fri, 1 Jun 2001 17:47:10 +0200 (MET DST)
Date: Fri, 1 Jun 2001 17:47:10 +0200 (MET DST)
From: paul@gromit.dlib.vt.edu
Message-Id: <200106011547.RAA03063@pubhealth.ku.dk>
To: R-bugs@biostat.ku.dk
Subject: R-1.2.3 OSF precompiled binary doesn't run under DU4.0D

Full_Name: Paul Mather
Version: 1.2.3
OS: Digital Unix 4.0D
Submission from: (NULL) (128.173.35.237)


The precompiled binary for "osf4.0" distributed via CRAN does not run under
Digital Unix 4.0.  The error given is:

Fatal error: The X11 shared library could not be loaded.
  The error was dlopen: cannot load /usr/local/lib/R/bin/R_X11.so

Subsequent investigation actually reveals that the R_X11.so was linked against
libdnet.so, which is not present on standard Digital Unix 4.0D systems.  The
error is triggered by an inability to load the libdnet.so shared library.

As I understand it, libdnet provides DECnet support.  Digital Unix 4.0D systems
ship with libdnet_stub.so, which is a library of empty stub functions.

Is it possible to provide a version of R_X11.so linked against libdnet_stub.so?
Aside from this problem, the precompiled binary appears to work (i.e.,
"R -g none" runs).

Cheers,

Paul.

==> 964.audit <==
Mon Jun  4 09:27:52 2001	ripley	moved from incoming to System-specific
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
* PR# 851 *
Subject: Comments on R-1.2.1 builds
From: "Nelson H. F. Beebe" <beebe@math.utah.edu>
Date: Fri, 16 Feb 2001 17:44:17 -0700 (MST)
--These are only warnings: some have been eliminated for 1.2.2.
--Some are about constructs needed to satisfy other compilers.
--
--Also: configure problem with g77 on SGI.
--(Should be taken care of for 1.2.3).
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 851 <==
From postmaster@franz.stat.wisc.edu  Sat Feb 17 01:44:14 2001
Received: from franz.stat.wisc.edu (franz.stat.wisc.edu [128.105.174.95])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id BAA19300
	for <r-bugs@biostat.ku.dk>; Sat, 17 Feb 2001 01:44:11 +0100 (MET)
Received: from sunshine.math.utah.edu (really [128.110.198.2]) by franz.stat.wisc.edu
	via in.smtpd with esmtp
	id <m14TvU6-000J5HC@franz.stat.wisc.edu> (Debian Smail3.2.0.102)
	for <r-bugs@r-project.org>; Fri, 16 Feb 2001 18:44:22 -0600 (CST) 
Received: from suncore.math.utah.edu (suncore0.math.utah.edu [128.110.198.5])
	by sunshine.math.utah.edu (8.9.3/8.9.3) with ESMTP id RAA20034;
	Fri, 16 Feb 2001 17:44:18 -0700 (MST)
Received: (from beebe@localhost)
	by suncore.math.utah.edu (8.9.3/8.9.3) id RAA29625;
	Fri, 16 Feb 2001 17:44:17 -0700 (MST)
Date: Fri, 16 Feb 2001 17:44:17 -0700 (MST)
From: "Nelson H. F. Beebe" <beebe@math.utah.edu>
To: r-bugs@r-project.org
Cc: beebe@math.utah.edu
X-US-Mail: "Center for Scientific Computing, Department of Mathematics, 322
        INSCC, University of Utah, 155 S 1400 E RM 233, Salt Lake City, UT
        84112-0090, USA"
X-Telephone: +1 801 581 5254
X-FAX: +1 801 585 1640, +1 801 581 4148
X-URL: http://www.math.utah.edu/~beebe
Subject: Comments on R-1.2.1 builds
Message-ID: <CMM.0.92.0.982370657.beebe@suncore.math.utah.edu>

The R-1.2.1 builds have gone fairly smoothly on most of my UNIX
architectures, but there were many warnings reported by the picky SGI
compiler that could be eliminated in future releases.

Generally, I have found the SGI compilers very helpful in ferreting
out portability problems, unused and/or obsolete variables, unexpected
datatype coercions, etc., and they compile faster than any other
compilers too.

First, I configured like this:

env CC='c89 -mips3 -O3' ./configure && make all

This reports:

	R is now configured for mips-sgi-irix6.5

	  Source directory:          .
	  Installation directory:    /usr/local
	  C compiler:                c89 -mips3 -O3  -OPT:IEEE_NaN_inf=ON -g
	  C++ compiler:              c++  -g -O2
	  FORTRAN compiler:          g77  -OPT:IEEE_NaN_inf=ON -g -O2

	  X11 support:               yes
	  Gnome support:             no
	  Tcl/Tk support:            yes

	  R profiling support:       yes
	  R as a shared library:     no

The build proceeds until this failure:

	g77 -OPT:IEEE_NaN_inf=ON  -g -O2 -c ch2inv.f -o ch2inv.o
	f771: Invalid option `-OPT:IEEE_NaN_inf=ON'
	make[3]: *** [ch2inv.o] Error 1

Evidently, it was not prepared for the GNU Fortran compiler.

I started over with a new clean unpack of the distribution,
with

	env FC=f77 F77=f77 CC=c89 CXX=CC ./configure &&
		make all check install

and got a working build and install.  It reports

	R is now configured for mips-sgi-irix6.5

	  Source directory:          .
	  Installation directory:    /usr/local
	  C compiler:                c89  -OPT:IEEE_NaN_inf=ON -g
	  C++ compiler:              CC  -g
	  FORTRAN compiler:          f77  -OPT:IEEE_NaN_inf=ON -g

	  X11 support:               yes
	  Gnome support:             no
	  Tcl/Tk support:            yes

	  R profiling support:       yes
	  R as a shared library:     no


Here are the all the compiler warnings reported:

------------------------------------------------------------------------
DIRECTORY: R-1.2.1/src/appl
c89 -I. -I../../src/include -I../../src/include -I/usr/local/include -DHAVE_CONFIG_H -OPT:IEEE_NaN_inf=ON  -g -c chull.c -o chull.o
cc-1185 c89: WARNING File = chull.c, Line = 77
  An enumerated type is mixed with another type.

      Rboolean vert, neg_dir=0;
                             ^

cc-1185 c89: WARNING File = chull.c, Line = 84
  An enumerated type is mixed with another type.

      vert = (x[jj] == xt);
           ^

cc-1185 c89: WARNING File = chull.c, Line = 87
  An enumerated type is mixed with another type.

        neg_dir = ((s > 0 && d1 < 0.) || (s < 0 && d1 > 0.));
                ^

------------------------------------------------------------------------
c89 -I. -I../../src/include -I../../src/include -I/usr/local/include -DHAVE_CONFIG_H -OPT:IEEE_NaN_inf=ON  -g -c cpoly.c -o cpoly.o
cc-1185 c89: WARNING File = cpoly.c, Line = 490
  An enumerated type is mixed with another type.

      *bool = hypot(hvr, hvi) <= are * 10. * hypot(hr[n-1], hi[n-1]);
            ^

------------------------------------------------------------------------
c89 -I. -I../../src/include -I../../src/include -I/usr/local/include -DHAVE_CONFIG_H -OPT:IEEE_NaN_inf=ON  -g -c lbfgsb.c -o lbfgsb.o
cc-1552 c89: WARNING File = lbfgsb.c, Line = 326
  The variable "l1" is set but never used.

      int lsnd, l1, l2, l3, ld, lr, lt;
                ^

cc-1552 c89: WARNING File = lbfgsb.c, Line = 326
  The variable "l2" is set but never used.

      int lsnd, l1, l2, l3, ld, lr, lt;
                    ^

cc-1552 c89: WARNING File = lbfgsb.c, Line = 326
  The variable "l3" is set but never used.

      int lsnd, l1, l2, l3, ld, lr, lt;
                        ^

cc-1551 c89: WARNING File = lbfgsb.c, Line = 687
  The variable "xstep" is used before its value is set.

                   nint, word, iback, stp, xstep, k);
                                           ^

cc-1552 c89: WARNING File = lbfgsb.c, Line = 582
  The variable "time" is set but never used.

      double time;
             ^

------------------------------------------------------------------------
c89 -I. -I../../src/include -I../../src/include -I/usr/local/include -DHAVE_CONFIG_H -OPT:IEEE_NaN_inf=ON  -g -c pretty.c -o pretty.o
cc-1185 c89: WARNING File = pretty.c, Line = 82
  An enumerated type is mixed with another type.

        i_small = dx < cell * U * imax2(1,*ndiv) * DBL_EPSILON *3;
                ^

------------------------------------------------------------------------
c89 -I. -I../../src/include -I../../src/include -I/usr/local/include -DHAVE_CONFIG_H -OPT:IEEE_NaN_inf=ON  -g -c strsignif.c -o strsignif.o
cc-1552 c89: WARNING File = strsignif.c, Line = 80
  The variable "jL" is set but never used.

      int iex, j, jL, len_flag = strlen(*flag);
                  ^

------------------------------------------------------------------------
c89 -I. -I../../src/include -I../../src/include -I/usr/local/include -DHAVE_CONFIG_H -OPT:IEEE_NaN_inf=ON  -g -c uncmin.c -o uncmin.o
cc-1551 c89: WARNING File = uncmin.c, Line = 2443
  The variable "mxtake" is used before its value is set.

         steptl, sx, fscale, itnlim, iretcd, mxtake, msg);
                                             ^

------------------------------------------------------------------------
DIRECTORY: R-1.2.1/src/nmath
c89 -I. -I../../src/include -I../../src/include -I/usr/local/include -DHAVE_CONFIG_H -OPT:IEEE_NaN_inf=ON  -g -c polygamma.c -o polygamma.o
cc-1167 c89: WARNING File = polygamma.c, Line = 167
  Pointer points outside of underlying object.

  static double *b = (double *)&bvalues -1;
                                        ^

------------------------------------------------------------------------
DIRECTORY: R-1.2.1/src/unix
c89 -I. -I../../src/include -I../../src/include -I/usr/local/include -DHAVE_CONFIG_H -OPT:IEEE_NaN_inf=ON  -g -c devices.c -o devices.o
cc-1185 c89: WARNING File = devices.c, Line = 111
  An enumerated type is mixed with another type.

                                 colormodel, maxcubesize)) {
                                 ^

------------------------------------------------------------------------
c89 -I. -I../../src/include -I../../src/include -I/usr/local/include -DHAVE_CONFIG_H -OPT:IEEE_NaN_inf=ON  -g -c edit.c -o edit.o
cc-1185 c89: WARNING File = edit.c, Line = 109
  An enumerated type is mixed with another type.

            t = deparse1(x, 0);
                            ^

------------------------------------------------------------------------
c89 -I. -I../../src/include -I../../src/include -I/usr/local/include -DHAVE_CONFIG_H -OPT:IEEE_NaN_inf=ON  -g -c system.c -o system.o
cc-1185 c89: WARNING File = system.c, Line = 196
  An enumerated type is mixed with another type.

                UsingReadline = 0;
                              ^

cc-1185 c89: WARNING File = system.c, Line = 211
  An enumerated type is mixed with another type.

      R_Interactive = isatty(0);
                    ^

cc-1185 c89: WARNING File = system.c, Line = 234
  An enumerated type is mixed with another type.

      fpu_setup(1);
                ^

------------------------------------------------------------------------
c89 -I. -I../../src/include -I../../src/include -I/usr/local/include -DHAVE_CONFIG_H -OPT:IEEE_NaN_inf=ON  -g -c sys-common.c -o sys-common.o
cc-1185 c89: WARNING File = sys-common.c, Line = 173
  An enumerated type is mixed with another type.

      return stat(R_ExpandFileName(path), &sb) == 0;
             ^

cc-1185 c89: WARNING File = sys-common.c, Line = 188
  An enumerated type is mixed with another type.

      if (name && name[0] != '.') return 0;
                                         ^

cc-1185 c89: WARNING File = sys-common.c, Line = 189
  An enumerated type is mixed with another type.

      else return 1;
                  ^

------------------------------------------------------------------------
DIRECTORY: R-1.2.1/src/main
c89 -I. -I../../src/include -I../../src/include -I/usr/local/include -DHAVE_CONFIG_H -OPT:IEEE_NaN_inf=ON  -g -c RNG.c -o RNG.o
cc-1185 c89: WARNING File = RNG.c, Line = 63
  An enumerated type is mixed with another type.

      { 0, 0, "Wichmann-Hill",          3,      dummy},
        ^

cc-1185 c89: WARNING File = RNG.c, Line = 63
  An enumerated type is mixed with another type.

      { 0, 0, "Wichmann-Hill",          3,      dummy},
           ^

cc-1185 c89: WARNING File = RNG.c, Line = 64
  An enumerated type is mixed with another type.

      { 1, 0, "Marsaglia-MultiCarry",   2,      dummy},
        ^

cc-1185 c89: WARNING File = RNG.c, Line = 64
  An enumerated type is mixed with another type.

      { 1, 0, "Marsaglia-MultiCarry",   2,      dummy},
           ^

cc-1185 c89: WARNING File = RNG.c, Line = 65
  An enumerated type is mixed with another type.

      { 2, 0, "Super-Duper",            2,      dummy},
        ^

cc-1185 c89: WARNING File = RNG.c, Line = 65
  An enumerated type is mixed with another type.

      { 2, 0, "Super-Duper",            2,      dummy},
           ^

cc-1185 c89: WARNING File = RNG.c, Line = 66
  An enumerated type is mixed with another type.

      { 3, 0, "Mersenne-Twister",           1+624,      dummy},
        ^

cc-1185 c89: WARNING File = RNG.c, Line = 66
  An enumerated type is mixed with another type.

      { 3, 0, "Mersenne-Twister",           1+624,      dummy},
           ^

cc-1185 c89: WARNING File = RNG.c, Line = 67
  An enumerated type is mixed with another type.

      { 4, 0, "Knuth-TAOCP",          1+100,    dummy},
        ^

cc-1185 c89: WARNING File = RNG.c, Line = 67
  An enumerated type is mixed with another type.

      { 4, 0, "Knuth-TAOCP",          1+100,    dummy},
           ^

cc-1185 c89: WARNING File = RNG.c, Line = 68
  An enumerated type is mixed with another type.

      { 5, 0, "User-supplied",            0,    dummy},
        ^

cc-1185 c89: WARNING File = RNG.c, Line = 68
  An enumerated type is mixed with another type.

      { 5, 0, "User-supplied",            0,    dummy},
           ^

cc-1185 c89: WARNING File = RNG.c, Line = 264
  An enumerated type is mixed with another type.

        newRNG = tmp % 100;
               ^

cc-1185 c89: WARNING File = RNG.c, Line = 265
  An enumerated type is mixed with another type.

        newN01 = tmp / 100;
               ^

cc-1185 c89: WARNING File = RNG.c, Line = 382
  An enumerated type is mixed with another type.

        RNGkind(asInteger(rng));
                ^

cc-1185 c89: WARNING File = RNG.c, Line = 385
  An enumerated type is mixed with another type.

        Norm_kind(asInteger(norm));
                  ^

cc-1185 c89: WARNING File = RNG.c, Line = 404
  An enumerated type is mixed with another type.

        kind = asInteger(skind);
             ^

------------------------------------------------------------------------
c89 -I. -I../../src/include -I../../src/include -I/usr/local/include -DHAVE_CONFIG_H -OPT:IEEE_NaN_inf=ON  -g -c arithmetic.c -o arithmetic.o
cc-1185 c89: WARNING File = arithmetic.c, Line = 505
  An enumerated type is mixed with another type.

        x = complex_binary(PRIMVAL(op), x, y);
                           ^

cc-1185 c89: WARNING File = arithmetic.c, Line = 511
  An enumerated type is mixed with another type.

            x = real_binary(PRIMVAL(op), x, y);
                            ^

cc-1185 c89: WARNING File = arithmetic.c, Line = 514
  An enumerated type is mixed with another type.

            x = integer_binary(PRIMVAL(op), x, y);
                               ^

cc-1185 c89: WARNING File = arithmetic.c, Line = 553
  An enumerated type is mixed with another type.

        return integer_unary(PRIMVAL(op), s1);
                             ^

cc-1185 c89: WARNING File = arithmetic.c, Line = 555
  An enumerated type is mixed with another type.

        return real_unary(PRIMVAL(op), s1);
                          ^

cc-1185 c89: WARNING File = arithmetic.c, Line = 557
  An enumerated type is mixed with another type.

        return complex_unary(PRIMVAL(op), s1);
                             ^

------------------------------------------------------------------------
c89 -I. -I../../src/include -I../../src/include -I/usr/local/include -DHAVE_CONFIG_H -OPT:IEEE_NaN_inf=ON  -g -c array.c -o array.o
cc-1185 c89: WARNING File = array.c, Line = 98
  An enumerated type is mixed with another type.

        copyMatrix(snr, vals, byrow);
                              ^

cc-1185 c89: WARNING File = array.c, Line = 100
  An enumerated type is mixed with another type.

        copyListMatrix(snr, vals, byrow);
                                  ^

------------------------------------------------------------------------
c89 -I. -I../../src/include -I../../src/include -I/usr/local/include -DHAVE_CONFIG_H -OPT:IEEE_NaN_inf=ON  -g -c bind.c -o bind.o
cc-1185 c89: WARNING File = bind.c, Line = 496
  An enumerated type is mixed with another type.

        if (n != R_NilValue && pmatch(R_RecursiveSymbol, n, 1)) {
                                                            ^

cc-1185 c89: WARNING File = bind.c, Line = 505
  An enumerated type is mixed with another type.

        else if (n != R_NilValue &&  pmatch(R_UseNamesSymbol, n, 1)) {
                                                                 ^

------------------------------------------------------------------------
c89 -I. -I../../src/include -I../../src/include -I/usr/local/include -DHAVE_CONFIG_H -OPT:IEEE_NaN_inf=ON  -g -c builtin.c -o builtin.o
cc-1185 c89: WARNING File = builtin.c, Line = 573
  An enumerated type is mixed with another type.

            if (TAG(y) != R_NilValue && pmatch(STRING_ELT(x, 0), TAG(y), 1)) {
                                                                         ^

------------------------------------------------------------------------
c89 -I. -I../../src/include -I../../src/include -I/usr/local/include -DHAVE_CONFIG_H -OPT:IEEE_NaN_inf=ON  -g -c character.c -o character.o
cc-1552 c89: WARNING File = character.c, Line = 368
  The variable "uclass" is set but never used.

      int i, len, minlen, uclass;
                          ^

------------------------------------------------------------------------
c89 -I. -I../../src/include -I../../src/include -I/usr/local/include -DHAVE_CONFIG_H -OPT:IEEE_NaN_inf=ON  -g -c coerce.c -o coerce.o
cc-1185 c89: WARNING File = coerce.c, Line = 703
  An enumerated type is mixed with another type.

                SET_STRING_ELT(rval, i, STRING_ELT(deparse1(CAR(vp), 0), 0));
                                        ^

cc-1185 c89: WARNING File = coerce.c, Line = 776
  An enumerated type is mixed with another type.

                               STRING_ELT(deparse1(VECTOR_ELT(v, i), 0), 0));
                               ^

cc-1185 c89: WARNING File = coerce.c, Line = 902
  An enumerated type is mixed with another type.

        x = install(CHAR(STRING_ELT(deparse1(x, 1), 0)));
                    ^

------------------------------------------------------------------------
c89 -I. -I../../src/include -I../../src/include -I/usr/local/include -DHAVE_CONFIG_H -OPT:IEEE_NaN_inf=ON  -g -c connections.c -o connections.o
cc-1185 c89: WARNING File = connections.c, Line = 127
  An enumerated type is mixed with another type.

      con->canwrite = (con->mode[0] == 'w' || con->mode[0] == 'a');
                    ^

cc-1185 c89: WARNING File = connections.c, Line = 128
  An enumerated type is mixed with another type.

      con->canread = !con->canwrite;
                   ^

cc-1185 c89: WARNING File = connections.c, Line = 291
  An enumerated type is mixed with another type.

      con->canwrite = (con->mode[0] == 'w');
                    ^

cc-1185 c89: WARNING File = connections.c, Line = 292
  An enumerated type is mixed with another type.

      con->canread = !con->canwrite;
                   ^

cc-1185 c89: WARNING File = connections.c, Line = 494
  An enumerated type is mixed with another type.

      new->canread = (strcmp(mode, "r") == 0);
                   ^

cc-1185 c89: WARNING File = connections.c, Line = 495
  An enumerated type is mixed with another type.

      new->canwrite = (strcmp(mode, "w") == 0);
                    ^

cc-1185 c89: WARNING File = connections.c, Line = 772
  An enumerated type is mixed with another type.

            con->incomplete = strlen(this->lastline) > 0;
                            ^

cc-1552 c89: WARNING File = connections.c, Line = 855
  The variable "con" is set but never used.

      Rconnection con = NULL;
                  ^

cc-1185 c89: WARNING File = connections.c, Line = 910

==> 851.audit <==
Sat Feb 17 11:44:41 2001	ripley	moved from incoming to System-specific
Sat Feb 17 11:56:52 2001	ripley	changed notes
Sat Feb 17 11:56:52 2001	ripley	foobar
Sun Feb 18 10:13:14 2001	ripley	changed notes
Sun Feb 18 10:13:14 2001	ripley	foobar
Sat Apr  7 18:22:04 2001	hornik	changed notes
Sat Apr  7 18:22:04 2001	hornik	foobar
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
* PR# 848 *
Subject: X11 device doesn't handle destroy events correcly
From: Thomas Vogels <tov@ece.cmu.edu>
Date: 13 Feb 2001 17:40:46 -0500
-- no notes --
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 848 <==
From postmaster@franz.stat.wisc.edu  Tue Feb 13 23:40:36 2001
Received: from franz.stat.wisc.edu (franz.stat.wisc.edu [128.105.174.95])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id XAA10552
	for <r-bugs@biostat.ku.dk>; Tue, 13 Feb 2001 23:40:36 +0100 (MET)
Received: from infiniti.ece.cmu.edu (really [128.2.133.84]) by franz.stat.wisc.edu
	via in.smtpd with esmtp
	id <m14So7r-000J2mC@franz.stat.wisc.edu> (Debian Smail3.2.0.102)
	for <r-bugs@r-project.org>; Tue, 13 Feb 2001 16:40:47 -0600 (CST) 
Received: (from tov@localhost) by infiniti.ece.cmu.edu (AIX4.3/UCB 8.8.8/8.8.8) id RAA70658; Tue, 13 Feb 2001 17:40:46 -0500
X-Authentication-Warning: infiniti.ece.cmu.edu: tov set sender to tov@ece.cmu.edu using -f
Sender: tov@infiniti.ece.cmu.edu
To: r-bugs@r-project.org
Cc: Thomas Vogels <tov@ece.cmu.edu>
Subject: X11 device doesn't handle destroy events correcly
Reply-To: Thomas Vogels <tov@ece.cmu.edu>
X-URI: http://www.ece.cmu.edu/~tov
From: Thomas Vogels <tov@ece.cmu.edu>
Date: 13 Feb 2001 17:40:46 -0500
Message-ID: <px3ddi6wb5.fsf@infiniti.ece.cmu.edu>
Lines: 258
User-Agent: Gnus/5.0807 (Gnus v5.8.7) Emacs/20.7
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii


Hi, there are two problems in devX11.c.  The one is an undocumented
nuisance and the other isn't a bug until you try to embed an X11
device in another window (think tktoplevel() in tcltk package...).

Let's take a look at locator() first: Assuming you call locator() with
a current X11 device, this call is handled in X11_Locator
(src/unix/X11/devX11.c).  When you have one window open and call
locator, you have three options to quit the locator: click Button 1
(to locate), click Button 2 (to abort), or destroy the window.  The
later results in the error message: "Error in locator(1) : No graphics
device is active". That's OK, sort of.

This gets problematic when you open two windows:
> x11()  # assume that's device 2
> x11()  # assume that's device 3
> plot(1)
> locator(1)  # with device 3 == dev.cur()!

When you now destroy device 3 (where locator expects the click), you have
*no alternative but to close _all_ windows* to abort the locator.  The
locator continues to wait for mouse clicks in device 3 where of course
no further clicks can come from.  That's the nuisance part.

The second problem is that the device may try to plot() into a
non-existant window.  Assume that the window was destroyed by some
other part of the program.  The device (at some point in the future)
will receive a DestroyNotify event that handleEvent ignores.
Blissfully!  *No KillDevice is called* when the window is destroyed by
something other than the WM_DELETE_WINDOW mechanism!  This happens
when you embed the X11 device into another window/application.  For
starters, the device no longer receives WM_DELETE_WINDOW client
messages.  But it does receive a DestroyNotify event when the parent
(the container window) is destroyed.  HandleEvent should, well
_handle_ this _event_.

The patch below is a _suggestion_ how to solve both problems.  It is
against the current r-devel, 1.3, as of 2/13.  I believe this behavior
exists in version 1.2 as well and can be solved there the same way.
The patch is just meant as a convenient and concise way to describe
my suggestion.  I'd greatly appreciate feedback or other ideas!

Implementation:

-- the variable inclose is now in the device specific structure (why
   was it global?)  After the window is mapped, inclose is TRUE until
   the window is destroyed explicitly or a DestroyNotify event has been
   received.
-- the deviceSpecific pointer is set to NULL after the memory has been
   freed. This (side?) effect is used in X11_Locator to detect the
   closing of the current device  which _must_ lead to an error.
-- the if statement to handle events of type DestroyEvent is added to 
   handleEvent
-- when the user closes the device (dev.off()), the window is
   destroyed in X11_Close
-- when the user pushes the close button in the window frame, the
   window is destroyed in handleEvent and X11_Close is initiated
   (the WM_DELETE_WINDOW mechanism already in place.)
-- when the window is destroyed for another reason (e.g. the parent
   being destroyed), it is not destroyed again but X11_Close is still
   initiated.

Regards,
  -tom


--------------------------------------------------
*** devX11.c_orig	Tue Feb 13 15:32:24 2001
--- devX11.c	Tue Feb 13 17:24:04 2001
***************
*** 116,121 ****
--- 116,122 ----
      FILE *fp;				/* file for a bitmap device */
      int quality;			/* JPEG quality */
  
+     Rboolean inclose;                   /* TRUE if window is being closed */
  } x11Desc;
  
  
***************
*** 145,151 ****
  static Atom _XA_WM_PROTOCOLS, protocol;
  
  static Rboolean displayOpen = FALSE;
- static Rboolean inclose = FALSE;
  static int numX11Devices = 0;
  
  	/********************************************************/
--- 146,151 ----
***************
*** 619,632 ****
  	xd->windowHeight = event.xconfigure.height;
  	xd->resize = 1;
      }
      else if ((event.type == ClientMessage) &&
! 	     (event.xclient.message_type == _XA_WM_PROTOCOLS))
! 	if (!inclose && event.xclient.data.l[0] == protocol) {
! 	    XFindContext(display, event.xclient.window,
  			 devPtrContext, &temp);
  	    dd = (DevDesc *) temp;
! 	    KillDevice(dd);
  	}
  }
  
  static void R_ProcessEvents(void *data)
--- 619,652 ----
  	xd->windowHeight = event.xconfigure.height;
  	xd->resize = 1;
      }
+     else if (event.type == DestroyNotify) {
+         /* The window is being destroyed, kill the device, too. */
+         XFindContext(display, event.xdestroywindow.window,
+                      devPtrContext, &temp);
+         dd = (DevDesc *) temp;
+         xd = (x11Desc *) dd->deviceSpecific;
+         if (!xd->inclose) {
+             xd->inclose = TRUE;
+             KillDevice(dd);
+         }
+     }
      else if ((event.type == ClientMessage) &&
! 	     (event.xclient.message_type == _XA_WM_PROTOCOLS)) {
! 	if (event.xclient.data.l[0] == protocol) {
!             XFindContext(display, event.xclient.window,
  			 devPtrContext, &temp);
  	    dd = (DevDesc *) temp;
! 	    xd = (x11Desc *) dd->deviceSpecific;
! 	    if (!xd->inclose) {
! 		/* Dispatch destroy only once */
! 		xd->inclose = TRUE;
! 		XDestroyWindow(display, xd->window);
! 		XSync (display, 0);
! 		KillDevice(dd);
! 	    }
  	}
+     }
+ 
  }
  
  static void R_ProcessEvents(void *data)
***************
*** 1208,1213 ****
--- 1228,1234 ----
  		     ExposureMask | ButtonPressMask | StructureNotifyMask);
  	XMapWindow(display, xd->window);
  	XSync(display, 0);
+         xd->inclose = FALSE;
  
  	/* Gobble expose events */
  
***************
*** 1464,1476 ****
      x11Desc *xd = (x11Desc *) dd->deviceSpecific;
  
      if (xd->type == WINDOW) {
! 	/* process pending events */
! 	/* set block on destroy events */
! 	inclose = TRUE;
  	R_ProcessEvents((void*) NULL);
  
  	XFreeCursor(display, xd->gcursor);
- 	XDestroyWindow(display, xd->window);
  	XSync(display, 0);
      } else {
  	if (xd->npages && xd->type != XIMAGE) {
--- 1485,1506 ----
      x11Desc *xd = (x11Desc *) dd->deviceSpecific;
  
      if (xd->type == WINDOW) {
! 	/* There are three reasons to be here: */
! 	/* 1) The user clicked on a button in the window frame */
! 	/*    and we received a DELETE_WINDOW from the wm, */
! 	/* 2) Somebody destroyed our window directly, or if */
! 	/*    embedded, the parent is being destroyed, and so */
! 	/*    we got a DestroyNotify event, too, */
! 	/* 3) The user used dev.off() to get rid of us. Bye. */
! 
! 	if (!xd->inclose) {
! 	    xd->inclose = TRUE;
! 	    XDestroyWindow(display, xd->window);
! 	}
! 	/* process pending events (esp. reap events for this window) */
  	R_ProcessEvents((void*) NULL);
  
  	XFreeCursor(display, xd->gcursor);
  	XSync(display, 0);
      } else {
  	if (xd->npages && xd->type != XIMAGE) {
***************
*** 1517,1523 ****
      }
  
      free(xd);
!     inclose = FALSE;
  }
  
  	/********************************************************/
--- 1547,1553 ----
      }
  
      free(xd);
!     dd->deviceSpecific = NULL;
  }
  
  	/********************************************************/
***************
*** 1858,1866 ****
  		else
  		    done = 2;
  	    }
! 	}
! 	else
  	    handleEvent(event);
      }
      /* if it was a Button1 succeed, otherwise fail */
      return (done == 1);
--- 1888,1901 ----
  		else
  		    done = 2;
  	    }
! 	} else {
  	    handleEvent(event);
+ 	    if (!dd->deviceSpecific) {
+ 		/* Allow new active window to redraw */
+ 		R_ProcessEvents((void*)NULL);
+ 		error ("Device closed while waiting for input.\n");
+ 	    }
+         }
      }
      /* if it was a Button1 succeed, otherwise fail */
      return (done == 1);
--------------------------------------------------




--please do not edit the information below--

Version:
 platform = i686-pc-linux-gnu
 arch = i686
 os = linux-gnu
 system = i686, linux-gnu
 status = Under development (unstable)
 major = 1
 minor = 3.0
 year = 2001
 month = 02
 day = 12
 language = R

Search Path:
 .GlobalEnv, package:ctest, Autoloads, package:base


-- 
mailto:tov@ece.cmu.edu (Tom Vogels)   Tel: (412) 268-6638   FAX: -3204


==> 848.followup.1 <==
From pd@biostat.ku.dk  Wed Feb 14 01:10:35 2001
Received: from biostat.ku.dk (blueberry [130.225.108.193])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id BAA10968;
	Wed, 14 Feb 2001 01:10:34 +0100 (MET)
Received: (from pd@localhost)
	by biostat.ku.dk (8.9.3/8.9.3) id BAA02066;
	Wed, 14 Feb 2001 01:11:56 +0100
Sender: pd@blueberry.kubism.ku.dk
To: tov@ece.cmu.edu
Cc: r-devel@stat.math.ethz.ch, R-bugs@biostat.ku.dk
Subject: Re: [Rd] X11 device doesn't handle destroy events correcly (PR#848)
References: <200102132240.XAA10562@pubhealth.ku.dk>
From: Peter Dalgaard BSA <p.dalgaard@pubhealth.ku.dk>
Date: 14 Feb 2001 01:11:56 +0100
In-Reply-To: tov@ece.cmu.edu's message of "Tue, 13 Feb 2001 23:40:37 +0100 (MET)"
Message-ID: <x2elx2yvg3.fsf@blueberry.kubism.ku.dk>
Lines: 25
X-Mailer: Gnus v5.7/Emacs 20.7
Mime-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: 7bit

tov@ece.cmu.edu writes:


> Blissfully!  *No KillDevice is called* when the window is destroyed by
> something other than the WM_DELETE_WINDOW mechanism!  This happens
> when you embed the X11 device into another window/application.  For
> starters, the device no longer receives WM_DELETE_WINDOW client
> messages.  But it does receive a DestroyNotify event when the parent
> (the container window) is destroyed.  HandleEvent should, well
> _handle_ this _event_.

Heh. Quite probably, this is also the source of the FVWM trouble
reported earlier although that triggered an infinite loop which should
probably be guarded against by other means as well. 

Thanks for filing this (good to have as bug report so that we don't
forget - it's the sort of thing that often has to wait until someone
has a clear enough mind and sufficient stamina to try and get it
right.)

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

==> 848.audit <==
Sat Feb 17 11:44:41 2001	ripley	moved from incoming to System-specific
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
* PR# 935 *
Subject:  help.start() fails 
From: "Wilhelm B. Kloke" <wb@vestein.arb-phys.uni-dortmund.de>
Date: Wed, 9 May 2001 13:43:49 +0200 (MET DST)
--Report on 1.2.1: on other systems the file is installed with 644.
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 935 <==
From postmaster@franz.stat.wisc.edu  Wed May  9 13:42:25 2001
Received: from franz.stat.wisc.edu (root@franz.stat.wisc.edu [128.105.174.95])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id NAA24325
	for <r-bugs@biostat.ku.dk>; Wed, 9 May 2001 13:42:25 +0200 (MET DST)
Received: from vestein.arb-phys.uni-dortmund.de (really [192.109.44.6]) by franz.stat.wisc.edu
	via smail with esmtp
	id <m14xSMU-000JGpC@franz.stat.wisc.edu> (Debian Smail3.2.0.111)
	for <r-bugs@r-project.org>; Wed, 9 May 2001 06:42:34 -0500 (CDT) 
Received: from yorikke.arb-phys.uni-dortmund.de (yorikke [192.109.44.12])
	by vestein.arb-phys.uni-dortmund.de (8.11.1/8.11.1) with ESMTP id f49BibR90645;
	Wed, 9 May 2001 13:44:37 +0200 (MET DST)
	(envelope-from wb@vestein.arb-phys.uni-dortmund.de)
Received: (from wb@localhost)
	by yorikke.arb-phys.uni-dortmund.de (8.11.1/8.9.3) id f49Bhnw99683;
	Wed, 9 May 2001 13:43:49 +0200 (MET DST)
	(envelope-from wb)
Date: Wed, 9 May 2001 13:43:49 +0200 (MET DST)
From: "Wilhelm B. Kloke" <wb@vestein.arb-phys.uni-dortmund.de>
Message-Id: <200105091143.f49Bhnw99683@yorikke.arb-phys.uni-dortmund.de>
To: r-bugs@r-project.org
Subject:  help.start() fails 
Cc: wb@vestein.arb-phys.uni-dortmund.de


On my system help.start() failed with "could not write .R/doc/html/packages.html" 
or equivalent. This due to /usr/local/lib/R/doc/html/packages-head.html 
having protection -r--r--r--. After inserting 'chmod u+w ${PKGLIST}'
after 'cp ${R_HOME}/doc/html/packages-head.html ${PKGLIST}'in
/usr/local/lib/R/bin/help.links, it works.


--please do not edit the information below--

Version:
 platform = i386--freebsd4.2
 arch = i386
 os = freebsd4.2
 system = i386, freebsd4.2
 status = 
 major = 1
 minor = 2.1
 year = 2001
 month = 01
 day = 15
 language = R

Search Path:
 .GlobalEnv, package:ctest, Autoloads, package:base

==> 935.audit <==
Thu May 10 14:12:46 2001	ripley	changed notes
Thu May 10 14:12:46 2001	ripley	foobar
Thu May 10 14:12:46 2001	ripley	moved from incoming to System-specific
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
* PR# 863 *
Subject: src/main/arithmetic.c on OpenBSD
From: ian@darwinsys.com (Ian Darwin)
Date: Tue,  6 Mar 2001 19:49:53 -0500 (EST)
--Not applied for 1.2.3 (why?)
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 863 <==
From postmaster@franz.stat.wisc.edu  Wed Mar  7 01:50:05 2001
Received: from franz.stat.wisc.edu (root@franz.stat.wisc.edu [128.105.174.95])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id BAA17426
	for <r-bugs@biostat.ku.dk>; Wed, 7 Mar 2001 01:50:04 +0100 (MET)
Received: from tomts6-srv.bellnexxia.net (really [209.226.175.26]) by franz.stat.wisc.edu
	via smail with esmtp
	id <m14aS9f-000JARC@franz.stat.wisc.edu> (Debian Smail3.2.0.111)
	for <r-bugs@r-project.org>; Tue, 6 Mar 2001 18:50:15 -0600 (CST) 
Received: from darian.darwinsys.com ([64.228.44.192])
          by tomts6-srv.bellnexxia.net
          (InterMail vM.4.01.03.16 201-229-121-116-20010115) with ESMTP
          id <20010307004957.IMJM25007.tomts6-srv.bellnexxia.net@darian.darwinsys.com>
          for <r-bugs@r-project.org>; Tue, 6 Mar 2001 19:49:57 -0500
Received: by darian.darwinsys.com (Postfix, from userid 100)
	id 0F24B2475; Tue,  6 Mar 2001 19:49:53 -0500 (EST)
To: r-bugs@r-project.org
Subject: src/main/arithmetic.c on OpenBSD
Message-Id: <20010307004953.0F24B2475@darian.darwinsys.com>
Date: Tue,  6 Mar 2001 19:49:53 -0500 (EST)
From: ian@darwinsys.com (Ian Darwin)

First, let me say how glad I am to discover R! As a former user of S
at the University of Toronto and, briefly S-Plus from StatSci (I had
a binary version of that on Slolaris for a while), I was really glad
to find the "R" project.

This is perhaps not your bug, but I did have one minor glitch in
compiling R. OpenBSD 2.8's math.h does not export the "struct
exception" unless you define __LIBM_PRIVATE. The attached patch is
all that is needed to make it compile. Feel free to apply this patch
in future releases, or not (maybe with "#ifdef __OpenBSD__" around it).

Again, thanks for the software.

Ian Darwin
ian@darwinsys.com

--- src/main/arithmetic.c.orig	Tue Mar  6 17:58:18 2001
+++ src/main/arithmetic.c	Tue Mar  6 18:27:38 2001
@@ -22,7 +22,9 @@
 #include <config.h>
 #endif
 
-#include "Defn.h"		/*-> Arith.h */
+#define __LIBM_PRIVATE	/* OpenBSD -> for definition of "struct exception" */
+#include "Defn.h"		/*-> Arith.h -> math.h */
+#undef __LIBM_PRIVATE	
 #define MATHLIB_PRIVATE
 #include <Rmath.h>
 #undef MATHLIB_PRIVATE

==> 863.audit <==
Thu Mar  8 18:24:07 2001	ripley	foobar
Thu Mar  8 18:24:07 2001	ripley	moved from incoming to System-specific
Thu Apr 26 12:26:53 2001	pd	changed notes
Thu Apr 26 12:26:53 2001	pd	foobar
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

Directory:  TooMuchAtOnce

* PR# 918 *
Subject: several bugs
From: Rich Heiberger <rmh@surfer.sbm.temple.edu>
Date: Sun, 22 Apr 2001 23:13:38 -0400 (EDT)
--1. as.numeric -> use as.double.FOO for methods -- doc.fixed for 1.2.3
--2. cannot set attribute on NULL -- no bug
--3. rep(list() ... ) :  a wish  fulfilled for 1.3.x
--4. %*% is not a generic in R (but is fast!) but in S+  -- not a bug
--5. S-plus (S4) compatibility  -- a wish but not for now
--6. list()s with dim() attribute -- an ongoing `research topic'  :-)
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 918 <==
From postmaster@franz.stat.wisc.edu  Mon Apr 23 05:09:21 2001
Received: from franz.stat.wisc.edu (root@franz.stat.wisc.edu [128.105.174.95])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id FAA10231
	for <r-bugs@biostat.ku.dk>; Mon, 23 Apr 2001 05:09:20 +0200 (MET DST)
Received: from surfer.sbm.temple.edu (really [155.247.185.2]) by franz.stat.wisc.edu
	via smail with esmtp
	id <m14rWjB-000Jd2C@franz.stat.wisc.edu> (Debian Smail3.2.0.111)
	for <r-bugs@r-project.org>; Sun, 22 Apr 2001 22:09:29 -0500 (CDT) 
Received: (from rmh@localhost)
	by surfer.sbm.temple.edu (8.11.1/8.11.1) id f3N3DcK364154
	for r-bugs@r-project.org; Sun, 22 Apr 2001 23:13:38 -0400 (EDT)
Date: Sun, 22 Apr 2001 23:13:38 -0400 (EDT)
From: Rich Heiberger <rmh@surfer.sbm.temple.edu>
Message-Id: <200104230313.f3N3DcK364154@surfer.sbm.temple.edu>
To: r-bugs@r-project.org
Subject: several bugs

# Your mailer is set to "none" (default on Windows),
# hence we cannot send the bug report directly from R.
# Please copy the bug report (after finishing it) to
# your favorite email program and send it to
#
#       r-bugs@r-project.org
#
######################################################



1. as.numeric behaves differently in R than in S and I think this
shows a bug in how S3 classes are implemented.

R:
> as.numeric
function (x, ...) 
UseMethod("as.double")
> as.double
function (x, ...) 
UseMethod("as.double")


S:
> as.numeric
function(x)
.Internal(as.numeric(x), "As_vector", T, 4)
> as.double
function(x)
.Internal(as.double(x), "As_vector", T, 4)
>


As a consequence, a user function
  as.numeric.mv 
doesn't work as a method in R because it never gets called when
accessed as as.numeric(x).

> objects()
character(0)
> a <- list(NA)
> attr(a[[1]],"mv") <- "default"
> class(a) <- "mv"
> 
> a
[[1]]
[1] NA
attr(,"mv")
[1] "default"

attr(,"class")
[1] "mv"
> as.numeric(a)
[1] NA
> as.numeric.mv <- function(x, ...) {
+   print("we got here")
+  x
+ }
> 
> as.numeric(a)  ## the function as.numeric.mv was not called
[1] NA
> as.numeric.mv(a)
[1] "we got here"
[1] NA
> 



2. works in S-Plus 4.5, not in R.  What is the rationale for this difference?

a <- list(NULL)
attr(a[[1]],"mv") <- "default"

R gives the message
Error: attempt to set an attribute on NULL



3. Unimplemented features in rep, copyVector
> rep(list(1),1)
[[1]]
[1] 1

> rep(list(1,2,3),1)
Error in rep(list(1, 2, 3), 1) : Unimplemented feature in rep

> a <- matrix(list(1,2,3,4,5,6), 2, 3)

Error in matrix(list(1, 2, 3, 4, 5, 6), 2, 3) : 
	Unimplemented feature in copyVector


4. methods in S-Plus that aren't methods in R. 
a. %*% is a method in S-Plus 4.5 and is a primitive in R.
   Therefore a user function "%*%.mv" doesn't get called by  a %*% b



5. S-Plus 6 compatibility issues
a. S+4 and R use the function
     exists("function.name", mode="function")
   S+6 use the function
     existsFunction("function.name")

More generally, S-Plus 6 has the following functions
> objip("exists")
$splus:
[1] "exists"         "existsFunction" "file.exists"   

$main:
[1] "dbexists"       "dbexistsOld"    "dyn.exists"     "existsClass"
[5]  "existsClassDef" "existsDoc"     "existsMethod"  

Can you add these function names to R with sensible defaults until the S4
methods are fully in place?


b. S-Plus 6 uses the function oldClass
Can you add these functions and default definitions to R?
  oldClass <- function(...) class(...)   
  "oldClass<-" <- function(...) "class<-"(...)  


6. bug in "[" for lists

a <- list(1,2,3,4,5,6)
dim(a) <- c(2,3)
unlist(a)
> a[,1:2]
     [,1]   [,2]  
[1,] "NULL" "NULL"
[2,] "NULL" "NULL"

The same code in S+4 gives
> a[,1:2]
     [,1] [,2] 
[1,] 1    3   
[2,] 2    4   




--please do not edit the information below--

Version:
 platform = i386-pc-mingw32
 arch = x86
 os = Win32
 system = x86, Win32
 status = 
 major = 1
 minor = 2.1
 year = 2001
 month = 01
 day = 15
 language = R

Windows 9x 4.0 (build 1212)  B

Search Path:
 .GlobalEnv, package:ctest, Autoloads, package:base

==> 918.followup.1 <==
From tlumley@u.washington.edu  Mon Apr 23 18:37:04 2001
Received: from jason01.u.washington.edu (root@jason01.u.washington.edu [140.142.8.10])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id SAA21385
	for <R-bugs@biostat.ku.dk>; Mon, 23 Apr 2001 18:37:02 +0200 (MET DST)
Received: from homer34.u.washington.edu (tlumley@homer34.u.washington.edu [140.142.16.12])
	by jason01.u.washington.edu (8.11.2+UW01.01/8.11.2+UW01.03) with ESMTP id f3NGb8A42486;
	Mon, 23 Apr 2001 09:37:08 -0700
Received: from localhost (tlumley@localhost)
	by homer34.u.washington.edu (8.11.2+UW01.01/8.11.2+UW01.03) with ESMTP id f3NGb7F138524;
	Mon, 23 Apr 2001 09:37:07 -0700
Date: Mon, 23 Apr 2001 09:37:05 -0700 (PDT)
From: Thomas Lumley <tlumley@u.washington.edu>
To: <rmh@surfer.sbm.temple.edu>
cc: <r-devel@stat.math.ethz.ch>, <R-bugs@biostat.ku.dk>
Subject: Re: [Rd] several bugs (PR#918)
In-Reply-To: <200104230309.FAA10241@pubhealth.ku.dk>
Message-ID: <Pine.A41.4.33.0104230854200.125502-100000@homer34.u.washington.edu>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII


Some of these are indeed bugs. Some are merely incompatibilities, in
particular between R and S4. R is intended to be largely compatible with S
version 3, but not (currently at least) with S version 4.

Incidentally, it's easier to  keep track of bugs if they come one to a
message. That way they get separate bug numbers.

On Mon, 23 Apr 2001 rmh@surfer.sbm.temple.edu wrote:
> 1. as.numeric behaves differently in R than in S and I think this
> shows a bug in how S3 classes are implemented.
>
> R:
> > as.numeric
> function (x, ...)
> UseMethod("as.double")

It is a bug, but not in how S3 classes are implemented (well, it's a bug
in the design of S3 classes that this can happen).  R has only one
floating point data type, which means that as.numeric and as.double do the
same thing.  The bug is that it isn't documented under help(as.numeric)
that you need to set up methods for as.double().

>
>
> 2. works in S-Plus 4.5, not in R.  What is the rationale for this difference?
>
> a <- list(NULL)
> attr(a[[1]],"mv") <- "default"
>
> R gives the message
> Error: attempt to set an attribute on NULL

The rationale is that you can't set an attribute on NULL. There are two
reasons.  The implementation reason is that there's only one of it: all
NULLs are references to the same object.  The interface reason is that if
you  want to set attributes on it you don't want a NULL (think of the NULL
pointer in C or nil in Pascal).

 You probably want numeric(0).

> 3. Unimplemented features in rep, copyVector
> > rep(list(1),1)
> [[1]]
> [1] 1
>
> > rep(list(1,2,3),1)
> Error in rep(list(1, 2, 3), 1) : Unimplemented feature in rep

Yes, it's an unimplemented feature. We clearly know about it, since you
got the message, so it isn't a bug. It is implemented in the pre1.3
development version.

> > a <- matrix(list(1,2,3,4,5,6), 2, 3)
>
> Error in matrix(list(1, 2, 3, 4, 5, 6), 2, 3) :
> 	Unimplemented feature in copyVector

This one isn't implemented in the development version, for a good reason.
Matrices and lists can hold very different sorts of things.  You should do
	a <- matrix(c(1,2,3,4,5,6), 2, 3)
This may well be what you should do in the previous case, as well. It's
more efficient to store homogeneous, one-dimensional data in a vector
rather than a list.


> 4. methods in S-Plus that aren't methods in R.
> a. %*% is a method in S-Plus 4.5 and is a primitive in R.
>    Therefore a user function "%*%.mv" doesn't get called by  a %*% b

This might be worth implementing, but we would have to worry about the
overhead: matrix multiplication is a speed-critical function (like all the
remaining primitives).  You can easily make it generic for yourself

	"%*%.default"<-get("%*%")
 	"%*%"<-function(x,y,...) UseMethod("%*%")

This wouldn't despatch on the second argument, but that could be fixed
with a bit more work.

>
> 5. S-Plus 6 compatibility issues
> a. S+4 and R use the function
>      exists("function.name", mode="function")
>    S+6 use the function
>      existsFunction("function.name")

Indeed.

> More generally, S-Plus 6 has the following functions
> > objip("exists")
> $splus:
> [1] "exists"         "existsFunction" "file.exists"
>
> $main:
> [1] "dbexists"       "dbexistsOld"    "dyn.exists"     "existsClass"
> [5]  "existsClassDef" "existsDoc"     "existsMethod"
>
> Can you add these function names to R with sensible defaults until the S4
> methods are fully in place?

No. You can, though.

R is not a clone of S-PLUS, especially not of S-PLUS 6. We are working
towards compatibility with S4 on certain important features, but not
detail by detail.

You may want to look at http://www.omegahat.org/RSMethods/index.html
which describes an implementation of S4 classes for R by John Chambers.


> 6. bug in "[" for lists
>
> a <- list(1,2,3,4,5,6)
> dim(a) <- c(2,3)
> unlist(a)
> > a[,1:2]
>      [,1]   [,2]
> [1,] "NULL" "NULL"
> [2,] "NULL" "NULL"
>
> The same code in S+4 gives
> > a[,1:2]
>      [,1] [,2]
> [1,] 1    3
> [2,] 2    4
>

If there's a bug here it's that an error isn't returned.  You can't go
around setting dim() on things and expecting it to work.  A properly
object-oriented language wouldn't let you even try. You took a list of
six objects (which could be *any* six objects, as different as chalk and
Wednesday) and told it that it was a 2x3 array.  It believed you. Not
surprisingly, it got confused.

 It does work if a is a vector rather than a list, as do some other things
you tried, so in general you might be happier if you used c() rather than
list() for homogeneous data.

It's true that some versions of S allow it. Some versions of S also allow
   a<-as.matrix(lm(Fuel ~ . , fuel.frame))
for example. The S languages could do with a clearer distinction between
high level functions that check their arguments for compatibility and the
low-level functions that are needed to implement these.

	-thomas

Thomas Lumley			Asst. Professor, Biostatistics
tlumley@u.washington.edu	University of Washington, Seattle


==> 918.followup.2 <==
From rmh@surfer.sbm.temple.edu  Mon Apr 23 19:53:12 2001
Received: from surfer.sbm.temple.edu (surfer.sbm.temple.edu [155.247.185.2])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id TAA21671
	for <R-bugs@biostat.ku.dk>; Mon, 23 Apr 2001 19:53:11 +0200 (MET DST)
Received: (from rmh@localhost)
	by surfer.sbm.temple.edu (8.11.1/8.11.1) id f3NHvWZ379277;
	Mon, 23 Apr 2001 13:57:32 -0400 (EDT)
Date: Mon, 23 Apr 2001 13:57:32 -0400 (EDT)
From: Rich Heiberger <rmh@surfer.sbm.temple.edu>
Message-Id: <200104231757.f3NHvWZ379277@surfer.sbm.temple.edu>
To: <rmh@surfer.sbm.temple.edu>, Thomas Lumley <tlumley@u.washington.edu>
Subject: Re: [Rd] several bugs (PR#918) lists and matrices
Cc: <R-bugs@biostat.ku.dk>, <r-devel@stat.math.ethz.ch>

## Thomas rightly points out that list() is not the best structure for
## homogeneous data.  My example was the simplest that generated the
## error of a matrix structure that that doesn't work.  The application
## that this is simplified from needs lists because the data isn't
## homogeneous.  I am attempting to write a missing value class, where
## each item is a list.  In the simplest instance, if the datum is missing
## then the attribute contains the reason.
## 
## Both of the 'bugs'/'unimplemented features'
## 3. a <- matrix(list(1,2,3,4,5,6), 2, 3)
## 6. bug in "[" for lists
## show up in this example.  Thus

x <- list(1,2,3,4,5,6)
dim(x) <- c(2,3)
x[[2,3]] <- NA
attr(x[[2,3]],"mv") <- "absent"
x
for(i in x) print(i)
x[2,]
x[1,1]
x[2,3]

Rich

==> 918.audit <==
Tue Apr 24 17:35:09 2001	maechler	changed notes
Tue Apr 24 17:35:09 2001	maechler	foobar
Tue Apr 24 17:35:09 2001	maechler	moved from incoming to TooMuchAtOnce
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
* PR# 811 *
Subject: problem with strptime example (and mention of bug.report)
From: Stephen Eglen <stephen@anc.ed.ac.uk>
Date: Thu, 11 Jan 2001 19:18:39 GMT
--1) On OSF4, strptime is deficient. Nothing we can do.
--
--2) On Windows NT, the strptime problems are (i) German locale, English dates,
--(ii) Windows system errors with unknown DST (it move times to DST).
--(i) now has another warning in the help file (there already was one).
--(ii) was already worked around for 1.2.1.
--
--3) bug.report() uses a mailer option that does not exist on OSF4.
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 811 <==
From postmaster@franz.stat.wisc.edu  Thu Jan 11 22:22:48 2001
Received: from franz.stat.wisc.edu (franz.stat.wisc.edu [128.105.174.95])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id WAA26396
	for <r-bugs@biostat.ku.dk>; Thu, 11 Jan 2001 22:22:47 +0100 (MET)
Received: from mango.cns.ed.ac.uk (really [129.215.238.26]) by franz.stat.wisc.edu
	via in.smtpd with esmtp
	id <m14GnFH-000IXTC@franz.stat.wisc.edu> (Debian Smail3.2.0.102)
	for <r-bugs@r-project.org>; Thu, 11 Jan 2001 13:18:47 -0600 (CST) 
Received: (from stephen@localhost)
	by mango.cns.ed.ac.uk (8.9.1/8.9.1) id TAA06239;
	Thu, 11 Jan 2001 19:18:39 GMT
Date: Thu, 11 Jan 2001 19:18:39 GMT
Message-Id: <200101111918.TAA06239@mango.cns.ed.ac.uk>
From: Stephen Eglen <stephen@anc.ed.ac.uk>
To: r-bugs@r-project.org
Subject: problem with strptime example (and mention of bug.report)

Hi,

The help file for strptime has the following code which doesn't work
for me:

     ## read in date info in format `ddmmmyyyy'
     x <- c("1jan1960", "2jan1960", "31mar1960", "30jul1960")
     z <- strptime(x, "%d%b%Y")
> z
[1] "NA" "NA" "NA" "NA"

Do these work for other people?

whereas it works fine if I use a separator (/) in the date@

> strptime("9/Feb/1960", "%d/%b/%Y")
[1] "1960-02-09"

> strptime("9Feb1960", "%d%b%Y")
[1] "NA"

Stephen

p.s. I failed to send this using bug.report(); on DEC OSF/1, "mailx"
does not recognise the -c switch for setting the carbon copy (CC)
field, causing an error.  One solution might be to remove the -c
argument from the cmdarg in bug.rerport(), or put a 
"~c joe@bloggs.com" directive at the end of the file to set the CC field.

--please do not edit the information below--

Version:
 platform = alphaev56-dec-osf4.0f
 arch = alphaev56
 os = osf4.0f
 system = alphaev56, osf4.0f
 status = 
 major = 1
 minor = 2.0
 year = 2000
 month = 12
 day = 15
 language = R

Search Path:
 .GlobalEnv, package:ctest, Autoloads, package:base


==> 811.followup.1 <==
From ripley@stats.ox.ac.uk  Thu Jan 11 22:54:32 2001
Received: from toucan.stats.ox.ac.uk (toucan.stats.ox.ac.uk [163.1.20.20])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id WAA27090
	for <R-bugs@biostat.ku.dk>; Thu, 11 Jan 2001 22:54:31 +0100 (MET)
Received: from localhost (ripley@localhost)
	by toucan.stats.ox.ac.uk (8.9.0/8.9.0) with ESMTP id VAA05133;
	Thu, 11 Jan 2001 21:54:44 GMT
X-Authentication-Warning: toucan.stats: ripley owned process doing -bs
Date: Thu, 11 Jan 2001 21:54:43 +0000 (GMT)
From: Prof Brian Ripley <ripley@stats.ox.ac.uk>
X-X-Sender:  <ripley@toucan.stats>
To: <stephen@anc.ed.ac.uk>
cc: <R-bugs@biostat.ku.dk>
Subject: Re: [Rd] problem with strptime example (PR#811)
In-Reply-To: <200101112122.WAA26408@pubhealth.ku.dk>
Message-ID: <Pine.GSO.4.31.0101112146290.5126-100000@toucan.stats>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII

On Thu, 11 Jan 2001 stephen@anc.ed.ac.uk wrote:

> Hi,
>
> The help file for strptime has the following code which doesn't work
> for me:
>
>      ## read in date info in format `ddmmmyyyy'
>      x <- c("1jan1960", "2jan1960", "31mar1960", "30jul1960")
>      z <- strptime(x, "%d%b%Y")
> > z
> [1] "NA" "NA" "NA" "NA"
>
> Do these work for other people?

Yes, on several platforms.  It will be a problem with your OS's strptime
code.  It must be, I think, as the alternative we supply works.

> whereas it works fine if I use a separator (/) in the date@
>
> > strptime("9/Feb/1960", "%d/%b/%Y")
> [1] "1960-02-09"
>
> > strptime("9Feb1960", "%d%b%Y")
> [1] "NA"

We really do not put out new features without testing them!


>
> Stephen
>
> p.s. I failed to send this using bug.report(); on DEC OSF/1, "mailx"
> does not recognise the -c switch for setting the carbon copy (CC)
> field, causing an error.  One solution might be to remove the -c
> argument from the cmdarg in bug.rerport(), or put a
> "~c joe@bloggs.com" directive at the end of the file to set the CC field.
>
> --please do not edit the information below--
>
> Version:
>  platform = alphaev56-dec-osf4.0f
>  arch = alphaev56
>  os = osf4.0f
>  system = alphaev56, osf4.0f
>  status =
>  major = 1
>  minor = 2.0
>  year = 2000
>  month = 12
>  day = 15
>  language = R
>
> Search Path:
>  .GlobalEnv, package:ctest, Autoloads, package:base
>
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


==> 811.followup.2 <==
From ligges@statistik.uni-dortmund.de  Fri Jan 12 11:15:33 2001
Received: from nx5.HRZ.Uni-Dortmund.DE (nx5.HRZ.Uni-Dortmund.DE [129.217.131.21])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id LAA02850
	for <R-bugs@biostat.ku.dk>; Fri, 12 Jan 2001 11:15:32 +0100 (MET)
Received: from amadeus.statistik.uni-dortmund.de by nx5.HRZ.Uni-Dortmund.DE
          via smtp-local with ESMTP; Fri, 12 Jan 2001 11:15:34 +0100
Received: from statistik.uni-dortmund.de (hiwi4 [129.217.207.94])
	by amadeus.statistik.uni-dortmund.de (8.9.3+Sun/8.9.3) with ESMTP id LAA13591;
	Fri, 12 Jan 2001 11:15:33 +0100 (MET)
Message-ID: <3A5ED97F.6E808F03@statistik.uni-dortmund.de>
Date: Fri, 12 Jan 2001 11:16:31 +0100
From: Uwe Ligges <ligges@statistik.uni-dortmund.de>
X-Mailer: Mozilla 4.76 [en] (WinNT; U)
X-Accept-Language: en
MIME-Version: 1.0
To: ripley@stats.ox.ac.uk
CC: R-bugs@biostat.ku.dk
Subject: Re: [Rd] problem with strptime example (PR#811)
References: <200101112154.WAA27100@pubhealth.ku.dk>
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit


ripley@stats.ox.ac.uk wrote:
> 
> On Thu, 11 Jan 2001 stephen@anc.ed.ac.uk wrote:
> 
> > Hi,
> >
> > The help file for strptime has the following code which doesn't work
> > for me:
> >
> >      ## read in date info in format `ddmmmyyyy'
> >      x <- c("1jan1960", "2jan1960", "31mar1960", "30jul1960")
> >      z <- strptime(x, "%d%b%Y")
> > > z
> > [1] "NA" "NA" "NA" "NA"
> >
> > Do these work for other people?
> 
> Yes, on several platforms.  It will be a problem with your OS's strptime
> code.  It must be, I think, as the alternative we supply works.
> 
> > whereas it works fine if I use a separator (/) in the date@
> >
> > > strptime("9/Feb/1960", "%d/%b/%Y")
> > [1] "1960-02-09"
> >
> > > strptime("9Feb1960", "%d%b%Y")
> > [1] "NA"
> 
> We really do not put out new features without testing them!


Also very strange on WinNT4.0 (R-1.2.0): 


  x <- c("1jan1960", "2jan1960", "31mar1960", "30jul1960")
  z <- strptime(x, "%d%b%Y")
  z
[1] "1960-01-01 01:00:00" "1960-01-02 01:00:00" "NA"                 
"1960-07-30 01:00:00"


Uwe Ligges

==> 811.followup.3 <==
From ripley@stats.ox.ac.uk  Fri Jan 12 11:56:09 2001
Received: from toucan.stats.ox.ac.uk (toucan.stats.ox.ac.uk [163.1.20.20])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id LAA03586
	for <R-bugs@biostat.ku.dk>; Fri, 12 Jan 2001 11:56:09 +0100 (MET)
Received: from localhost (ripley@localhost)
	by toucan.stats.ox.ac.uk (8.9.0/8.9.0) with ESMTP id KAA06620;
	Fri, 12 Jan 2001 10:52:36 GMT
X-Authentication-Warning: toucan.stats: ripley owned process doing -bs
Date: Fri, 12 Jan 2001 10:52:36 +0000 (GMT)
From: Prof Brian Ripley <ripley@stats.ox.ac.uk>
X-X-Sender:  <ripley@toucan.stats>
To: Uwe Ligges <ligges@statistik.uni-dortmund.de>
cc: <R-bugs@biostat.ku.dk>
Subject: Re: [Rd] problem with strptime example (PR#811)
In-Reply-To: <3A5ED97F.6E808F03@statistik.uni-dortmund.de>
Message-ID: <Pine.GSO.4.31.0101121048420.6610-100000@toucan.stats>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII

On Fri, 12 Jan 2001, Uwe Ligges wrote:

>
> ripley@stats.ox.ac.uk wrote:
> >
> > On Thu, 11 Jan 2001 stephen@anc.ed.ac.uk wrote:
> >
> > > Hi,
> > >
> > > The help file for strptime has the following code which doesn't work
> > > for me:
> > >
> > >      ## read in date info in format `ddmmmyyyy'
> > >      x <- c("1jan1960", "2jan1960", "31mar1960", "30jul1960")
> > >      z <- strptime(x, "%d%b%Y")
> > > > z
> > > [1] "NA" "NA" "NA" "NA"
> > >
> > > Do these work for other people?
> >
> > Yes, on several platforms.  It will be a problem with your OS's strptime
> > code.  It must be, I think, as the alternative we supply works.
> >
> > > whereas it works fine if I use a separator (/) in the date@
> > >
> > > > strptime("9/Feb/1960", "%d/%b/%Y")
> > > [1] "1960-02-09"
> > >
> > > > strptime("9Feb1960", "%d%b%Y")
> > > [1] "NA"
> >
> > We really do not put out new features without testing them!
>
>
> Also very strange on WinNT4.0 (R-1.2.0):
>
>
>   x <- c("1jan1960", "2jan1960", "31mar1960", "30jul1960")
>   z <- strptime(x, "%d%b%Y")
>   z
> [1] "1960-01-01 01:00:00" "1960-01-02 01:00:00" "NA"
> "1960-07-30 01:00:00"

I don't get the NA. The 1am is a Windows bug: this only happens in
times prior to 1970, which for Windows do not exist.  It seems to assume
that if isdst is non-zero, it is DST, rather than for isdst > 0.
I have a workaround, so for 1.2.1 (on my machines) this will behave as
expected.

The date-time functions do depend on OS functions being correct, and
although I have done a lot of workarounds, no doubt more errors will
emerge.


-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


==> 811.audit <==
Sat Jan 13 18:50:59 2001	ripley	changed notes
Sat Jan 13 18:50:59 2001	ripley	foobar
Sat Jan 13 18:50:59 2001	ripley	moved from incoming to TooMuchAtOnce
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

Directory:  Windows

* PR# 927 *
Subject: Rgui 1.2.3 for Windows crashes reading huge CSV file
From: znmeb@aracnet.com
Date: Mon, 30 Apr 2001 07:14:50 +0200 (MET DST)
--Not clear this is to do with Windows.
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 927 <==
From znmeb@aracnet.com  Mon Apr 30 07:14:50 2001
Received: from blueberry.kubism.ku.dk (blueberry [130.225.108.193])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id HAA10288
	for <R-bugs@biostat.ku.dk>; Mon, 30 Apr 2001 07:14:50 +0200 (MET DST)
Date: Mon, 30 Apr 2001 07:14:50 +0200 (MET DST)
From: znmeb@aracnet.com
Message-Id: <200104300514.HAA10288@pubhealth.ku.dk>
To: R-bugs@biostat.ku.dk
Subject: Rgui 1.2.3 for Windows crashes reading huge CSV file

Full_Name: M. Edward Borasky
Version: 1.2.3 (2001-04-26)
OS: Windows 2000
Submission from: (NULL) (206.98.121.224)


I have a Celeron with 192 MB of RAM. My paging file is 288 MB, which is the
Windows recommended size. Here's the starting screen:
--------------------------------------------------------------------------------
R : Copyright 2001, The R Development Core Team
Version 1.2.3  (2001-04-26)

R is free software and comes with ABSOLUTELY NO WARRANTY.
You are welcome to redistribute it under certain conditions.
Type `license()' or `licence()' for distribution details.

R is a collaborative project with many contributors.
Type `contributors()' for more information.

Type `demo()' for some demos, `help()' for on-line help, or
`help.start()' for a HTML browser interface to help.
Type `q()' to quit R.

[Previously saved workspace restored]

> memory.size()
[1] 8504720
> memory.limit()
[1] 200720384
> ls()
character(0)
---------------------------------------------------------------------------------
Now I try to read a huge (60 megabytes, 688,500 rows by 10 columns) CSV file
with "read.csv". Rgui grinds on it for some time before finally crashing. The
error message is:

The exception unknown software exception (0xc00000fd) occurred in the
application at location 0x02672dcf.

I watched this in the Task Manager and it peaked around 160 MB.

Here's the first few lines of the input file (stock price data for all NYSE
stocks for the past year) if you want to try this with some fake data -- just
add 688,499 more rows of this stuff :-)

Symbol,Date,Cvf,IsStock,Open,High,Low,Close,Volume,OpenInt
"WLP",20000428,2,1,75.25,75.25,72.5,73.75,4151,0
"WLP",20000501,2,1,74,74.5,72.120002746582,72.4300003051758,2229,0
"WLP",20000502,2,1,72.370002746582,72.370002746582,71,71.870002746582,3629,0

I haven't tried this with the Linux version yet to see if it handles the
situation a little more gracefully. I'll do that sometime and attach the results
to this bug report. This isn't a major problem for me; it's easy for me to break
the file up into individual stocks, or substitute weekly data for the daily
data, which will reduce the file to 12 megabytes or so.


==> 927.reply.1 <==
From pd@blueberry.kubism.ku.dk  Mon Apr 30 16:12:29 2001
Received: from blueberry.kubism.ku.dk (blueberry [130.225.108.193])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id QAA21754;
	Mon, 30 Apr 2001 16:12:29 +0200 (MET DST)
Received: (from pd@localhost)
	by blueberry.kubism.ku.dk (8.9.3/8.9.3) id QAA09246;
	Mon, 30 Apr 2001 16:22:10 +0200
Sender: pd@pubhealth.ku.dk
To: znmeb@aracnet.com
Cc: r-devel@stat.math.ethz.ch, R-bugs@biostat.ku.dk
Subject: Re: [Rd] PR #927 -- R crash on huge CSV file (PR#927)
References: <200104301332.PAA20168@pubhealth.ku.dk>
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 30 Apr 2001 16:22:10 +0200
In-Reply-To: znmeb@aracnet.com's message of "Mon, 30 Apr 2001 15:32:59 +0200 (MET DST)"
Message-ID: <x24rv6cvsd.fsf@blueberry.kubism.ku.dk>
Lines: 25
X-Mailer: Gnus v5.7/Emacs 20.7
Mime-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: 7bit

This came in as a new report because of the space between PR and #

Resending it to get it filed correctly.

(BTW: a growth factor of 3-4 is not unexpectable on CSV files since
internal storage of numeric values is in 8-byte doubles.)

	-p

znmeb@aracnet.com writes:

> I tried to run the same dataset with R-1.2.3 on Linux, compiled from the
> source tarball. After 7 hours, it was still grinding away and had not
> crashed. I had to kill it. "gtop" was showing it with a real size around 160
> MB, same as the peak on the Windows 2000 environment. This is on the same
> hardware as the Windows run; my machine is dual-booted Windows 2000 and Red
> Hat Linux 7.1. If I get ambitious, I'll see if I can make it fail with a
> smaller dataset and run on Linux with a debug-compiled R binary.


-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

==> 927.audit <==
Wed May  2 19:03:37 2001	ripley	changed notes
Wed May  2 19:03:37 2001	ripley	foobar
Wed May  2 19:03:37 2001	ripley	moved from incoming to Windows
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
* PR# 926 *
Subject: Rgui crash
From: bellis@hsph.harvard.edu
Date: Sun, 29 Apr 2001 20:45:15 +0200 (MET DST)
--Unable to reproduce even on a Win2k machine
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 926 <==
From bellis@hsph.harvard.edu  Sun Apr 29 20:45:16 2001
Received: from blueberry.kubism.ku.dk (blueberry [130.225.108.193])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id UAA09112
	for <R-bugs@biostat.ku.dk>; Sun, 29 Apr 2001 20:45:15 +0200 (MET DST)
Date: Sun, 29 Apr 2001 20:45:15 +0200 (MET DST)
From: bellis@hsph.harvard.edu
Message-Id: <200104291845.UAA09112@pubhealth.ku.dk>
To: R-bugs@biostat.ku.dk
Subject: Rgui crash

Full_Name: Byron Ellis
Version: 1.2.3
OS: Windows 2000 Server
Submission from: (NULL) (140.247.105.95)


In Rgui when attempting to resize the console the system locks for a second
(cursor locks up, etc) and then either returns to normal for a second before
crashing or just crashes when we start moving again (the former happens more
often when making things bigger, the latter when the console is shrunk). The
error message reports an attempt to read 0x000000 so I'm guessing the problem is
somewhere in the Rgui console's memory management code.

I can duplicate this on both my home and lab desktop machines as well as my
laptop. All are running Win2K Server (I take that back--- my lab machine is
running Pro. edition) and all are reasonably updated.

==> 926.followup.1 <==
From ripley@stats.ox.ac.uk  Sun Apr 29 22:24:55 2001
Received: from toucan.stats.ox.ac.uk (toucan.stats.ox.ac.uk [163.1.20.20])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id WAA09324
	for <R-bugs@biostat.ku.dk>; Sun, 29 Apr 2001 22:24:54 +0200 (MET DST)
Received: from localhost (ripley@localhost)
	by toucan.stats.ox.ac.uk (8.9.0/8.9.0) with ESMTP id VAA13424;
	Sun, 29 Apr 2001 21:25:03 +0100 (BST)
X-Authentication-Warning: toucan.stats: ripley owned process doing -bs
Date: Sun, 29 Apr 2001 21:25:02 +0100 (BST)
From: Prof Brian Ripley <ripley@stats.ox.ac.uk>
X-X-Sender:  <ripley@toucan.stats>
To: <bellis@hsph.harvard.edu>
cc: <R-bugs@biostat.ku.dk>
Subject: Re: [Rd] Rgui crash (PR#926)
In-Reply-To: <200104291845.UAA09122@pubhealth.ku.dk>
Message-ID: <Pine.GSO.4.31.0104292119280.13414-100000@toucan.stats>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII

On Sun, 29 Apr 2001 bellis@hsph.harvard.edu wrote:

> Full_Name: Byron Ellis
> Version: 1.2.3
> OS: Windows 2000 Server
> Submission from: (NULL) (140.247.105.95)
>
>
> In Rgui when attempting to resize the console the system locks for a second
> (cursor locks up, etc) and then either returns to normal for a second before
> crashing or just crashes when we start moving again (the former happens more
> often when making things bigger, the latter when the console is shrunk). The
> error message reports an attempt to read 0x000000 so I'm guessing the problem is
> somewhere in the Rgui console's memory management code.
>
> I can duplicate this on both my home and lab desktop machines as well as my
> laptop. All are running Win2K Server (I take that back--- my lab machine is
> running Pro. edition) and all are reasonably updated.

Is this in SDI or MDI mode, and if the latter, are you resizing the
commands window or the frame?  It's not clear to me why you would want to
be resizing anyway: the sizes of the console and pager windows are set in
file Rconsole.

None of those possibilities cause problems on my systems (NT4 / W2k
Professional).

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


==> 926.followup.2 <==
From bellis@hsph.harvard.edu  Sun Apr 29 22:43:09 2001
Received: from hsph.harvard.edu (hsph.harvard.edu [128.103.75.21])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id WAA09383
	for <R-bugs@biostat.ku.dk>; Sun, 29 Apr 2001 22:43:08 +0200 (MET DST)
Received: from localhost (bellis@localhost)
	by hsph.harvard.edu (8.9.3+Sun/8.9.1) with ESMTP id QAA25823;
	Sun, 29 Apr 2001 16:42:27 -0400 (EDT)
Date: Sun, 29 Apr 2001 16:42:27 -0400 (EDT)
From: Byron Ellis <bellis@hsph.harvard.edu>
To: Prof Brian Ripley <ripley@stats.ox.ac.uk>
cc: R-bugs@biostat.ku.dk
Subject: Re: [Rd] Rgui crash (PR#926)
In-Reply-To: <Pine.GSO.4.31.0104292119280.13414-100000@toucan.stats>
Message-ID: <Pine.GSO.4.10.10104291636400.15959-100000@hsph.harvard.edu>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII

MDI mode. I was resizing the console child window. As for why I was
resizing--- why not? It seems like a reasonable thing to do if I want a
larger console, no? On the other hand, if the console is not actually
resizable (or you do not want it to be dynamically resizable) then the
window shouldn't be resizable.

As for it working on your systems and not mine, I don't know why that
would be though it is not limited to a single one of my systems. I'm
willing to accept some sort of interference from a piece of software I
have universally installed (SecureCRT for instance), but I'm not sure what
would cause this sort of behavior. 

Byron Ellis (bellis@hsph.harvard.edu)

On Sun, 29 Apr 2001, Prof Brian Ripley wrote:

> On Sun, 29 Apr 2001 bellis@hsph.harvard.edu wrote:
> 
> > Full_Name: Byron Ellis
> > Version: 1.2.3
> > OS: Windows 2000 Server
> > Submission from: (NULL) (140.247.105.95)
> >
> >
> > In Rgui when attempting to resize the console the system locks for a second
> > (cursor locks up, etc) and then either returns to normal for a second before
> > crashing or just crashes when we start moving again (the former happens more
> > often when making things bigger, the latter when the console is shrunk). The
> > error message reports an attempt to read 0x000000 so I'm guessing the problem is
> > somewhere in the Rgui console's memory management code.
> >
> > I can duplicate this on both my home and lab desktop machines as well as my
> > laptop. All are running Win2K Server (I take that back--- my lab machine is
> > running Pro. edition) and all are reasonably updated.
> 
> Is this in SDI or MDI mode, and if the latter, are you resizing the
> commands window or the frame?  It's not clear to me why you would want to
> be resizing anyway: the sizes of the console and pager windows are set in
> file Rconsole.
> 
> None of those possibilities cause problems on my systems (NT4 / W2k
> Professional).
> 
> -- 
> Brian D. Ripley,                  ripley@stats.ox.ac.uk
> Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
> University of Oxford,             Tel:  +44 1865 272861 (self)
> 1 South Parks Road,                     +44 1865 272860 (secr)
> Oxford OX1 3TG, UK                Fax:  +44 1865 272595
> 
> 


==> 926.followup.3 <==
From ripley@stats.ox.ac.uk  Mon Apr 30 07:36:17 2001
Received: from toucan.stats.ox.ac.uk (toucan.stats.ox.ac.uk [163.1.20.20])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id HAA10524
	for <R-bugs@biostat.ku.dk>; Mon, 30 Apr 2001 07:36:16 +0200 (MET DST)
Received: from max115.public.ox.ac.uk (max115.public.ox.ac.uk [192.76.27.115])
	by toucan.stats.ox.ac.uk (8.9.0/8.9.0) with ESMTP id GAA14002;
	Mon, 30 Apr 2001 06:36:24 +0100 (BST)
Date: Mon, 30 Apr 2001 06:37:36 +0100 (BST)
From: Prof Brian D Ripley <ripley@stats.ox.ac.uk>
Sender: <ripley@auk.stats>
To: Byron Ellis <bellis@hsph.harvard.edu>
cc: <R-bugs@biostat.ku.dk>
Subject: Re: [Rd] Rgui crash (PR#926)
In-Reply-To: <Pine.GSO.4.10.10104291636400.15959-100000@hsph.harvard.edu>
Message-ID: <Pine.GSO.4.31.0104300634450.9164-100000@auk.stats>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII

On Sun, 29 Apr 2001, Byron Ellis wrote:

> MDI mode. I was resizing the console child window. As for why I was
> resizing--- why not? It seems like a reasonable thing to do if I want a
> larger console, no? On the other hand, if the console is not actually
> resizable (or you do not want it to be dynamically resizable) then the
> window shouldn't be resizable.

It is resizable: but it is also specifiable in Rconsole in a more
precise way.

> As for it working on your systems and not mine, I don't know why that
> would be though it is not limited to a single one of my systems. I'm
> willing to accept some sort of interference from a piece of software I
> have universally installed (SecureCRT for instance), but I'm not sure what
> would cause this sort of behavior.

Can you please find out then?  Build a debug version and use gdb to
find out what the problem is.  This would not be by any means the first
time that an addon to Windows has caused Rgui to crash.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


==> 926.followup.4 <==
From bellis@hsph.harvard.edu  Mon Apr 30 07:59:07 2001
Received: from hsph.harvard.edu (hsph.harvard.edu [128.103.75.21])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id HAA10663
	for <R-bugs@biostat.ku.dk>; Mon, 30 Apr 2001 07:59:07 +0200 (MET DST)
Received: from localhost (bellis@localhost)
	by hsph.harvard.edu (8.9.3+Sun/8.9.1) with ESMTP id BAA27959;
	Mon, 30 Apr 2001 01:58:25 -0400 (EDT)
Date: Mon, 30 Apr 2001 01:58:25 -0400 (EDT)
From: Byron Ellis <bellis@hsph.harvard.edu>
To: Prof Brian D Ripley <ripley@stats.ox.ac.uk>
cc: R-bugs@biostat.ku.dk
Subject: Re: [Rd] Rgui crash (PR#926)
In-Reply-To: <Pine.GSO.4.31.0104300634450.9164-100000@auk.stats>
Message-ID: <Pine.GSO.4.10.10104300139380.26045-100000@hsph.harvard.edu>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII

On Mon, 30 Apr 2001, Prof Brian D Ripley wrote:

> On Sun, 29 Apr 2001, Byron Ellis wrote:
> 
> > MDI mode. I was resizing the console child window. As for why I was
> > resizing--- why not? It seems like a reasonable thing to do if I want a
> > larger console, no? On the other hand, if the console is not actually
> > resizable (or you do not want it to be dynamically resizable) then the
> > window shouldn't be resizable.
> 
> It is resizable: but it is also specifiable in Rconsole in a more
> precise way.
> 
> > As for it working on your systems and not mine, I don't know why that
> > would be though it is not limited to a single one of my systems. I'm
> > willing to accept some sort of interference from a piece of software I
> > have universally installed (SecureCRT for instance), but I'm not sure what
> > would cause this sort of behavior.
> 
> Can you please find out then?  Build a debug version and use gdb to
> find out what the problem is.  This would not be by any means the first
> time that an addon to Windows has caused Rgui to crash.

I'll give it a shot-- I really should have a debug version of R around
anyway. :-)

Also, of note: It happens at 0x026664ca (as if that helps :-)) and using
the min/max buttons does not cause the crash. Maybe the bitmap code has
some race condition that gets hit at some point? Anyway, classes
permitting, I'll look more closely this week.



Byron Ellis (bellis@hsph.harvard.edu)




==> 926.audit <==
Wed May  2 19:04:38 2001	ripley	changed notes
Wed May  2 19:04:38 2001	ripley	foobar
Wed May  2 19:04:38 2001	ripley	moved from incoming to Windows
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
* PR# 912 *
Subject: Rgui.exe crash on Windows 2000
From: gilg.seeber@uibk.ac.at
Date: Thu, 12 Apr 2001 15:07:52 +0200 (MET DST)
--seems to be specific to the submitter's system.
--Cannot reproduce.
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 912 <==
From gilg.seeber@uibk.ac.at  Thu Apr 12 15:07:53 2001
Received: from blueberry.kubism.ku.dk (blueberry [130.225.108.193])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id PAA06496
	for <R-bugs@biostat.ku.dk>; Thu, 12 Apr 2001 15:07:52 +0200 (MET DST)
Date: Thu, 12 Apr 2001 15:07:52 +0200 (MET DST)
From: gilg.seeber@uibk.ac.at
Message-Id: <200104121307.PAA06496@pubhealth.ku.dk>
To: R-bugs@biostat.ku.dk
Subject: Rgui.exe crash on Windows 2000
MIME-Version: 1.0
Content-Type: text/plain; charset=unknown-8bit
Content-Transfer-Encoding: 8bit

Full_Name: G.U.H. Seeber
Version: most recent binary from CRAN
OS: Windows 2000
Submission from: (NULL) (138.232.202.67)


When calling Rgui.exe the program crashes before any windows open. 
I append the output from Dr. Watson:

Anwendungsausnahme aufgetreten:
        Anwendung:  (pid=860)
        Wann: 12.04.2001 @ 13:33:11.515
        Ausnahmenummer: c0000005 (Zugriffsverletzung)

*----> Systeminformationen <----*
        Computername: C403-DRUM
        Benutzername: gs
        Prozessoranzahl: 1
        Prozessortyp: x86 Family 6 Model 7 Stepping 2
        Windows 2000-Version: 5.0
        Aktuelles Build: 2195
        Service Pack: None
        Aktueller Typ: Uniprocessor Free
        Firma: Universitt Innsbruck
        Besitzer: Institut fr Statistik

*----> Taskliste <----*
   0 Idle.exe
   8 System.exe
 152 smss.exe
 180 csrss.exe
 200 winlogon.exe
 228 services.exe
 240 lsass.exe
 404 svchost.exe
 452 LEXBCES.exe
 476 spoolsv.exe
 512 cpqalert.exe
 532 svchost.exe
 548 inetd32.exe
 564 jconfigdNT.exe
 600 regsvc.exe
 608 hjavaw.exe
 624 mstask.exe
 672 tcpsvcs.exe
 692 javaw.exe
 720 snmp.exe
 776 Win32sl.exe
 800 ZipToA.exe
 832 inetinfo.exe
 880 cpqdmi.exe
1172 explorer.exe
 328 chkadmin.exe
1204 nwtray.exe
1212 dpmw32.exe
1220 realplay.exe
1236 pdesk.exe
1252 AcroTray.exe
1296 IMGICON.exe
1388 OSA.exe
1420 CLOCK.exe
1052 exceed.exe
 860 Rgui.exe
1312 drwtsn32.exe
   0 _Total.exe

(00400000 - 00406000)
(77F80000 - 77FFF000)
(02510000 - 026DC000)
(77DA0000 - 77DFA000)
(77E70000 - 77F33000)
(77D30000 - 77D9F000)
(77B40000 - 77BCA000)
(77F40000 - 77F7C000)
(77E00000 - 77E65000)
(76B00000 - 76B3F000)
(77C60000 - 77CAA000)
(77580000 - 777C6000)
(78000000 - 78046000)
(77810000 - 77817000)
(75940000 - 75946000)
(74FC0000 - 74FC9000)
(74FA0000 - 74FB4000)
(74F90000 - 74F98000)
(77A40000 - 77B35000)
(779A0000 - 77A35000)
(77840000 - 7787D000)
(77090000 - 770B3000)

Statusabbild fr Threadkennung 0x37c

eax=00003a64 ebx=0240fa20 ecx=00000000 edx=7efefeff esi=00000002 edi=02688472
eip=78003b44 esp=0240f9a0 ebp=0240fe90 iopl=0         nv up ei pl zr na po nc
cs=001b  ss=0023  ds=0023  es=0023  fs=0038  gs=0000             efl=00000246


Funktion: strcpy
        78003b27 7416             jz      _threadhandle+0x4c2 (7800c53f)
        78003b29 8a11             mov     dl,[ecx]                    
ds:00000000=??
        78003b2b 41               inc     ecx
        78003b2c 84d2             test    dl,dl
        78003b2e 0f84c8100000     je      strcat+0x9c (78004bfc)
        78003b34 8817             mov     [edi],dl                    
ds:02688472=00
        78003b36 47               inc     edi
        78003b37 f7c103000000     test    ecx,0x3
        78003b3d 75ea             jnz     seh_longjmp_unwind+0x2 (7800f629)
        78003b3f bafffefe7e       mov     edx,0x7efefeff
FEHLER ->78003b44 8b01             mov     eax,[ecx]             
ds:00000000=????????
        78003b46 03d0             add     edx,eax
        78003b48 83f0ff           xor     eax,0xff
        78003b4b 33c2             xor     eax,edx
        78003b4d 8b11             mov     edx,[ecx]             
ds:00000000=????????
        78003b4f 83c104           add     ecx,0x4
        78003b52 a900010181       test    eax,0x81010100
        78003b57 0f8565100000     jne     strcat+0x62 (78004bc2)
        78003b5d 8917             mov     [edi],edx             
ds:02688472=00000000
        78003b5f 83c704           add     edi,0x4
        78003b62 ebdb             jmp     set_sbh_threshold+0xca3 (7800dd3f)
        78003b64 a16cbb0378    mov eax,[environ+0x24 (7803bb6c)]
ds:7803bb6c=78003b91

*----> Stack Back Trace <----*

FramePtr ReturnAd Param#1  Param#2  Param#3  Param#4  Function Name
0240FE90 004012FA 00000000 02BE37C8 77E8D051 00000008 !strcpy
0240FEB0 0040123B 00000001 02BE37C8 0240FEE0 00401227 !<nosymbols>
0240FEE0 004013DE 00400000 00000000 02413285 00000001 !<nosymbols>
0240FF60 004011C1 00000001 02BE37C8 02BE29A8 004011A6 !<nosymbols>
0240FFA0 00401207 00000002 00000000 00000000 77E77900 !<nosymbols>
0240FFC0 77E77903 00000008 00000002 7FFDF000 C0000005 !<nosymbols>
0240FFF0 00000000 004011F0 00000000 000000C8 00000100
kernel32!SetUnhandledExceptionFilter

*----> Raw Stack Dump <----*
0240f9a0  08 00 00 00 bc f8 52 02 - 70 84 68 02 00 00 00 00  ......R.p.h.....
0240f9b0  7a f2 52 02 7c f8 52 02 - 70 f2 52 02 c8 37 be 02  z.R.|.R.p.R..7..
0240f9c0  90 fe 40 02 0d f8 52 02 - 85 32 41 02 02 00 00 00  ..@...R..2A.....
0240f9d0  08 00 00 00 a1 71 e7 77 - a0 71 41 02 e8 72 41 02  .....q.w.qA..rA.
0240f9e0  00 00 00 00 00 e0 fd 7f - 65 00 63 00 75 00 74 00  ........e.c.u.t.
0240f9f0  78 01 41 02 78 01 41 02 - 00 c0 f8 1f 00 00 00 00  x.A.x.A.........
0240fa00  20 00 00 00 18 00 00 00 - 00 c0 f8 1f 00 30 39 18   ............09.
0240fa10  00 90 06 4e 00 80 86 47 - 00 00 fe 7f 00 00 aa 6a  ...N...G.......j
0240fa20  00 00 00 00 00 00 00 00 - 01 00 00 00 00 00 00 00  ................
0240fa30  01 00 00 00 01 00 00 00 - 00 00 00 00 01 00 00 00  ................
0240fa40  05 00 00 00 00 00 60 00 - 30 57 05 00 ff ff ff 7f  ......`.0W......
0240fa50  ff ff ff 7f 01 00 00 00 - 01 00 00 00 60 18 c0 02  ............`...
0240fa60  e0 6b 68 02 75 00 69 00 - 6c e5 52 02 48 e8 52 02  .kh.u.i.l.R.H.R.
0240fa70  38 e4 52 02 00 1e 66 02 - a4 1e 66 02 fc e8 52 02  8.R...f...f...R.
0240fa80  00 00 00 00 00 00 00 00 - d4 fa 40 02 00 10 00 00  ..........@.....
0240fa90  04 00 00 00 00 00 41 02 - 00 00 41 02 e8 6d 41 02  ......A...A..mA.
0240faa0  00 00 00 00 40 06 41 02 - 43 02 00 00 e0 fa 40 02  ....@.A.C.....@.
0240fab0  04 00 00 00 d3 43 f9 77 - 48 07 be 02 00 00 be 02  .....C.wH.......
0240fac0  04 00 00 00 00 00 00 00 - b8 fa 40 02 00 02 00 00  ..........@.....
0240fad0  70 fc 40 02 db 80 fb 77 - 18 44 f9 77 ff ff ff ff  p.@....w.D.w....

Statusabbild fr Threadkennung 0x3dc

eax=77d3b759 ebx=02420820 ecx=0241eafc edx=00000000 esi=024206f0 edi=00000100
eip=77f82eec esp=1506fe28 ebp=1506ff74 iopl=0         nv up ei pl nz na pe nc
cs=001b  ss=0023  ds=0023  es=0023  fs=0038  gs=0000             efl=00000202


Funktion: ZwReplyWaitReceivePortEx
        77f82ee1 b8ac000000       mov     eax,0xac
        77f82ee6 8d542404         lea     edx,[esp+0x4]         
ss:15eed3ff=????????
        77f82eea cd2e             int     2e
        77f82eec c21400           ret     0x14

*----> Stack Back Trace <----*

FramePtr ReturnAd Param#1  Param#2  Param#3  Param#4  Function Name
1506FF74 77D3B407 77D3B7BF 024206F0 00000000 40420204
ntdll!ZwReplyWaitReceivePortEx
1506FFA8 77D3B771 0241F680 1506FFEC 77E82CA8 02420820
rpcrt4!RpcBindingSetOption
1506FFB4 77E82CA8 02420820 00000000 40420204 02420820
rpcrt4!RpcBindingSetOption
1506FFEC 00000000 00000000 00000000 00000000 00000000 kernel32!CreateFileA


==> 912.followup.1 <==
From ripley@stats.ox.ac.uk  Thu Apr 12 15:37:45 2001
Received: from toucan.stats.ox.ac.uk (toucan.stats.ox.ac.uk [163.1.20.20])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id PAA06612
	for <R-bugs@biostat.ku.dk>; Thu, 12 Apr 2001 15:37:44 +0200 (MET DST)
Received: from localhost (ripley@localhost)
	by toucan.stats.ox.ac.uk (8.9.0/8.9.0) with ESMTP id OAA01328;
	Thu, 12 Apr 2001 14:37:52 +0100 (BST)
X-Authentication-Warning: toucan.stats: ripley owned process doing -bs
Date: Thu, 12 Apr 2001 14:37:52 +0100 (BST)
From: Prof Brian Ripley <ripley@stats.ox.ac.uk>
X-X-Sender:  <ripley@toucan.stats>
To: <gilg.seeber@uibk.ac.at>
cc: <R-bugs@biostat.ku.dk>
Subject: Re: [Rd] Rgui.exe crash on Windows 2000 (PR#912)
In-Reply-To: <200104121307.PAA06507@pubhealth.ku.dk>
Message-ID: <Pine.GSO.4.31.0104121429510.1312-100000@toucan.stats>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII

On Thu, 12 Apr 2001 gilg.seeber@uibk.ac.at wrote:

> Full_Name: G.U.H. Seeber
> Version: most recent binary from CRAN

And what was that called?  rterm --version tells you.

> OS: Windows 2000
> Submission from: (NULL) (138.232.202.67)
>
>
> When calling Rgui.exe the program crashes before any windows open.

As it does not on my Windows 2000 system, nor on the Windows 2000 system
on which it was built nor for many other users, this would appear to
indicate a problem with your installation and not with the R binaries.
In particular, the error seems to have occurred in a system DLL and not in
Rgui.exe.

I suggest you compile a debug version from the sources and investigate
what problem might be peculiar to your machine.

One thing we know, but seems implausible: R fails to start (but with a
different error) if the machine has less than 10Mb of RAM.  But Windows
2000 likes 64MB or more.

[...]

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


==> 912.followup.2 <==
From erich.neuwirth@univie.ac.at  Thu Apr 12 23:44:39 2001
Received: from email01.aon.at (WARSL401PIP1.highway.telekom.at [195.3.96.69])
	by pubhealth.ku.dk (8.9.3/8.9.1) with SMTP id XAA07887
	for <R-bugs@biostat.ku.dk>; Thu, 12 Apr 2001 23:44:38 +0200 (MET DST)
Received: (qmail 318676 invoked from network); 12 Apr 2001 21:44:17 -0000
Received: from m160p006.dipool.highway.telekom.at (HELO univie.ac.at) ([62.46.9.230]) (envelope-sender <erich.neuwirth@univie.ac.at>)
          by qmail1.highway.telekom.at (qmail-ldap-1.03) with SMTP
          for <gilg.seeber@uibk.ac.at>; 12 Apr 2001 21:44:17 -0000
Message-ID: <3AD62185.B157022C@univie.ac.at>
Date: Thu, 12 Apr 2001 23:43:33 +0200
From: Erich Neuwirth <erich.neuwirth@univie.ac.at>
X-Mailer: Mozilla 4.76 [en] (Windows NT 5.0; U)
X-Accept-Language: en
MIME-Version: 1.0
To: gilg.seeber@uibk.ac.at
CC: r-devel@stat.math.ethz.ch, R-bugs@biostat.ku.dk
Subject: Re: [Rd] Rgui.exe crash on Windows 2000 (PR#912)
References: <200104121307.PAA06507@pubhealth.ku.dk>
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit

is any of the running processes a keyboard macro program?
on my win2k machine,
hotkeyboard (a system wide macro expander)
and r cannot coexist.



gilg.seeber@uibk.ac.at wrote:
> 
> Full_Name: G.U.H. Seeber
> Version: most recent binary from CRAN
> OS: Windows 2000
> Submission from: (NULL) (138.232.202.67)
> 
> When calling Rgui.exe the program crashes before any windows open.
> I append the output from Dr. Watson:
> 
> Anwendungsausnahme aufgetreten:
>         Anwendung:  (pid=860)
>         Wann: 12.04.2001 @ 13:33:11.515
>         Ausnahmenummer: c0000005 (Zugriffsverletzung)
> 
> *----> Systeminformationen <----*
>         Computername: C403-DRUM
>         Benutzername: gs
>         Prozessoranzahl: 1
>         Prozessortyp: x86 Family 6 Model 7 Stepping 2
>         Windows 2000-Version: 5.0
>         Aktuelles Build: 2195
>         Service Pack: None
>         Aktueller Typ: Uniprocessor Free
>         Firma: Universitt Innsbruck
>         Besitzer: Institut fr Statistik
> 
> *----> Taskliste <----*
>    0 Idle.exe
>    8 System.exe
>  152 smss.exe
>  180 csrss.exe
>  200 winlogon.exe
>  228 services.exe
>  240 lsass.exe
>  404 svchost.exe
>  452 LEXBCES.exe
>  476 spoolsv.exe
>  512 cpqalert.exe
>  532 svchost.exe
>  548 inetd32.exe
>  564 jconfigdNT.exe
>  600 regsvc.exe
>  608 hjavaw.exe
>  624 mstask.exe
>  672 tcpsvcs.exe
>  692 javaw.exe
>  720 snmp.exe
>  776 Win32sl.exe
>  800 ZipToA.exe
>  832 inetinfo.exe
>  880 cpqdmi.exe
> 1172 explorer.exe
>  328 chkadmin.exe
> 1204 nwtray.exe
> 1212 dpmw32.exe
> 1220 realplay.exe
> 1236 pdesk.exe
> 1252 AcroTray.exe
> 1296 IMGICON.exe
> 1388 OSA.exe
> 1420 CLOCK.exe
> 1052 exceed.exe
>  860 Rgui.exe
> 1312 drwtsn32.exe
>    0 _Total.exe
> 
> (00400000 - 00406000)
> (77F80000 - 77FFF000)
> (02510000 - 026DC000)
> (77DA0000 - 77DFA000)
> (77E70000 - 77F33000)
> (77D30000 - 77D9F000)
> (77B40000 - 77BCA000)
> (77F40000 - 77F7C000)
> (77E00000 - 77E65000)
> (76B00000 - 76B3F000)
> (77C60000 - 77CAA000)
> (77580000 - 777C6000)
> (78000000 - 78046000)
> (77810000 - 77817000)
> (75940000 - 75946000)
> (74FC0000 - 74FC9000)
> (74FA0000 - 74FB4000)
> (74F90000 - 74F98000)
> (77A40000 - 77B35000)
> (779A0000 - 77A35000)
> (77840000 - 7787D000)
> (77090000 - 770B3000)
> 
> Statusabbild fr Threadkennung 0x37c
> 
> eax=00003a64 ebx=0240fa20 ecx=00000000 edx=7efefeff esi=00000002 edi=02688472
> eip=78003b44 esp=0240f9a0 ebp=0240fe90 iopl=0         nv up ei pl zr na po nc
> cs=001b  ss=0023  ds=0023  es=0023  fs=0038  gs=0000             efl=00000246
> 
> Funktion: strcpy
>         78003b27 7416             jz      _threadhandle+0x4c2 (7800c53f)
>         78003b29 8a11             mov     dl,[ecx]
> ds:00000000=??
>         78003b2b 41               inc     ecx
>         78003b2c 84d2             test    dl,dl
>         78003b2e 0f84c8100000     je      strcat+0x9c (78004bfc)
>         78003b34 8817             mov     [edi],dl
> ds:02688472=00
>         78003b36 47               inc     edi
>         78003b37 f7c103000000     test    ecx,0x3
>         78003b3d 75ea             jnz     seh_longjmp_unwind+0x2 (7800f629)
>         78003b3f bafffefe7e       mov     edx,0x7efefeff
> FEHLER ->78003b44 8b01             mov     eax,[ecx]
> ds:00000000=????????
>         78003b46 03d0             add     edx,eax
>         78003b48 83f0ff           xor     eax,0xff
>         78003b4b 33c2             xor     eax,edx
>         78003b4d 8b11             mov     edx,[ecx]
> ds:00000000=????????
>         78003b4f 83c104           add     ecx,0x4
>         78003b52 a900010181       test    eax,0x81010100
>         78003b57 0f8565100000     jne     strcat+0x62 (78004bc2)
>         78003b5d 8917             mov     [edi],edx
> ds:02688472=00000000
>         78003b5f 83c704           add     edi,0x4
>         78003b62 ebdb             jmp     set_sbh_threshold+0xca3 (7800dd3f)
>         78003b64 a16cbb0378    mov eax,[environ+0x24 (7803bb6c)]
> ds:7803bb6c=78003b91
> 
> *----> Stack Back Trace <----*
> 
> FramePtr ReturnAd Param#1  Param#2  Param#3  Param#4  Function Name
> 0240FE90 004012FA 00000000 02BE37C8 77E8D051 00000008 !strcpy
> 0240FEB0 0040123B 00000001 02BE37C8 0240FEE0 00401227 !<nosymbols>
> 0240FEE0 004013DE 00400000 00000000 02413285 00000001 !<nosymbols>
> 0240FF60 004011C1 00000001 02BE37C8 02BE29A8 004011A6 !<nosymbols>
> 0240FFA0 00401207 00000002 00000000 00000000 77E77900 !<nosymbols>
> 0240FFC0 77E77903 00000008 00000002 7FFDF000 C0000005 !<nosymbols>
> 0240FFF0 00000000 004011F0 00000000 000000C8 00000100
> kernel32!SetUnhandledExceptionFilter
> 
> *----> Raw Stack Dump <----*
> 0240f9a0  08 00 00 00 bc f8 52 02 - 70 84 68 02 00 00 00 00  ......R.p.h.....
> 0240f9b0  7a f2 52 02 7c f8 52 02 - 70 f2 52 02 c8 37 be 02  z.R.|.R.p.R..7..
> 0240f9c0  90 fe 40 02 0d f8 52 02 - 85 32 41 02 02 00 00 00  ..@...R..2A.....
> 0240f9d0  08 00 00 00 a1 71 e7 77 - a0 71 41 02 e8 72 41 02  .....q.w.qA..rA.
> 0240f9e0  00 00 00 00 00 e0 fd 7f - 65 00 63 00 75 00 74 00  ........e.c.u.t.
> 0240f9f0  78 01 41 02 78 01 41 02 - 00 c0 f8 1f 00 00 00 00  x.A.x.A.........
> 0240fa00  20 00 00 00 18 00 00 00 - 00 c0 f8 1f 00 30 39 18   ............09.
> 0240fa10  00 90 06 4e 00 80 86 47 - 00 00 fe 7f 00 00 aa 6a  ...N...G.......j
> 0240fa20  00 00 00 00 00 00 00 00 - 01 00 00 00 00 00 00 00  ................
> 0240fa30  01 00 00 00 01 00 00 00 - 00 00 00 00 01 00 00 00  ................
> 0240fa40  05 00 00 00 00 00 60 00 - 30 57 05 00 ff ff ff 7f  ......`.0W......
> 0240fa50  ff ff ff 7f 01 00 00 00 - 01 00 00 00 60 18 c0 02  ............`...
> 0240fa60  e0 6b 68 02 75 00 69 00 - 6c e5 52 02 48 e8 52 02  .kh.u.i.l.R.H.R.
> 0240fa70  38 e4 52 02 00 1e 66 02 - a4 1e 66 02 fc e8 52 02  8.R...f...f...R.
> 0240fa80  00 00 00 00 00 00 00 00 - d4 fa 40 02 00 10 00 00  ..........@.....
> 0240fa90  04 00 00 00 00 00 41 02 - 00 00 41 02 e8 6d 41 02  ......A...A..mA.
> 0240faa0  00 00 00 00 40 06 41 02 - 43 02 00 00 e0 fa 40 02  ....@.A.C.....@.
> 0240fab0  04 00 00 00 d3 43 f9 77 - 48 07 be 02 00 00 be 02  .....C.wH.......
> 0240fac0  04 00 00 00 00 00 00 00 - b8 fa 40 02 00 02 00 00  ..........@.....
> 0240fad0  70 fc 40 02 db 80 fb 77 - 18 44 f9 77 ff ff ff ff  p.@....w.D.w....
> 
> Statusabbild fr Threadkennung 0x3dc
> 
> eax=77d3b759 ebx=02420820 ecx=0241eafc edx=00000000 esi=024206f0 edi=00000100
> eip=77f82eec esp=1506fe28 ebp=1506ff74 iopl=0         nv up ei pl nz na pe nc
> cs=001b  ss=0023  ds=0023  es=0023  fs=0038  gs=0000             efl=00000202
> 
> Funktion: ZwReplyWaitReceivePortEx
>         77f82ee1 b8ac000000       mov     eax,0xac
>         77f82ee6 8d542404         lea     edx,[esp+0x4]
> ss:15eed3ff=????????
>         77f82eea cd2e             int     2e
>         77f82eec c21400           ret     0x14
> 
> *----> Stack Back Trace <----*
> 
> FramePtr ReturnAd Param#1  Param#2  Param#3  Param#4  Function Name
> 1506FF74 77D3B407 77D3B7BF 024206F0 00000000 40420204
> ntdll!ZwReplyWaitReceivePortEx
> 1506FFA8 77D3B771 0241F680 1506FFEC 77E82CA8 02420820
> rpcrt4!RpcBindingSetOption
> 1506FFB4 77E82CA8 02420820 00000000 40420204 02420820
> rpcrt4!RpcBindingSetOption
> 1506FFEC 00000000 00000000 00000000 00000000 00000000 kernel32!CreateFileA
> 
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

--
Erich Neuwirth, Computer Supported Didactics Working Group
Visit our SunSITE at http://sunsite.univie.ac.at
Phone: +43-1-4277-38624 Fax: +43-1-4277-9386

==> 912.audit <==
Sun Apr 15 07:54:36 2001	ripley	changed notes
Sun Apr 15 07:54:36 2001	ripley	foobar
Sun Apr 15 07:54:36 2001	ripley	moved from incoming to Windows
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
* PR# 906 *
Subject: Win98 wheelmouse graphics lock problem
From: cpaul@ucla.edu
Date: Tue, 10 Apr 2001 17:50:44 +0200 (MET DST)
--Cannot reproduce without more information
--In particular, does not happen with Microsoft Intellimouse on W2K
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 906 <==
From cpaul@ucla.edu  Tue Apr 10 17:50:45 2001
Received: from blueberry.kubism.ku.dk (blueberry [130.225.108.193])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id RAA24490
	for <R-bugs@biostat.ku.dk>; Tue, 10 Apr 2001 17:50:44 +0200 (MET DST)
Date: Tue, 10 Apr 2001 17:50:44 +0200 (MET DST)
From: cpaul@ucla.edu
Message-Id: <200104101550.RAA24490@pubhealth.ku.dk>
To: R-bugs@biostat.ku.dk
Subject: Win98 wheelmouse graphics lock problem

Full_Name: Christopher Paul
Version: Version 1.2.2  (2001-02-26)
OS: Win 98
Submission from: (NULL) (4.35.137.70)


Using the GUI, if I make a plot(), click on the graphics window and then use my
wheelmouse to attempt to move up and down the graphics image, the image fails to
redrawn properly, and then entire GUI session "hangs" and needs to be closed.  I
wasn't aware how committed to the wheelmouse I had become, but even after
identifying the problem, I kept doing it.

==> 906.followup.1 <==
From ripley@stats.ox.ac.uk  Wed Apr 11 09:10:06 2001
Received: from toucan.stats.ox.ac.uk (toucan.stats.ox.ac.uk [163.1.20.20])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id JAA27074
	for <R-bugs@biostat.ku.dk>; Wed, 11 Apr 2001 09:10:05 +0200 (MET DST)
Received: from localhost (ripley@localhost)
	by toucan.stats.ox.ac.uk (8.9.0/8.9.0) with ESMTP id IAA26706;
	Wed, 11 Apr 2001 08:10:12 +0100 (BST)
X-Authentication-Warning: toucan.stats: ripley owned process doing -bs
Date: Wed, 11 Apr 2001 08:10:12 +0100 (BST)
From: Prof Brian Ripley <ripley@stats.ox.ac.uk>
X-X-Sender:  <ripley@toucan.stats>
To: <cpaul@ucla.edu>
cc: <R-bugs@biostat.ku.dk>
Subject: Re: [Rd] Win98 wheelmouse graphics lock problem (PR#906)
In-Reply-To: <200104101550.RAA24500@pubhealth.ku.dk>
Message-ID: <Pine.GSO.4.31.0104110806420.26689-100000@toucan.stats>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII

On Tue, 10 Apr 2001 cpaul@ucla.edu wrote:

> Full_Name: Christopher Paul
> Version: Version 1.2.2  (2001-02-26)
> OS: Win 98
> Submission from: (NULL) (4.35.137.70)
>
>
> Using the GUI, if I make a plot(), click on the graphics window and then use my
> wheelmouse to attempt to move up and down the graphics image, the image fails to
> redrawn properly, and then entire GUI session "hangs" and needs to be closed.  I
> wasn't aware how committed to the wheelmouse I had become, but even after
> identifying the problem, I kept doing it.

I have no idea what the `wheelmouse' on your system is generating in the
way of events, or what you expected to happen.  An R graphics window does
not have vertical scrollbars by default.

Please debug this on your own system and submit a match.  The developers
neither use Win 98 nor a `wheelmouse', but the emulation on my Windows NT
system gives no problems.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


==> 906.audit <==
Sun Apr 15 07:53:41 2001	ripley	changed notes
Sun Apr 15 07:53:41 2001	ripley	foobar
Sun Apr 15 07:53:41 2001	ripley	moved from incoming to Windows
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

Directory:  incoming

* PR# 975 *
Subject: ???????, ??? ???????? ?????...
From: webmaster@mrpcd.com
Date: Sat, 09 Jun 2001 18:30:20 +0900
-- no notes --
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 975 <==
From webmaster@mrpcd.com  Sat Jun  9 11:25:11 2001
Received: from stat.math.ethz.ch (daemon@hypatia.ethz.ch [129.132.58.23])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id LAA21671
	for <R-bugs@biostat.ku.dk>; Sat, 9 Jun 2001 11:25:05 +0200 (MET DST)
From: webmaster@mrpcd.com
Received: (from daemon@localhost)
	by stat.math.ethz.ch (8.9.1/8.9.1) id LAA29817
	for <r-bugs@lists.r-project.org>; Sat, 9 Jun 2001 11:24:58 +0200 (MET DST)
Received: from UNKNOWN(211.58.56.19), claiming to be "mo4.hananet.net"
 via SMTP by hypatia, id smtpdAAAa007H.; Sat Jun  9 11:24:46 2001
Received: from lee1 ([211.207.217.130]) by mo4.hananet.net
          (Netscape Messaging Server 4.15) with SMTP id GENOTA02.436 for
          <r-bugs@lists.r-project.org>; Sat, 9 Jun 2001 18:24:46 +0900 
To: <r-bugs@hypatia.math.ethz.ch>
Subject: ???????, ??? ???????? ?????...
Date: Sat, 09 Jun 2001 18:30:20 +0900
Message-Id: <37051.771065833331200.99321@localhost>
MIME-Version: 1.0
Content-Type: multipart/related; boundary=fbulqoakpujkcnuf
Content-Transfer-Encoding: 8bit

--fbulqoakpujkcnuf
Content-Type: text/html; charset=iso-2022-kr
Content-Transfer-Encoding: 8bit

<HTML><HEAD><TITLE>   </TITLE>
<META http-equiv=Content-Type content="text/html; charset=ks_c_5601-1987">
<META content="   ,  CD" 
name="   ,  CD">
<META content="MSHTML 5.50.4134.600" name=GENERATOR></HEAD>
<BODY text=black vLink=purple aLink=red link=blue bgColor=white>
<TABLE cellSpacing=2 cellPadding=0 width=459 bgColor=navy border=0>
  <TBODY>
  <TR>
    <TD width=455 bgColor=white>
      <TABLE cellSpacing=0 cellPadding=0 width=454 border=0>
        <TBODY>
        <TR>
          <TD width=454 bgColor=white colSpan=2 height=4>
            <P><SPAN style="FONT-SIZE: 9pt"><FONT face= 
            color=gray><BR>
              &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</FONT><A target=_blank 
            href="http://www.mrpcd.com"><FONT face= 
            color=gray>http://www.mrpcd.com</FONT></A></SPAN></P>
          </TD></TR>
        <TR>
          <TD width=454 colSpan=2 height=21>
            <P><IMG height=82 src=cid:head.gif width=453 
            border=0></P>
          </TD></TR>
        <TR>
          <TD vAlign=top width=454 colSpan=2 height=80>
            <TABLE cellSpacing=0 cellPadding=0 width=453 border=0>
              <TBODY>
              <TR>
                <TD vAlign=top width=76 height=126>
                  <P><SPAN style="FONT-SIZE: 9pt"><IMG height=92 
                  src=cid:head2-1.gif width=75 
                border=0></SPAN></P>
                </TD>
                <TD vAlign=top width=377 background=cid:head2-2.gif 
                height=126> 
                  <P><FONT face=><SPAN style="FONT-SIZE: 9pt"> <BR> 
                    ? <BR>       <BR>   
                     <BR> CD   .<BR>,     
                  ...</SPAN></FONT></P></TD></TR></TBODY></TABLE></TD></TR>
        <TR>
          <TD vAlign=top width=454 colSpan=2 height=21>
            <TABLE cellSpacing=0 cellPadding=0 width=449 border=0>
              <TBODY>
              <TR>
                <TD width=32 height=38 rowSpan=2>
                  <P>&nbsp;</P></TD>
                <TD vAlign=center align=middle width=21 bgColor=#eeeeee 
                height=20>
                  <P><FONT face= color=red size=1></FONT></P></TD>
                <TD vAlign=center align=left width=380 bgColor=#eeeeee 
height=20>
                  <P><FONT face=><SPAN style="FONT-SIZE: 9pt">   
                  CD    .<BR></SPAN></FONT></P></TD>
                <TD vAlign=top align=right width=15 bgColor=#eeeeee height=38 
                rowSpan=2>
                  <P>&nbsp;</P></TD></TR>
              <TR>
                <TD vAlign=center align=middle width=21 bgColor=#eeeeee 
                height=18>
                  <P><FONT face= color=red size=1></FONT></P></TD>
                <TD vAlign=center align=left width=380 bgColor=#eeeeee 
height=18>
                  <P><FONT face=><SPAN style="FONT-SIZE: 9pt">   
                  CD </SPAN></FONT></P></TD></TR></TBODY></TABLE></TD></TR>
        <TR>
          <TD width=454 colSpan=2 height=57>
            <TABLE cellSpacing=0 cellPadding=0 width=451 border=0>
              <TBODY>
              <TR>
                <TD width=55>
                  <P>&nbsp;</P></TD>
                <TD width=396>
                  <P><FONT face=><SPAN style="FONT-SIZE: 9pt"><BR>-  
                    <BR>-    <BR>-     
                   <BR>&nbsp;&nbsp;&nbsp;(       
                  )<BR>-        
              </SPAN></FONT></P></TD></TR></TBODY></TABLE></TD></TR>
        <TR>
          <TD width=454 colSpan=2 height=204>
            <TABLE cellSpacing=0 cellPadding=0 width=453 border=0>
              <TBODY>
              <TR>
                <TD width=68>
                  <P>&nbsp;</P></TD>
                <TD width=385>
                  <P><BR>
                    <IMG height=177 
                  src=cid:education-image.gif width=377 
                  border=0><BR>
                    &nbsp;</P></TD></TR></TBODY></TABLE></TD></TR>
        <TR>
          <TD width=454 colSpan=2 height=18>
            <TABLE cellSpacing=0 cellPadding=0 width=454 border=0>
              <TBODY>
              <TR>
                <TD width=37 height=80 rowSpan=3>
                  <P>&nbsp;</P></TD>
                <TD vAlign=center align=middle width=21 bgColor=#eeeeee 
                height=43>
                  <P><FONT face= color=red size=1></FONT></P></TD>
                <TD vAlign=center width=381 bgColor=#eeeeee height=60 
                  rowSpan=2><P><FONT face=><SPAN style="FONT-SIZE: 9pt"><BR> 
                    , ,      CD     
                   ,      </SPAN></FONT></P></TD>
                <TD width=15 bgColor=#eeeeee height=60 rowSpan=2>
                  <P>&nbsp;</P></TD></TR>
              <TR>
                <TD width=21 bgColor=#eeeeee height=13>
                  <P>&nbsp;</P></TD></TR>
              <TR>
                <TD vAlign=center align=middle width=21 bgColor=#eeeeee 
                height=12>
                  <P><FONT face= color=red size=1><BR></FONT></P></TD>
                <TD vAlign=center width=381 bgColor=#eeeeee height=12>
                  <P><FONT face=><SPAN style="FONT-SIZE: 9pt">    (  
                   )</SPAN></FONT></P></TD>
                <TD width=15 bgColor=#eeeeee height=18>
                  <P>&nbsp;</P></TD></TR></TBODY></TABLE></TD></TR>
        <TR>
          <TD align=middle width=454 colSpan=2 height=12>
            <P>&nbsp;</P></TD></TR>
        <TR>
          <TD align=middle width=72 height=199>
            <P><SPAN style="FONT-SIZE: 9pt"></SPAN>&nbsp;</P></TD>
          <TD align=left width=382 height=199>
            <TABLE cellSpacing=1 cellPadding=2 width=340 bgColor=#ff9900 
            border=0>
              <TBODY> 
              <TR> 
                <TD width=197 bgColor=#ffb445 height=23> 
                  <P align=center><FONT face=><B><SPAN 
                  style="FONT-SIZE: 9pt"> CD </SPAN></B></FONT></P>
                </TD>
                <TD width=132 bgColor=#ffb445 height=23> 
                  <P align=center><FONT face=><B><SPAN 
                  style="FONT-SIZE: 9pt"> </SPAN></B></FONT></P>
                </TD>
              </TR>
              <TR>
                <TD width=197 bgColor=#edebeb height=18><font face=><span 
                  style="FONT-SIZE: 9pt">&nbsp;&nbsp;1.  4.0  5.5</span></font></TD>
                <TD width=132 bgColor=#edebeb height=18>
                  <div align="center"><font face=><span 
                  style="FONT-SIZE: 9pt">\25,000</span></font></div>
                </TD>
              </TR>
              <TR> 
                <TD width=197 bgColor=#edebeb height=18><font face=><span 
                  style="FONT-SIZE: 9pt">&nbsp;&nbsp;2.  6.0</span></font></TD>
                <TD width=132 bgColor=#edebeb height=18> 
                  <div align="center"><font face=><span 
                  style="FONT-SIZE: 9pt">\25,000</span></font></div>
                </TD>
              </TR>
              <TR> 
                <TD width=197 bgColor=#edebeb height=18> 
                  <P align=left><FONT face=><SPAN 
                  style="FONT-SIZE: 9pt">&nbsp;&nbsp;3.  4.0</SPAN></FONT></P>
                </TD>
                <TD width=132 bgColor=#edebeb height=18> 
                  <P align=center><FONT face=><SPAN 
                  style="FONT-SIZE: 9pt">\25,000</SPAN></FONT></P>
                </TD>
              </TR>
              <TR> 
                <TD width=197 bgColor=#edebeb height=21> 
                  <P align=left><FONT face=><SPAN 
                  style="FONT-SIZE: 9pt">&nbsp;&nbsp;4.  5.0</SPAN></FONT></P>
                </TD>
                <TD width=132 bgColor=#edebeb height=21> 
                  <P align=center><FONT face=><SPAN 
                  style="FONT-SIZE: 9pt">\25,000 </SPAN></FONT></P>
                </TD>
              </TR>
              <TR> 
                <TD width=197 bgColor=#edebeb height=18> 
                  <P align=left><SPAN 
                  style="FONT-SIZE: 9pt">&nbsp;&nbsp;</SPAN><FONT face=><SPAN 
                  style="FONT-SIZE: 9pt">5.  6.0 </SPAN></FONT></P>
                </TD>
                <TD width=132 bgColor=#edebeb height=18> 
                  <P align=center><FONT face=><SPAN 
                  style="FONT-SIZE: 9pt">\25,000 </SPAN></FONT></P>
                </TD>
              </TR>
              <TR> 
                <TD width=197 bgColor=#edebeb height=18> 
                  <P align=left><FONT face=><SPAN 
                  style="FONT-SIZE: 9pt">&nbsp;&nbsp;6.  8</SPAN></FONT></P>
                </TD>
                <TD width=132 bgColor=#edebeb height=18> 
                  <P align=center><FONT face=><SPAN 
                  style="FONT-SIZE: 9pt">\25,000 </SPAN></FONT></P>
                </TD>
              </TR>
              <TR> 
                <TD width=197 bgColor=#edebeb height=18> 
                  <P align=left><FONT face=><SPAN 
                  style="FONT-SIZE: 9pt">&nbsp;&nbsp;7.  7.2 </SPAN></FONT></P>
                </TD>
                <TD width=132 bgColor=#edebeb height=18> 
                  <P align=center><FONT face=><SPAN 
                  style="FONT-SIZE: 9pt">\25,000 </SPAN></FONT></P>
                </TD>
              </TR>
              <TR> 
                <TD width=197 bgColor=#edebeb height=18> 
                  <P align=left><FONT face=><SPAN 
                  style="FONT-SIZE: 9pt">&nbsp;&nbsp;8.  2000</SPAN></FONT></P>
                </TD>
                <TD width=132 bgColor=#edebeb height=18> 
                  <P align=center><FONT face=><SPAN 
                  style="FONT-SIZE: 9pt">\15,000 </SPAN></FONT></P>
                </TD>
              </TR>
              <TR> 
                <TD width=197 bgColor=#edebeb height=18> 
                  <P align=left><FONT face=><SPAN 
                  style="FONT-SIZE: 9pt">&nbsp;&nbsp;9.  2000</SPAN></FONT></P>
                </TD>
                <TD width=132 bgColor=#edebeb height=18> 
                  <P align=center><FONT face=><SPAN 
                  style="FONT-SIZE: 9pt">\15,000 </SPAN></FONT></P>
                </TD>
              </TR>
              <TR> 
                <TD width=197 bgColor=#edebeb height=18> 
                  <P align=left><FONT face=><SPAN 
                  style="FONT-SIZE: 9pt">&nbsp;&nbsp;10.  2000</SPAN></FONT></P>
                </TD>
                <TD width=132 bgColor=#edebeb height=18> 
                  <P align=center><FONT face=><SPAN 
                  style="FONT-SIZE: 9pt">\15,000 </SPAN></FONT></P>
                </TD>
              </TR>
              <TR> 
                <TD width=197 bgColor=#edebeb height=18> 
                  <P align=left><FONT face=><SPAN 
                  style="FONT-SIZE: 9pt">&nbsp;&nbsp;11.  2000</SPAN></FONT></P>
                </TD>
                <TD width=132 bgColor=#edebeb height=18> 
                  <P align=center><FONT face=><SPAN 
                  style="FONT-SIZE: 9pt">\15,000 </SPAN></FONT></P>
                </TD>
              </TR>
              <TR> 
                <TD width=197 bgColor=#edebeb height=18> 
                  <P align=left><FONT face=><SPAN 
                  style="FONT-SIZE: 9pt">&nbsp;&nbsp;12.  2000</SPAN></FONT></P>
                </TD>
                <TD width=132 bgColor=#edebeb height=18> 
                  <P align=center><FONT face=><SPAN 
                  style="FONT-SIZE: 9pt">\15,000 </SPAN></FONT></P>
                </TD>
              </TR>
              </TBODY> 
            </TABLE>
          </TD></TR>
        <TR>
          <TD align=middle width=72 height=14>
            <P>&nbsp;</P></TD>
          <TD align=left width=382 height=14>
            <P><BR></P>
            <TABLE cellSpacing=1 cellPadding=2 width=340 bgColor=#0087ff 
            border=0>
              <TBODY>
              <TR>
                <TD align=right width=196 bgColor=#66b5fa height=23>
                  <P align=center><FONT face=><SPAN 
                  style="FONT-SIZE: 9pt"><B>  CD </B></SPAN></FONT></P>
                </TD>
                <TD align=right width=133 bgColor=#66b5fa height=23>
                  <P align=center><FONT face=><B><SPAN 
                  style="FONT-SIZE: 9pt"> </SPAN></B></FONT></P></TD></TR>
              <TR>
                <TD align=right width=196 bgColor=#edebeb height=18> 
                  <P align=left><FONT face=><SPAN 
                  style="FONT-SIZE: 9pt">&nbsp;&nbsp;1.  ASP 3.0</SPAN></FONT></P>
                </TD>
                <TD align=right width=133 bgColor=#edebeb height=18>
                  <P align=center><FONT face=><SPAN 
                  style="FONT-SIZE: 9pt">\25,000</SPAN></FONT></P></TD></TR>
              <TR>
                <TD align=right width=196 bgColor=#edebeb height=21> 
                  <P align=left><FONT face=><SPAN 
                  style="FONT-SIZE: 9pt">&nbsp;&nbsp;2. PHP 4.0</SPAN></FONT></P>
                </TD>
                <TD align=right width=133 bgColor=#edebeb height=21>
                  <P align=center><FONT face=><SPAN 
                  style="FONT-SIZE: 9pt">\25,000 </SPAN></FONT></P></TD></TR>
              <TR>
                <TD align=right width=196 bgColor=#edebeb height=18>
                  <P align=left><SPAN 
                  style="FONT-SIZE: 9pt">&nbsp;&nbsp;</SPAN><FONT face=><SPAN 
                  style="FONT-SIZE: 9pt">3.   5.0</SPAN></FONT></P>
                </TD>
                <TD align=right width=133 bgColor=#edebeb height=18>
                  <P align=center><FONT face=><SPAN 
                  style="FONT-SIZE: 9pt">\25,000 
            </SPAN></FONT></P></TD></TR></TBODY></TABLE></TD></TR>
        <TR>
          <TD width=72 height=66>
            <P><SPAN style="FONT-SIZE: 9pt"></SPAN>&nbsp;</P></TD>
          <TD width=382 height=66>
            <P align=left><FONT face= color=red><SPAN style="FONT-SIZE: 9pt"> 
                2       <BR>
              &nbsp;&nbsp;&nbsp;&nbsp;</SPAN><SPAN 
            style="FONT-SIZE: 12pt"><B>&nbsp;  20%  </B></SPAN><SPAN 
            style="FONT-SIZE: 9pt"> <BR>
              &nbsp;&nbsp;&nbsp;&nbsp;    </SPAN></FONT></P>
          </TD></TR>
        <TR>
          <TD width=72 height=15>
            <P>&nbsp;</P></TD>
          <TD width=382 height=15> 
            <P><FONT face= size=2> 
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;E-Mail 
              : <A 
            href="mailto:webmaster@mrpcd.com">webmaster@mrpcd.com</A><br>
                  ,       .</FONT></P>
          </TD></TR>
        <TR>
          <TD width=454 colSpan=2 height=11>
            <P><FONT face= size=2></FONT>&nbsp;</P></TD></TR>
        <TR>
          <TD width=72 height=8>
            <P>&nbsp;</P></TD>
          <TD width=382 height=8>
            <HR color=navy>
          </TD></TR>
        <TR>
          <TD width=72 height=13>
            <P>&nbsp;</P></TD>
          <TD width=382 height=13>
            <P><FONT face= color=gray><SPAN style="FONT-SIZE: 9pt">Copyrights 
              2001 </SPAN></FONT><A target=_blank 
            href="http://www.mrpcd.com/"><SPAN style="FONT-SIZE: 9pt"><FONT 
            face= color=gray></FONT></SPAN></A><FONT face= 
            color=gray><SPAN style="FONT-SIZE: 9pt"> All rights reserved.<BR>
              &nbsp;</SPAN></FONT></P></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE>
<P>&nbsp;</P></BODY></HTML>

--fbulqoakpujkcnuf
Content-Type: image/gif; name="head.gif"
Content-ID: <head.gif>
Content-Transfer-Encoding: base64
Content-Disposition: inline; filename="head.gif"

R0lGODlhxQFSAOYAAP////z49vf39/715Pr18vL09Pfx7930/PDu+PTt6e7u7uLu
8fLp5/vn2//nztDt+vHm4OXl5u7g2fndyf/epd7e3vzWvN7a7bfi+OXW0vnSuf/X
Y/bQtv/MzNbW1sva17zd5K3e9//Mmd7Qy+POxdbWnNLL6czMzM/I5pvV/tbGwPDE
UcPDw9O/uPW4kMa95JzG58O64de4qbu9vb+13YTG1vmseZy+xsmzq9Oum/SndLGx
q++ib96pKb+nnK+k1fCaYMilRfaWVpWqrMyZmaGfn8KeTIKjtaSW0bSXjfmGOfh7
KJeHzKWMY8aJAJCNf/t1G4OLjJyFWP1tDY16yP9mAIl2xYd0w5V5ZGOCkrB3DoNw
v5tyUY10M5lmmXV0bnxnwFp2eHlrS21WuZRSUktkb15gWGZaTIBMfGBGs2tNCE9N
SldKNlg8slM4rlE1rDVESlkouz4+O0gpqkg0IzovFSwtLTsbpSIiIzANoS8NoCIZ
FyUAnQgQDwAAAP4BAiH5BAUUAH8ALAAAAADFAVIAAAf/gACCg4SFhoeIiYqLjI2O
j5CRkpOUlZaXmJmam5ydnp+goaKjpKWmp6ipqqusra6vsLGys7S1tre4ubqHAgK7
v8DBwoq9w7sXTGNtaVQvhb2+xtLT1JRIVEwmhAgv3d7f3heC0NGVBcXViibdCADe
hghjfPP0fHPag+fl6fz9s9ziHrWZ50ZQjHoIE1qxNJBPm3EKFKADsA6ctx9UMmYM
6E6jR4/fOAK49vGHxXAU26hcqRKMxoANYwCgV8hEnoT09KAYFHGiv59AU73AWU8l
EkJuCAqiQRTnwkpJ+RQEICBChAIFBjVsWo+jFa4InwqKCpbewoNgZQKISmPmvG16
/+il2XkBDL07+XoG3ct3FJKyfJgQejPvzVKic9woXvxj0IUYkE8iOUo1WlTDVCtE
iDiIbNnBgOc1HkQ4NJ/GTMHuBDBnXluag5jQw9yZXlsACjYXCNC3t+9MX8veFlSa
tiB6ahWl5jq1XGkwggp40KyANwAwbu7My7O4+2JCKGjQuELeivnz2l0PfvMmPdjh
4sVDjtH67fF57WATt13oB70rgiig2Tm/FWggJBfEFx8T5tUzHADFFYIcIeaBsdph
YE2V1X58AAiAdJpFYB2Gc2hC1oWOuNdOIvWsNltpfIA2D4ojmSVIBB5s5tOB6ezI
YyL7IFLPGORtsUV6YxQSF/8fyZlAj0g03FEfH3ekcZ55lBGypIcKeJBjBBMtR8gF
abgBXT6IIDAfffRk6Ug9hIzB3htT0jMVUYRsQU+ShLiHD44VKLDbj8ZMYMGhg/gI
iqKpMDpOIo/9BZZYY83jjEH6EbIcpSzO81SXX161oZiDoNVcAQoIoidgU30okSII
0FOiICiA9ZBbCY25JB9WiPMDjLcCAOhVIxIKjBJVJHtIA4c2AIChFjgrwhTJOtuI
CM2OQ2AhzFpAgCFBSkKABYbogwg6CDBxRZnuAcZpaZcCgBaTMTy46SHjGWmkjbhN
Z9W/GMYY2zxpELLhqoANwsLCJ5zgZQUQpyovPcEul9D/HG2ciRNehEiK2IqC+Lut
sccmW8UhNiRrAwDIVqEDADqYLIQONOtgw804W8tysi+7SggBNkBhchVQuEBIOTgn
nTS2h5I7iAUmKwGRROFWFnBTeWR0Hj1UDIIADfWNQQV27doXcNfz/UAejGEF6O9m
VgVMyBWeHpIGQt6JrZHCDDvspZcS+zfPmQAIbk8MIhFCzwuyOWTIDzclBAbIgwxY
NcmzWICz0DzT/K0gMbu8cxUiACDC0KijrsEgLff8qiATcJ66Ep8P0kDquCc7BSEa
RD2OVSM/I8gFG08Z7H18dM1hWRxfbRqvblMX0Yaxmg0A3dAbAiOniSzMQsN/e7kh
//bJD0J+wWPig6s78xzfMXZujMGESCBb9Trmt6Scu9SDhP5yyxwAAAdylzqdtc4Q
E6AWAfk3iN4REHUMFKDvMqObYiWKNGC4AhJoEJB5uY9rpAlNqwBgsY3NiT0g7Bd1
fJIpeVDJDXogHIQmxIgI9C184hOEXeaRJfLdQSWRcxzy2CdERYSHQYqZR0Ai5ij8
uSJ0uAvgIHjAs9EFcIDJgoIStrhFHciOECbrGSGWYDIo6IADGqCiyUo3CAJwgAMu
qJkcdSCECQoCi1XgXwFWWLXLDcJjMsSV8maYmPhpbT6Jcx4fuKMYMDwIV6Pp0gol
xEMwvGFXs9HSnjLShu605v9WBWiY30JklQpEA0bJcSFRgkWToRQRAF9T2xiy05Tb
QOwqfnRiKzQgxzomK4IAUKMWFXjFMBqiZScbhMzeOAFBuCBqtXuWAoG5CAdWQQiE
wCM1zzWoRASnfIqbxyAd8ZgLLWecneLDpSSpI4OMoU5NGaEIowM+f0UkImBaHkfY
lpBWtbJ9g0BYWXQiiFsGT5euqBoydSYINapOEDI7pu7ACEFBtGwK0QSdyRgxAQ1o
AI5R05k2HYEqMGEFK/csBAIS1ybwiIckVFhJEKUyiHM2YnE3smc0vokYZiABRfP8
EPgCRbVebIs85CGEusiTESR0AzIX+mcRDYcQjLkEMoX/qECO7ofQhAbpmclagiEc
OrTVAWCC6GhZBGdn0V8ewpoMPesDyzoIPC7Bo29Eowaa1swA5UaronSYxBKBgtIk
53mtsqnXIIMESuFUWDrFFD3y0IYxWAFxkJrTSqZ0h/NkKQInsFwuKTGnlGSspnp4
Qxs0iNlFPIxqXX0FqgZLAAUmSwjRJKvJnGZH1rlVmRUdHTZvFA1rmhW4c02W0ySY
3Dz+7l9eEqWXIjC8K2FJQep73qxIeBeV4CScTCroLV93AQ3SgHKSUCX3CkqsTTQW
qVdgwpqSMzwjbXC+8ymEBxwWqG7GlhWoIgQyTbYEAybLBRYgYxWcNk1DKHitBz5U
/1/VeojTJSuaE0CdFrmohKSJtLmiE28pcTgdRSKET7iqxw/HkJ7t1jRhAVMLxKiz
oUaY4AdWcFMhiLedFT3GQ49AgdpGU4B/3fN1nvlungCjlv3yF7b/BXA5LEw0205h
wslaXcuc1jIoGEJmfZXrggvhyyrEFQAK9nI2e7sIPM5VjAAg5YwhVmLuckUsq71C
fYLVEPfZGSF3UAx5srQcGY93sIa4AI7TUKcRFoIKdwFDG4JIo5osuk5nKgDDwmcZ
sBRCoE0JiJO3Otooi6Ictd1tAxR84NGRi3Nc3ijMtsjqKqwMosotBJVp18Yyw5m5
zhXF2/5F7IDBV888NERU+P8M0B0PuhuLKLR4peeY8cySKy6GJQ0aO9OEPEjIVGA0
VzCj6e/5zQMbKs4VzuNCRyeIBmtiQkbgRE+H4dLUrChHmXkwRZMZbctixrKyxIy6
W4vZaTVGphk5wAPZQeFz0XAoFG4mBA4rgVrHXURHaaYEoQ3CniedrcRIVZvwFmLZ
g7hbESswieWsaMabGSxguANkAICaKNwRCWD0kAbKlLue6OZQzU3lCCfpJ5QiKzW+
P1FcAut6CsMFuKwBUGZcp87gu73RIBJIwCvzpKEgzngDNWADHnQ8dx/nIzSwIrc+
KTE6G4pK8yBdxBwxohe5aXucDx1CnJjpp4egO04yhgT/9YE3IW+4wg8Sp+l6QuyU
dRsE3ZXH9pGsqztl09CTm7j0RQmCAEBIVpht59sqrG7qUGxmzd4odjGbtQI1jh3u
ljB66gIg9M3NOBBsm9yP5yh46KjVPOarn6CvRT/BaV7Dbhnz3ERAqzjU+2s5s7w5
yI++wvuzPeQXr0RMaQ5gADwi9jjUf0GeD2NYkwspn+6yaJ7UnVfFPhrAxkSYXQnN
5GL/iIb/Rpjs9R7wMy5wdkugBEaDCEBgcQM2MzTDULiHO1tkAy6gAQxlb1xFFYPA
Fc1jfI2FVQZhHqMBACfgPeZGYtEHAOWVVCEzHfdkHUywBefFCEVGK20Ag+h1CDWW
/xGPNH4VUH731GlNoRZXsTyBthgeQWTTdYHxRwqO0gBzRDMi4FFSeGaPUDPW4gEs
EICZcDsThQhUNAVdNIEZZQgWGCTlwBXBcgI1dncjaG5AZ4IshwjTVx2NIABFhiNe
4gh2+Hz7tYZA8ldO5je6gRXWkWQIIYQbshWCoQjS8XtKt4SbIACCgghuRkAHiAgT
QGv840d2xwhu5AJAoAhlZnAa4AJSBABUuAjg004GMwjWZV1ZElp+mAg9KF0mSGK2
Vwh42F9Y0UclBX1/I1h/KCDAuF+wxwu/iEPS1V/kIAg49orn8XEHYyeQ4RGSlmnT
dVCQeGp/NWe2p1u503pr9v9bwnIIcXMIn2h2vHeK3DI0ZsdqwwU7FxdiRyOJxChd
rIgmjxBKWUhsz0dK/1KLozRn3hiQgeKPoJWEKIVPxEZnt7hfHnBk+DRnJCZKBfmP
D/k3fGQ1jxCRqlIWoJSEj7iNmCCJfChKtjeAHCY7dCUsgRWHBOB0inCOAmQDCch7
qcOOz8IBOjBgbFVXbGYI0ZWNQVJ5dwdagZWUSul4CGk/EjliSqmQWMGHGWmCUVmV
0ZWUWKmRuhEN0OAIoGV7N9dP0SGSJFkKdkiM0ZWLicBqH3dDyJVMMwl2ybUEQsCO
ILYEcDZSrsVf93Y0EhmYR4aUS1mYozSIIXdS5FBSWcn/lL2IKg5ZlRTZmOcGh5EZ
WIKSmI0Ic13plSInmBLZMLY3HkzlDWtiMGZ5lkx4h9B3jIowNG/phnGZVwzHA7YJ
BAeYkrmjRTogjgSnYR22XONYBWJlO7T5OX+jI2aYG1tpi1v5MJ0JDQEwndRJnckY
Pmq3h8WIncyHkNvJnQAZkH+DaAZDSkVVDtrZnCfAliRVhqqJliXFh6JyUsUSk+So
lHFJQPwWZ3dkMmCoAyIwhg7mnx0WoOfSn8klRdCpjen5nNNBkBDqjYLCeYdAjPnE
gwRpZNNzUhN5SxW6oQtZSozYi5eDd5mpmEaVmJ1IUu+5CmnpfIBli7ZnTQzknPmZ
/zv7GYcTgJupCJiDAAQ8epSCwIVzpaAs6F8GA4hYeWgM2ZQxZy6TEGA1pKEoSg5G
lVLjpw9WOhHwgz6gsEfEdqJTGZAn0KL5dqUn6XiCYE37KQBDBTE3SpwWd4BxKIPM
2Yd6eKda+Ju5Y6T9ZUHa0o0RKqGaqZlbagmzCBCGMD1Wyk1GWS5amk4CcwjcwA6V
8JKz2Ij7BSRfGQvv8Awj2SPXqZF3VHETNw7QSZOQoKqAiZHhs56zGKiu6mT9E4VN
41ECqlWBwigv6qROOaECUJ3CCqiL0DgPERzccwFjEER5MAYiEauN4Eomx6h+VA9f
s21YIlnhFQOvmAYn9K0fJ/9K0BpKDZOBkScJgvdoH8EEJ9EN+LAPL6Bye/KsxFqP
oXoLePePc5YIoEJU5NkI5Bem+nqLKCmwk6mMZSoJuioo9VoZhWqoFAoJwVEQwVFz
I9Ft23Eh91oqNGQ/I9MNDIIdmNQ2EzN81/M8g2CRNeWs+QA+5soHOvYIweFi1RMa
gXQdTeEm0YAEKwEGItGp1WCi/gitoDKI/wqq5FABJFiC6hlYDsqejACRf6oI1Lml
jfoI3WAShSBvVKAW2GMYLlRzHoMTepA4FfECN3gI83IbzycqgwBPXOEhy9EW5ANj
IphDHEJuy/eybfE1awIO13BBAOBCxlFCk1IIqkQUF7L/IYKXbPmwGw0LDCk6W8Cj
D9QJKluFUniokQT5qob5kBAaiJVJYhTpq+LZmCwYsZvAL0D4FF87Qx3iGLvyBj+w
bVPipZUCFrg7tyI2ibnLFXpAJLfBu+XlHkiFXx54t3W6HOiDdHHIu8wjuBEyCIWF
QmXhJlQ1BkgQA0hAFs0jMTwlGjwBZfxADoC4lCJzUlSJlVdpmeE5YqDbneLpnFiZ
j6bwHyc3Dx7yulEBZDsUu0hBD5RTNk6hKfyxd0SVcm4AT+2SB1BywLA7qapofAAg
rwGBdKPJH+6nj9P7CFNCX+6hY6q0GhuSIEggr80DPBurC/lKmaMErJDpoOCZoVQa
/3IwCqFheqITKcNJh5aDkB4WWxr7OzjHB8AR/DgQnGJNUXO8G2f2VCyqNAbtUBeR
g2J/diEw0ggQ6RiZ5HsZrB53ACM8B4vawiGOxgjucSE8xgc3iwCR4yGzSD4B4bGR
Kw1p+Z06tXbw676ciZASqaVWSrkaek+AjKZ4fIs0VseaUA6XUQhCLAjYsxBRkRwd
zLEmWwjxoX4t9WL4MW3KOQhLgrsA0DjN82cBbDbxaZC1OFiJOxzS8cUmhytn/Lhm
HAn0FjDDwcgEEx3sKXx8YEuWsxcmub7jZS5oaro5LKYhd7WgWqjMLKuD2sceu8KT
oMt8YBiEkVpbAsk4Qcnbgf/El7wIqkRfJAdzegFL9BCCwyPAnCzBZDG+gYkjDsPF
9ZAH9QPLh6UUOOiapdFZGaQwjqcZLyvB0vYhuRgVGmIIjcMHqzFe1JwLxxymUOqw
nwmaVUoO1PkI0jmdi9CrgyyYJGoK6IDQEcwvdUtDg0sPiygICDAlaats9GB4JAed
WLoc3YfOltLOpyzBiIAjrJwQuPu8KE0xUzORLNB+CME3lRmHvnw8y6HOb0vEH1II
SLAkeVA5TMQXk0vIE50oVvvVqssJk/uwh3oKI60UlmS92XPS4WwxvYIASOAeMhTQ
B50pNld89kR9NbvSguAxIENyR8wIdbrGUrLJGPhnHEH/1Jnxqke9PPpxQ9MVMMdT
s1YcMD73kQgxSAsLrf5gtdUwrKDdCmdNU+D1FP9bD92XuBeDXiM4VAP9aXgtPYOV
HnmgPjSwJC5mODISGOehL/oyx4OgSoU3WYkD2IotAMEorhzSBlrDNyx4P8sRSDDi
JrfdY1p310NCCK/F2WbqRKPtaOmcu2PwAvVx06ptJzfY2vz1su6DML5HVFJaI9sB
BmDQLurs3n33Hjt2F4Kw0Nlm3M0mAPKbi6WBTlONCEgwJzpmMdp7wvWQHGKZE5TS
r77b3VH23ZSkTrnbNQ1x0yNRJ3MgX0yAHXlgSyUYh2vc3nhttDstObBtPfxEFI9E
/z5ZshVMnCmKvQgFDglCti6JUQinnRB8bXvvRiOauqsWbmro0G4ZfilRweE5DQ8x
wGhugLEm7jcjtyfRgdmTKpVGiQDymhN8zeWEkNYs4QZpcGz0sySl7Mb0cCEeA15+
dghLYuBjwq1ykhClLAgYOw96QAgCnQiaCn9J/l/oMLOQoS7jvOHrMzxjc0ll4SEJ
yYLOyC/TSNoAIJJ4tw8xMEuKMT+H8G47GAkIo2Pzcgcrgt/IM0LX2liJLU6YvAV5
/hkZfhN5EDmtsof8ip1/yQohIAgYQAjB/uuEQOyFHgqHnha5Kxj6wdZ6zgwxsCIJ
qRnRQD6LKDGr0iqabpJ+xP+tV7IFtRsfifQICMDmh/C/fKLquMJII/vLL8sprBJ+
hoc8t5LjW47dmIHcy8iwvm4Iwx7swP4AD1AIIHDsnpDsXKEWk9zoJ7tKaGuOoWUV
1d6xmN0c215krmkI4ZsQ2KcICaJBle645RjVbEzmA11LLzvmBNwmlZbh9d5shrAq
euuDYb0Jxv7rvy7wISAAD4AAOw8AAD/shrAA66uR3G3w9SgIVlBIh7TQCm+y+iE4
VXJZKWQI086K8qoW2K7PyE1qV7rZnbrxhwgpeO4ZtHEB7aHduYgCedBD81DKZMse
GcQEIIPSHAJ+SKBKjODLdzBv26ESjibz9aaQHH0KNy//CL+OASHw779+AAIP9ABf
CA8wBGEAB3jQB32wB5qPB2uwA4ps8E2kJpCxIguvH4qmc7CepLUYWfJCHq1y6Rbv
9fm6neD79seWKQki6zFeD3++DYMAWo09PHOjz5AcX6O/CDQUDbVLIXYtidFgSe2u
ZII+VBOKCsSO8wBw/dmP/SEQAggg9Iif/QhwAEdgB5z/BUWwAziw/i2wA2FgB52P
9MRQ86VvPYaQQhiPupM0foLA5FSRmoAAUKAQUeFx6BEBAHDFx+e2GOnIFwlwN4mZ
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
* PR# 956 *
Subject: unbelievable parser bug
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Tue, 29 May 2001 14:25:00 +0200
-- no notes --
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 956 <==
From maechler@stat.math.ethz.ch  Tue May 29 14:25:18 2001
Received: from stat.math.ethz.ch (daemon@hypatia.ethz.ch [129.132.58.23])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id OAA22273
	for <R-bugs@biostat.ku.dk>; Tue, 29 May 2001 14:25:17 +0200 (MET DST)
Received: (from daemon@localhost)
	by stat.math.ethz.ch (8.9.1/8.9.1) id OAA27954
	for <R-bugs@stat.math.ethz.ch>; Tue, 29 May 2001 14:25:11 +0200 (MET DST)
Received: from deb(129.132.58.43), claiming to be "deb.ethz.ch"
 via SMTP by hypatia, id smtpdAAAa006oD; Tue May 29 14:25:01 2001
Received: (maechler@localhost) by deb.ethz.ch (8.9.3/D-MATH-client) id OAA30664; Tue, 29 May 2001 14:25:01 +0200
X-Authentication-Warning: deb.ethz.ch: maechler set sender to maechler@stat.math.ethz.ch using -f
From: Martin Maechler <maechler@stat.math.ethz.ch>
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Message-ID: <15123.38172.917870.753663@gargle.gargle.HOWL>
Date: Tue, 29 May 2001 14:25:00 +0200
To: R-bugs@stat.math.ethz.ch
Subject: unbelievable parser bug
X-Mailer: VM 6.92 under Emacs 20.7.1
Reply-To: Martin Maechler <maechler@stat.math.ethz.ch>
Content-Transfer-Encoding: 8bit
X-MIME-Autoconverted: from quoted-printable to 8bit by pubhealth.ku.dk id OAA22273

close to ``unbelievable'' but the following line
is not parsed correctly but gives a syntax error :

    x <- 1## A = 1


--please do not edit the information below--

Version:
 platform = i686-pc-linux-gnu
 arch = i686
 os = linux-gnu
 system = i686, linux-gnu
 status = 
 major = 1
 minor = 2.3
 year = 2001
 month = 04
 day = 26
 language = R

Search Path:
 .GlobalEnv, package:ctest, Autoloads, package:base

==> 956.reply.1 <==
From leisch@ci.tuwien.ac.at  Tue May 29 14:35:05 2001
Received: from fangorn.ci.tuwien.ac.at (root@fangorn.ci.tuwien.ac.at [128.131.51.24])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id OAA22453
	for <R-bugs@biostat.ku.dk>; Tue, 29 May 2001 14:35:04 +0200 (MET DST)
Received: from galadriel.ci.tuwien.ac.at (root@galadriel.ci.tuwien.ac.at [128.131.51.37])
	by fangorn.ci.tuwien.ac.at (8.9.3/8.8.5) with ESMTP id OAA08465;
	Tue, 29 May 2001 14:31:16 +0200
Received: (from leisch@localhost)
	by galadriel.ci.tuwien.ac.at (8.9.3/8.8.5) id OAA24190;
	Tue, 29 May 2001 14:34:51 +0200
From: Friedrich Leisch <Friedrich.Leisch@ci.tuwien.ac.at>
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit
Message-ID: <15123.38763.364918.656351@galadriel.ci.tuwien.ac.at>
Date: Tue, 29 May 2001 14:34:51 +0200
To: maechler@stat.math.ethz.ch
Cc: r-devel@stat.math.ethz.ch, R-bugs@biostat.ku.dk
Subject: Re: [Rd] unbelievable parser bug (PR#956)
In-Reply-To: <200105291225.OAA22283@pubhealth.ku.dk>
References: <200105291225.OAA22283@pubhealth.ku.dk>
X-Mailer: VM 6.89 under Emacs 20.7.2

>>>>> On Tue, 29 May 2001 14:25:19 +0200 (MET DST),
>>>>> maechler  (m) wrote:

  > close to ``unbelievable'' but the following line
  > is not parsed correctly but gives a syntax error :

  >     x <- 1## A = 1


what you don't see is that the ``spaces'' before the comment are no
spaces: if I copy & paste the thing to a vi buffer I see:

	 x <- 1\xa0\xa0## A = 1

...

I got the idea from sequentially deleting characters:

> x <- 1## A = 1
Error: syntax error
> x <- 1# A = 1
Error: syntax error
> x <- 1# A    
Error: syntax error
> x <- 1#   
Error: syntax error
> x <- 1
Error: syntax error


especially the last one look nice IMO ...

.f



==> 956.reply.2 <==
From maechler@stat.math.ethz.ch  Tue May 29 15:11:00 2001
Received: from stat.math.ethz.ch (daemon@hypatia.ethz.ch [129.132.58.23])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id PAA23643
	for <R-bugs@biostat.ku.dk>; Tue, 29 May 2001 15:10:58 +0200 (MET DST)
Received: (from daemon@localhost)
	by stat.math.ethz.ch (8.9.1/8.9.1) id PAA05029;
	Tue, 29 May 2001 15:10:52 +0200 (MET DST)
Received: from lynne(129.132.58.30), claiming to be "lynne.ethz.ch"
 via SMTP by hypatia, id smtpdAAAa001EP; Tue May 29 15:10:45 2001
Received: (maechler@localhost) by lynne.ethz.ch (8.9.3/D-MATH-client) id PAA01540; Tue, 29 May 2001 15:10:43 +0200
X-Authentication-Warning: lynne.ethz.ch: maechler set sender to maechler@stat.math.ethz.ch using -f
From: Martin Maechler <maechler@stat.math.ethz.ch>
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Message-ID: <15123.40915.410487.468557@gargle.gargle.HOWL>
Date: Tue, 29 May 2001 15:10:43 +0200
To: Friedrich Leisch <Friedrich.Leisch@ci.tuwien.ac.at>
Cc: R-bugs@biostat.ku.dk
Subject: Re: [Rd] unbelievable parser bug (PR#956)
In-Reply-To: <15123.38763.364918.656351@galadriel.ci.tuwien.ac.at>
References: <200105291225.OAA22283@pubhealth.ku.dk>
	<15123.38763.364918.656351@galadriel.ci.tuwien.ac.at>
X-Mailer: VM 6.92 under Emacs 20.7.1
Reply-To: Martin Maechler <maechler@stat.math.ethz.ch>
Content-Transfer-Encoding: 8bit
X-MIME-Autoconverted: from quoted-printable to 8bit by pubhealth.ku.dk id PAA23643

>>>>> "FrL" == Friedrich Leisch <Friedrich.Leisch@ci.tuwien.ac.at> writes:

>>>>> On Tue, 29 May 2001 14:25:19 +0200 (MET DST),
>>>>> maechler  (m) wrote:

    >> close to ``unbelievable'' but the following line is not parsed
    >> correctly but gives a syntax error :

    >> x <- 1## A = 1


    FrL> what you don't see is that the ``spaces'' before the comment are
    FrL> no spaces: if I copy & paste the thing to a vi buffer I see:

    FrL> 	 x <- 1\xa0\xa0## A = 1

    FrL> ...

    FrL> I got the idea from sequentially deleting characters:

    >> x <- 1## A = 1
    FrL> Error: syntax error
    >> x <- 1# A = 1
    FrL> Error: syntax error
    >> x <- 1# A
    FrL> Error: syntax error
    >> x <- 1#
    FrL> Error: syntax error
    >> x <- 1
    FrL> Error: syntax error


    FrL> especially the last one look nice IMO ...

;-)  

thank you, Fritz.   
Now what about a "morale of the story" (<< probably a Germanism) ?

Don't cut and paste from e-mails any more, unless you have a really
ASCII only e-mail program or editor into which you paste.
Unfortunately, emacs doesn't seem to be among these anymore...  
aaargghh...

Martin

==> 956.reply.3 <==
From pd@blueberry.kubism.ku.dk  Tue May 29 16:20:14 2001
Received: from blueberry.kubism.ku.dk (blueberry [130.225.108.193])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id QAA24605;
	Tue, 29 May 2001 16:20:13 +0200 (MET DST)
Received: (from pd@localhost)
	by blueberry.kubism.ku.dk (8.9.3/8.9.3) id QAA08345;
	Tue, 29 May 2001 16:25:22 +0200
Sender: pd@pubhealth.ku.dk
To: maechler@stat.math.ethz.ch
Cc: r-devel@stat.math.ethz.ch, R-bugs@biostat.ku.dk
Subject: Re: [Rd] unbelievable parser bug (PR#956)
References: <200105291311.PAA23674@pubhealth.ku.dk>
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 29 May 2001 16:25:22 +0200
In-Reply-To: maechler@stat.math.ethz.ch's message of "Tue, 29 May 2001 15:11:05 +0200 (MET DST)"
Message-ID: <x2itikb5bh.fsf@blueberry.kubism.ku.dk>
Lines: 40
X-Mailer: Gnus v5.7/Emacs 20.7
Mime-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 8bit

maechler@stat.math.ethz.ch writes:

> >>>>> "FrL" == Friedrich Leisch <Friedrich.Leisch@ci.tuwien.ac.at> writes:
> 
> >>>>> On Tue, 29 May 2001 14:25:19 +0200 (MET DST),
> >>>>> maechler  (m) wrote:
> 
>     >> close to ``unbelievable'' but the following line is not parsed
>     >> correctly but gives a syntax error :
> 
>     >> x <- 1## A = 1
> 
> 
>     FrL> what you don't see is that the ``spaces'' before the comment are
>     FrL> no spaces: if I copy & paste the thing to a vi buffer I see:
> 
>     FrL> 	 x <- 1\xa0\xa0## A = 1
....
> 
> ;-)  
> 
> thank you, Fritz.   
> Now what about a "morale of the story" (<< probably a Germanism) ?
> 
> Don't cut and paste from e-mails any more, unless you have a really
> ASCII only e-mail program or editor into which you paste.
> Unfortunately, emacs doesn't seem to be among these anymore...  
> aaargghh...


Hmm. 0xa0 is M-SPC. These are fairly easily generated on non-English
keyboards: both Alt_L+SPC and AltGr+SPC on mine (and those three keys
are adjacent). It might make sense to force the parser to accept the
"metafied" whitespace characters?

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

==> 956.reply.4 <==
From maechler@stat.math.ethz.ch  Tue May 29 16:28:02 2001
Received: from stat.math.ethz.ch (daemon@hypatia.ethz.ch [129.132.58.23])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id QAA24707;
	Tue, 29 May 2001 16:28:01 +0200 (MET DST)
Received: (from daemon@localhost)
	by stat.math.ethz.ch (8.9.1/8.9.1) id QAA15543;
	Tue, 29 May 2001 16:27:56 +0200 (MET DST)
Received: from lynne(129.132.58.30), claiming to be "lynne.ethz.ch"
 via SMTP by hypatia, id smtpdAAAa003mo; Tue May 29 16:27:54 2001
Received: (maechler@localhost) by lynne.ethz.ch (8.9.3/D-MATH-client) id QAA01790; Tue, 29 May 2001 16:27:53 +0200
X-Authentication-Warning: lynne.ethz.ch: maechler set sender to maechler@stat.math.ethz.ch using -f
From: Martin Maechler <maechler@stat.math.ethz.ch>
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Message-ID: <15123.45545.836749.75265@gargle.gargle.HOWL>
Date: Tue, 29 May 2001 16:27:53 +0200
To: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Cc: R-bugs@biostat.ku.dk
Subject: Re: [Rd] unbelievable parser bug (PR#956)
In-Reply-To: <x2itikb5bh.fsf@blueberry.kubism.ku.dk>
References: <200105291311.PAA23674@pubhealth.ku.dk>
	<x2itikb5bh.fsf@blueberry.kubism.ku.dk>
X-Mailer: VM 6.92 under Emacs 20.7.1
Reply-To: Martin Maechler <maechler@stat.math.ethz.ch>
Content-Transfer-Encoding: 8bit
X-MIME-Autoconverted: from quoted-printable to 8bit by pubhealth.ku.dk id QAA24707

>>>>> "PD" == Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk> writes:

    PD> maechler@stat.math.ethz.ch writes:
    >> >>>>> "FrL" == Friedrich Leisch <Friedrich.Leisch@ci.tuwien.ac.at>
    >> writes:
    >> 
    >> >>>>> On Tue, 29 May 2001 14:25:19 +0200 (MET DST), >>>>> maechler
    >> (m) wrote:
    >> 
    >> >> close to ``unbelievable'' but the following line is not parsed >>
    >> correctly but gives a syntax error :
    >> 
    >> >> x <- 1## A = 1
    >> 
    >> 
    FrL> what you don't see is that the ``spaces'' before the comment are
    FrL> no spaces: if I copy & paste the thing to a vi buffer I see:
    >>
    FrL> x <- 1\xa0\xa0## A = 1
    PD> ....
    >>  ;-)
    >> 
    >> thank you, Fritz.  Now what about a "morale of the story" (<<
    >> probably a Germanism) ?

in the mean time I've learned:   ``moral of the story'' (is no Germanism)

    >> Don't cut and paste from e-mails any more, unless you have a really
    >> ASCII only e-mail program or editor into which you paste.
    >> Unfortunately, emacs doesn't seem to be among these anymore...
    >> aaargghh...


    PD> Hmm. 0xa0 is M-SPC. These are fairly easily generated on
    PD> non-English keyboards: both Alt_L+SPC and AltGr+SPC on mine (and
    PD> those three keys are adjacent). 

Thank you Peter;
in this cases, they text was from an e-mail (from a `R for MacOS' user who
 most proably had a SwissGerman keyboard {but probably no Emacs..})) but it
was smart Emacs (VM) dealing ``automagically'' with strange encodings ...

    PD> It might make sense to force the
    PD> parser to accept the "metafied" whitespace characters?

yes, I think that might be useful and make sense.
Compatibility with S(plus) might be a point here, but then we *do* have
locale dependent syntax anyway.

Martin
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
* PR# 970 *
Subject: error in dbeta
From: pwolf@wiwi.uni-bielefeld.de
Date: Wed, 6 Jun 2001 18:31:30 +0200 (MET DST)
-- no notes --
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 970 <==
From pwolf@wiwi.uni-bielefeld.de  Wed Jun  6 18:31:30 2001
Received: from blueberry.kubism.ku.dk (blueberry [130.225.108.193])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id SAA27368
	for <R-bugs@biostat.ku.dk>; Wed, 6 Jun 2001 18:31:30 +0200 (MET DST)
Date: Wed, 6 Jun 2001 18:31:30 +0200 (MET DST)
From: pwolf@wiwi.uni-bielefeld.de
Message-Id: <200106061631.SAA27368@pubhealth.ku.dk>
To: R-bugs@biostat.ku.dk
Subject: error in dbeta

Full_Name: Hans Peter Wolf
Version: 1.2.1
OS: hpux10.20
Submission from: (NULL) (129.70.84.25)


dbeta computes a wrong result with parameters (1.3,1)

> version                
platform hppa2.0-hp-hpux10.20
arch     hppa2.0             
os       hpux10.20           
system   hppa2.0, hpux10.20  
status                       
major    1                   
minor    2.1                 
year     2001                
month    01                  
day      15                  
language R                   
> dbeta((0:5)/5,1.3,1.0)
[1] 0.0 0.0 0.0 0.0 0.0 1.3
> dbeta((0:5)/5,1.30001,1.0)
[1] 0.0000000 0.8021373 0.9875537 1.1152952 1.2158296 1.3000100
> dbeta((0:5)/5,1.29999,1.0)
[1] 0.0000000 0.8021508 0.9875566 1.1152895 1.2158163 1.2999900


==> 970.reply.1 <==
From pd@blueberry.kubism.ku.dk  Wed Jun  6 18:41:50 2001
Received: from blueberry.kubism.ku.dk (blueberry [130.225.108.193])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id SAA27453;
	Wed, 6 Jun 2001 18:41:49 +0200 (MET DST)
Received: (from pd@localhost)
	by blueberry.kubism.ku.dk (8.9.3/8.9.3) id SAA22871;
	Wed, 6 Jun 2001 18:48:10 +0200
Sender: pd@pubhealth.ku.dk
To: pwolf@wiwi.uni-bielefeld.de
Cc: r-devel@stat.math.ethz.ch, R-bugs@biostat.ku.dk
Subject: Re: [Rd] error in dbeta (PR#970)
References: <200106061631.SAA27378@pubhealth.ku.dk>
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 06 Jun 2001 18:48:08 +0200
In-Reply-To: pwolf@wiwi.uni-bielefeld.de's message of "Wed, 6 Jun 2001 18:31:31 +0200 (MET DST)"
Message-ID: <x266e95zcn.fsf@blueberry.kubism.ku.dk>
Lines: 38
X-Mailer: Gnus v5.7/Emacs 20.7
Mime-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: 7bit

pwolf@wiwi.uni-bielefeld.de writes:

> Full_Name: Hans Peter Wolf
> Version: 1.2.1
> OS: hpux10.20
> Submission from: (NULL) (129.70.84.25)
> 
> 
> dbeta computes a wrong result with parameters (1.3,1)
> 
> > version                
> platform hppa2.0-hp-hpux10.20
> arch     hppa2.0             
> os       hpux10.20           
> system   hppa2.0, hpux10.20  
> status                       
> major    1                   
> minor    2.1                 
> year     2001                
> month    01                  
> day      15                  
> language R                   
> > dbeta((0:5)/5,1.3,1.0)
> [1] 0.0 0.0 0.0 0.0 0.0 1.3
> > dbeta((0:5)/5,1.30001,1.0)
> [1] 0.0000000 0.8021373 0.9875537 1.1152952 1.2158296 1.3000100
> > dbeta((0:5)/5,1.29999,1.0)
> [1] 0.0000000 0.8021508 0.9875566 1.1152895 1.2158163 1.2999900

Hm. Doesn't happen with 1.2.3 on Linux and dbeta.c hasn't changed
inbetween. Any chance of getting you to step through the computations
with a debugger on you machine?

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

==> 970.followup.1 <==
From ripley@stats.ox.ac.uk  Wed Jun  6 18:48:22 2001
Received: from toucan.stats.ox.ac.uk (toucan.stats.ox.ac.uk [163.1.20.20])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id SAA27483;
	Wed, 6 Jun 2001 18:48:21 +0200 (MET DST)
Received: from gannet.stats (IDENT:root@gannet.stats [163.1.20.127])
	by toucan.stats.ox.ac.uk (8.9.0/8.9.0) with ESMTP id RAA13065;
	Wed, 6 Jun 2001 17:47:25 +0100 (BST)
Received: from localhost (ripley@localhost)
	by gannet.stats (8.11.3/8.11.3) with ESMTP id f56GlPa01819;
	Wed, 6 Jun 2001 17:47:25 +0100
X-Authentication-Warning: gannet.stats: ripley owned process doing -bs
Date: Wed, 6 Jun 2001 17:47:25 +0100 (BST)
From: Prof Brian Ripley <ripley@stats.ox.ac.uk>
X-X-Sender:  <ripley@gannet.stats>
To: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
cc: <pwolf@wiwi.uni-bielefeld.de>, <R-bugs@biostat.ku.dk>
Subject: Re: [Rd] error in dbeta (PR#970)
In-Reply-To: <x266e95zcn.fsf@blueberry.kubism.ku.dk>
Message-ID: <Pine.LNX.4.31.0106061745270.1709-100000@gannet.stats>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII

On 6 Jun 2001, Peter Dalgaard BSA wrote:

> pwolf@wiwi.uni-bielefeld.de writes:
>
> > Full_Name: Hans Peter Wolf
> > Version: 1.2.1
> > OS: hpux10.20
> > Submission from: (NULL) (129.70.84.25)
> >
> >
> > dbeta computes a wrong result with parameters (1.3,1)
> >
> > > version
> > platform hppa2.0-hp-hpux10.20
> > arch     hppa2.0
> > os       hpux10.20
> > system   hppa2.0, hpux10.20
> > status
> > major    1
> > minor    2.1
> > year     2001
> > month    01
> > day      15
> > language R
> > > dbeta((0:5)/5,1.3,1.0)
> > [1] 0.0 0.0 0.0 0.0 0.0 1.3
> > > dbeta((0:5)/5,1.30001,1.0)
> > [1] 0.0000000 0.8021373 0.9875537 1.1152952 1.2158296 1.3000100
> > > dbeta((0:5)/5,1.29999,1.0)
> > [1] 0.0000000 0.8021508 0.9875566 1.1152895 1.2158163 1.2999900
>
> Hm. Doesn't happen with 1.2.3 on Linux and dbeta.c hasn't changed
> inbetween. Any chance of getting you to step through the computations
> with a debugger on you machine?

It does happen on Solaris 2.7, though, which might give Peter a means
to look at it on an earlier Solaris.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


==> 970.reply.2 <==
From pd@blueberry.kubism.ku.dk  Wed Jun  6 19:12:27 2001
Received: from blueberry.kubism.ku.dk (blueberry [130.225.108.193])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id TAA27641;
	Wed, 6 Jun 2001 19:12:26 +0200 (MET DST)
Received: (from pd@localhost)
	by blueberry.kubism.ku.dk (8.9.3/8.9.3) id TAA22984;
	Wed, 6 Jun 2001 19:18:47 +0200
Sender: pd@pubhealth.ku.dk
To: Prof Brian Ripley <ripley@stats.ox.ac.uk>
Cc: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>,
        <pwolf@wiwi.uni-bielefeld.de>, <R-bugs@biostat.ku.dk>
Subject: Re: [Rd] error in dbeta (PR#970)
References: <Pine.LNX.4.31.0106061745270.1709-100000@gannet.stats>
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 06 Jun 2001 19:18:46 +0200
In-Reply-To: Prof Brian Ripley's message of "Wed, 6 Jun 2001 17:47:25 +0100 (BST)"
Message-ID: <x2zobl4jd5.fsf@blueberry.kubism.ku.dk>
Lines: 29
X-Mailer: Gnus v5.7/Emacs 20.7
Mime-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: 7bit

Prof Brian Ripley <ripley@stats.ox.ac.uk> writes:

> > > > dbeta((0:5)/5,1.3,1.0)
> > > [1] 0.0 0.0 0.0 0.0 0.0 1.3
> > > > dbeta((0:5)/5,1.30001,1.0)
> > > [1] 0.0000000 0.8021373 0.9875537 1.1152952 1.2158296 1.3000100
> > > > dbeta((0:5)/5,1.29999,1.0)
> > > [1] 0.0000000 0.8021508 0.9875566 1.1152895 1.2158163 1.2999900
> >
> > Hm. Doesn't happen with 1.2.3 on Linux and dbeta.c hasn't changed
> > inbetween. Any chance of getting you to step through the computations
> > with a debugger on you machine?
> 
> It does happen on Solaris 2.7, though, which might give Peter a means
> to look at it on an earlier Solaris.

Indeedy. Looks like we're passing a-1 and a+b-2 on to dbinom_raw as x
and n respectively and this comes out with x > n due to roundoff so we
get zero returned.

Argh, how does one fix that?

(It's usually the intel FPUs that pull that kind of stunt on us...)

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
* PR# 968 *
Subject: a bug?
From: Michael Lavine <michael@stat.duke.edu>
Date: Tue, 5 Jun 2001 10:15:13 -0400
-- no notes --
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 968 <==
From postmaster@franz.stat.wisc.edu  Tue Jun  5 16:15:33 2001
Received: from franz.stat.wisc.edu (root@franz.stat.wisc.edu [128.105.174.95])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id QAA15328
	for <r-bugs@biostat.ku.dk>; Tue, 5 Jun 2001 16:15:27 +0200 (MET DST)
Received: from isds.duke.edu (really [152.3.22.1]) by franz.stat.wisc.edu
	via smail with esmtp
	id <m157Hc8-000JIqC@franz.stat.wisc.edu> (Debian Smail3.2.0.111)
	for <r-bugs@r-project.org>; Tue, 5 Jun 2001 09:15:20 -0500 (CDT) 
Received: from lake.isds.duke.edu (lake.isds.duke.edu [152.3.22.44])
	by isds.duke.edu (8.11.3/8.11.3) with ESMTP id f55EFEf25685;
	Tue, 5 Jun 2001 10:15:14 -0400 (EDT)
Received: (from michael@localhost)
	by lake.isds.duke.edu (8.11.3/8.11.3) id f55EFDZ12451;
	Tue, 5 Jun 2001 10:15:13 -0400 (EDT)
Date: Tue, 5 Jun 2001 10:15:13 -0400
From: Michael Lavine <michael@stat.duke.edu>
To: r-bugs@r-project.org
Cc: Michael Lavine <michael@stat.duke.edu>
Subject: a bug?
Message-ID: <20010605101513.A12562@lake.isds.duke.edu>
Mime-Version: 1.0
Content-Type: multipart/mixed; boundary="T4sUOijqQbZv57TR"
Content-Disposition: inline
User-Agent: Mutt/1.2.5i


--T4sUOijqQbZv57TR
Content-Type: text/plain; charset=us-ascii
Content-Disposition: inline

Dear R,

I would like to report what I think is a bug in R.  I am running R
within emacs on a Digital AlphaStation.  See the version information
at the end of my R session for details.  I also attach a copy of the
file that is read in the `read.table' command.

Here's my R session, with a few comments added in to show what I
think is wrong:

#############################################################################
R : Copyright 2000, The R Development Core Team
Version 1.0.1  (April 14, 2000)

R is free software and comes with ABSOLUTELY NO WARRANTY.
You are welcome to redistribute it under certain conditions.
Type	"?license" or "?licence" for distribution details.

R is a collaborative project with many contributors.
Type	"?contributors" for a list.

Type	"demo()" for some demos, "help()" for on-line help, or
    	"help.start()" for a HTML browser interface to help.
Type	"q()" to quit R.

[Previously saved workspace restored]

> mohan <- read.table ( "mohan.dat", header=T )
> sapply ( mohan, data.class )
$SEEDID
[1] "numeric"

$LINEAGE
[1] "factor"

$POP
[1] "factor"

$REGION
[1] "factor"

$CARBON
[1] "NULL"                        <-- WRONG

$DAY
[1] "numeric"

$GERM
NULL                              <-- WRONG

> for ( i in 1:7 ) print ( length ( unique ( mohan[,i] ) ) )
[1] 3432
[1] 29
[1] 7
[1] 4
[1] 0                             <-- WRONG
[1] 3
[1] 2
> version
         _               
platform alpha-dec-osf4.0
arch     alpha           
os       osf4.0          
system   alpha, osf4.0   
status                   
major    1               
minor    0.1             
year     2000            
month    April           
day      14              
language R               
##############################################################################










For comparison, here's the same thing done in S-Plus
##############################################################################
License Warning : 00 license expires Tue Jul 31 23:59:59 2001
S-PLUS : Copyright (c) 1988, 1996 MathSoft, Inc.
S : Copyright AT&T.
Version 3.4 Release 1 for DEC alpha, Digital UNIX (OSF/1) V3.2 : 1996 
Working data will be in /lake/local/michael/.Data 
> mohan <- read.table ( "mohan.dat", header=T )
> sapply ( mohan, data.class ) # print the mode of each variable to
    SEEDID  LINEAGE      POP   REGION    CARBON       DAY      GERM 
 "numeric" "factor" "factor" "factor" "numeric" "numeric" "numeric"
>                              # test that the data were correctly read
> for ( i in 1:7 ) print ( length ( unique ( mohan[,i] ) ) )
[1] 3432
[1] 29
[1] 7
[1] 4
[1] 4
[1] 3
[1] 2
> 
##############################################################################



-- 
Michael Lavine                        ISDS
michael@stat.duke.edu                 Box 90251
(919) 684-2152 (work)                 Duke University
(919) 684-8594 (fax)                  Durham, NC 27708-0251

--T4sUOijqQbZv57TR
Content-Type: text/plain; charset=us-ascii
Content-Disposition: attachment; filename="mohan.dat"

SEEDID	LINEAGE	POP	REGION	CARBON	DAY	GERM
1	C01	CP1	CP	180	10	1
2	C01	CP1	CP	180	10	1
3	C01	CP1	CP	180	10	1
4	C01	CP1	CP	180	10	1
5	C01	CP1	CP	180	10	1
6	C01	CP1	CP	180	10	1
7	C01	CP1	CP	180	10	1
8	C01	CP1	CP	180	10	1
9	C01	CP1	CP	180	10	1
10	C01	CP1	CP	180	10	1
11	C01	CP1	CP	180	10	1
12	C01	CP1	CP	180	10	1
13	C01	CP1	CP	180	10	1
14	C01	CP1	CP	180	10	1			 
15	C01	CP1	CP	180	10	1
17	C01	CP1	CP	180	10	1
18	C01	CP1	CP	180	10	1
19	C01	CP1	CP	180	10	1
20	C01	CP1	CP	180	10	1
21	C01	CP1	CP	180	10	1
22	C01	CP1	CP	180	10	1
23	C01	CP1	CP	180	10	1
24	C01	CP1	CP	180	10	1
25	C01	CP1	CP	180	10	1
26	C01	CP1	CP	180	10	1
27	C01	CP1	CP	180	10	1
28	C01	CP1	CP	180	10	1
29	C01	CP1	CP	180	10	1
30	C01	CP1	CP	180	10	1
31	C01	CP1	CP	180	10	1
32	C01	CP1	CP	180	10	1
33	C01	CP1	CP	180	10	1
34	C01	CP1	CP	180	10	1
35	C01	CP1	CP	180	10	1
36	C01	CP1	CP	180	10	1
37	C01	CP1	CP	180	10	1
38	C01	CP1	CP	180	10	1
39	C01	CP1	CP	180	10	1
40	C01	CP1	CP	180	10	1
41	C01	CP1	CP	180	10	1
42	C01	CP1	CP	180	10	1
43	C01	CP1	CP	180	10	1
44	C01	CP1	CP	180	10	1
45	C01	CP1	CP	180	10	1
46	C01	CP1	CP	180	10	1
47	C01	CP1	CP	180	10	1
48	C01	CP1	CP	180	10	1
49	C01	CP1	CP	180	10	1
50	C01	CP1	CP	180	10	1
51	C01	CP1	CP	180	10	1
52	C01	CP1	CP	180	10	1
53	C01	CP1	CP	180	10	1
54	C01	CP1	CP	180	10	1
55	C01	CP1	CP	180	10	1
56	C01	CP1	CP	180	10	1
57	C01	CP1	CP	180	10	1
58	C01	CP1	CP	180	10	1
59	C01	CP1	CP	180	10	1
60	C01	CP1	CP	180	10	1
61	C01	CP1	CP	180	10	0
62	C01	CP1	CP	180	10	0
63	C01	CP1	CP	180	10	0
64	C01	CP1	CP	180	10	0
65	C01	CP1	CP	180	10	0
66	C01	CP1	CP	180	10	0
67	C01	CP1	CP	180	10	0
68	C01	CP1	CP	180	10	0
69	C01	CP1	CP	180	10	0
70	C01	CP1	CP	180	10	0
71	C01	CP1	CP	180	10	0
72	C01	CP1	CP	180	10	0
73	C01	CP1	CP	180	10	0
74	C01	CP1	CP	180	10	0
75	C01	CP1	CP	180	10	0
76	C01	CP1	CP	180	10	0
77	C01	CP1	CP	180	10	0
78	C01	CP1	CP	180	10	0
79	C01	CP1	CP	180	10	0
80	C01	CP1	CP	180	10	0
81	C01	CP1	CP	180	10	0
82	C01	CP1	CP	180	10	0
83	C01	CP1	CP	180	10	0
84	C01	CP1	CP	180	10	0
85	C01	CP1	CP	180	10	0
86	C01	CP1	CP	180	10	0
87	C01	CP1	CP	180	10	0
88	C01	CP1	CP	180	10	0
89	C01	CP1	CP	180	10	0
90	C01	CP1	CP	180	10	0
91	C01	CP1	CP	180	10	0
92	C01	CP1	CP	180	10	0
93	C01	CP1	CP	180	10	0
94	C01	CP1	CP	180	10	0
95	C01	CP1	CP	180	10	0
96	C01	CP1	CP	180	10	0
97	C01	CP1	CP	180	10	0
98	C01	CP1	CP	180	10	0
99	C01	CP1	CP	180	10	0
100	C01	CP1	CP	180	10	0
101	C01	CP1	CP	180	10	0
102	C01	CP1	CP	180	10	0
103	C01	CP1	CP	180	10	0
104	C01	CP1	CP	180	10	0
105	C01	CP1	CP	180	10	0
106	C01	CP1	CP	180	10	0
107	C01	CP1	CP	180	10	0
108	C01	CP1	CP	180	10	0
109	C02	CP1	CP	180	10	1
110	C02	CP1	CP	180	10	1
111	C02	CP1	CP	180	10	1
112	C02	CP1	CP	180	10	1
113	C02	CP1	CP	180	10	1
114	C02	CP1	CP	180	10	1
115	C02	CP1	CP	180	10	1
116	C02	CP1	CP	180	10	1
117	C02	CP1	CP	180	10	1
118	C02	CP1	CP	180	10	1
119	C02	CP1	CP	180	10	1
120	C02	CP1	CP	180	10	1
121	C02	CP1	CP	180	10	1
122	C02	CP1	CP	180	10	1
123	C02	CP1	CP	180	10	1
124	C02	CP1	CP	180	10	1
125	C02	CP1	CP	180	10	1
126	C02	CP1	CP	180	10	1
127	C02	CP1	CP	180	10	1
128	C02	CP1	CP	180	10	1
129	C02	CP1	CP	180	10	1
130	C02	CP1	CP	180	10	1
131	C02	CP1	CP	180	10	1
132	C02	CP1	CP	180	10	1
133	C02	CP1	CP	180	10	1
134	C02	CP1	CP	180	10	1
135	C02	CP1	CP	180	10	1
136	C02	CP1	CP	180	10	1
137	C02	CP1	CP	180	10	1
138	C02	CP1	CP	180	10	1
139	C02	CP1	CP	180	10	0
140	C04	CP1	CP	180	10	1
141	C04	CP1	CP	180	10	1
142	C04	CP1	CP	180	10	1
143	C04	CP1	CP	180	10	1
144	C04	CP1	CP	180	10	1
145	C04	CP1	CP	180	10	1
146	C04	CP1	CP	180	10	1
147	C04	CP1	CP	180	10	1
148	C04	CP1	CP	180	10	1
149	C04	CP1	CP	180	10	1
150	C04	CP1	CP	180	10	1
151	C04	CP1	CP	180	10	1
152	C04	CP1	CP	180	10	1
153	C04	CP1	CP	180	10	1
154	C04	CP1	CP	180	10	1
155	C04	CP1	CP	180	10	1
156	C04	CP1	CP	180	10	1
157	C04	CP1	CP	180	10	1
158	C04	CP1	CP	180	10	1
159	C04	CP1	CP	180	10	1
160	C04	CP1	CP	180	10	1
161	C04	CP1	CP	180	10	1
162	C04	CP1	CP	180	10	1
163	C04	CP1	CP	180	10	1
164	C04	CP1	CP	180	10	1
165	C04	CP1	CP	180	10	1
166	C04	CP1	CP	180	10	1
167	C04	CP1	CP	180	10	1
168	C04	CP1	CP	180	10	1
169	C04	CP1	CP	180	10	1
170	C04	CP1	CP	180	10	1
171	C04	CP1	CP	180	10	1
172	C04	CP1	CP	180	10	1
173	C04	CP1	CP	180	10	1
174	C04	CP1	CP	180	10	0
175	C04	CP1	CP	180	10	0
176	C04	CP1	CP	180	10	0
177	C04	CP1	CP	180	10	0
178	C04	CP1	CP	180	10	0
179	C04	CP1	CP	180	10	0
180	C04	CP1	CP	180	10	0
181	C04	CP1	CP	180	10	0
182	C04	CP1	CP	180	10	0
183	C04	CP1	CP	180	10	0
184	C04	CP1	CP	180	10	0
185	C04	CP1	CP	180	10	0
186	C04	CP1	CP	180	10	0
187	C04	CP1	CP	180	10	0
188	C04	CP1	CP	180	10	0
189	C04	CP1	CP	180	10	0
190	C04	CP1	CP	180	10	0
191	C04	CP1	CP	180	10	0
192	C04	CP1	CP	180	10	0
193	C04	CP1	CP	180	10	0
194	C04	CP1	CP	180	10	0
195	C04	CP1	CP	180	10	0
196	C04	CP1	CP	180	10	0
197	C04	CP1	CP	180	10	0
198	C04	CP1	CP	180	10	0
199	C04	CP1	CP	180	10	0
200	C04	CP1	CP	180	10	0
201	C04	CP1	CP	180	10	0
202	C04	CP1	CP	180	10	0
203	C04	CP1	CP	180	10	0
204	C04	CP1	CP	180	10	0
205	C04	CP1	CP	180	10	0
206	C04	CP1	CP	180	10	0
207	C04	CP1	CP	180	10	0
208	C04	CP1	CP	180	10	0
209	C04	CP1	CP	180	10	0
210	C04	CP1	CP	180	10	0
211	C04	CP1	CP	180	10	0
212	C04	CP1	CP	180	10	0
213	C04	CP1	CP	180	10	0
214	C04	CP1	CP	180	10	0
215	C05	CP2	CP	180	10	1
216	C05	CP2	CP	180	10	1
217	C05	CP2	CP	180	10	1
218	C05	CP2	CP	180	10	1
219	C05	CP2	CP	180	10	1
220	C05	CP2	CP	180	10	1
221	C05	CP2	CP	180	10	1
222	C05	CP2	CP	180	10	1
223	C05	CP2	CP	180	10	1
224	C05	CP2	CP	180	10	1
225	C05	CP2	CP	180	10	1
226	C05	CP2	CP	180	10	1
227	C05	CP2	CP	180	10	0
228	C05	CP2	CP	180	10	0
229	C05	CP2	CP	180	10	0
230	C05	CP2	CP	180	10	0
231	C05	CP2	CP	180	10	0
232	C05	CP2	CP	180	10	0
233	C05	CP2	CP	180	10	0
234	C05	CP2	CP	180	10	0
235	C05	CP2	CP	180	10	0
236	C05	CP2	CP	180	10	0
237	C05	CP2	CP	180	10	0
238	C05	CP2	CP	180	10	0
239	C05	CP2	CP	180	10	0
240	C05	CP2	CP	180	10	0
241	C05	CP2	CP	180	10	0
242	C05	CP2	CP	180	10	0
243	C05	CP2	CP	180	10	0
244	C05	CP2	CP	180	10	0
245	C05	CP2	CP	180	10	0
246	C05	CP2	CP	180	10	0
247	C05	CP2	CP	180	10	0
248	C05	CP2	CP	180	10	0
249	C05	CP2	CP	180	10	0
250	C05	CP2	CP	180	10	0
251	C05	CP2	CP	180	10	0
252	C05	CP2	CP	180	10	0
253	C05	CP2	CP	180	10	0
254	C05	CP2	CP	180	10	0
255	C05	CP2	CP	180	10	0
256	C05	CP2	CP	180	10	0
257	C05	CP2	CP	180	10	0
258	C05	CP2	CP	180	10	0
259	C05	CP2	CP	180	10	0
260	C05	CP2	CP	180	10	0
261	C05	CP2	CP	180	10	0
262	C05	CP2	CP	180	10	0
263	C05	CP2	CP	180	10	0
264	C05	CP2	CP	180	10	0
265	C05	CP2	CP	180	10	0
266	C05	CP2	CP	180	10	0
267	C05	CP2	CP	180	10	0
268	C05	CP2	CP	180	10	0
269	C05	CP2	CP	180	10	0
270	C06	CP2	CP	180	10	1
271	C06	CP2	CP	180	10	1
272	C06	CP2	CP	180	10	1
273	C06	CP2	CP	180	10	1
274	C06	CP2	CP	180	10	1
275	C06	CP2	CP	180	10	1
276	C06	CP2	CP	180	10	1
277	C06	CP2	CP	180	10	0
278	C06	CP2	CP	180	10	0
279	C06	CP2	CP	180	10	0
280	C06	CP2	CP	180	10	0
281	C06	CP2	CP	180	10	0
282	C06	CP2	CP	180	10	0
283	C06	CP2	CP	180	10	0
284	C06	CP2	CP	180	10	0
285	C06	CP2	CP	180	10	0
286	C07	CP2	CP	180	10	1
287	C07	CP2	CP	180	10	1
288	C07	CP2	CP	180	10	1
289	C07	CP2	CP	180	10	1
290	C07	CP2	CP	180	10	1
291	C07	CP2	CP	180	10	1
292	C07	CP2	CP	180	10	1
293	C07	CP2	CP	180	10	1
294	C07	CP2	CP	180	10	1
295	C07	CP2	CP	180	10	1
296	C07	CP2	CP	180	10	1
297	C07	CP2	CP	180	10	1
298	C07	CP2	CP	180	10	1
299	C07	CP2	CP	180	10	1
300	C07	CP2	CP	180	10	1
301	C07	CP2	CP	180	10	1
302	C07	CP2	CP	180	10	1
303	C07	CP2	CP	180	10	1
304	C07	CP2	CP	180	10	1
305	C07	CP2	CP	180	10	1
306	C07	CP2	CP	180	10	1
307	C07	CP2	CP	180	10	1
308	C07	CP2	CP	180	10	1
309	C07	CP2	CP	180	10	1
310	C07	CP2	CP	180	10	1
311	C07	CP2	CP	180	10	1
312	C07	CP2	CP	180	10	1
313	C07	CP2	CP	180	10	0
314	C07	CP2	CP	180	10	0
315	C07	CP2	CP	180	10	0
316	C07	CP2	CP	180	10	0
317	C07	CP2	CP	180	10	0
318	C07	CP2	CP	180	10	0
319	C07	CP2	CP	180	10	0
320	C07	CP2	CP	180	10	0
321	C07	CP2	CP	180	10	0
322	C07	CP2	CP	180	10	0
323	C07	CP2	CP	180	10	0
324	C07	CP2	CP	180	10	0
325	C07	CP2	CP	180	10	0
326	C07	CP2	CP	180	10	0
327	C07	CP2	CP	180	10	0
328	C07	CP2	CP	180	10	0
329	C07	CP2	CP	180	10	0
330	C07	CP2	CP	180	10	0
331	C07	CP2	CP	180	10	0
332	C07	CP2	CP	180	10	0
333	C07	CP2	CP	180	10	0
334	C07	CP2	CP	180	10	0
335	C07	CP2	CP	180	10	0
336	C07	CP2	CP	180	10	0
337	C07	CP2	CP	180	10	0
338	C07	CP2	CP	180	10	0
339	C07	CP2	CP	180	10	0
340	C07	CP2	CP	180	10	0
341	M01	MT1	MT	180	10	1
342	M01	MT1	MT	180	10	1
343	M01	MT1	MT	180	10	0
344	M01	MT1	MT	180	10	0
345	M01	MT1	MT	180	10	0
346	M01	MT1	MT	180	10	0
347	M01	MT1	MT	180	10	0
348	M01	MT1	MT	180	10	0
349	M01	MT1	MT	180	10	0
350	M01	MT1	MT	180	10	0
351	M01	MT1	MT	180	10	0
352	M01	MT1	MT	180	10	0
353	M01	MT1	MT	180	10	0

==> 968.reply.1 <==
From pd@blueberry.kubism.ku.dk  Tue Jun  5 19:38:50 2001
Received: from blueberry.kubism.ku.dk (blueberry [130.225.108.193])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id TAA16180;
	Tue, 5 Jun 2001 19:38:50 +0200 (MET DST)
Received: (from pd@localhost)
	by blueberry.kubism.ku.dk (8.9.3/8.9.3) id TAA20003;
	Tue, 5 Jun 2001 19:45:01 +0200
Sender: pd@pubhealth.ku.dk
To: michael@stat.duke.edu
Cc: r-devel@stat.math.ethz.ch, R-bugs@biostat.ku.dk
Subject: Re: [Rd] a bug? (PR#968)
References: <200106051415.QAA15338@pubhealth.ku.dk>
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 05 Jun 2001 19:45:01 +0200
In-Reply-To: michael@stat.duke.edu's message of "Tue, 5 Jun 2001 16:15:35 +0200 (MET DST)"
Message-ID: <x2ofs2lt2a.fsf@blueberry.kubism.ku.dk>
Lines: 57
X-Mailer: Gnus v5.7/Emacs 20.7
Mime-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: 7bit

michael@stat.duke.edu writes:

> --T4sUOijqQbZv57TR
> Content-Type: text/plain; charset=us-ascii
> Content-Disposition: inline
> 
> Dear R,
> 
> I would like to report what I think is a bug in R.  I am running R
> within emacs on a Digital AlphaStation.  See the version information
> at the end of my R session for details.  I also attach a copy of the
> file that is read in the `read.table' command.
> 
> Here's my R session, with a few comments added in to show what I
> think is wrong:
> 
> #############################################################################
> R : Copyright 2000, The R Development Core Team
> Version 1.0.1  (April 14, 2000)


You could very well be tickling a memory bug, but that version of R is
more than a year out of date and things have changed considerably in
the meantime. Could you please retry with a more recent version? 

And, BTW, large attachments are quite difficult to extract once they
have been mangled by the mailing list and bug filing software, so only
use them as a last resort. It's much preferable if you put it up
separately on your homepage or FTP site.

> R is free software and comes with ABSOLUTELY NO WARRANTY.
> You are welcome to redistribute it under certain conditions.
> Type	"?license" or "?licence" for distribution details.
> 
> R is a collaborative project with many contributors.
> Type	"?contributors" for a list.
> 
> Type	"demo()" for some demos, "help()" for on-line help, or
>     	"help.start()" for a HTML browser interface to help.
> Type	"q()" to quit R.
> 
> [Previously saved workspace restored]
> 
> > mohan <- read.table ( "mohan.dat", header=T )
> > sapply ( mohan, data.class )
> $SEEDID
> [1] "numeric"
> 
> $LINEAGE
> [1] "factor"
> 

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

==> 968.reply.2 <==
From maechler@stat.math.ethz.ch  Fri Jun  8 17:51:08 2001
Received: from stat.math.ethz.ch (daemon@hypatia.ethz.ch [129.132.58.23])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id RAA19045
	for <R-bugs@biostat.ku.dk>; Fri, 8 Jun 2001 17:51:07 +0200 (MET DST)
Received: (from daemon@localhost)
	by stat.math.ethz.ch (8.9.1/8.9.1) id RAA24002;
	Fri, 8 Jun 2001 17:51:00 +0200 (MET DST)
Received: from lynne(129.132.58.30), claiming to be "lynne.ethz.ch"
 via SMTP by hypatia, id smtpdAAAa005qv; Fri Jun  8 17:50:54 2001
Received: (maechler@localhost) by lynne.ethz.ch (8.9.3/D-MATH-client) id RAA03571; Fri, 8 Jun 2001 17:50:53 +0200
X-Authentication-Warning: lynne.ethz.ch: maechler set sender to maechler@stat.math.ethz.ch using -f
From: Martin Maechler <maechler@stat.math.ethz.ch>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
Message-ID: <15136.62557.851701.850042@gargle.gargle.HOWL>
Date: Fri, 8 Jun 2001 17:50:53 +0200
To: R-bugs@biostat.ku.dk
Cc: michael@stat.duke.edu
Subject: Re: [Rd] a bug? (PR#968)
In-Reply-To: <x2ofs2lt2a.fsf@blueberry.kubism.ku.dk>
References: <200106051415.QAA15338@pubhealth.ku.dk>
	<x2ofs2lt2a.fsf@blueberry.kubism.ku.dk>
X-Mailer: VM 6.92 under Emacs 20.7.1
Reply-To: Martin Maechler <maechler@stat.math.ethz.ch>

>>>>> "PD" == Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk> writes:

    PD> michael@stat.duke.edu writes:
    >> --T4sUOijqQbZv57TR
    >> Content-Type: text/plain; charset=us-ascii
    >> Content-Disposition: inline
    >> 
    >> Dear R,
    >> 
    >> I would like to report what I think is a bug in R.  I am running R
    >> within emacs on a Digital AlphaStation.  See the version information
    >> at the end of my R session for details.  I also attach a copy of the
    >> file that is read in the `read.table' command.
    >> 
    >> Here's my R session, with a few comments added in to show what I
    >> think is wrong:
    >> 
    >> #######################################################################
    >> R : Copyright 2000, The R Development Core Team
    >> Version 1.0.1  (April 14, 2000)


    PD> You could very well be tickling a memory bug, but that version of R is
    PD> more than a year out of date and things have changed considerably in
    PD> the meantime. Could you please retry with a more recent version? 

    PD> And, BTW, large attachments are quite difficult to extract once they
    PD> have been mangled by the mailing list and bug filing software, so only
    PD> use them as a last resort. It's much preferable if you put it up
    PD> separately on your homepage or FTP site.

yes, indeed!

And, btw, the bug is gone in R version 1.2.3 (and R-devel): 

 > mohan <- read.table ( "/u/maechler/R/MM/MISC/mohan.dat", header=T )
 > sapply ( mohan, data.class )
    SEEDID   LINEAGE       POP    REGION    CARBON       DAY      GERM 
 "numeric"  "factor"  "factor"  "factor" "numeric" "numeric" "numeric" 

Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
* PR# 974 *
Subject: Lattice: panel.superpose with ordered factor groups
From: John Maindonald <john.maindonald@anu.edu.au>
Date: Sat, 9 Jun 2001 11:08:51 +1000 (EST)
-- no notes --
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 974 <==
From postmaster@franz.stat.wisc.edu  Sat Jun  9 03:09:10 2001
Received: from franz.stat.wisc.edu (root@franz.stat.wisc.edu [128.105.174.95])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id DAA20814
	for <r-bugs@biostat.ku.dk>; Sat, 9 Jun 2001 03:09:09 +0200 (MET DST)
Received: from leonard.anu.edu.au (really [150.203.2.15]) by franz.stat.wisc.edu
	via smail with esmtp
	id <m158XFN-000JbdC@franz.stat.wisc.edu> (Debian Smail3.2.0.111)
	for <r-bugs@r-project.org>; Fri, 8 Jun 2001 20:09:01 -0500 (CDT) 
Received: (from u9801539@localhost)
	by leonard.anu.edu.au (8.9.3/8.9.3) id LAA01081;
	Sat, 9 Jun 2001 11:08:51 +1000 (EST)
Date: Sat, 9 Jun 2001 11:08:51 +1000 (EST)
From: John Maindonald <john.maindonald@anu.edu.au>
Message-Id: <200106090108.LAA01081@leonard.anu.edu.au>
To: r-bugs@r-project.org
Subject: Lattice: panel.superpose with ordered factor groups
Cc: deepayan@stat.wisc.edu


#       r-bugs@r-project.org
The panel.superpose() function for xyplot() complains when 
the groups parameter is set to be an ordered factor.

> library(mass)
> data(cabbages)
> library(lattice)
> xyplot(HeadWt~VitC|Cult, panel=panel.superpose,
+   groups=Date, data=cabbages)
> cabbages$Date <- ordered(cabbages$Date)  # Make Date an ordered factor
> xyplot(HeadWt~VitC|Cult, panel=panel.superpose,
+   groups=Date, data=cabbages)
Warning messages: 
1: Incompatible methods ("Ops.ordered", "Ops.factor") for "==" 
2: Incompatible methods ("Ops.ordered", "Ops.factor") for "==" 
3: Incompatible methods ("Ops.ordered", "Ops.factor") for "==" 
4: Incompatible methods ("Ops.ordered", "Ops.factor") for "==" 
5: Incompatible methods ("Ops.ordered", "Ops.factor") for "==" 
6: Incompatible methods ("Ops.ordered", "Ops.factor") for "==" 

--please do not edit the information below--

Version:
 platform = i386-pc-mingw32
 arch = x86
 os = Win32
 system = x86, Win32
 status = 
 major = 1
 minor = 2.3
 year = 2001
 month = 04
 day = 26
 language = R

Windows ME 4.90 (build 3000)  

Search Path:
 .GlobalEnv, package:grid, package:lattice, package:mass, package:ctest, Autoloads, package:base
John Maindonald            email: john.maindonald@anu.edu.au        
phone : (6125)3998         fax   : (6125)5549 
Statistical Consulting Unit, Room 1194,
John Dedman Mathematical Sciences Building
(Centre for Mathematics & Its Applications.)
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
* PR# 973 *
Subject: Searching for Partner of Scarves, Necties, Textiles, Silks
From: hengdatie@sina.com
Date: Wed, 13 Jun 2001 13:57:25 +0800
-- no notes --
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 973 <==
From postmaster@franz.stat.wisc.edu  Sat Jun  9 02:47:54 2001
Received: from franz.stat.wisc.edu (root@franz.stat.wisc.edu [128.105.174.95])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id CAA20756
	for <r-bugs@biostat.ku.dk>; Sat, 9 Jun 2001 02:47:54 +0200 (MET DST)
Received: from wzsw.wzswdomain (really [211.152.32.11]) by franz.stat.wisc.edu
	via smail with esmtp
	id <m158Wuo-000JKWC@franz.stat.wisc.edu> (Debian Smail3.2.0.111)
	for <r-bugs@r-project.org>; Fri, 8 Jun 2001 19:47:46 -0500 (CDT) 
Received: from  [202.108.68.140] by wzsw.wzswdomain
  (SMTPD32-5.05 EVAL) id AAEA8E101DC; Thu, 07 Jun 2001 13:58:18 +0800
From: hengdatie@sina.com
To: 
Subject: Searching for Partner of Scarves, Necties, Textiles, Silks
Sender: hengdatie@sina.com
Mime-Version: 1.0
Content-Type: text/plain; charset="iso-8859-1"
Date: Wed, 13 Jun 2001 13:57:25 +0800
Message-Id: <200106071358265.SM00317@>
Content-Transfer-Encoding: 8bit

:  cancel@china.com              
Dear sir:
We are Manufacturer and exporter of all kinds of scarves, neckties, textiles, accessories, and silk goods.---- HENGDA NECKTIE AND FASHION CO.,LTD. 
WE ARE SPECIALIZED IN PRODUCING HIGH- GRADE SILK(POLYESTER) PRINTING AND JACQUARD TIE, WOOL AND SILK SCARFCUSTOMERS OWN DESIGNS. LOGO AND GRAPHICS ALSO COULD BE ACCORDINGLY HANDLED
WE BECOME A BIGGER TIE MANUFACTURE AND EXPORTER IN CHINA. MORE THAN 2 MILLIONS PIECES, TIES AND HALF MILLION SILK SCARVES CAN BE MADE EVERY YEAR. OUR PRODUCTS ARE VERY PROPULAR IN EUROPEAMERICAMIDDLE EASTJAPAN ETC, ABOUT 20 COUNTRIES AND REGIONS.
 

ZHEJIANG SHENGZHOU HENGDA NECKTIE AND FASHION CO.,LTD. 
URL: http://www.hengdatie.com ,http://www.chinatiegroup.com
Add: No.24 Shangxing Road Shengzhou Zhejiang China
Tel: +86-575-3048908 3048228 3047325
Fax: +86-575-3048360
E-mial: szhengda@mail.sxptt.zj.cn
Contact:Mr.SHEN
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
* PR# 972 *
Subject: update.packages fails again
From: Prof Brian Ripley <ripley@stats.ox.ac.uk>
Date: Fri, 8 Jun 2001 21:25:08 +0100 (BST)
-- no notes --
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 972 <==
From ripley@stats.ox.ac.uk  Fri Jun  8 22:25:16 2001
Received: from toucan.stats.ox.ac.uk (toucan.stats.ox.ac.uk [163.1.20.20])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id WAA20104
	for <R-bugs@biostat.ku.dk>; Fri, 8 Jun 2001 22:25:15 +0200 (MET DST)
Received: from localhost (ripley@localhost)
	by toucan.stats.ox.ac.uk (8.9.0/8.9.0) with ESMTP id VAA16779;
	Fri, 8 Jun 2001 21:25:09 +0100 (BST)
X-Authentication-Warning: toucan.stats: ripley owned process doing -bs
Date: Fri, 8 Jun 2001 21:25:08 +0100 (BST)
From: Prof Brian Ripley <ripley@stats.ox.ac.uk>
X-X-Sender:  <ripley@toucan.stats>
To: <R-bugs@biostat.ku.dk>
cc: Torsten Hothorn <Torsten.Hothorn@rzmail.uni-erlangen.de>
Subject: update.packages fails again
Message-ID: <Pine.GSO.4.31.0106082118170.16774-100000@toucan.stats>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII

It's happened again:

exactRankTests_0.4-2.tar.gz has

Depends: R > 1.3.0

which is not only impossible, but breaks update.packages.

How can we test for this?

Unfortunately once such a package is installed, it has to be manually
uninstalled before update.packages will work again.

*PLEASE* can people read the manual to get the syntax right: it is

Depends: R (>= 1.3.0)

but such packages should not be in the main part of CRAN yet.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


==> 972.reply.1 <==
From hornik@ci.tuwien.ac.at  Sat Jun  9 08:27:43 2001
Received: from mr.tuwien.ac.at (mr.tuwien.ac.at [128.130.2.10])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id IAA21237
	for <R-bugs@biostat.ku.dk>; Sat, 9 Jun 2001 08:27:42 +0200 (MET DST)
Received: from mithrandir.hornik.net (a10.dialin.tuwien.ac.at [192.35.240.20])
	by mr.tuwien.ac.at (8.11.1/8.11.1) with ESMTP id f596RRU05501;
	Sat, 9 Jun 2001 08:27:27 +0200 (MET DST)
Received: from hornik by mithrandir.hornik.net with local (Exim 3.12 #1 (Debian))
	id 158cEG-0006z6-00; Sat, 09 Jun 2001 08:28:12 +0200
From: Kurt Hornik <Kurt.Hornik@ci.tuwien.ac.at>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
Message-ID: <15137.49660.302797.726990@mithrandir.hornik.net>
Date: Sat, 9 Jun 2001 08:28:12 +0200
To: ripley@stats.ox.ac.uk
Cc: r-devel@stat.math.ethz.ch, R-bugs@biostat.ku.dk
Subject: Re: [Rd] update.packages fails again (PR#972)
In-Reply-To: <200106082025.WAA20114@pubhealth.ku.dk>
References: <200106082025.WAA20114@pubhealth.ku.dk>
X-Mailer: VM 6.92 under Emacs 20.7.2
Reply-To: Kurt.Hornik@ci.tuwien.ac.at
Sender: Kurt Hornik <hornik@ci.tuwien.ac.at>

>>>>> ripley  writes:

> It's happened again:
> exactRankTests_0.4-2.tar.gz has

> Depends: R > 1.3.0

> which is not only impossible, but breaks update.packages.

> How can we test for this?

Damn it.  I thought that my Perl code in R CMD check

    if($description->{"Depends"} =~ /\bR *\([^)]*\)/) {
        ## The `Depends' field is not required, and currently only R
        ## version dependencies are used, which must be of the form
        ## `R ($op $version)' with `$op' one of `<=' or `>='.
        $log->checking("DESCRIPTION Depends field");
        $description->{"Depends"} =~ /\bR *\(([^) ]+) *([^) ]+)\)/;
        if((($1 eq "<=") || ($1 eq ">=")) && $2) {
            $log->result("OK");
        }
        else {
            $log->warning();
            $log->message("  malformed Depends field");
        }
    }

was good enough.  It is intended to check for just that: even more
precisely for exactly what is used by R lateron.

For the offending package I get no warning.  Argh.

> Unfortunately once such a package is installed, it has to be manually
> uninstalled before update.packages will work again.

> *PLEASE* can people read the manual to get the syntax right: it is

> Depends: R (>= 1.3.0)

> but such packages should not be in the main part of CRAN yet.

How can this be installed?  I though if you ran R CMD INSTALL then it
would figure this out.  At least, this is what

  depends=`get_dcf_field Depends DESCRIPTION`
  depends=`echo ${depends} | grep 'R *('`
  if test "${depends}"; then
    depends=`echo ${depends} | sed 's/.*R *(\([^)]*\)).*/\1/;s/=/= /'`
    dep_operator=`set - ${depends}; echo ${1}`
    dep_version=`set - ${depends}; echo ${2}`
    ## Currently, only operators `<=' and `>=' are supported.  Hence we
    ## check this, and also whether we found a version string.
    if (test "${dep_operator}" = "<=" \
        || test "${dep_operator}" = ">=") \
        && test -n "${dep_version}"; then
      dep_ok=`expr ${R_VERSION} ${dep_operator} ${dep_version} `
      if test ${dep_ok} -eq 0; then
        echo "ERROR: This R is version ${R_VERSION}"
        echo "       package \`${pkg}' depends on R ${dep_version}"
        exit 1;
      fi
    else
      echo "WARNING: malformed \`Depends' field in \`DESCRIPTION'"
    fi
  fi

in INSTALL is supposed to do.  Same problem, most likely.

Will have a look later.

-k
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
