=================================================
This is an automated collection of open reports in
the R-bugs repository.
=================================================

Directory:  Accuracy

* PR# 751 *
Subject: BUG: polyroot()
From: "Li Dongfeng" <mavip1@inet.polyu.edu.hk>
Date: Tue, 28 Nov 2000 13:24:33 +0800
--Numerical instability. We may want a better algorithm!
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 751 <==
From mavip1@inet.polyu.edu.hk  Tue Nov 28 06:25:25 2000
Received: from hkpa04.polyu.edu.hk (hkpa04.PolyU.edu.hk [158.132.14.21])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id GAA06942
	for <r-bugs@biostat.ku.dk>; Tue, 28 Nov 2000 06:25:20 +0100 (MET)
Received: from hkpu01 ([158.132.174.240]) by hkpa04.polyu.edu.hk
          (Netscape Messaging Server 4.15) with SMTP id G4PZ0X01.43N for
          <r-bugs@biostat.ku.dk>; Tue, 28 Nov 2000 13:24:33 +0800 
Message-ID: <001b01c058fb$7db19700$f0ae849e@polyu.edu.hk>
From: "Li Dongfeng" <mavip1@inet.polyu.edu.hk>
To: <r-bugs@biostat.ku.dk>
Subject: BUG: polyroot()
Date: Tue, 28 Nov 2000 13:24:33 +0800
MIME-Version: 1.0
Content-Type: text/plain;
	charset="gb2312"
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 5.50.4133.2400
X-MimeOLE: Produced By Microsoft MimeOLE V5.50.4133.2400
Content-Transfer-Encoding: 8bit
X-MIME-Autoconverted: from base64 to 8bit by pubhealth.ku.dk id GAA06942

I have found that the polyroot()
function in R-1.1.1(both solaris
and Win32 version) gives totally
incorrect result. Here is the offending
code:

# Polyroot bug report:
# from R-1.1.1
> sort(abs(polyroot(c(1, -2,1,0,0,0,0,0,0,0,0,0,-2,5,-2,0,0,0,0,0,0,0,0,0,1,-2,1))))
 [1] 0.8758259 0.9486499 0.9731015 1.5419189 1.7466214 1.7535362 1.7589484
 [8] 2.0216317 2.4421509 2.5098488 2.6615572 2.7717724 2.8444048 2.9147685
[15] 2.9302278 2.9757159 3.2037151 3.2052962 3.2498510 3.2815881 3.3250881
[22] 4.6593700 4.7048556 5.2738258 5.7369920 5.9017094
# from Splus 2000
> sort(abs(polyroot(c(1, -2,1,0,0,0,0,0,0,0,0,0,-2,5,-2,0,0,0,0,0,0,0,0,0,1,-2,1))))
 [1] 0.8038812 0.8038812 0.8758259 0.8758259 0.9235722
 [6] 0.9235722 0.9439788 0.9439788 0.9536692 0.9536692
[11] 0.9582403 0.9582403 0.9596028 1.0420978 1.0435796
[16] 1.0435796 1.0485816 1.0485816 1.0593458 1.0593458
[21] 1.0827524 1.0827524 1.1417794 1.1417794 1.2439649
[26] 1.2439649

From mathematical theory I know that the Splus result
is correct while the R result is wrong. I would have
checked the source if I had the time.



==> 751.reply.1 <==
From pd@biostat.ku.dk  Thu Dec  7 00:53:06 2000
Received: from biostat.ku.dk (blueberry [130.225.108.193])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id AAA04390;
	Thu, 7 Dec 2000 00:53:05 +0100 (MET)
Received: (from pd@localhost)
	by biostat.ku.dk (8.9.3/8.9.3) id AAA28616;
	Thu, 7 Dec 2000 00:58:28 +0100
Sender: pd@blueberry.kubism.ku.dk
To: mavip1@inet.polyu.edu.hk
Cc: r-devel@stat.math.ethz.ch, R-bugs@biostat.ku.dk
Subject: Re: [Rd] BUG: polyroot() (PR#751)
References: <200011280525.GAA06952@pubhealth.ku.dk>
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 07 Dec 2000 00:58:27 +0100
In-Reply-To: mavip1@inet.polyu.edu.hk's message of "Tue, 28 Nov 2000 06:25:26 +0100 (MET)"
Message-ID: <x2k89dxfto.fsf@blueberry.kubism.ku.dk>
Lines: 96
X-Mailer: Gnus v5.7/Emacs 20.7
Mime-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: 7bit

mavip1@inet.polyu.edu.hk writes:

> I have found that the polyroot()
> function in R-1.1.1(both solaris
> and Win32 version) gives totally
> incorrect result. Here is the offending
> code:
> 
> # Polyroot bug report:
> # from R-1.1.1
> > sort(abs(polyroot(c(1, -2,1,0,0,0,0,0,0,0,0,0,-2,5,-2,0,0,0,0,0,0,0,0,0,1,-2,1))))
>  [1] 0.8758259 0.9486499 0.9731015 1.5419189 1.7466214 1.7535362 1.7589484
>  [8] 2.0216317 2.4421509 2.5098488 2.6615572 2.7717724 2.8444048 2.9147685
> [15] 2.9302278 2.9757159 3.2037151 3.2052962 3.2498510 3.2815881 3.3250881
> [22] 4.6593700 4.7048556 5.2738258 5.7369920 5.9017094
> # from Splus 2000
> > sort(abs(polyroot(c(1, -2,1,0,0,0,0,0,0,0,0,0,-2,5,-2,0,0,0,0,0,0,0,0,0,1,-2,1))))
>  [1] 0.8038812 0.8038812 0.8758259 0.8758259 0.9235722
>  [6] 0.9235722 0.9439788 0.9439788 0.9536692 0.9536692
> [11] 0.9582403 0.9582403 0.9596028 1.0420978 1.0435796
> [16] 1.0435796 1.0485816 1.0485816 1.0593458 1.0593458
> [21] 1.0827524 1.0827524 1.1417794 1.1417794 1.2439649
> [26] 1.2439649
> 
> >From mathematical theory I know that the Splus result
> is correct while the R result is wrong. I would have
> checked the source if I had the time.

There seems to be a rather bad numerical instability with the R code.
If we define

 polyeval<-function(coef,x){v<-0;for (i in rev(coef)) v<-v*x+i; v}

(Horner's scheme), we get 

> polyeval(1:5,polyroot(1:5))
[1] -2.220446e-16-2.664833e-16i -2.220446e-16-1.554475e-16i
[3] -2.220446e-16+1.436839e-16i -2.220446e-16-5.076235e-16i

which is kind of OK except that it looks odd that the real part is the
same for all 4 roots. Increasing the degree gives

> polyeval(10:1,polyroot(10:1))
[1] 9.230968e-08+5.257143e-08i 9.230977e-08+5.257158e-08i
[3] 9.230961e-08+5.257162e-08i 9.230956e-08+5.257151e-08i
[5] 9.230974e-08+5.257145e-08i 9.230975e-08+5.257161e-08i
[7] 9.230949e-08+5.257178e-08i 9.230974e-08+5.257161e-08i
[9] 9.230969e-08+5.257184e-08i

which is fairly OK, but it does look odd that we can't get closer to
zero than that since there are no multiple roots, and again it is
peculiar that the values are so similar. The next items in the
sequence are -ahem- interesting:

> polyeval(11:1,polyroot(11:1))
 [1] 2.305607e-06+1.791577e-05i 2.309550e-06+1.791714e-05i
 [3] 2.307622e-06+1.792101e-05i 2.304150e-06+1.791869e-05i
 [5] 2.307087e-06+1.791537e-05i 2.309716e-06+1.791873e-05i
 [7] 2.306030e-06+1.792098e-05i 2.304727e-06+1.792011e-05i
 [9] 2.308569e-06+1.791588e-05i 2.308994e-06+1.792018e-05i
> polyeval(12:1,polyroot(12:1))
 [1] 70.94521-90.6597i 70.94521-90.6597i 70.94521-90.6597i 70.94521-90.6597i
 [5] 70.94521-90.6597i 70.94521-90.6597i 70.94521-90.6597i 70.94521-90.6597i
 [9] 70.94521-90.6597i 70.94521-90.6597i 70.94521-90.6597i
> polyeval(13:1,polyroot(13:1))
 [1] -9.076647e-05-0.0003440688i -1.253803e-04-0.0003691299i
 [3] -8.894859e-05-0.0003941022i -7.310528e-05-0.0003638818i
 [5] -1.144849e-04-0.0003471283i -1.221901e-04-0.0003814892i
 [7] -7.857251e-05-0.0003869614i -7.284137e-05-0.0003760067i
 [9] -1.029218e-04-0.0003424790i -1.136443e-04-0.0003910680i
[11] -1.016283e-04-0.0003956270i -1.225930e-04-0.0003567609i
> polyeval(14:1,polyroot(14:1))
 [1]     11.28833+   28.72917i     11.28833+   28.72917i
 [3]   5809.74030-  427.90119i -19407.81458+ 3462.91985i
 [5]  -2823.47547-  494.63498i -40909.65435-10789.57874i
 [7]  -8336.95783+ 5241.26935i    344.71455- 1520.94876i
 [9]   5357.44530-24665.94094i  57313.79892-43530.37668i
[11]  11464.67537+29484.08287i  30010.79343+24624.25551i
[13]  25799.32156+53755.92101i
> polyeval(15:1,polyroot(15:1))
 [1]  4.110828e+01+5.028631e+01i  4.123746e+01+5.033469e+01i
 [3]  4.113423e+01+5.043357e+01i  4.106175e+01+5.031924e+01i
 [5]  2.130747e+06+7.226414e+05i -1.088699e+08+1.096129e+09i
 [7]  1.785940e+09+1.407187e+09i  9.750674e+10-5.059480e+10i
 [9] -3.102572e+09-9.212065e+10i  7.213065e+09-1.023845e+10i
[11]  1.682049e+10+2.202050e+10i  1.889123e+10-1.046838e+11i
[13] -6.220741e+10-4.563469e+10i -1.477005e+10-3.393510e+10i

Root finding in high-degree polynomials is known to be nasty business,
but this looks more than ordinarily bad.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

==> 751.audit <==
Sun Dec 10 14:32:11 2000	pd	changed notes
Sun Dec 10 14:32:11 2000	pd	foobar
Sun Dec 10 14:32:11 2000	pd	moved from incoming to Accuracy

==> 751.followup.1 <==
From mark0060@tc.umn.edu  Wed Jan 17 03:51:59 2001
Received: from amethyst.tc.umn.edu (amethyst.tc.umn.edu [160.94.153.1])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id DAA19519
	for <r-bugs@biostat.ku.dk>; Wed, 17 Jan 2001 03:51:58 +0100 (MET)
Received: from [134.84.252.67] by amethyst.tc.umn.edu for r-bugs@biostat.ku.dk; Tue, 16 Jan 2001 20:51:40 -0600
Message-Id: <001b01c08041$2de9cae0$43fc5486@c9wz101>
Reply-To: "Kristian Markon" <mark0060@tc.umn.edu>
From: "Kristian Markon" <mark0060@tc.umn.edu>
To: <r-bugs@biostat.ku.dk>
Subject: PR#751
Date: Tue, 16 Jan 2001 20:51:38 -0800
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 5.00.2615.200
X-MimeOLE: Produced By Microsoft MimeOLE V5.00.2615.200

I'd just like to report a possible R bug--or rather, confirm an existing one
(bug #751).

I have had some difficulty using the polyroot() function.

For example, in Win 98, R 1.1.1,

> polyroot(c(2,1,1))

correctly (per the help index) gives the roots of  1 + (1*x) + (2*x^2) as

[1] -0.5+1.322876i -0.5-1.322876i

However,

> polyroot(c(-100,0,1))

gives the roots of

[1]  10+0i -10+0i

which corresponds to -100 + x^2, not 1 - (100*x^2).

Also,

> polyroot(c(0,0,0,1))

gives

[1]   0+0i   0+0i -10+0i

which aren't all roots of x^3.


Thanks for all your efforts.

I apologize if I'm missing something.

Kristian Markon











==> 751.reply.2 <==
From pd@biostat.ku.dk  Wed Jan 17 08:02:05 2001
Received: from biostat.ku.dk (blueberry [130.225.108.193])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id HAA19898;
	Wed, 17 Jan 2001 07:59:35 +0100 (MET)
Received: (from pd@localhost)
	by biostat.ku.dk (8.9.3/8.9.3) id IAA01976;
	Wed, 17 Jan 2001 08:01:11 +0100
Sender: pd@blueberry.kubism.ku.dk
To: mark0060@tc.umn.edu
Cc: r-devel@stat.math.ethz.ch, R-bugs@biostat.ku.dk
Subject: Re: [Rd] PR#751
References: <200101170252.DAA19529@pubhealth.ku.dk>
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 17 Jan 2001 08:01:11 +0100
In-Reply-To: mark0060@tc.umn.edu's message of "Wed, 17 Jan 2001 03:52:00 +0100 (MET)"
Message-ID: <x2hf2yirwo.fsf@blueberry.kubism.ku.dk>
Lines: 71
X-Mailer: Gnus v5.7/Emacs 20.7
Mime-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: 7bit

mark0060@tc.umn.edu writes:

> I'd just like to report a possible R bug--or rather, confirm an existing one
> (bug #751).
> 
> I have had some difficulty using the polyroot() function.
> 
> For example, in Win 98, R 1.1.1,
> 
> > polyroot(c(2,1,1))
> 
> correctly (per the help index) gives the roots of  1 + (1*x) + (2*x^2) as
> 
> [1] -0.5+1.322876i -0.5-1.322876i

Mm, no. The coefficients are by increasing degree, so these are the
roots of 2+x+x^2

> x<-polyroot(c(2,1,1))
> x
[1] -0.5+1.322876i -0.5-1.322876i
> 2+x+x^2
[1] -2.220446e-16+4.440892e-16i -2.220446e-16-4.440892e-16i


> However,
> 
> > polyroot(c(-100,0,1))
> 
> gives the roots of
> 
> [1]  10+0i -10+0i
> 
> which corresponds to -100 + x^2, not 1 - (100*x^2).

as it should.

> 
> Also,
> 
> > polyroot(c(0,0,0,1))
> 
> gives
> 
> [1]   0+0i   0+0i -10+0i
> 
> which aren't all roots of x^3.

That one is way out, however. Even more "fun":

> polyroot(c(-100,0,1))
[1]  10+0i -10+0i
> x<- polyroot(c(0,0,0,1))
> x
[1]   0+0i   0+0i -10+0i
> x<-polyroot(c(2,1,1))
> x<- polyroot(c(0,0,0,1))
> x
[1]  0.0+0.000000i  0.0+0.000000i -0.5-1.322876i

I.e. the result of polyroot(c(0,0,0,1)) depends on the previous
polyroot calculation! So there's more to the problem than numerical
instability.

Thanks for pointing it out.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

==> 751.followup.2 <==
From apjaworski@mmm.com  Wed Jan 17 17:21:34 2001
Received: from sulu.mmm.com (sulu.mmm.com [192.28.4.21])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id RAA00032
	for <R-bugs@biostat.ku.dk>; Wed, 17 Jan 2001 17:21:33 +0100 (MET)
From: apjaworski@mmm.com
Received: from us-ritahayworth.mmm.com (us-ritahayworth.mmm.com [169.10.9.87])
	by sulu.mmm.com (8.8.7/8.8.7) with ESMTP id KAA23813;
	Wed, 17 Jan 2001 10:21:14 -0600 (CST)
Subject: Re: [Rd] PR#751
X-Priority: 3 (Normal)
To: r-devel@stat.math.ethz.ch, R-bugs@biostat.ku.dk
X-Mailer: Lotus Notes Release 5.0.3  March 21, 2000
Message-ID: <OF636EC57A.115D0ABC-ON862569D7.00599413@mmm.com>
Date: Wed, 17 Jan 2001 10:21:10 -0600
X-MIMETrack: Serialize by Router on US-RitaHayworth/US-Corporate/3M/US(Release 5.0.3 |March
 21, 2000) at 01/17/2001 10:21:14 AM
MIME-Version: 1.0
Content-type: text/plain; charset=us-ascii


... snip ...

> For example, in Win 98, R 1.1.1,
>
> > polyroot(c(2,1,1))
>
> correctly (per the help index) gives the roots of  1 + (1*x) + (2*x^2) as
>
> [1] -0.5+1.322876i -0.5-1.322876i

Mm, no. The coefficients are by increasing degree, so these are the
roots of 2+x+x^2

... snip ...

The manual page seems to have a typo.  It says (1.2.0 on Win)

Arguments:

       z: the vector of polynomial coefficients in decreasing order.


Andy


==> 751.reply.3 <==
From pd@biostat.ku.dk  Wed Jan 17 17:58:58 2001
Received: from biostat.ku.dk (blueberry [130.225.108.193])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id RAA00346;
	Wed, 17 Jan 2001 17:58:58 +0100 (MET)
Received: (from pd@localhost)
	by biostat.ku.dk (8.9.3/8.9.3) id SAA02739;
	Wed, 17 Jan 2001 18:00:38 +0100
Sender: pd@blueberry.kubism.ku.dk
To: apjaworski@mmm.com
Cc: r-devel@stat.math.ethz.ch, R-bugs@biostat.ku.dk
Subject: Re: [Rd] PR#751
References: <OF636EC57A.115D0ABC-ON862569D7.00599413@mmm.com>
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 17 Jan 2001 18:00:38 +0100
In-Reply-To: apjaworski@mmm.com's message of "Wed, 17 Jan 2001 10:21:10 -0600"
Message-ID: <x2zogqru4p.fsf@blueberry.kubism.ku.dk>
Lines: 37
X-Mailer: Gnus v5.7/Emacs 20.7
Mime-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: 7bit

apjaworski@mmm.com writes:

> ... snip ...
> 
> > For example, in Win 98, R 1.1.1,
> >
> > > polyroot(c(2,1,1))
> >
> > correctly (per the help index) gives the roots of  1 + (1*x) + (2*x^2) as
> >
> > [1] -0.5+1.322876i -0.5-1.322876i
> 
> Mm, no. The coefficients are by increasing degree, so these are the
> roots of 2+x+x^2
> 
> ... snip ...
> 
> The manual page seems to have a typo.  It says (1.2.0 on Win)
> 
> Arguments:
> 
>        z: the vector of polynomial coefficients in decreasing order.
> 

I suppose that could be clearer (it kind of depends on what you
consider the "normal" order), but it also has

              p(x) = z1 + z2 * x + ... + z[n] * x^(n-1)

which should be clear enough.


-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

==> 751.reply.4 <==
From pd@biostat.ku.dk  Wed Jan 17 20:45:51 2001
Received: from biostat.ku.dk (blueberry [130.225.108.193])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id UAA01167;
	Wed, 17 Jan 2001 20:45:50 +0100 (MET)
Received: (from pd@localhost)
	by biostat.ku.dk (8.9.3/8.9.3) id UAA15273;
	Wed, 17 Jan 2001 20:47:29 +0100
Sender: pd@blueberry.kubism.ku.dk
To: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Cc: mark0060@tc.umn.edu, r-devel@stat.math.ethz.ch, R-bugs@biostat.ku.dk
Subject: Re: [Rd] PR#751
References: <200101170252.DAA19529@pubhealth.ku.dk> <x2hf2yirwo.fsf@blueberry.kubism.ku.dk>
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 17 Jan 2001 20:47:27 +0100
In-Reply-To: Peter Dalgaard BSA's message of "17 Jan 2001 08:01:11 +0100"
Message-ID: <x2vgreyn8v.fsf@blueberry.kubism.ku.dk>
Lines: 47
X-Mailer: Gnus v5.7/Emacs 20.7
Mime-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: 7bit

Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk> writes:

> > [1]   0+0i   0+0i -10+0i
> > 
> > which aren't all roots of x^3.
> 
> That one is way out, however. Even more "fun":
> 
> > polyroot(c(-100,0,1))
> [1]  10+0i -10+0i
> > x<- polyroot(c(0,0,0,1))
> > x
> [1]   0+0i   0+0i -10+0i
> > x<-polyroot(c(2,1,1))
> > x<- polyroot(c(0,0,0,1))
> > x
> [1]  0.0+0.000000i  0.0+0.000000i -0.5-1.322876i
> 
> I.e. the result of polyroot(c(0,0,0,1)) depends on the previous
> polyroot calculation! So there's more to the problem than numerical
> instability.
> 
> Thanks for pointing it out.

Found and fixed. Unfortunately the code had just forgotten to test for
the case where you end with a zero-degree polynomial after zero-root
removal, so the fix has zero effect on the accuracy issue. 

The fix is simply 

--- src/appl/cpoly.c    2000/11/24 21:34:31     1.20
+++ src/appl/cpoly.c    2001/01/17 19:45:24
@@ -148,6 +148,8 @@
     nn++;
     /*-- Now, global var.  nn := #{coefficients} = (relevant degree)+1 */
 
+    if (nn == 1) return;
+
     /* make a copy of the coefficients and shr[] = | p[] | */
     for (i = 0; i < nn; i++) {
        pr[i] = opr[i];

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

Directory:  Add-ons

* PR# 981 *
Subject: read.xport() bug
From: abroman@jhu.edu
Date: Fri, 15 Jun 2001 00:25:54 +0200 (MET DST)
--confirmed on Windows and Solaris.
--Seems that file is not in the expected format
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 981 <==
From abroman@jhu.edu  Fri Jun 15 00:25:55 2001
Received: from blueberry.kubism.ku.dk (blueberry [130.225.108.193])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id AAA17758
	for <R-bugs@biostat.ku.dk>; Fri, 15 Jun 2001 00:25:54 +0200 (MET DST)
Date: Fri, 15 Jun 2001 00:25:54 +0200 (MET DST)
From: abroman@jhu.edu
Message-Id: <200106142225.AAA17758@pubhealth.ku.dk>
To: R-bugs@biostat.ku.dk
Subject: read.xport() bug

Full_Name: Aimee Teo Broman
Version: 1.23
OS: Windows 98
Submission from: (NULL) (162.129.145.115)


When I use the read.xport() function in the foreign library, the Rgui shuts
down.   My xport file was created in SAS ver.6, using the xport engine in proc
copy. 

R commands:
1. library(foreign)
2. lookup.xport("fdt.tpt")  <-- this works fine.
3. read.xport("fdt.tpt")  <-- this produces a window that says "This program has
performed an illegal operation and will be shut down."  The details are shown
below:

RGUI caused an invalid page fault in
module FOREIGN.DLL at 017f:14c727e7.
Registers:
EAX=00000000 CS=017f EIP=14c727e7 EFLGS=00010246
EBX=034a1320 SS=0187 ESP=0270f404 EBP=0270f46c
ECX=00000000 DS=0187 ESI=00000006 FS=1847
EDX=034a1338 ES=0187 EDI=034a1335 GS=0000
Bytes at CS:EIP:
c6 00 00 83 c4 fc 83 c4 10 39 d8 75 09 a1 48 02 
Stack dump:
034a1320 00000020 034b5a50 78037ce8 02c5cf68 00000002 0270f4ac 004250ae 00585140
02c5c728 0270f46c 00000079 00000001 0348c150 0348e9d0 78037ce8 

The date on the foreign.zip file is 18-May-2001, so I believe I have the most
recent version of both R and the foreign package.  I would call this an
intermittant problem, except that I have this problem more frequently than not.
Yesterday it was working, but today it is shutting down the gui again.  Any help
would be appreciated.

thanks much,
Aimee Broman

==> 981.followup.1 <==
From ripley@stats.ox.ac.uk  Fri Jun 15 08:48:44 2001
Received: from toucan.stats.ox.ac.uk (toucan.stats.ox.ac.uk [163.1.20.20])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id IAA19206
	for <R-bugs@biostat.ku.dk>; Fri, 15 Jun 2001 08:48:43 +0200 (MET DST)
Received: from max153.public.ox.ac.uk (max153.public.ox.ac.uk [192.76.27.153])
	by toucan.stats.ox.ac.uk (8.9.0/8.9.0) with ESMTP id HAA03707;
	Fri, 15 Jun 2001 07:48:34 +0100 (BST)
Date: Fri, 15 Jun 2001 07:48:39 +0100 (BST)
From: Prof Brian D Ripley <ripley@stats.ox.ac.uk>
Sender: <ripley@auk.stats>
To: <abroman@jhu.edu>
cc: <R-bugs@biostat.ku.dk>
Subject: Re: [Rd] read.xport() bug (PR#981)
In-Reply-To: <200106142225.AAA17768@pubhealth.ku.dk>
Message-ID: <Pine.GSO.4.31.0106150743370.21768-100000@auk.stats>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII

All packages have a version number, in their DESCRIPTION file or via

package.description("foreign")$Version

I suspect this is 0.4-3, but please confirm.

We do need a reproducible example to make any sense of this bug report, and
for that we need fdt.tpt.  Could you please attach that file to your reply.


On Fri, 15 Jun 2001 abroman@jhu.edu wrote:

> Full_Name: Aimee Teo Broman
> Version: 1.23
> OS: Windows 98
> Submission from: (NULL) (162.129.145.115)
>
>
> When I use the read.xport() function in the foreign library, the Rgui shuts
> down.   My xport file was created in SAS ver.6, using the xport engine in proc
> copy.
>
> R commands:
> 1. library(foreign)
> 2. lookup.xport("fdt.tpt")  <-- this works fine.
> 3. read.xport("fdt.tpt")  <-- this produces a window that says "This program has
> performed an illegal operation and will be shut down."  The details are shown
> below:
>
> RGUI caused an invalid page fault in
> module FOREIGN.DLL at 017f:14c727e7.
> Registers:
> EAX=00000000 CS=017f EIP=14c727e7 EFLGS=00010246
> EBX=034a1320 SS=0187 ESP=0270f404 EBP=0270f46c
> ECX=00000000 DS=0187 ESI=00000006 FS=1847
> EDX=034a1338 ES=0187 EDI=034a1335 GS=0000
> Bytes at CS:EIP:
> c6 00 00 83 c4 fc 83 c4 10 39 d8 75 09 a1 48 02
> Stack dump:
> 034a1320 00000020 034b5a50 78037ce8 02c5cf68 00000002 0270f4ac 004250ae 00585140
> 02c5c728 0270f46c 00000079 00000001 0348c150 0348e9d0 78037ce8
>
> The date on the foreign.zip file is 18-May-2001, so I believe I have the most
> recent version of both R and the foreign package.  I would call this an
> intermittant problem, except that I have this problem more frequently than not.
> Yesterday it was working, but today it is shutting down the gui again.  Any help
> would be appreciated.
>
> thanks much,
> Aimee Broman
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


==> 981.followup.2 <==
From abroman@dcpom.med.jhu.edu  Fri Jun 15 15:50:25 2001
Received: from dcpom.med.jhu.edu ([162.129.145.30])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id PAA26162
	for <R-bugs@biostat.ku.dk>; Fri, 15 Jun 2001 15:50:24 +0200 (MET DST)
Received: from localhost (abroman@localhost)
	by dcpom.med.jhu.edu (8.9.1b+Sun/8.9.1) with ESMTP id JAA29889;
	Fri, 15 Jun 2001 09:50:38 -0400 (EDT)
Date: Fri, 15 Jun 2001 09:50:38 -0400 (EDT)
From: Aimee Teo Broman <abroman@dcpom.med.jhu.edu>
Reply-To: abroman@jhu.edu
To: Prof Brian D Ripley <ripley@stats.ox.ac.uk>
cc: abroman@jhu.edu, R-bugs@biostat.ku.dk
Subject: Re: [Rd] read.xport() bug (PR#981)
In-Reply-To: <Pine.GSO.4.31.0106150743370.21768-100000@auk.stats>
Message-ID: <Pine.GSO.4.05.10106150926320.29736-101000@dcpom.med.jhu.edu>
MIME-Version: 1.0
Content-Type: MULTIPART/MIXED; BOUNDARY="-559023410-851401618-992613038=:29850"

  This message is in MIME format.  The first part should be readable text,
  while the remaining parts are likely unreadable without MIME-aware tools.
  Send mail to mime@docserver.cac.washington.edu for more info.

---559023410-851401618-992613038=:29850
Content-Type: TEXT/PLAIN; charset=US-ASCII



Yes, the version of the foreign package is 0.4-3 .

I've found that the problem is with a particular variable in the
dataset--a character variable containing names.  If I remove this
variable from the rest of the dataset, the transfer file reads in
fine.  I attach a transfer file with just the name variable, in the
case that you'd like to take a look at it.

Thanks very much,
Aimee

On Fri, 15 Jun 2001, Prof Brian D Ripley wrote:

> All packages have a version number, in their DESCRIPTION file or via
> 
> package.description("foreign")$Version
> 
> I suspect this is 0.4-3, but please confirm.
> 
> We do need a reproducible example to make any sense of this bug report, and
> for that we need fdt.tpt.  Could you please attach that file to your reply.
> 
> 
> On Fri, 15 Jun 2001 abroman@jhu.edu wrote:
> 
> > Full_Name: Aimee Teo Broman
> > Version: 1.23
> > OS: Windows 98
> > Submission from: (NULL) (162.129.145.115)
> >
> >
> > When I use the read.xport() function in the foreign library, the Rgui shuts
> > down.   My xport file was created in SAS ver.6, using the xport engine in proc
> > copy.
> >
> > R commands:
> > 1. library(foreign)
> > 2. lookup.xport("fdt.tpt")  <-- this works fine.
> > 3. read.xport("fdt.tpt")  <-- this produces a window that says "This program has
> > performed an illegal operation and will be shut down."  The details are shown
> > below:
> >
> > RGUI caused an invalid page fault in
> > module FOREIGN.DLL at 017f:14c727e7.
> > Registers:
> > EAX=00000000 CS=017f EIP=14c727e7 EFLGS=00010246
> > EBX=034a1320 SS=0187 ESP=0270f404 EBP=0270f46c
> > ECX=00000000 DS=0187 ESI=00000006 FS=1847
> > EDX=034a1338 ES=0187 EDI=034a1335 GS=0000
> > Bytes at CS:EIP:
> > c6 00 00 83 c4 fc 83 c4 10 39 d8 75 09 a1 48 02
> > Stack dump:
> > 034a1320 00000020 034b5a50 78037ce8 02c5cf68 00000002 0270f4ac 004250ae 00585140
> > 02c5c728 0270f46c 00000079 00000001 0348c150 0348e9d0 78037ce8
> >
> > The date on the foreign.zip file is 18-May-2001, so I believe I have the most
> > recent version of both R and the foreign package.  I would call this an
> > intermittant problem, except that I have this problem more frequently than not.
> > Yesterday it was working, but today it is shutting down the gui again.  Any help
> > would be appreciated.
> >
> > thanks much,
> > Aimee Broman
> >
> > -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> > r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> > Send "info", "help", or "[un]subscribe"
> > (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> > _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
> >
> 
> -- 
> Brian D. Ripley,                  ripley@stats.ox.ac.uk
> Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
> University of Oxford,             Tel:  +44 1865 272861 (self)
> 1 South Parks Road,                     +44 1865 272860 (secr)
> Oxford OX1 3TG, UK                Fax:  +44 1865 272595
> 
> 

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
dana center for preventive ophthalmology    phone:(410)614-2483
600 n wolfe st. suite wilmer 129              fax:(410)955-0096
baltimore, md 21287

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~


---559023410-851401618-992613038=:29850
Content-Type: APPLICATION/octet-stream; name="fdt1.tpt"
Content-Transfer-Encoding: BASE64
Content-ID: <Pine.GSO.4.05.10106150950380.29850@dcpom.med.jhu.edu>
Content-Description: 
Content-Disposition: attachment; filename="fdt1.tpt"

SEVBREVSIFJFQ09SRCoqKioqKipMSUJSQVJZIEhFQURFUiBSRUNPUkQhISEh
ISEhMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwICBTQVMgICAgIFNB
UyAgICAgU0FTTElCICA2LjEyICAgIFNvbGFyaXMgICAgICAgICAgICAgICAg
ICAgICAgICAgMTVKVU4wMTowOTo0NToxOTE1SlVOMDE6MDk6NDU6MTkgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgSEVBREVSIFJFQ09SRCoqKioqKipNRU1CRVIgIEhF
QURFUiBSRUNPUkQhISEhISEhMDAwMDAwMDAwMDAwMDAwMDAxNjAwMDAwMDAw
MTQwICBIRUFERVIgUkVDT1JEKioqKioqKkRTQ1JQVFIgSEVBREVSIFJFQ09S
RCEhISEhISEwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAgIFNBUyAg
ICAgQ0FUMSAgICBTQVNEQVRBIDYuMTIgICAgU29sYXJpcyAgICAgICAgICAg
ICAgICAgICAgICAgICAxNUpVTjAxOjA5OjQ1OjE5MTVKVU4wMTowOTo0NTox
OSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICBIRUFERVIgUkVDT1JEKioqKioqKk5BTUVT
VFIgSEVBREVSIFJFQ09SRCEhISEhISEwMDAwMDAwMDAxMDAwMDAwMDAwMDAw
MDAwMDAwMDAgIAACAAAAFAABTkFNRSAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAAAAAAAAAAACAgICAgICAg
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAICAgICAgICAgICAgICAgICAgICBIRUFERVIgUkVD
T1JEKioqKioqKk9CUyAgICAgSEVBREVSIFJFQ09SRCEhISEhISEwMDAwMDAw
MDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAgIE1BTkdBVEhBTCAgICAgICAgICAg
U0VCQVNUSU5FICAgICAgICAgICBBQkRVTCBLQURBUiAgICAgICAgIFNJVkFH
TkFOQSBTVU5EQVJBTSAgUy5NQVJZICAgICAgICAgICAgICBKRVlBUkFNQU4g
ICAgICAgICAgIEJBU0tBUkFOICAgICAgICAgICAgTUFSWSAgICAgICAgICAg
ICAgICBCQUJVICAgICAgICAgICAgICAgIEtSSVNITkFOICAgICAgICAgICAg
REVWQUtJICAgICAgICAgICAgICBSQUpBTU1BTCAgICAgICAgICAgIFdJTExJ
TkdUT04gICAgICAgICAgUkFNQSBLUklTSE5BTiAgICAgICBKRVlBU0VFTEkg
ICAgICAgICAgIE1VVEhBTU1BTCAgICAgICAgICAgTUVFUkEgU0hBSElCICAg
ICAgICBSQUpVICAgICAgICAgICAgICAgIFJBTUEgS1JJU0hOQU4gICAgICAg
S0hBSkEgIE1ZREVFTiAgICAgICBTVUJSQU1BTklBTiAgICAgICAgIEJBTEEg
QVJVTkFDSEFMQU0gICAgU1VEQUxBSU1VVEhVICAgICAgICBDQVRIRVJJTkUu
TS5EICAgICAgIFJBSkxBS1NITUkgICAgICAgICAgUEFHSFJWRUxVLkwgICAg
ICAgICBSQU1BTElOR0FNICAgICAgICAgIFJBVEhOQSBLVU1BUkkgICAgICAg
U0FSQVNXQVRIWSAgICAgICAgICBTQUlMQVBQQU4gICAgICAgICAgIFBBUlZB
VEhZICAgICAgICAgICAgR0FOVEhJTUFUSEkgICAgICAgICBESEFNT0RBUkFO
ICAgICAgICAgIEhBUklIQVJBTi5SICAgICAgICAgUEFVTFNBTVkgICAgICAg
ICAgICBTVUJSQU1BTklBTS5TICAgICAgIFNBTkdBUkFOQVJBWUFOQU4gICAg
QVlZQU5BUiBUSEVWQVIgICAgICBQQUxBTkkgICAgICAgICAgICAgIFZFTFUg
ICAgICAgICAgICAgICAgUEFOTklZQU5NQUxBSSAgICAgICBESEFOQUxBS1NI
TUkgICAgICAgIFJBSFVNQU4gQkVFVkkgICAgICAgVEhJTEFHQVZBVFkgICAg
ICAgICBWQU1FREVSQU4gICAgICAgICAgIEpBTkFOVEhBTkFOIFNBUEFMWUEg
U0VOVEhJTCBBUlVNVUdBTSAgICBQVVJVSk9USEFNQU4gICAgICAgIFNBTktB
UkEgTkFSQVlBTkFOLlMgQUxJQ0UuRCAgICAgICAgICAgICBTSEFOVEhBLksg
ICAgICAgICAgIEpBTkFLSUFNTUFMICAgICAgICAgR09NQVRIWSAgICAgICAg
ICAgICBSQVRISU5BQkFJICAgICAgICAgIEVTVEhFUiAgICAgICAgICAgICAg
Sk9TRVBILlUgICAgICAgICAgICBBTEFNRUxVUiAgICAgICAgICAgIFZJQ1RP
Ui5BICAgICAgICAgICAgUEVSVU1BTCAgICAgICAgICAgICBQQURNQU5BQkFO
Lk4gICAgICAgIFNFTFZBTkFZQUdBTi5TICAgICAgVEhJUlVQQVRIWSAgICAg
ICAgICBNRUVSQU5NT0hBSURFRU4gICAgIFBBVENIQUkgIFBFUlVNQUwgICAg
R1VSVVNBTVkuViAgICAgICAgICBKRVlBUkFOSSAgICAgICAgICAgIFNIQU5N
VUdBTSBBTU1BTCAgICAgU0FOVEhBIEtVTUFSSSAgICAgICBNVVRIVSBTQU1Z
LkEgICAgICAgIEdPTUFUSFkgQU1NQUwgICAgICAgU0FOS0FSQUxJTkdBTSAg
ICAgICBIQVJJSEFSQSBTVUJSQU1BTklBTkFOQkFNTUFMICAgICAgICAgICAg
TUFIQURFVkFOLkIgICAgICAgICBNQURIQVZBTiBOQUlSICAgICAgIEJBTEEg
U0FSQVNXQVRIWSAgICAgQVJVTVVHQU0gICAgICAgICAgICBHQU5HQUNITEVT
QU4gTkFJUiAgIFZFRVJBTEFLU0hNSSAgICAgICAgU0hBTk1VR0FNICAgICAg
ICAgICBQRVJVTUFMIFBJTExBSSAgICAgIERFVkFEQVNTICAgICAgICAgICAg
Q0hJVFJBICAgICAgICAgICAgICBNQUhBTElOR0FNICAgICAgICAgIEMuTVVS
VUdBTiAgICAgICAgICAgR0FOQVBBVEhZLkwgICAgICAgICBHVVJVU0FNWSBO
QUlDS0VSICAgIExBS1NITUkgIFNIQU5NVUdBTSAgVEhBTkdBTUFOSSAgICAg
ICAgICBEVVJBSVNBTVkgICAgICAgICAgIFJBSkFMQUtTSE1JLlIgICAgICAg
TUFOT0hBUkFOICAgICAgICAgICBCQUxTVUJSQU1BTklBTiAgICAgIEFNSU5B
ICAgICAgICAgICAgICAgU0FST0pBICAgICAgICAgICAgICBOQUxMQU1NQUwg
ICAgICAgICAgIFJFTkdBUkFKQU4gICAgICAgICAgU0hFR0EgRkFUSElNQSAg
ICAgICBTSEVOQkFHQUxBS1NITUkgICAgIFBJVENIQUlBSCAgICAgICAgICAg
S0FMSVlBIE1VREFMSUFSICAgICBLUklTSE5BTi5ELksgICAgICAgIFRISVJV
R05BTkFNICAgICAgICAgREhBVURBUEFOSSAgICAgICAgICBLUklTSE5BTiAg
ICAgICAgICAgIFZFTlVHT1BBTCAgICAgICAgICAgTUVFTkFNQkFMLlYgICAg
ICAgICBNQVRIRVcgRlJBTkNJUyAgICAgIFBPTkdBTEFTQU1ZICAgICAgICAg
TkFUQVJBSkEgUEFORElBTiAgICBLQU5EQU4gICAgICAgICAgICAgIEtBTUFM
VURFRU4gICAgICAgICAgUi5MQUtTSE1JICAgICAgICAgICBLQU5USElBTU1B
TC5EICAgICAgIFBFUlVNQUwgICAgICAgICAgICAgU1VCQUlEQSAgICAgICAg
ICAgICBWQVNBTlRIQSAgICAgICAgICAgIFNSSU5JVkFTQU4gICAgICAgICAg
UkFKLlIuQiAgICAgICAgICAgICBTQU5USE9SQUdJUkkuUyAgICAgIE1FSEFS
VU5JU0hBICAgICAgICAgR09WSU5EQVNBTVkgICAgICAgICBHUkVUQSBGRVJO
QU5ETyAgICAgIE1VTklZQU1NQUwgICAgICAgICAgTE9HQU5BVEhBTiAgICAg
ICAgICBKT1NFUEguSy5UICAgICAgICAgIFRIQU5HQVJBSkFOLkEgICAgICAg
R0FOQVBBVEhJICAgICAgICAgICBDSElOTkFJQU4gICAgICAgICAgIE5BTExB
TU1BTCAgICAgICAgICAgUkFKRVNXQVJJICAgICAgICAgICBLVVBQQU1NQUwg
ICAgICAgICAgIE1PSEFOICAgICAgICAgICAgICAgS1JJU0hOQU1PT1JUSFkg
ICAgICBQVU5OVVNBTVkgICAgICAgICAgIFZJUlVUSEFHSVJJLk0gICAgICAg
QkFTS0FSQU4gICAgICAgICAgICBLT1RUQUlBUFBBTiAgICAgICAgIFJBSkFU
SFkuSyAgICAgICAgICAgUkFKQSAgICAgICAgICAgICAgICBHQU5FU0hBTi5D
LlYgICAgICAgIERBTkRBWUFUSEFQQU5JLk0gICAgQkFDS0lBTS5QICAgICAg
ICAgICBsTEFLU0hNSS5OICAgICAgICAgIFJBTUFLUklTSE5BSUFIICAgICAg
UkFNVVRIQUkgICAgICAgICAgICBTVUJCVVJBWUFFTFUgICAgICAgIEFSVU1V
R0FNICAgICAgICAgICAgS0FMVURFRU4gICAgICAgICAgICBTVUJCQU1NQUwg
ICAgICAgICAgIFJFTkdBTkFUSEFOICAgICAgICAgQ0hJTk5BU01BWS5BICAg
ICAgICBCQUxBU1VCUkFNQU5JQU4gQUNIQUtVTEFOVEhBSSBUSEVSQVMgICAg
Sk9TRVBILkQgICAgICAgICAgICBNQU5JQ0tBTS5BICAgICAgICAgIE1VVEhV
IE1FRU5BS1NISVNVTkRBTU9IQU4gICAgICAgICAgICAgICBDSElUQU1CQVJB
TS4gICAgICAgIE1BSEFCVSBCSSAgICAgICAgICAgR09QQUxBS1JJU0hOQVdB
UlJJT1JBTEVZQU1NQSAgICAgICAgICAgIEFCUkFIQU0gR0VPUkdFICAgICAg
Uk9TQU1NQUwgICAgICAgICAgICBWQUlSQVZBTiAgICAgICAgICAgIFlBR0FN
TUFMICAgICAgICAgICAgS0FTVEhVUkkgICAgICAgICAgICBTQU5HSUxJQU1N
QUwgICAgICAgIEtBTElBUFBBIFBJTExBSSAgICAgSEFKSSBBQkRVTExBSCAg
ICAgICBSRU5HQU5BVEhBTiAgICAgICAgIEtBUlVQUEFJQUggICAgICAgICAg
U0VMVkFSQUogICAgICAgICAgICBNVVRIVVNBTVkgVC5LICAgICAgIEtBUlVQ
UFVTQU1ZICAgICAgICAgUEhJTElQIEpPSE4gICAgICAgICBNT0hBTUVEIEEu
UCAgICAgICAgIEpFWUFWRUwgICAgICAgICAgICAgQklCSUpIT04gICAgICAg
ICAgICBWSUpBWUFTVU5EQVJBTSAgICAgIA==
---559023410-851401618-992613038=:29850--

==> 981.audit <==
Sun Jun 17 09:36:50 2001	ripley	changed notes
Sun Jun 17 09:36:50 2001	ripley	foobar
Sun Jun 17 09:36:50 2001	ripley	moved from incoming to Add-ons
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
* PR# 948 *
Subject:  xyplot,grid.text segfault 
From: Peter Malewski <p.malewski@tu-bs.de>
Date: Sat, 26 May 2001 13:24:11 +0200
-- no notes --
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 948 <==
From postmaster@franz.stat.wisc.edu  Sat May 26 13:24:02 2001
Received: from franz.stat.wisc.edu (root@franz.stat.wisc.edu [128.105.174.95])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id NAA27393
	for <r-bugs@biostat.ku.dk>; Sat, 26 May 2001 13:24:02 +0200 (MET DST)
Received: from mout0.freenet.de (really [194.97.50.131]) by franz.stat.wisc.edu
	via smail with esmtp (ident exim using rfc1413)
	id <m153cAm-000JIqC@franz.stat.wisc.edu> (Debian Smail3.2.0.111)
	for <r-bugs@r-project.org>; Sat, 26 May 2001 06:23:56 -0500 (CDT) 
Received: from [194.97.50.135] (helo=mx2.freenet.de)
	by mout0.freenet.de with esmtp (Exim 3.22 #1)
	id 153cAj-0006kz-00; Sat, 26 May 2001 13:23:53 +0200
Received: from b90b8.pppool.de ([213.7.144.184] helo=Uranus)
	by mx2.freenet.de with esmtp (Exim 3.22 #1)
	id 153cAi-0005E0-00; Sat, 26 May 2001 13:23:53 +0200
Received: from peter by Uranus with local (Exim 3.12 #1 (Debian))
	id 153cB1-00014k-00; Sat, 26 May 2001 13:24:11 +0200
To: r-bugs@r-project.org
Subject:  xyplot,grid.text segfault 
Cc: p.malewski@tu-bs.de
Message-Id: <E153cB1-00014k-00@Uranus>
From: Peter Malewski <p.malewski@tu-bs.de>
Date: Sat, 26 May 2001 13:24:11 +0200

First, thank you very much for that lattice-package, second, the code
below segfaults R:

zz <- data.frame(
                 y=rnorm(100),x=rnorm(100),z=round(rnorm(100)),
                 g=as.character(rep(1:2,50)))
xyplot(y~ x|z,data=zz,groups=g,
            panel = function(x, y, subscripts, groups)  
            grid.text(x=x, y=y, label=groups[subscripts])
       )

I'm not sure if I have understood that panel stuff right, but anyway,
it shouldn't segfault. BTW: I also unsure if I have to use the
develop-version of R & whether lattice bugs should be submitted
(because of the devel-status??).

Peter

--please do not edit the information below--

Version:
 platform = i686-pc-linux-gnu
 arch = i686
 os = linux-gnu
 system = i686, linux-gnu
 status = 
 major = 1
 minor = 2.3
 year = 2001
 month = 04
 day = 26
 language = R

Search Path:
 .GlobalEnv, package:grid, package:lattice, package:ctest, Autoloads, package:base

==> 948.reply.1 <==
From pd@blueberry.kubism.ku.dk  Sat May 26 16:13:26 2001
Received: from blueberry.kubism.ku.dk (blueberry [130.225.108.193])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id QAA27829;
	Sat, 26 May 2001 16:13:25 +0200 (MET DST)
Received: (from pd@localhost)
	by blueberry.kubism.ku.dk (8.9.3/8.9.3) id QAA28846;
	Sat, 26 May 2001 16:18:09 +0200
Sender: pd@pubhealth.ku.dk
To: p.malewski@tu-bs.de
Cc: r-devel@stat.math.ethz.ch, R-bugs@biostat.ku.dk
Subject: Re: [Rd] xyplot,grid.text segfault (PR#948)
References: <200105261124.NAA27403@pubhealth.ku.dk>
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 26 May 2001 16:18:08 +0200
In-Reply-To: p.malewski@tu-bs.de's message of "Sat, 26 May 2001 13:24:03 +0200 (MET DST)"
Message-ID: <x2ae40p527.fsf@blueberry.kubism.ku.dk>
Lines: 37
X-Mailer: Gnus v5.7/Emacs 20.7
Mime-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: 7bit

p.malewski@tu-bs.de writes:

> First, thank you very much for that lattice-package, second, the code
> below segfaults R:
> 
> zz <- data.frame(
>                  y=rnorm(100),x=rnorm(100),z=round(rnorm(100)),
>                  g=as.character(rep(1:2,50)))
> xyplot(y~ x|z,data=zz,groups=g,
>             panel = function(x, y, subscripts, groups)  
>             grid.text(x=x, y=y, label=groups[subscripts])
>        )
> 
> I'm not sure if I have understood that panel stuff right, but anyway,
> it shouldn't segfault. BTW: I also unsure if I have to use the
> develop-version of R & whether lattice bugs should be submitted
> (because of the devel-status??).

Well, it is easier for us to deal with erroneously submitted bug than
erroneously unsubmitted ones. We have an Add-Ons category on r-bugs to
put it in. 

Lattice is closely associated with the core team, so we'd be able to
track this kind of problem. With some other packages which we do not
maintain, we have some trouble figuring out whether a report has been
solved or whether it was even a bug in the first place (it would be
nice if the original submitters would lend a hand there).

As I remember it, Paul and Deepayan were somewhat vague about exactly
what was required, except that you'd need something relatively recent.
A segfault certainly looks like a real bug.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

==> 948.reply.2 <==
From pd@blueberry.kubism.ku.dk  Sat May 26 18:30:14 2001
Received: from blueberry.kubism.ku.dk (blueberry [130.225.108.193])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id SAA28262;
	Sat, 26 May 2001 18:30:13 +0200 (MET DST)
Received: (from pd@localhost)
	by blueberry.kubism.ku.dk (8.9.3/8.9.3) id SAA28920;
	Sat, 26 May 2001 18:34:57 +0200
Sender: pd@pubhealth.ku.dk
To: p.malewski@tu-bs.de
Cc: R-bugs@biostat.ku.dk
Subject: Re: [Rd] xyplot,grid.text segfault (PR#948)
References: <200105261124.NAA27403@pubhealth.ku.dk> <x2ae40p527.fsf@blueberry.kubism.ku.dk>
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 26 May 2001 18:34:57 +0200
In-Reply-To: Peter Dalgaard BSA's message of "26 May 2001 16:18:08 +0200"
Message-ID: <x2r8xcm5la.fsf@blueberry.kubism.ku.dk>
Lines: 15
X-Mailer: Gnus v5.7/Emacs 20.7
Mime-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: 7bit

Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk> writes:


> As I remember it, Paul and Deepayan were somewhat vague about exactly
> what was required, except that you'd need something relatively recent.
> A segfault certainly looks like a real bug.

...and your example crashes with the current development version of R
too, anyway.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

==> 948.reply.3 <==
From pd@blueberry.kubism.ku.dk  Sat May 26 20:48:38 2001
Received: from blueberry.kubism.ku.dk (blueberry [130.225.108.193])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id UAA28449;
	Sat, 26 May 2001 20:48:37 +0200 (MET DST)
Received: (from pd@localhost)
	by blueberry.kubism.ku.dk (8.9.3/8.9.3) id UAA28992;
	Sat, 26 May 2001 20:53:22 +0200
Sender: pd@pubhealth.ku.dk
To: p.malewski@tu-bs.de
Cc: r-devel@stat.math.ethz.ch, R-bugs@biostat.ku.dk
Subject: Re: [Rd] xyplot,grid.text segfault (PR#948)
References: <200105261124.NAA27403@pubhealth.ku.dk>
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 26 May 2001 20:53:22 +0200
In-Reply-To: p.malewski@tu-bs.de's message of "Sat, 26 May 2001 13:24:03 +0200 (MET DST)"
Message-ID: <x2k834eycd.fsf@blueberry.kubism.ku.dk>
Lines: 43
X-Mailer: Gnus v5.7/Emacs 20.7
Mime-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: 7bit

p.malewski@tu-bs.de writes:

> First, thank you very much for that lattice-package, second, the code
> below segfaults R:
> 
> zz <- data.frame(
>                  y=rnorm(100),x=rnorm(100),z=round(rnorm(100)),
>                  g=as.character(rep(1:2,50)))
> xyplot(y~ x|z,data=zz,groups=g,
>             panel = function(x, y, subscripts, groups)  
>             grid.text(x=x, y=y, label=groups[subscripts])
>        )
> 
> I'm not sure if I have understood that panel stuff right, but anyway,
> it shouldn't segfault. BTW: I also unsure if I have to use the
> develop-version of R & whether lattice bugs should be submitted
> (because of the devel-status??).
> 
> Peter

grid.text() seems unhappy with being passed a non-character vector for
the label argument. I think Paul muttered something to the effect that
he knew there would be that kind of weaknesses in the code.

The following runs successfully (well, at least it doesn't crash - the
result looks a bit weird):

library(lattice)
zz <- data.frame(
                 y=rnorm(100),x=rnorm(100),z=round(rnorm(100)),
                 g=as.character(rep(1:2,50)))
xyplot(y~ x|z,data=zz,groups=g,
            panel = function(x, y, subscripts, groups)
            grid.text(x=x, y=y,
                      label=as.character(groups[subscripts]))
       )


-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

==> 948.audit <==
Mon May 28 21:40:24 2001	thomas	moved from incoming to Add-ons

==> 948.followup.1 <==
From paul@stat.auckland.ac.nz  Tue May 29 01:31:51 2001
Received: from mailhost.auckland.ac.nz (mailhost.auckland.ac.nz [130.216.1.4] (may be forged))
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id BAA14283;
	Tue, 29 May 2001 01:31:48 +0200 (MET DST)
Received: from stat1.stat.auckland.ac.nz (stat1.stat.auckland.ac.nz [130.216.93.1])
	by mailhost.auckland.ac.nz (8.9.2/8.9.2/8.9.2-ua) with ESMTP id LAA14430;
	Tue, 29 May 2001 11:31:40 +1200 (NZST)
Received: from murrell (murrell.stat.auckland.ac.nz [130.216.93.23])
	by stat1.stat.auckland.ac.nz (8.9.3+Sun/8.8.8) with SMTP id LAA08200;
	Tue, 29 May 2001 11:31:40 +1200 (NZST)
Message-ID: <019001c0e7d0$fb44fc70$175dd882@stat.auckland.ac.nz>
From: "Paul Murrell" <paul@stat.auckland.ac.nz>
To: <p.malewski@tu-bs.de>, "Peter Dalgaard BSA" <p.dalgaard@biostat.ku.dk>
Cc: <r-devel@stat.math.ethz.ch>, <R-bugs@biostat.ku.dk>
References: <200105261124.NAA27403@pubhealth.ku.dk> <x2k834eycd.fsf@blueberry.kubism.ku.dk>
Subject: Re: [Rd] xyplot,grid.text segfault (PR#948)
Date: Tue, 29 May 2001 11:50:31 +1200
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 5.00.2014.211
X-MimeOLE: Produced By Microsoft MimeOLE V5.00.2014.211

Hi


> grid.text() seems unhappy with being passed a non-character vector for
> the label argument. I think Paul muttered something to the effect that
> he knew there would be that kind of weaknesses in the code.
>
> The following runs successfully (well, at least it doesn't crash - the
> result looks a bit weird):
>
> library(lattice)
> zz <- data.frame(
>                  y=rnorm(100),x=rnorm(100),z=round(rnorm(100)),
>                  g=as.character(rep(1:2,50)))
> xyplot(y~ x|z,data=zz,groups=g,
>             panel = function(x, y, subscripts, groups)
>             grid.text(x=x, y=y,
>                       label=as.character(groups[subscripts]))
>        )


The results look weird because the x and y locations in grid.text are in
"npc" units by default (that is, they are taken as proportions of the
dimensions of the region they are being drawn in).  This means that values
outside the range 0..1 are drawn outside the limits of the plotting region.
You need to specify "native" units in the call so that the x and y locations
are relative to the scales on the axes of the plotting region.  For example,

    grid.text(x=x, y=y,
                  label=as.character(groups[subscripts]),
                  default.units="native")

This unit stuff is a "feature" of the underlying grid graphics, which is
probably why you did not notice it.  The default panel functions do,
however, provide examples of what needs to be done.  See, for example,
panel.xyplot.

Paul


~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
* PR# 974 *
Subject: Lattice: panel.superpose with ordered factor groups
From: John Maindonald <john.maindonald@anu.edu.au>
Date: Sat, 9 Jun 2001 11:08:51 +1000 (EST)
--The warning is standard S and R behaviour.
--Probably xyplot needs to avoid it (by unclassing?)
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 974 <==
From postmaster@franz.stat.wisc.edu  Sat Jun  9 03:09:10 2001
Received: from franz.stat.wisc.edu (root@franz.stat.wisc.edu [128.105.174.95])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id DAA20814
	for <r-bugs@biostat.ku.dk>; Sat, 9 Jun 2001 03:09:09 +0200 (MET DST)
Received: from leonard.anu.edu.au (really [150.203.2.15]) by franz.stat.wisc.edu
	via smail with esmtp
	id <m158XFN-000JbdC@franz.stat.wisc.edu> (Debian Smail3.2.0.111)
	for <r-bugs@r-project.org>; Fri, 8 Jun 2001 20:09:01 -0500 (CDT) 
Received: (from u9801539@localhost)
	by leonard.anu.edu.au (8.9.3/8.9.3) id LAA01081;
	Sat, 9 Jun 2001 11:08:51 +1000 (EST)
Date: Sat, 9 Jun 2001 11:08:51 +1000 (EST)
From: John Maindonald <john.maindonald@anu.edu.au>
Message-Id: <200106090108.LAA01081@leonard.anu.edu.au>
To: r-bugs@r-project.org
Subject: Lattice: panel.superpose with ordered factor groups
Cc: deepayan@stat.wisc.edu


#       r-bugs@r-project.org
The panel.superpose() function for xyplot() complains when 
the groups parameter is set to be an ordered factor.

> library(mass)
> data(cabbages)
> library(lattice)
> xyplot(HeadWt~VitC|Cult, panel=panel.superpose,
+   groups=Date, data=cabbages)
> cabbages$Date <- ordered(cabbages$Date)  # Make Date an ordered factor
> xyplot(HeadWt~VitC|Cult, panel=panel.superpose,
+   groups=Date, data=cabbages)
Warning messages: 
1: Incompatible methods ("Ops.ordered", "Ops.factor") for "==" 
2: Incompatible methods ("Ops.ordered", "Ops.factor") for "==" 
3: Incompatible methods ("Ops.ordered", "Ops.factor") for "==" 
4: Incompatible methods ("Ops.ordered", "Ops.factor") for "==" 
5: Incompatible methods ("Ops.ordered", "Ops.factor") for "==" 
6: Incompatible methods ("Ops.ordered", "Ops.factor") for "==" 

--please do not edit the information below--

Version:
 platform = i386-pc-mingw32
 arch = x86
 os = Win32
 system = x86, Win32
 status = 
 major = 1
 minor = 2.3
 year = 2001
 month = 04
 day = 26
 language = R

Windows ME 4.90 (build 3000)  

Search Path:
 .GlobalEnv, package:grid, package:lattice, package:mass, package:ctest, Autoloads, package:base
John Maindonald            email: john.maindonald@anu.edu.au        
phone : (6125)3998         fax   : (6125)5549 
Statistical Consulting Unit, Room 1194,
John Dedman Mathematical Sciences Building
(Centre for Mathematics & Its Applications.)

==> 974.audit <==
Sun Jun 17 09:39:36 2001	ripley	changed notes
Sun Jun 17 09:39:36 2001	ripley	foobar
Sun Jun 17 09:39:36 2001	ripley	moved from incoming to Add-ons
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
* PR# 950 *
Subject:  lattice: dev.print(postscript) gives probl. false background Info 
From: Peter Malewski <p.malewski@tu-bs.de>
Date: Sat, 26 May 2001 23:20:29 +0200
-- no notes --
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 950 <==
From postmaster@franz.stat.wisc.edu  Sat May 26 23:28:58 2001
Received: from franz.stat.wisc.edu (root@franz.stat.wisc.edu [128.105.174.95])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id XAA28783
	for <r-bugs@biostat.ku.dk>; Sat, 26 May 2001 23:28:58 +0200 (MET DST)
Received: from mout0.freenet.de (really [194.97.50.131]) by franz.stat.wisc.edu
	via smail with esmtp (ident exim using rfc1413)
	id <m153lcC-000JIzC@franz.stat.wisc.edu> (Debian Smail3.2.0.111)
	for <r-bugs@r-project.org>; Sat, 26 May 2001 16:28:52 -0500 (CDT) 
Received: from [194.97.50.144] (helo=mx1.freenet.de)
	by mout0.freenet.de with esmtp (Exim 3.22 #1)
	id 153lcB-00030a-00; Sat, 26 May 2001 23:28:51 +0200
Received: from b8fba.pppool.de ([213.7.143.186] helo=Uranus)
	by mx1.freenet.de with esmtp (Exim 3.22 #1)
	id 153lcA-0003LO-00; Sat, 26 May 2001 23:28:51 +0200
Received: from peter by Uranus with local (Exim 3.12 #1 (Debian))
	id 153lU5-0005aI-00; Sat, 26 May 2001 23:20:29 +0200
To: r-bugs@r-project.org
Subject:  lattice: dev.print(postscript) gives probl. false background Info 
Cc: p.malewski@tu-bs.de
Message-Id: <E153lU5-0005aI-00@Uranus>
From: Peter Malewski <p.malewski@tu-bs.de>
Date: Sat, 26 May 2001 23:20:29 +0200

There seems to be a problem with the background margins (I only recognized it in a latex ):

xyplot(rnorm(100) ~ rnorm(100))
dev.print(postscript,"/tmp/tmp.ps")

whereas this works on the 1.2.3 version but not with 1.3.0:

dev.copy2eps("/tmp/tmp.ps")                 

both times a warning appears:
Warning message: 
unknown postscript font family, using Helvetica 


Here is the latex-file:

\documentclass{book}
\usepackage{graphicx}

\begin{document}
text texttext texttext texttext texttext texttext text
 \begin{figure}[htb!]
   \begin{center}
     \includegraphics[width=\columnwidth]{/tmp/tmp}      
     \caption{asdas}
   \end{center}
 \end{figure}
texttexttexttexttexttexttexttexttexttexttext
\end{document}

Peter


<<insert bug report here>>



--please do not edit the information below--

Version:
 platform = i686-pc-linux-gnu
 arch = i686
 os = linux-gnu
 system = i686, linux-gnu
 status = Under development (unstable)
 major = 1
 minor = 3.0
 year = 2001
 month = 05
 day = 25
 language = R

Search Path:
 .GlobalEnv, package:grid, package:lattice, package:ctest, Autoloads, package:base

==> 950.audit <==
Mon May 28 21:41:02 2001	thomas	moved from incoming to Add-ons
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

Directory:  Analyses

none

Directory:  Documentation

* PR# 988 *
Subject: input for R-intro
From: "Paul E. Johnson" <pauljohn@ku.edu>
Date: Mon, 18 Jun 2001 13:57:10 -0500
-- no notes --
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 988 <==
From pauljohn@ku.edu  Mon Jun 18 21:03:09 2001
Received: from lark.cc.ku.edu (root@lark.cc.ku.edu [129.237.34.2])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id VAA14694
	for <r-bugs@biostat.ku.dk>; Mon, 18 Jun 2001 21:03:08 +0200 (MET DST)
Received: from ku.edu by lark.cc.ku.edu (8.8.8/1.1.8.2/12Jan95-0207PM)
	id OAA0000024737; Mon, 18 Jun 2001 14:02:11 -0500 (CDT)
Sender: pauljohn@lark.cc.ku.edu
Message-ID: <3B2E4F06.F3198537@ku.edu>
Date: Mon, 18 Jun 2001 13:57:10 -0500
From: "Paul E. Johnson" <pauljohn@ku.edu>
X-Mailer: Mozilla 4.77 [en] (X11; U; Linux 2.4.2-2 i686)
X-Accept-Language: en
MIME-Version: 1.0
To: r-bugs@biostat.ku.dk
Subject: input for R-intro
Content-Type: multipart/mixed;
 boundary="------------1C95DB321C5D7CBC643B8CA3"

This is a multi-part message in MIME format.
--------------1C95DB321C5D7CBC643B8CA3
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit

I asked Prof. Brian Ripley if I might submit some text/input for the
R-intro writers, he said this is the place to do it.

I was on a plane a couple of weeks ago reading R-intro as I plan for a
course and made these notes, some of which I think will help my students
if you incorporate them.  I've attached a raw text file I wrote in Emacs
to this message "Rintrochanges.txt".

I have written documents like R-intro before and understand it is
difficult to please everybody, and I thank you for your effort on the
project.

Paul Johnson
Assoc. Professor
Dept. of Political Science
University of Kansas

--------------1C95DB321C5D7CBC643B8CA3
Content-Type: text/plain; charset=us-ascii;
 name="Rintrochanges.txt"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline;
 filename="Rintrochanges.txt"

R-intro comments/enhancements  Part I.

I think something more verbose like this would help under
"Ordered and Unordered factors"

Texts on research design emphasize that variables have
different levels of measurement. Typically, there are three levels.
If a measurement is taken with a precise scale (one on which it is
meaningful to say new_value = b*old_value, as with readings of a
thermometer), it is considered an "interval" level variable.  Many
statistical models were originally designed for interval level
variables.  If a measurement is not so precise, but only provides an
ordered categorization of observations, such as "low" "medium" and
"high", it is called an ordinal variable.  If a measurement is
categorical and implies no sense of ordering, such as "European",
"Asian", or "South American", then it is typically called an ordinal
variable.  Assigning the values of "1", "2", and "3" to these
observations has no substantive significance, as we might as well
number them "3","2","1".

Many statistical models are designed for interval level data, but with
appropriate recoding of input, they can also be made to work with
nominal and ordinal data.  In the "old days" of statistical computing,
users were forced to create a lot of indicator (or "dummy") variables,
thereby converting information from nominal or ordinal measurements
into variables that have only values 0 and 1.  For example, to
represent the information about the home continents of survey
respondents, we might create two dummy variables, one for Asia (coded
1 if respondent is from Asia, 0 otherwise) and one for South America
(likewise 0 and 1).  A respondent for whom we find both of these dummy
variables equal to 0 is sure to be from Europe, so we don't usually
need to create three dummy variables.  Doing so would be redundant.

With a modern language like R, much of the drudgery of creating the
indicator variables is handled automatically if the user declares the
variables properly.  In R, and S before it, the term "factor" is used
to refer to a variable that is not measured at the interval level. An
"unordered factor" is a nominal (or categorical) variable, while an
"ordered factor" is the term for an ordinal measurement.  Many
statistical procedures in R have builtin procedures for handling
factors.

Beyond handling coding of noninterval variables, factors play a vital
role in many R procedures.  Procedures can be designed to do a chore
for each value of a factor.  Many procedures will in fact insist that
a variable be designated as a factor.

 ------------------


In this section "Named arguments and defaults", I am left in a
confusion about a few things.  This confusion has bothered me a while.
Can you do more to explain which arguments must be specified, which
are optional, and under what conditions is it necessary to include the
parameter= which calling a function.

1.  When I use a function, and I look in its help page, how do I know
which input variables must be declared and which can be ignored?  This
is quite mysterious.  When invocations leave out some arguments, how
does R "sift through" the ones that are provided to know which is
which?


For example, consider the page on "update.packages".  

Under Usage, I find:
update.packages(lib.loc = .lib.loc, CRAN = getOption("CRAN"),
                contriburl = contrib.url(CRAN),
                method = "auto", instlib = NULL,
                ask=TRUE, available=NULL, destdir=NULL)

I've been using computers a long time, and I use this function every two months or so.  Between times I forget, come back to this page, and still this one leaves me totally confused.  

After fiddling a while, I find this works on Linux:
>update.packages(lib="/usr/lib/R/library",CRAN="http://lib.stat.cmu.edu/R/CRAN")

but what bothered me thd most is the "getOption("CRAN") option for CRAN.  I tried many variations on that and never figured how to make it work.


Maybe any clarifications could be related to the section "Getting help with functions and features"

In this section, I think it would be nice to have a paragraph about
"how to read a help page."  Some things are not obvious to all new
users.  Some things in help pages are tough to describe... Maybe I'd
say

How to read a help page.

If you find a help page, notice that it is made up of different parts.

1. "Description". These are usually terse, so read every word
   carefully.

2. Look for the "Value" heading.  That tells you what this procedure is
   going to return when you call it. If this procedure doesn't return
   what you need, you should find out immediately.

3. Under "Usage", most help pages list a number of possible commands
   that can be used.  These are not commands to be typed
   literally. Many of them contain abstract references which provide
   information about the nature of the variables that might be
   entered.  

   Here is a simple case.  The coefficients help page has this:

Usage

coef(object, ...)
coefficients(object, ...)

   Clearly, coef and coefficients are going to do the same thing, and you must supply the appropriate object.

4. Under "Arguments," the help page indicates what inputs this
   procedure wants.  The inputs are described line-by-line, and often
   the comments indicate of parameters are optional or what their
   default value might be.

   Many help pages have the infamous "...", which is something like
   "fill in the appropriately, depending on whatever context you
   find."  In some situations this is easy to understand .  Many help
   pages will eplicitly say that "..." refers to any options that
   might be used with a particular kind of object, and in that case
   one must find the help page for that other object. For example, the
   dev.copy help page clearly indicates that "..." refers to any
   options that might be used with the particular device in question.

   Other help pages are not so informative.  Consider the output from ?coefficients:

Arguments

 object
       an object for which the extraction of model coefficients is meaningful.
 ...
       other arguments.

Here it is clear you need to give a statistical object to have
coefficients removed.  The "..." is a mystery, and most R users will
try to use the coefficients command without worrying about it, and
then backtrack if an error occurs.  And, if an error occurs, there may be no recourse but to read the source code for this command or ask  about it in the r-help email list.

--------------1C95DB321C5D7CBC643B8CA3--


==> 988.audit <==
Tue Jun 19 09:07:09 2001	ripley	moved from incoming to Documentation
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

Directory:  Graphics

* PR# 943 *
Subject: legend() with xpd=T; omission of initial plot character
From: John Maindonald <john.maindonald@anu.edu.au>
Date: Sun, 20 May 2001 10:35:16 +1000
-- no notes --
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 943 <==
From postmaster@franz.stat.wisc.edu  Sun May 20 02:32:40 2001
Received: from franz.stat.wisc.edu (franz.stat.wisc.edu [128.105.174.95])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id CAA02494
	for <r-bugs@biostat.ku.dk>; Sun, 20 May 2001 02:32:39 +0200 (MET DST)
Received: from mail.anu.edu.au (really [150.203.2.7]) by franz.stat.wisc.edu
	via smail with esmtp
	id <m151H95-000JH8C@franz.stat.wisc.edu> (Debian Smail3.2.0.111)
	for <r-bugs@r-project.org>; Sat, 19 May 2001 19:32:31 -0500 (CDT) 
Received: from anugpo.anu.edu.au (anugpo.anu.edu.au [150.203.2.6])
	by mail.anu.edu.au (8.9.3/8.9.3) with ESMTP id KAA18515
	for <r-bugs@r-project.org>; Sun, 20 May 2001 10:32:27 +1000 (EST)
Received: from soda.anu.edu.au (soda.anu.edu.au [150.203.33.17])
	by anugpo.anu.edu.au (8.9.3+Sun/8.9.3) with ESMTP id KAA22405
	for <r-bugs@r-project.org>; Sun, 20 May 2001 10:32:27 +1000 (EST)
Message-Id: <5.0.2.1.1.20010520103337.00ac8b10@pophost.anu.edu.au>
X-Sender: u9801539@pophost.anu.edu.au (Unverified)
X-Mailer: QUALCOMM Windows Eudora Version 5.0.2
Date: Sun, 20 May 2001 10:35:16 +1000
To: r-bugs@r-project.org
From: John Maindonald <john.maindonald@anu.edu.au>
Subject: legend() with xpd=T; omission of initial plot character
Mime-Version: 1.0
Content-Type: text/plain; charset="us-ascii"; format=flowed


In the following:

plot(0:1, 0:1)
legend(x=0, y=1.2, pch=c(1,2), legend=c("May","June"))

the first plot character is omitted when plotting to
the screen.

I obtained the same behaviour when placing a legend
in the margin following use of pairs()

-please do not edit the information below--

Version:
  platform = i386-pc-mingw32
  arch = x86
  os = Win32
  system = x86, Win32
  status =
  major = 1
  minor = 2.3
  year = 2001
  month = 04
  day = 26
  language = R

Windows 98 SE 4.10 (build 2222)  A

Search Path:
  .GlobalEnv, package:ctest, Autoloads, package:base
John Maindonald               email : john.maindonald@anu.edu.au
Statistical Consulting Unit,  phone : (6125)3998
c/o CMA, SMS,                 fax   : (6125)5549
John Dedman Mathematical Sciences Building
Australian National University
Canberra ACT 0200
Australia


==> 943.reply.1 <==
From: paul@stat.auckland.ac.nz
To: r-core@r-project.org
Subject: Re: legend() with xpd=T; omission of initial plot character (PR#943)
Date: Tue Jun 19 05:58:40 2001
CC: r-bugs@r-project.org; john.maindonald@anu.edu.au

Hi

Bug summary:----
par(xpd=T)
plot(0:1, 0:1)
legend(x=0, y=1.2, pch=c(1,2), legend=c("May","June"))

the first plot character is omitted when plotting to
the screen.
Bug summary:----

I cannot reproduce this bug, BUT it did show up a bug in rect() -- in the
example above, the border around the legend is not drawn.

This is because rect() ignores par(xpd).  The default is rect(xpd=FALSE).  This
is at odds with text(xpd=NULL) and polygon(xpd=NULL) which use par(xpd) by
default.  arrows(xpd=FALSE) has the same problem as rect().  

I propose modifying rect() and arrows() to use par(xpd) by default like text()
and polygon().  There will, as usual, be a small risk that someone's code will
produce different output after this change, but this risk should be pretty
small.

Any objections ... ?

Paul

==> 943.audit <==
Mon May 21 08:54:07 2001	ripley	moved from incoming to Graphics
Tue Jun 19 05:58:40 2001	paul	sent reply 1

==> 943.followup.1 <==
From postmaster@franz.stat.wisc.edu  Tue Jun 19 05:56:22 2001
Received: from franz.stat.wisc.edu (root@franz.stat.wisc.edu [128.105.174.95])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id FAA16092
	for <r-bugs@biostat.ku.dk>; Tue, 19 Jun 2001 05:56:21 +0200 (MET DST)
Received: from pubhealth.ku.dk (really [130.225.108.10]) by franz.stat.wisc.edu
	via smail with esmtp
	id <m15CCch-000JGhC@franz.stat.wisc.edu> (Debian Smail3.2.0.111)
	for <r-bugs@r-project.org>; Mon, 18 Jun 2001 22:56:15 -0500 (CDT) 
Received: from blueberry.kubism.ku.dk (blueberry [130.225.108.193])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id FAA16087;
	Tue, 19 Jun 2001 05:55:27 +0200 (MET DST)
From: paul@stat.auckland.ac.nz
Received: from blueberry.kubism.ku.dk (blueberry.kubism.ku.dk [130.225.108.193])
	by blueberry.kubism.ku.dk (8.9.3/8.9.3) with ESMTP id FAA32381;
	Tue, 19 Jun 2001 05:58:35 +0200
Date: Tue, 19 Jun 2001 05:58:35 +0200
Message-Id: <200106190358.FAA32381@blueberry.kubism.ku.dk>
To: r-core@r-project.org
Subject: Re: legend() with xpd=T; omission of initial plot character (PR#943)
CC: r-bugs@r-project.org;john.maindonald@anu.edu.au;;;
X-Loop: R-bugs@biostat.ku.dk

Hi

Bug summary:----
par(xpd=T)
plot(0:1, 0:1)
legend(x=0, y=1.2, pch=c(1,2), legend=c("May","June"))

the first plot character is omitted when plotting to
the screen.
Bug summary:----

I cannot reproduce this bug, BUT it did show up a bug in rect() -- in the
example above, the border around the legend is not drawn.

This is because rect() ignores par(xpd).  The default is rect(xpd=FALSE).  This
is at odds with text(xpd=NULL) and polygon(xpd=NULL) which use par(xpd) by
default.  arrows(xpd=FALSE) has the same problem as rect().  

I propose modifying rect() and arrows() to use par(xpd) by default like text()
and polygon().  There will, as usual, be a small risk that someone's code will
produce different output after this change, but this risk should be pretty
small.

Any objections ... ?

Paul


==> 943.reply.2 <==
From postmaster@franz.stat.wisc.edu  Tue Jun 19 08:43:07 2001
Received: from franz.stat.wisc.edu (root@franz.stat.wisc.edu [128.105.174.95])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id IAA16819
	for <r-bugs@biostat.ku.dk>; Tue, 19 Jun 2001 08:43:07 +0200 (MET DST)
Received: from stat.math.ethz.ch (really [129.132.58.23]) by franz.stat.wisc.edu
	via smail with esmtp (ident daemon using rfc1413)
	id <m15CFDy-000JJWC@franz.stat.wisc.edu> (Debian Smail3.2.0.111)
	for <r-bugs@r-project.org>; Tue, 19 Jun 2001 01:42:54 -0500 (CDT) 
Received: (from daemon@localhost)
	by stat.math.ethz.ch (8.9.1/8.9.1) id IAA02705;
	Tue, 19 Jun 2001 08:42:52 +0200 (MET DST)
Received: from lynne(129.132.58.30), claiming to be "lynne.ethz.ch"
 via SMTP by hypatia, id smtpdAAAa000eE; Tue Jun 19 08:42:50 2001
Received: (maechler@localhost) by lynne.ethz.ch (8.9.3/D-MATH-client) id IAA08111; Tue, 19 Jun 2001 08:42:50 +0200
X-Authentication-Warning: lynne.ethz.ch: maechler set sender to maechler@stat.math.ethz.ch using -f
From: Martin Maechler <maechler@stat.math.ethz.ch>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
Message-ID: <15150.62570.490993.741070@gargle.gargle.HOWL>
Date: Tue, 19 Jun 2001 08:42:50 +0200
To: paul@stat.auckland.ac.nz
Cc: r-bugs@r-project.org, john.maindonald@anu.edu.au
Subject: Re: legend() with xpd=T; omission of initial plot character (PR#943)
In-Reply-To: <200106190358.FAA32381@blueberry.kubism.ku.dk>
References: <200106190358.FAA32381@blueberry.kubism.ku.dk>
X-Mailer: VM 6.92 under Emacs 20.7.1
Reply-To: Martin Maechler <maechler@stat.math.ethz.ch>

>>>>> "Paul" == Paul Murrell <paul@stat.auckland.ac.nz> writes:

    Paul> Hi
    Paul> Bug summary:----
    Paul> par(xpd=T)
    Paul> plot(0:1, 0:1)
    Paul> legend(x=0, y=1.2, pch=c(1,2), legend=c("May","June"))

    Paul> the first plot character is omitted when plotting to
    Paul> the screen.
    Paul> Bug summary:----

    Paul> I cannot reproduce this bug, BUT it did show up a bug in rect()
    Paul> -- in the example above, the border around the legend is not
    Paul> drawn.

Coincidence, I *did* look at that bug only yesterday.
My experience:
   I *could* reproduce the bug {X11(), Linux-386}, but only a few times. 
   Then, it didn't show anymore. Even restarting R wouldn't show it again.
   My ``explanation'' was that it might be (a bug) inside X11 / Window manager
   handling of things... ??


    Paul> This is because rect() ignores par(xpd).  The default is
    Paul> rect(xpd=FALSE).  This is at odds with text(xpd=NULL) and
    Paul> polygon(xpd=NULL) which use par(xpd) by default.
    Paul> arrows(xpd=FALSE) has the same problem as rect().

    Paul> I propose modifying rect() and arrows() to use par(xpd) by
    Paul> default like text() and polygon().  There will, as usual, be a
    Paul> small risk that someone's code will produce different output
    Paul> after this change, but this risk should be pretty small.

    Paul> Any objections ... ?

not at all, but please fix  abline(*) at the same time.
It doesn't obey xpd either (PR#750).

Martin
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
* PR# 202 *
Subject: persp box occlusion bug
From: wsi@gcal.ac.uk
Date: Wed, 2 Jun 1999 15:02:03 +0200 (MET DST)
--The persp algorithm does not apply the occlusion rules to the frame, 
--which is always plotted first. 
--A bug, but not very simple to fix.
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 202 <==
From wsi@gcal.ac.uk  Wed Jun  2 15:02:10 1999
Received: from localhost (blueberry [130.225.108.193])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id PAA27126
	for <R-bugs@biostat.ku.dk>; Wed, 2 Jun 1999 15:02:03 +0200 (MET DST)
Date: Wed, 2 Jun 1999 15:02:03 +0200 (MET DST)
From: wsi@gcal.ac.uk
Message-Id: <199906021302.PAA27126@pubhealth.ku.dk>
To: R-bugs@biostat.ku.dk
Subject: persp box occlusion bug

Full_Name: Bill Simpson
Version: 64.1
OS: linux
Submission from: (NULL) (193.62.250.209)


Bug in persp() bounding box:
If the surface being plotted extends below the lower z-axis boundary, the box
is
drawn with the wrong occlusion. The box is shown as being occluded by the
surface
even though it should be in front of the surface.

The box is correct for surface extending above the box. Problem is only for
surface extending below the box.

This exhibits the bug:

std<-rep(seq(-32,32,8),9)/1000 * 60
cf<-rep(seq(-32,32,8),rep(9,9))/1000 *60 
dp<-(cf-std)/.6
std<-unique(std)
cf<-unique(cf)
dp<-t(matrix(dp,length(cf),length(std)))
persp(std,cf,dp, xlim=c(-2,2), ylim=c(-2,2), zlim=c(0,5),theta=-40,    
phi=45,
box=TRUE,ltheta=-120, lphi=120,
d=1.5, shade=.7)


==> 202.audit <==
Wed Jun 30 19:31:18 1999	pd	moved from incoming to Graphics
Thu Jul 01 18:19:48 1999	pd	changed notes
Sun Feb 20 10:07:11 2000	ripley	changed notes
Mon Feb 28 17:17:51 2000	pd	changed notes
Mon Feb 28 17:18:28 2000	pd	changed notes
Mon Feb 28 17:19:35 2000	pd	changed notes
Mon Feb 28 17:20:17 2000	pd	changed notes
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
* PR# 750 *
Subject: abline() does not obey "xpd" (clipping rules)
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Mon, 27 Nov 2000 18:27:11 +0100
-- no notes --
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 750 <==
From maechler@stat.math.ethz.ch  Mon Nov 27 18:27:05 2000
Received: from stat.math.ethz.ch (daemon@hypatia.ethz.ch [129.132.58.23])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id SAA04861
	for <R-bugs@biostat.ku.dk>; Mon, 27 Nov 2000 18:27:04 +0100 (MET)
Received: (from daemon@localhost)
	by stat.math.ethz.ch (8.9.1/8.9.1) id SAA21229
	for <R-bugs@stat.math.ethz.ch>; Mon, 27 Nov 2000 18:27:14 +0100 (MET)
Received: from UNKNOWN(129.132.58.30), claiming to be "lynne.ethz.ch"
 via SMTP by hypatia, id smtpdAAAa005Bf; Mon Nov 27 18:27:12 2000
Received: (maechler@localhost) by lynne.ethz.ch (8.9.3/D-MATH-client) id SAA01940; Mon, 27 Nov 2000 18:27:11 +0100
X-Authentication-Warning: lynne.ethz.ch: maechler set sender to maechler@stat.math.ethz.ch using -f
From: Martin Maechler <maechler@stat.math.ethz.ch>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
Message-ID: <14882.39279.553452.20503@gargle.gargle.HOWL>
Date: Mon, 27 Nov 2000 18:27:11 +0100
To: R-bugs@stat.math.ethz.ch
Subject: abline() does not obey "xpd" (clipping rules)
X-Mailer: VM 6.76 under Emacs 20.7.1
Reply-To: Martin Maechler <maechler@stat.math.ethz.ch>

This is not a bug in the very strict sense,
but for consistency,  
I feel that
    abline() 
should obey  par("xpd") setting, even by ...-argument.
The following code shows how  lines() ``works'' and abline() does not :

  par(mfrow=c(2,1))
  plot(1:4)
  plot(1:10)
  par(xpd=NA); abline(v=1:10); par(xpd=FALSE)
  ## or even
  abline(v=1:10, xpd = NA, col = "purple")
  ## lines() *does* work with xpd arg:
  lines(4:5,c(1,40), col = 2, xpd = FALSE)# clip to plot
  lines(5:6,c(1,40), col = 3, xpd = TRUE)# clip to figure
  lines(6:7,c(1,20), col = 4, xpd = NA)# clip to device 
  text(4:6, 10.5, "xpd =", xpd = TRUE, col = 2:4)
  text(4:6, 10, c("FALSE","TRUE","NA"), col = 2:4, adj = 0)


Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
Seminar fuer Statistik, ETH-Zentrum  LEO D10	Leonhardstr. 27
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1228			<><

==> 750.reply.1 <==
From maechler@stat.math.ethz.ch  Wed Nov 29 14:02:47 2000
Received: from stat.math.ethz.ch (daemon@hypatia.ethz.ch [129.132.58.23])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id OAA24751
	for <R-bugs@biostat.ku.dk>; Wed, 29 Nov 2000 14:02:46 +0100 (MET)
Received: (from daemon@localhost)
	by stat.math.ethz.ch (8.9.1/8.9.1) id OAA15367
	for <R-bugs@biostat.ku.dk>; Wed, 29 Nov 2000 14:03:01 +0100 (MET)
Received: from UNKNOWN(129.132.58.30), claiming to be "lynne.ethz.ch"
 via SMTP by hypatia, id smtpdAAAa003k0; Wed Nov 29 14:02:57 2000
Received: (maechler@localhost) by lynne.ethz.ch (8.9.3/D-MATH-client) id OAA05829; Wed, 29 Nov 2000 14:02:56 +0100
X-Authentication-Warning: lynne.ethz.ch: maechler set sender to maechler@stat.math.ethz.ch using -f
From: Martin Maechler <maechler@stat.math.ethz.ch>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
Message-ID: <14884.65152.785676.980519@gargle.gargle.HOWL>
Date: Wed, 29 Nov 2000 14:02:56 +0100
To: R-bugs@biostat.ku.dk
Subject: abline() AND rect() do not obey "xpd" (clipping) (PR#750)
In-Reply-To: <200011271727.SAA04871@pubhealth.ku.dk>
References: <200011271727.SAA04871@pubhealth.ku.dk>
X-Mailer: VM 6.86 under Emacs 20.7.1
Reply-To: Martin Maechler <maechler@stat.math.ethz.ch>

>>>>> "MM" == Martin Maechler <maechler@stat.math.ethz.ch> writes:

    MM> This is not a bug in the very strict sense,
    MM> but for consistency,  
    MM> I feel that
    MM> abline() 
    MM> should obey  par("xpd") setting, even by ...-argument.
    MM> The following code shows how  lines() ``works'' and abline() does not :

    MM> par(mfrow=c(2,1))
    MM> plot(1:4)
    MM> plot(1:10)
    MM> par(xpd=NA); abline(v=1:10); par(xpd=FALSE)
    MM> ## or even
    MM> abline(v=1:10, xpd = NA, col = "purple")
    MM> ## lines() *does* work with xpd arg:
    MM> lines(4:5,c(1,40), col = 2, xpd = FALSE)# clip to plot
    MM> lines(5:6,c(1,40), col = 3, xpd = TRUE)# clip to figure
    MM> lines(6:7,c(1,20), col = 4, xpd = NA)# clip to device 
    MM> text(4:6, 10.5, "xpd =", xpd = TRUE, col = 2:4)
    MM> text(4:6, 10, c("FALSE","TRUE","NA"), col = 2:4, adj = 0)

Also, 
      rect() 
fails similarly.
This gives funny legend()s :

 plot(1:10)
 legend(1,7.5,  c("1st", "2nd", "third"), col = 1:3, lwd = 1:3, pch = 1:3)
 op <- par(xpd = NA)
 legend(1,11.5, c("1st", "2nd", "third"), col = 1:3, lwd = 1:3, pch = 1:3)
 ## pch = 1 also doesn't ?!?? ?? why??  It does here :
 points(2+ 1:8, rep(11, 8), pch = 1:8, col = "purple")
 ## and other pch's do here
 legend(4,11.9, c("1st", "2nd", "third"), col = 1:3, lwd = 1:3, pch = 6:4)
 par(op)

## Note that there seems another peculiar clipping bug 
##       with pch = 1 in legend

Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
Seminar fuer Statistik, ETH-Zentrum  LEO D10	Leonhardstr. 27
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1228			<><

==> 750.audit <==
Wed Nov 29 14:17:37 2000	ripley	moved from incoming to Graphics
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
* PR# 660 *
Subject: identify.default ignores any setting of cex.
From: Prof Brian Ripley <ripley@stats.ox.ac.uk>
Date: Fri, 15 Sep 2000 10:23:39 +0100 (BST)
-- no notes --
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 660 <==
From postmaster@franz.stat.wisc.edu  Fri Sep 15 11:23:32 2000
Received: from stat.math.ethz.ch (daemon@hypatia.ethz.ch [129.132.58.23])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id LAA13327
	for <R-bugs@biostat.ku.dk>; Fri, 15 Sep 2000 11:23:32 +0200 (MET DST)
Received: (from daemon@localhost)
	by stat.math.ethz.ch (8.9.1/8.9.1) id LAA17846
	for <r-bugs@hypatia.math.ethz.ch>; Fri, 15 Sep 2000 11:23:49 +0200 (MET DST)
Received: from franz.stat.wisc.edu(128.105.174.95)
 via SMTP by hypatia, id smtpdAAAa004Mn; Fri Sep 15 11:23:42 2000
Received: from toucan.stats.ox.ac.uk (really [163.1.20.20]) by franz.stat.wisc.edu
	via in.smtpd with esmtp
	id <m13Zrkl-000IW0C@franz.stat.wisc.edu> (Debian Smail3.2.0.102)
	for <R-bugs@r-project.org>; Fri, 15 Sep 2000 04:25:51 -0500 (CDT) 
Received: from localhost (ripley@localhost)
	by toucan.stats.ox.ac.uk (8.9.0/8.9.0) with ESMTP id KAA14892
	for <R-bugs@r-project.org>; Fri, 15 Sep 2000 10:23:39 +0100 (BST)
X-Authentication-Warning: toucan.stats: ripley owned process doing -bs
Date: Fri, 15 Sep 2000 10:23:39 +0100 (BST)
From: Prof Brian Ripley <ripley@stats.ox.ac.uk>
X-Sender: ripley@toucan.stats
To: R-bugs@r-project.org
Subject: identify.default ignores any setting of cex.
Message-ID: <Pine.GSO.4.05.10009151011510.14885-100000@toucan.stats>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII

R 1.1.1 on Windows, but I think this is widespread.

Using either

par(cex=0.5)
plot(1:10)
identify(1:10)

or

plot(1:10)
identify(1:10, cex=0.5)

ignores the cex setting.  The root cause is that par(cex=0.5)
alters cexbase for the device but sets cex=1.0, and the internal
text plotting routines use cex and not cexbase.

The obvious fix is to set cex to cexbase in do_identify. However,
if this is fixed, there is another problem, The offset of the label
is related to the cex in use for the label, and not for the symbol.
So

plot(1:10, type="n")
points(1:10, cex=5)
identify(1:10)

is not sensible in placing the labels.  That may be hard to anticipate,
but 

plot(1:10)
identify(1:10, cex=0.5)

needs to use cex=1 not cex=0.5 for the adjustment.  Perhaps identify is
trying too hard, and should give the user more control over the precise
position of the label (as S-PLUS does).

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


==> 660.audit <==
Wed Oct 25 06:57:35 2000	ripley	moved from incoming to Graphics

==> 660.followup.1 <==
From ligges@statistik.uni-dortmund.de  Wed Apr 25 17:24:42 2001
Received: from nx5.HRZ.Uni-Dortmund.DE (nx5.HRZ.Uni-Dortmund.DE [129.217.131.21])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id RAA02114
	for <R-bugs@biostat.ku.dk>; Wed, 25 Apr 2001 17:24:42 +0200 (MET DST)
Received: from amadeus.statistik.uni-dortmund.de by nx5.HRZ.Uni-Dortmund.DE
          via smtp-local with ESMTP; Wed, 25 Apr 2001 17:24:51 +0200
Received: from statistik.uni-dortmund.de ([129.217.207.201])
	by amadeus.statistik.uni-dortmund.de (8.9.3+Sun/8.9.3) with ESMTP id RAA01760;
	Wed, 25 Apr 2001 17:24:50 +0200 (MET DST)
Message-ID: <3AE6EC55.6C1D8C7A@statistik.uni-dortmund.de>
Date: Wed, 25 Apr 2001 17:25:09 +0200
From: Uwe Ligges <ligges@statistik.uni-dortmund.de>
Organization: Fachbereich Statistik, Universitaet Dortmund
X-Mailer: Mozilla 4.76 [en] (WinNT; U)
X-Accept-Language: en
MIME-Version: 1.0
To: r-bugs <R-bugs@biostat.ku.dk>
CC: "Brian D. Ripley" <ripley@stats.ox.ac.uk>
Subject: Re: identify.default ignores any setting of cex (PR#660)
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit

A follow-up to PR#660 (15 Sep 2000) from Brian Ripley:

> R 1.1.1 on Windows, but I think this is widespread.
>
> Using either
>
> par(cex=0.5)
> plot(1:10)
> identify(1:10)
>
> or
> 
> plot(1:10)
> identify(1:10, cex=0.5)
> 
> ignores the cex setting.  The root cause is that par(cex=0.5)
> alters cexbase for the device but sets cex=1.0, and the internal
> text plotting routines use cex and not cexbase.
> 
> The obvious fix is to set cex to cexbase in do_identify. However,
> if this is fixed, there is another problem, The offset of the label
> is related to the cex in use for the label, and not for the symbol.
> So
> 
> plot(1:10, type="n")
> points(1:10, cex=5)
> identify(1:10)
> 
> is not sensible in placing the labels.  That may be hard to anticipate,
> but 
> 
> plot(1:10)
> identify(1:10, cex=0.5)
> 
> needs to use cex=1 not cex=0.5 for the adjustment.  Perhaps identify is
> trying too hard, and should give the user more control over the precise
> position of the label (as S-PLUS does).


The same with 

 par(cex=1); plot(1:10); text(4, 5, "Hello World") # OK
 par(cex=2); plot(1:10); text(4, 5, "Hello World") # OK
 par(cex=2); plot(1:10); text(4, 5, "Hello World", cex = 1) # NOT OK
 par(cex=2); plot(1:10); text(4, 5, "Hello World", cex = 0.5)

So the scaling with cex in text() is relative to the par() settings,
which is not the expected behaviour.


[R-1.2.2 on WinNT 4.0]

Uwe Ligges

==> 660.followup.2 <==
From ripley@stats.ox.ac.uk  Wed Apr 25 20:00:09 2001
Received: from toucan.stats.ox.ac.uk (toucan.stats.ox.ac.uk [163.1.20.20])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id UAA03187
	for <R-bugs@biostat.ku.dk>; Wed, 25 Apr 2001 20:00:09 +0200 (MET DST)
Received: from max166.public.ox.ac.uk (max166.public.ox.ac.uk [192.76.27.166])
	by toucan.stats.ox.ac.uk (8.9.0/8.9.0) with ESMTP id SAA06061;
	Wed, 25 Apr 2001 18:56:30 +0100 (BST)
Date: Wed, 25 Apr 2001 18:55:47 +0100 (GMT Daylight Time)
From: Prof Brian D Ripley <ripley@stats.ox.ac.uk>
To: <ligges@statistik.uni-dortmund.de>
cc: <r-devel@stat.math.ethz.ch>, <R-bugs@biostat.ku.dk>
Subject: Re: [Rd] Re: identify.default ignores any setting of cex (PR#660)
In-Reply-To: <200104251524.RAA02124@pubhealth.ku.dk>
Message-ID: <Pine.WNT.4.31.0104251852500.300-100000@tern.stats>
Sender: ripley@stats.ox.ac.uk
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII

On Wed, 25 Apr 2001 ligges@statistik.uni-dortmund.de wrote:

> A follow-up to PR#660 (15 Sep 2000) from Brian Ripley:

[...]

> The same with
>
>  par(cex=1); plot(1:10); text(4, 5, "Hello World") # OK
>  par(cex=2); plot(1:10); text(4, 5, "Hello World") # OK
>  par(cex=2); plot(1:10); text(4, 5, "Hello World", cex = 1) # NOT OK
>  par(cex=2); plot(1:10); text(4, 5, "Hello World", cex = 0.5)
>
> So the scaling with cex in text() is relative to the par() settings,
> which is not the expected behaviour.

It is the documented behaviour, though: see the description of cex in
?help.

     cex: numeric character expansion factor; multiplied by
          `par("cex")' yields the final character size.

Brian

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
* PR# 791 *
Subject:  par(lab= *) / axis(*) bug 
From: maechler@stat.math.ethz.ch
Date: Fri, 22 Dec 2000 10:59:26 +0100
-- no notes --
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 791 <==
From postmaster@franz.stat.wisc.edu  Fri Dec 22 10:59:23 2000
Received: from franz.stat.wisc.edu (franz.stat.wisc.edu [128.105.174.95])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id KAA08619
	for <r-bugs@biostat.ku.dk>; Fri, 22 Dec 2000 10:59:23 +0100 (MET)
Received: from stat.math.ethz.ch (really [129.132.58.23]) by franz.stat.wisc.edu
	via in.smtpd with esmtp (ident daemon using rfc1413)
	id <m149OzA-000IXMC@franz.stat.wisc.edu> (Debian Smail3.2.0.102)
	for <r-bugs@r-project.org>; Fri, 22 Dec 2000 03:59:36 -0600 (CST) 
Received: (from daemon@localhost)
	by stat.math.ethz.ch (8.9.1/8.9.1) id KAA02617;
	Fri, 22 Dec 2000 10:59:34 +0100 (MET)
Received: from UNKNOWN(129.132.58.33), claiming to be "florence.ethz.ch"
 via SMTP by hypatia, id smtpdAAAa000cp; Fri Dec 22 10:59:26 2000
Received: (maechler@localhost) by florence.ethz.ch (8.9.3/D-MATH-client) id KAA23075; Fri, 22 Dec 2000 10:59:26 +0100
Date: Fri, 22 Dec 2000 10:59:26 +0100
From: maechler@stat.math.ethz.ch
Message-Id: <200012220959.KAA23075@florence.ethz.ch>
To: r-bugs@r-project.org
Subject:  par(lab= *) / axis(*) bug 
Cc: maechler@stat.math.ethz.ch

As the subject says,
here is example code (with comments) showing the problem:

p1 <- function(lab = c(8,12,7))
{
    ## This `fails' (on a virgin device)
    clab <- paste(lab,collapse=",")
    plot(1,1, xlim = c(0,15), ylim = c(-.8,1), type ="n", axes = FALSE,
         main=paste("plot(*,axes=F); par(lab= c(",clab,"));  axis(*) x 2",sep=""))
    box(col="gray80")
    op <- par(lab = lab) ; on.exit(par(op))
    axis(1, pos = 0)
    axis(2, pos = 0, las = 1)
    par(op)
    op
}

p2 <- function(lab = c(8,12,7))
{
    ## This works  [par()  *BEFORE*  plot() ]
    clab <- paste(lab,collapse=",")
    op <- par(lab = lab) ; on.exit(par(op))

    plot(1,1, xlim = c(0,15), ylim = c(-.8,1), type ="n", axes = FALSE,
         main=paste("par(lab= c(",clab,")); plot(*,axes=F); axis(*) x 2",sep=""))
    box(col="gray80")
    axis(1, pos = 0)
    axis(2, pos = 0, las = 1)
    op ## lab 5 5 7
}

dev.off()
par(mfrow=c(2,1), mar=c(2,2,3,1))
p1()
p2()




--please do not edit the information below--

Version:
 platform = i686-pc-linux-gnu
 arch = i686
 os = linux-gnu
 system = i686, linux-gnu
 status = Patched
 major = 1
 minor = 2.0
 year = 2000
 month = 12
 day = 19
 language = R

Search Path:
 .GlobalEnv, package:nls, package:splines, package:lqs, package:modreg, package:stepfun, package:mva, package:eda, package:ts, package:VLMC, package:ctest, package:SfS, Autoloads, package:base

==> 791.audit <==
Tue Dec 26 10:31:10 2000	ripley	moved from incoming to Graphics
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
* PR# 776 *
Subject: strwidth does not take font into account
From: Martyn Plummer <plummer@iarc.fr>
Date: Tue, 19 Dec 2000 14:56:01 +0100 (CET)
--This needs a substantial redesign.
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 776 <==
From postmaster@franz.stat.wisc.edu  Tue Dec 19 14:53:40 2000
Received: from franz.stat.wisc.edu (franz.stat.wisc.edu [128.105.174.95])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id OAA05819
	for <r-bugs@biostat.ku.dk>; Tue, 19 Dec 2000 14:53:39 +0100 (MET)
Received: from smtp02.iarc.fr (really [212.157.236.234]) by franz.stat.wisc.edu
	via in.smtpd with esmtp
	id <m148NHG-000IYiC@franz.stat.wisc.edu> (Debian Smail3.2.0.102)
	for <r-bugs@r-project.org>; Tue, 19 Dec 2000 07:58:02 -0600 (CST) 
Received: from xena.iarc.fr ([10.10.150.125])
	by smtp02.iarc.fr (8.9.3/8.9.3) with ESMTP id OAA21720
	for <r-bugs@r-project.org>; Tue, 19 Dec 2000 14:53:55 +0100
Message-ID: <XFMail.001219145601.plummer@iarc.fr>
X-Mailer: XFMail 1.3 [p0] on Linux
X-Priority: 3 (Normal)
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 8bit
MIME-Version: 1.0
Date: Tue, 19 Dec 2000 14:56:01 +0100 (CET)
Organization: International Agency for Research on Cancer
Sender: martyn@xena.iarc.fr
From: Martyn Plummer <plummer@iarc.fr>
To: r-bugs@r-project.org
Subject: strwidth does not take font into account

One for the wishlist.

The text() function permits the use of different fonts with the arguments
"font" or "vfont".  These create text strings of the same height as the
default font, but of different widths: bold face is slightly wider; vector
fonts are usually much wider.  I think the strwidth() function needs to
take the font into account by also having "font" and "vfont" arguments.
Currently it reports the string width using the default font, which can
be quite different.

Here is a little test function you can use to see how far off the
reported string width is.

test.strwidth <-
function(text, vfont=NULL, cex=NULL, ...)
{
 plot(0,0,xlim=c(-1,1),ylim=c(-1,1), type="n")
 text(0,0, text, adj=c(0,0), offset=0, cex=cex, vfont=vfont, ...)
 abline(h=c(0, strheight(text, cex=cex)), lty=2)
 abline(v=c(0, strwidth(text, cex=cex)), lty=2)
}

e.g.

test.strwidth("This is some text", cex=2)
test.strwidth("This is some text", cex=2, font=2)
test.strwidth("This is some text", vfont=c("sans serif", "plain"))

Martyn

Please do not edit the information below--

Version:
 platform = i686-pc-linux-gnu
 arch = i686
 os = linux-gnu
 system = i686, linux-gnu
 status =
 major = 1
 minor = 2.0
 year = 2000
 month = 12
 day = 15
 language = R

Search Path:
 .GlobalEnv, package:ctest, Autoloads, package:base




==> 776.audit <==
Tue Dec 26 10:31:10 2000	ripley	moved from incoming to Graphics
Sat Feb 24 08:55:28 2001	ripley	changed notes
Sat Feb 24 08:55:28 2001	ripley	foobar
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
* PR# 820 *
Subject: interaction.plot
From: "Mark M. Span" <span@psy.uva.nl>
Date: Mon, 22 Jan 2001 10:47:39 +0100
--mtext is unscaled by default.  It is not clear if this should
--use the par("cex") setting or an inline cex setting such as cex.axis.
--It might make more sense to use axis rather than mtext, as boxplot does.
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 820 <==
From postmaster@franz.stat.wisc.edu  Mon Jan 22 10:43:38 2001
Received: from franz.stat.wisc.edu (franz.stat.wisc.edu [128.105.174.95])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id KAA09043
	for <r-bugs@biostat.ku.dk>; Mon, 22 Jan 2001 10:43:37 +0100 (MET)
Received: from mail.psy.uva.nl (really [145.18.113.16]) by franz.stat.wisc.edu
	via in.smtpd with esmtp
	id <m14KdVr-000IWyC@franz.stat.wisc.edu> (Debian Smail3.2.0.102)
	for <r-bugs@r-project.org>; Mon, 22 Jan 2001 03:43:47 -0600 (CST) 
Received: from rea2205 (rea2205.psy.uva.nl [145.18.152.205])
	by mail.psy.uva.nl (8.9.3/8.9.3) with SMTP id KAA21513
	for <r-bugs@r-project.org>; Mon, 22 Jan 2001 10:43:45 +0100 (MET)
Message-ID: <008501c08458$5bfc6530$cd981291@psy.uva.nl>
From: "Mark M. Span" <span@psy.uva.nl>
To: <r-bugs@r-project.org>
Subject: interaction.plot
Date: Mon, 22 Jan 2001 10:47:39 +0100
Organization: UvA
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 5.50.4133.2400
X-MimeOLE: Produced By Microsoft MimeOLE V5.50.4133.2400

I notices some indesireable behaviour in interaction.plot. The scaling of
the x-axis labels discards the overall settings for the 'cex' attribute,
leading to unscaled labels. The source for this behaviour is the line

mtext(xlabs, 1, at = xvals)

in interaction.plot.

to get this function to perform conform the manual, change this line to

mtext(xlabs, 1, at = xvals, cex=par("cex"))

and all is well.

because of the simplicity of this 'fix' I assume that it is a crossplatform
thingie, but for the record:

I use R-Win in winNT, 1.2.0, upgrading soon.

just my .02 euro..

I'll just end this mail with a standard declaration of love for R

greetz. Mark M. Span


==> 820.audit <==
Thu Jan 25 00:05:53 2001	ripley	moved from incoming to Graphics
Sat Feb 24 08:53:40 2001	ripley	changed notes
Sat Feb 24 08:53:40 2001	ripley	foobar
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
* PR# 816 *
Subject: dotplot: character size of labels
From: RINNER Heinrich <H.RINNER@TIROL.GV.AT>
Date: Thu, 18 Jan 2001 14:54:32 +0100
--Suggested fix is incorporated in 1.2.2.
--
--There is a deeper problem:  mtext() ignores par(cex=.5) in general.  
--To see the problem try:  par(cex=.5); mtext("hi")
--Paul thinks the right fix is to change the argument list for mtext so that
--cex=par(cex) by default rather than cex=NA by default (plus corresponding
--internal changes to  do_mtext in plot.c).
--This needs to be done very carefully because (i) the change suggested above 
--mayhave side-effects in many other pieces of interpreted code 
--(ii) do_mtext ignores dd->gp.cexbase unlike, for example, do_plot_xy 
--and anything to do with cexbase needs extreme care.
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 816 <==
From postmaster@franz.stat.wisc.edu  Thu Jan 18 16:57:16 2001
Received: from franz.stat.wisc.edu (franz.stat.wisc.edu [128.105.174.95])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id QAA13627
	for <r-bugs@biostat.ku.dk>; Thu, 18 Jan 2001 16:57:15 +0100 (MET)
Received: from ingw1.tirol.gv.at (really [212.183.27.1]) by franz.stat.wisc.edu
	via in.smtpd with esmtp
	id <m14JHRE-000IWyC@franz.stat.wisc.edu> (Debian Smail3.2.0.102)
	for <r-bugs@r-project.org>; Thu, 18 Jan 2001 09:57:24 -0600 (CST) 
Received: from xms.tirol.gv.at (xms.tirol.gv.at [10.11.128.200])
	by ingw1.tirol.gv.at (Mailer) with ESMTP id 22ADE2825
	for <r-bugs@r-project.org>; Thu, 18 Jan 2001 14:49:47 +0100 (NFT)
Received: from xms.tirol.gv.at (unverified) by xms.tirol.gv.at
 (Content Technologies SMTPRS 4.1.5) with ESMTP id <T0a0b80c8512ecf1400@xms.tirol.gv.at> for <r-bugs@r-project.org>;
 Thu, 18 Jan 2001 14:54:33 +0100
Received: by xms.tirol.gv.at with Internet Mail Service (5.5.2650.21)
	id <CLGLQ6B7>; Thu, 18 Jan 2001 14:54:33 +0100
Message-ID: <C4D44AB4CB62D311BA6500041202E8862640F8@xms1.tirol.gv.at>
From: RINNER Heinrich <H.RINNER@TIROL.GV.AT>
To: "'r-bugs@r-project.org'" <r-bugs@r-project.org>
Subject: dotplot: character size of labels
Date: Thu, 18 Jan 2001 14:54:32 +0100
Return-Receipt-To: RINNER Heinrich <H.RINNER@TIROL.GV.AT>
MIME-Version: 1.0
X-Mailer: Internet Mail Service (5.5.2650.21)
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: 8bit
X-MIME-Autoconverted: from quoted-printable to 8bit by pubhealth.ku.dk id QAA13627

There seems to be a bug in "dotplot" concerning the "cex" parameter. Setting
cex has no effect on the character size of the labels of the points.
This problem was posted to r-help today (Thu, 18 Jan 2001); the solution
given by Brian Ripley (and Uwe Ligges) seems to work for me.

Heinrich Rinner.
 
> version
         _              
platform i386-pc-mingw32
arch     x86            
os       Win32          
system   x86, Win32     
status                  
major    1              
minor    2.0            
year     2000           
month    12             
day      15             
language R              

> ----------
> Von: 	Prof Brian Ripley[SMTP:ripley@stats.ox.ac.uk]
> Gesendet: 	Donnerstag, 18. Jnner 2001 10:35
> An: 	RINNER Heinrich
> Cc: 	'r-help@stat.math.ethz.ch'
> Betreff: 	Re: [R] dotplot: character size of labels
> 
> On Thu, 18 Jan 2001, RINNER Heinrich wrote:
> 
> > Dear R users,
> >
> > using dotplot (R1.2.0, WinNT4.0), I am trying to change the character
> size
> > of the labels of the points:
> >
> > > # example
> > > data(VADeaths)
> > > dotplot(VADeaths, main = "Death Rates in Virginia - 1940")
> > > # I'd like to have smaller character size of the labels (for age and
> > population groups)
> > > ?dotplot
> > > # for argument "cex", this says: "Setting cex to a value smaller than
> one
> > can be a useful way of avoiding label overlap."
> > > dotplot(VADeaths, main = "Death Rates in Virginia - 1940", cex = 0.5)
> > > # the main title and the plotting characters are smaller now, but not
> the
> > labels
> > > # trying to set other graphics parameters seems to have no effect:
> > > dotplot(VADeaths, main = "Death Rates in Virginia - 1940", cex.axis =
> 0.5)
> > > dotplot(VADeaths, main = "Death Rates in Virginia - 1940", cex.lab =
> 0.5)
> >
> > I'd be grateful for any hint how to do this correctly;
> 
> Looks like a bug. Inside dotplot alter to
> 
>         for (i in 1:n) mtext(labs[i], side = 2, line = loffset,
>             at = y[i], adj = 0, col = color, las = 2, cex = cex, ...)
> 
>         for (i in 1:nlevels(groups)) mtext(glabels[i], side = 2,
>             line = goffset, at = gpos[i], adj = 0, col = gcolor,
>             las = 2, cex = cex, ...)
> 
> However, it really needs more than that to calculate the spaces for the
> labels correctly.
> 
> 
> -- 
> Brian D. Ripley,                  ripley@stats.ox.ac.uk
> Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
> University of Oxford,             Tel:  +44 1865 272861 (self)
> 1 South Parks Road,                     +44 1865 272860 (secr)
> Oxford OX1 3TG, UK                Fax:  +44 1865 272595
> 

==> 816.audit <==
Sat Jan 20 10:24:14 2001	ripley	moved from incoming to Graphics
Tue Jan 23 03:38:23 2001	paul	changed notes
Tue Jan 23 03:38:23 2001	paul	foobar
Sun Feb 18 10:11:12 2001	ripley	changed notes
Sun Feb 18 10:11:12 2001	ripley	foobar
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
* PR# 831 *
Subject: screen can't go back to (split) screen with log="y" plot
From: Thomas Vogels <tov@ece.cmu.edu>
Date: 30 Jan 2001 00:39:41 -0500
--Still there. Suggested fix included in followups, but we didn't get around to
--try it in time for 1.2.3.
--
--Fix doesn't work. One problem is that the opar<-par();par(opar) idiom updates
--xaxp before xlog, and the new value of xaxp may only be valid under the new
--value of xlog.
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 831 <==
From postmaster@franz.stat.wisc.edu  Tue Jan 30 06:39:31 2001
Received: from franz.stat.wisc.edu (franz.stat.wisc.edu [128.105.174.95])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id GAA28455
	for <r-bugs@biostat.ku.dk>; Tue, 30 Jan 2001 06:39:30 +0100 (MET)
Received: from infiniti.ece.cmu.edu (really [128.2.216.84]) by franz.stat.wisc.edu
	via in.smtpd with esmtp
	id <m14NTW2-000IWyC@franz.stat.wisc.edu> (Debian Smail3.2.0.102)
	for <r-bugs@r-project.org>; Mon, 29 Jan 2001 23:39:42 -0600 (CST) 
Received: (from tov@localhost) by infiniti.ece.cmu.edu (AIX4.3/UCB 8.8.8/8.8.8) id AAA26672; Tue, 30 Jan 2001 00:39:42 -0500
X-Authentication-Warning: infiniti.ece.cmu.edu: tov set sender to tov@ece.cmu.edu using -f
Sender: tov@infiniti.ece.cmu.edu
To: r-bugs@r-project.org
Cc: Thomas Vogels <tov@ece.cmu.edu>
Subject: screen can't go back to (split) screen with log="y" plot
Reply-To: Thomas Vogels <tov@ece.cmu.edu>
X-URI: http://www.ece.cmu.edu/~tov
From: Thomas Vogels <tov@ece.cmu.edu>
User-Agent: Gnus/5.0807 (Gnus v5.8.7) Emacs/20.7
Date: 30 Jan 2001 00:39:41 -0500
Message-ID: <pxsnm1egyq.fsf@infiniti.ece.cmu.edu>
Lines: 76
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii


Hi.  Let's try to explain the subject line with some code:

> split.screen (c(2,1))
[1] 1 2
> screen(1)
> plot (1:2, 1:2, log="y", main="1")
> screen (2)
> plot (1:2, 1:2, main="2")
> screen (1)
Error in par(.split.screens[[n]]) : invalid value specified for graphics parameter "yaxp".
> close.screen(all=TRUE)

Let's add comments:

> split.screen (c(2,1))
[1] 1 2

OK, plot in the top half screen:
> screen(1)
> plot (1:2, 1:2, log="y", main="1")
> par("yaxp")
[1]  1  2 -5

OK, switch to bottom half:
> screen (2)
> plot (1:2, 1:2, main="2")
> par("yaxp")
[1] 1 2 5

OK, looks fine, let's go back up:
> screen (1)
Error in par(.split.screens[[n]]) : invalid value specified for graphics parameter "yaxp".

Bummer.
> close.screen(all=TRUE)

Somehow I'm hoping you'll tell me I'm doing something wrong, because
I'd really would like to be able to do the following:
  repeat {
    #calculate
    screen(1)
    #fancy plot
    screen (2)
    #even fancier plot ;-)
    if (user.bored()) break
  }
Which is roughly what I was doing when the error messages started
popping up.

Thanks,
  -tom

--please do not edit the information below--

Version:
 platform = i386-pc-linux-gnu
 arch = i386
 os = linux-gnu
 system = i386, linux-gnu
 status = 
 major = 1
 minor = 2.1
 year = 2001
 month = 01
 day = 15
 language = R

Search Path:
 .GlobalEnv, package:ctest, Autoloads, package:base



-- 
mailto:tov@ece.cmu.edu (Tom Vogels)   Tel: (412) 268-6638   FAX: -3204


==> 831.followup.1 <==
From ripley@stats.ox.ac.uk  Tue Jan 30 08:40:46 2001
Received: from toucan.stats.ox.ac.uk (toucan.stats.ox.ac.uk [163.1.20.20])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id IAA28901
	for <R-bugs@biostat.ku.dk>; Tue, 30 Jan 2001 08:40:46 +0100 (MET)
Received: from max144.public.ox.ac.uk (max144.public.ox.ac.uk [192.76.27.144])
	by toucan.stats.ox.ac.uk (8.9.0/8.9.0) with ESMTP id HAA21509;
	Tue, 30 Jan 2001 07:40:54 GMT
Date: Tue, 30 Jan 2001 07:39:25 +0000 (GMT)
From: Prof Brian D Ripley <ripley@stats.ox.ac.uk>
Sender: <ripley@auk.stats>
To: <tov@ece.cmu.edu>
cc: <R-bugs@biostat.ku.dk>
Subject: Re: [Rd] screen can't go back to log="y" plot (PR#831)
In-Reply-To: <200101300539.GAA28465@pubhealth.ku.dk>
Message-ID: <Pine.GSO.4.31.0101300725290.17104-100000@auk.stats>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII

[I have abbreviated the subject as jitterbug has been having probems
with long subjects.]

The issue here is that one cannot mix log/non-log axes in the calls to
screen(), as the appropriate par() parameter is read-only, but the
meaning of yaxp depends on it.  But beyond that you can't set
x/yaxp for log axes.

You should be able to do this: you can in the S original.

A simpler version:

plot (1:2, 1:2, log="y", main="1")
zz <- par("yaxp")
zz
[1]  1  2 -5
par(yaxp=zz)
Error in par(yaxp = zz) : invalid value specified for graphics parameter
"yaxp".

So you can't reset the yaxp parameter to what it is reported as!


Additional bug: the meaning of x/yaxp for log axes is not defined
in help(par).


On Tue, 30 Jan 2001 tov@ece.cmu.edu wrote:

>
> Hi.  Let's try to explain the subject line with some code:
>
> > split.screen (c(2,1))
> [1] 1 2
> > screen(1)
> > plot (1:2, 1:2, log="y", main="1")
> > screen (2)
> > plot (1:2, 1:2, main="2")
> > screen (1)
> Error in par(.split.screens[[n]]) : invalid value specified for graphics parameter "yaxp".
> > close.screen(all=TRUE)
>
> Let's add comments:
>
> > split.screen (c(2,1))
> [1] 1 2
>
> OK, plot in the top half screen:
> > screen(1)
> > plot (1:2, 1:2, log="y", main="1")
> > par("yaxp")
> [1]  1  2 -5
>
> OK, switch to bottom half:
> > screen (2)
> > plot (1:2, 1:2, main="2")
> > par("yaxp")
> [1] 1 2 5
>
> OK, looks fine, let's go back up:
> > screen (1)
> Error in par(.split.screens[[n]]) : invalid value specified for graphics parameter "yaxp".
>
> Bummer.
> > close.screen(all=TRUE)
>
> Somehow I'm hoping you'll tell me I'm doing something wrong, because
> I'd really would like to be able to do the following:
>   repeat {
>     #calculate
>     screen(1)
>     #fancy plot
>     screen (2)
>     #even fancier plot ;-)
>     if (user.bored()) break
>   }
> Which is roughly what I was doing when the error messages started
> popping up.
>
> Thanks,
>   -tom
>
> --please do not edit the information below--
>
> Version:
>  platform = i386-pc-linux-gnu
>  arch = i386
>  os = linux-gnu
>  system = i386, linux-gnu
>  status =
>  major = 1
>  minor = 2.1
>  year = 2001
>  month = 01
>  day = 15
>  language = R
>
> Search Path:
>  .GlobalEnv, package:ctest, Autoloads, package:base
>
>
>
> --
> mailto:tov@ece.cmu.edu (Tom Vogels)   Tel: (412) 268-6638   FAX: -3204
>
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


==> 831.followup.2 <==
From tov@ece.cmu.edu  Thu Feb  1 02:13:08 2001
Received: from infiniti.ece.cmu.edu (INFINITI.ECE.CMU.EDU [128.2.133.84])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id CAA25173
	for <R-bugs@biostat.ku.dk>; Thu, 1 Feb 2001 02:13:07 +0100 (MET)
Received: (from tov@localhost) by infiniti.ece.cmu.edu (AIX4.3/UCB 8.8.8/8.8.8) id UAA19026; Wed, 31 Jan 2001 20:12:41 -0500
X-Authentication-Warning: infiniti.ece.cmu.edu: tov set sender to tov@ece.cmu.edu using -f
Sender: tov@infiniti.ece.cmu.edu
To: Prof Brian D Ripley <ripley@stats.ox.ac.uk>
Cc: <R-bugs@biostat.ku.dk>
Subject: Re: [Rd] screen can't go back to log="y" plot (PR#831)
References: <Pine.GSO.4.31.0101300725290.17104-100000@auk.stats>
Reply-To: Thomas Vogels <tov@ece.cmu.edu>
X-URI: http://www.ece.cmu.edu/~tov
From: Thomas Vogels <tov@ece.cmu.edu>
Date: 31 Jan 2001 20:12:41 -0500
In-Reply-To: Prof Brian D Ripley's message of "Tue, 30 Jan 2001 07:39:25 +0000 (GMT)"
Message-ID: <px7l3bcik6.fsf@infiniti.ece.cmu.edu>
Lines: 81
User-Agent: Gnus/5.0807 (Gnus v5.8.7) Emacs/20.7
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii


Prof Brian D Ripley <ripley@stats.ox.ac.uk> writes:

> [I have abbreviated the subject as jitterbug has been having probems
> with long subjects.]
> 
> The issue here is that one cannot mix log/non-log axes in the calls to
> screen(), as the appropriate par() parameter is read-only, but the
> meaning of yaxp depends on it.  But beyond that you can't set
> x/yaxp for log axes.
> 
> You should be able to do this: you can in the S original.
> 
> A simpler version:
> 
> plot (1:2, 1:2, log="y", main="1")
> zz <- par("yaxp")
> zz
> [1]  1  2 -5
> par(yaxp=zz)
> Error in par(yaxp = zz) : invalid value specified for graphics parameter
> "yaxp".
> 
> So you can't reset the yaxp parameter to what it is reported as!
[snip]

The code in main/par.c ignores the value of xlog (or ylog) when
setting xaxp (or yaxp).  Right now you have in Specify (and Specify2):

... else if (streql(what, "xaxp")) {
	value = coerceVector(value, REALSXP);
	lengthCheck(what, value, 3);
	naRealCheck(REAL(value)[0], what);
	naRealCheck(REAL(value)[1], what);
        posIntCheck((int) (REAL(value)[2]), what);

Shouldn't that be something like:

... else if (streql(what, "xaxp")) {
	value = coerceVector(value, REALSXP);
	lengthCheck(what, value, 3);
	naRealCheck(REAL(value)[0], what);
	naRealCheck(REAL(value)[1], what);
        if (dd->gp.xlog)
            logAxpCheck((int) (REAL(value)[2]), what);
        else
            posIntCheck((int) (REAL(value)[2]), what);

Where logAxpCheck is suitably defined as:

static void logAxpCheck(int x, char *s)
{
    if (x == NA_INTEGER || x == 0 || x > 4)
	par_error(s);
}

since only values < 0 or the values 1, 2, 3 are allowed?


> Additional bug: the meaning of x/yaxp for log axes is not defined
> in help(par).

excerpt from help(par):

    xaxp: A vector of the form `c(x1, x2, n)' giving the coordinates
          of the extreme tick marks and the number of intervals
          between tick-marks.

Could you add:

          The value of n must be positive for linear scale axes.  For
          logarithmic scale axes n must be either negative (then there
          will be (1-n) ticks at a linear distance) or one of 1, 2, or
          3 where n then indicates the number of ticks per decade.

similar for yaxp?  What am I missing?
Regards,
  -tom

-- 
mailto:tov@ece.cmu.edu (Tom Vogels)   Tel: (412) 268-6638   FAX: -3204

==> 831.audit <==
Wed Feb  7 08:51:14 2001	ripley	moved from incoming to Graphics
Thu Apr 26 12:13:40 2001	pd	changed notes
Thu Apr 26 12:13:40 2001	pd	foobar
Thu Jun  7 19:13:15 2001	thomas	changed notes
Thu Jun  7 19:13:15 2001	thomas	foobar
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
* PR# 828 *
Subject: termplot fails for composite non-factor terms
From: John Maindonald <john.maindonald@anu.edu.au>
Date: Sat, 27 Jan 2001 11:57:37 +1100 (EST)
--Neither of the proposed changes actually works in sufficient generality.
--
--The easy and unimportant part of this, the labels, is fixed in 1.2.2. Getting
--the data right is a project for 1.3
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 828 <==
From postmaster@franz.stat.wisc.edu  Sat Jan 27 01:57:37 2001
Received: from franz.stat.wisc.edu (franz.stat.wisc.edu [128.105.174.95])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id BAA07865
	for <r-bugs@biostat.ku.dk>; Sat, 27 Jan 2001 01:57:36 +0100 (MET)
Received: from leonard.anu.edu.au (really [150.203.2.15]) by franz.stat.wisc.edu
	via in.smtpd with esmtp
	id <m14MJgZ-000IWyC@franz.stat.wisc.edu> (Debian Smail3.2.0.102)
	for <r-bugs@r-project.org>; Fri, 26 Jan 2001 18:57:47 -0600 (CST) 
Received: (from u9801539@localhost)
	by leonard.anu.edu.au (8.9.3/8.9.3) id LAA25063
	for r-bugs@r-project.org; Sat, 27 Jan 2001 11:57:37 +1100 (EST)
Date: Sat, 27 Jan 2001 11:57:37 +1100 (EST)
From: John Maindonald <john.maindonald@anu.edu.au>
Message-Id: <200101270057.LAA25063@leonard.anu.edu.au>
To: r-bugs@r-project.org
Subject: termplot fails for composite non-factor terms

I am running R 1.2.1 under Windows 98SE.

termplot() currently fails when there are composite terms, thus:
  > library(mass)
  > data(hills)
  > hills.lm <- lm(time ~ climb + poly(dist, 2), data = hills)
  > termplot(hills.lm)
  Hit <Return> to see next plot: 
  Error in eval(expr, envir, enclos) : Object "dist" not found

The call
  > termplot(hills.lm,data=hills)
does run without generating an error message, i.e. there is a 
problem with the default setting for the parameter 'data'. 
However the x-axis for the term poly(dist,2) is then incorrectly 
labelled as poly(dist,2), rather than dist
The label poly(dist,2) surely belongs as part of the y-axis label.

Here are suggested fixes

1. In the default parameters for the function call change
   data = model.frame(model)
to
   data = get(as.character(model$call$data))

[This does not work if the variable values are specified in the
function call.  It is not clear to me how to fix that.]

2. A few lines from the beginning, replace
    if (is.null(xlabs)) 
        xlabs <- nmt
    if (is.null(ylab)) 
        ylab <- substitute(link(foo), list(foo = formula(model)[[2]]))
with
   if (is.null(xlabs)) 
        xlabs <- unlist(lapply(cn,function(x)
        if(length(x)>1)as.character(x[[2]]) else as.character(x)))
   if (is.null(ylab)) 
        ylab <- paste("Partial for", nmt)

[The current y-label is "link(<yvar>)".  If it is thought necessary
to specify this, it should be additional to e.g., in my example,
"Partial for poly(dist,2)"]

Replace ylab = ylab with 
   ylab = ylab[i]
in the two places (arguments to plot()) where it appears.

John Maindonald               email : john.maindonald@anu.edu.au        
Statistical Consulting Unit,  phone : (6125)3998        
c/o CMA, SMS,                 fax   : (6125)5549  
John Dedman Mathematical Sciences Building
Australian National University
Canberra ACT 0200
Australia

==> 828.followup.1 <==
From tlumley@u.washington.edu  Sat Jan 27 02:08:54 2001
Received: from jason02.u.washington.edu (root@jason02.u.washington.edu [140.142.8.52])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id CAA07896
	for <R-bugs@biostat.ku.dk>; Sat, 27 Jan 2001 02:08:53 +0100 (MET)
Received: from homer06.u.washington.edu (tlumley@homer06.u.washington.edu [140.142.15.40])
	by jason02.u.washington.edu (8.9.3+UW00.05/8.9.3+UW00.12) with ESMTP id RAA28204;
	Fri, 26 Jan 2001 17:09:04 -0800
Received: from localhost (tlumley@localhost)
	by homer06.u.washington.edu (8.9.3+UW00.05/8.9.3+UW00.12) with ESMTP id RAA186066;
	Fri, 26 Jan 2001 17:09:03 -0800
Date: Fri, 26 Jan 2001 17:09:03 -0800 (PST)
From: Thomas Lumley <tlumley@u.washington.edu>
To: john.maindonald@anu.edu.au
cc: r-devel@stat.math.ethz.ch, R-bugs@biostat.ku.dk
Subject: Re: [Rd] termplot fails for composite non-factor terms (PR#828)
In-Reply-To: <200101270057.BAA07875@pubhealth.ku.dk>
Message-ID: <Pine.A41.4.21.0101261704120.21498-100000@homer06.u.washington.edu>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII

On Sat, 27 Jan 2001 john.maindonald@anu.edu.au wrote:

> I am running R 1.2.1 under Windows 98SE.
> 
> termplot() currently fails when there are composite terms, thus:
>   > library(mass)
>   > data(hills)
>   > hills.lm <- lm(time ~ climb + poly(dist, 2), data = hills)
>   > termplot(hills.lm)
>   Hit <Return> to see next plot: 
>   Error in eval(expr, envir, enclos) : Object "dist" not found
> 
> The call
>   > termplot(hills.lm,data=hills)
> does run without generating an error message, i.e. there is a 
> problem with the default setting for the parameter 'data'. 
> However the x-axis for the term poly(dist,2) is then incorrectly 
> labelled as poly(dist,2), rather than dist
> The label poly(dist,2) surely belongs as part of the y-axis label.
> 
> Here are suggested fixes
> 
> 1. In the default parameters for the function call change
>    data = model.frame(model)
> to
>    data = get(as.character(model$call$data))
> 
> [This does not work if the variable values are specified in the
> function call.  It is not clear to me how to fix that.]

Also, it does not specify where to get() the data: what environment to
use. The reason that the data= argument is present in termplot() is that
we can't tell where to find the data in general.

The situation is better as of R1.2, since we can look up variables in the
environment of the model formula. This would fix not only termplot() but a
number of other prediction-related problems.


> 2. A few lines from the beginning, replace
>     if (is.null(xlabs)) 
>         xlabs <- nmt
>     if (is.null(ylab)) 
>         ylab <- substitute(link(foo), list(foo = formula(model)[[2]]))
> with
>    if (is.null(xlabs)) 
>         xlabs <- unlist(lapply(cn,function(x)
>         if(length(x)>1)as.character(x[[2]]) else as.character(x)))
>    if (is.null(ylab)) 
>         ylab <- paste("Partial for", nmt)
> 
> [The current y-label is "link(<yvar>)".  If it is thought necessary
> to specify this, it should be additional to e.g., in my example,
> "Partial for poly(dist,2)"]
> 
> Replace ylab = ylab with 
>    ylab = ylab[i]
> in the two places (arguments to plot()) where it appears.


This looks like a good idea. 

	-thomas


==> 828.audit <==
Mon Jan 29 08:36:10 2001	ripley	moved from incoming to Graphics
Fri Feb 16 22:43:59 2001	thomas	changed notes
Fri Feb 16 22:43:59 2001	thomas	foobar
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
* PR# 865 *
Subject:  axis(...,las=1) breaks postscript code in certain cases 
From: maechler@stat.math.ethz.ch
Date: Wed, 7 Mar 2001 18:08:58 +0100
-- no notes --
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 865 <==
From postmaster@franz.stat.wisc.edu  Wed Mar  7 18:09:00 2001
Received: from franz.stat.wisc.edu (root@franz.stat.wisc.edu [128.105.174.95])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id SAA29209
	for <r-bugs@biostat.ku.dk>; Wed, 7 Mar 2001 18:08:59 +0100 (MET)
Received: from stat.math.ethz.ch (really [129.132.58.23]) by franz.stat.wisc.edu
	via smail with esmtp (ident daemon using rfc1413)
	id <m14ahQz-000J39C@franz.stat.wisc.edu> (Debian Smail3.2.0.111)
	for <r-bugs@r-project.org>; Wed, 7 Mar 2001 11:09:09 -0600 (CST) 
Received: (from daemon@localhost)
	by stat.math.ethz.ch (8.9.1/8.9.1) id SAA01076;
	Wed, 7 Mar 2001 18:09:06 +0100 (MET)
Received: from florence(129.132.58.33), claiming to be "florence.ethz.ch"
 via SMTP by hypatia, id smtpdAAAa000G_; Wed Mar  7 18:08:58 2001
Received: (maechler@localhost) by florence.ethz.ch (8.9.3/D-MATH-client) id SAA16747; Wed, 7 Mar 2001 18:08:58 +0100
Date: Wed, 7 Mar 2001 18:08:58 +0100
From: maechler@stat.math.ethz.ch
Message-Id: <200103071708.SAA16747@florence.ethz.ch>
To: r-bugs@r-project.org
Subject:  axis(...,las=1) breaks postscript code in certain cases 
Cc: maechler@stat.math.ethz.ch

A colleage of mine (Roland Brun) has found the following 
reproducible problem: 

  In some circumstances, incorrect (for gv/gs) PostScript seems to be
  created when "las = 1".

  {for many versions of R (Linux) at least}

The following code shows you the symptom
    (gv pops up an error message window) :


##- Generate data 
y1 <- 10^seq(0,6)   ##- positive exponents 
y2 <- 10^seq(-4,2)  ##- including negative exponents 

postscript("test.ps")

par(mfrow=c(2,2),mar=c(3,6,0,0)+0.1,oma=c(3,1,1,1),mgp=c(4.5,1,0))

##- Plot1: works perfectly (y1 and las=0)
plot(1:length(y1),y1,type="p",axes=F,log="y")
  box()
  axis(1,at=1:length(y1))
  axis(2,at=y1,las=0) 

##- Plot2: works perfectly (y1 and las=1)
plot(1:length(y1),y1,type="p",axes=F,log="y")
  box()
  axis(1,at=1:length(y1))
  axis(2,at=y1,las=1) 

##- Plot3: works perfectly (y2 and las=0)
plot(1:length(y2),y2,type="p",axes=F,log="y")
  box()
  axis(1,at=1:length(y2))
  axis(2,at=y2,las=0) 

##- Plot4: breaks postscript code (y2 and las=1)
plot(1:length(y2),y2,type="p",axes=F,log="y")
  box()
  axis(1,at=1:length(y2))
  axis(2,at=y2,las=1) 

dev.off()
system("gv test.ps")




--please do not edit the information below--

Version:
 platform = i686-pc-linux-gnu
 arch = i686
 os = linux-gnu
 system = i686, linux-gnu
 status = Under development (unstable)
 major = 1
 minor = 3.0
 year = 2001
 month = 03
 day = 07
 language = R

Search Path:
 .GlobalEnv, package:ctest, package:SfS, Autoloads, package:base

==> 865.audit <==
Thu Mar  8 18:23:52 2001	ripley	moved from incoming to Graphics
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
* PR# 837 *
Subject: screen doesn't handle redrawing properly
From: Thomas Vogels <tov@ece.cmu.edu>
Date: 01 Feb 2001 14:20:52 -0500
-- no notes --
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 837 <==
From tov@ece.cmu.edu  Thu Feb  1 20:20:40 2001
Received: from infiniti.ece.cmu.edu (INFINITI.ECE.CMU.EDU [128.2.133.84])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id UAA08721
	for <r-bugs@biostat.ku.dk>; Thu, 1 Feb 2001 20:20:39 +0100 (MET)
Received: (from tov@localhost) by infiniti.ece.cmu.edu (AIX4.3/UCB 8.8.8/8.8.8) id OAA30464; Thu, 1 Feb 2001 14:20:52 -0500
X-Authentication-Warning: infiniti.ece.cmu.edu: tov set sender to tov@ece.cmu.edu using -f
Sender: tov@infiniti.ece.cmu.edu
To: r-bugs@biostat.ku.dk
Cc: Thomas Vogels <tov@ece.cmu.edu>
Subject: screen doesn't handle redrawing properly
Reply-To: Thomas Vogels <tov@ece.cmu.edu>
X-URI: http://www.ece.cmu.edu/~tov
From: Thomas Vogels <tov@ece.cmu.edu>
Date: 01 Feb 2001 14:20:52 -0500
Message-ID: <pxitmub46j.fsf@infiniti.ece.cmu.edu>
Lines: 74
User-Agent: Gnus/5.0807 (Gnus v5.8.7) Emacs/20.7
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii


Hi.  As far as I understand it, there is a list of graphic primitives
stored for a device.  So for example, when I iconify/deiconify an X11
window, the plot will be redrawn.  Now screen (split.screen and
friends) appear not to handle this list properly, the list is reset or
not reset at odd times.  The commands below will show clearly what I
mean.  There are two effects:

  - After splitting the device real estate into two screens, I can
    plot on these screens, alternating between them.  When I then
    touch the window to force a redraw, *all* the plots are redrawn,
    not just the last (and visible) ones.
    [This happens when the X server runs on AIX, R runs on AIX or Sun.]

  - Again, after splitting, plotting on one screen can affect the
    other screen.  I.e. plot(...); plot (...) on the left screen can
    erase the *right* screen.
    [This happens for all platforms I have access to, AIX, Linux, Sun.]

The first effect may be due to a bad interaction with the X server,
but the second effect is surely not desirable, is it?  Am I mis-using
'screen' here?

R> split.screen (c(1,2))
[1] 1 2
R> # Draw 10000 points to make the effect obvious
R> screen (1)
R> plot (1:10000, 1:10000, main="1")
R> screen (2)
R> plot (1:10000, 1:10000, main="2")
R> # Ok, go back to screen 1, draw plots 3 and 4
R> screen (1)
R> plot (1:10000, 10000:1, main="3")
R> screen (2)
R> plot (1:10000, 10000:1, main="4")
R> 
R> ########################################
R> # NOW lower/raise window, do something to force device to redraw itself.
R> # You'll see again plot 1 (!), 2 (!), 3, and 4.  Why 1 and 2?
R> ########################################
R> 
R> # Here's how to erase screen 2 from screen 1 (!)
R> screen (1)
R> plot (1:10, 1:10, main="3a")
R> ########################################
R> # The following plot will erase screen 2
R> ########################################
R> plot (1:10, 1:10, main="3b")
R> 
R> # The good news is that this resets the list of graphic ops:
R> screen (2)
R> plot (1:10, 1:10, main="4")
R> # Now if you touch the window, you'll see only plot 3b and 4.

Regards,
  -tom

R> R.version
         _                   
platform sparc-sun-solaris2.7
arch     sparc               
os       solaris2.7          
system   sparc, solaris2.7   
status   Patched             
major    1                   
minor    2.1                 
year     2001                
month    01                  
day      31                  
language R                   

-- 
mailto:tov@ece.cmu.edu (Tom Vogels)   Tel: (412) 268-6638   FAX: -3204


==> 837.audit <==
Wed Feb  7 08:51:14 2001	ripley	moved from incoming to Graphics
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
* PR# 940 *
Subject: GCircle(): fails for non-clippable devices under certain circumstances (see below)
From: "Thomas Hoffmann" <thoffman@zappa.sax.de>
Date: Tue, 15 May 01 23:34:17 +0100
-- no notes --
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 940 <==
From postmaster@franz.stat.wisc.edu  Tue May 15 23:36:36 2001
Received: from franz.stat.wisc.edu (root@franz.stat.wisc.edu [128.105.174.95])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id XAA19114
	for <r-bugs@biostat.ku.dk>; Tue, 15 May 2001 23:36:35 +0200 (MET DST)
Received: from sax.sax.de (really [193.175.26.33]) by franz.stat.wisc.edu
	via smail with esmtp
	id <m14zmUW-000JGWC@franz.stat.wisc.edu> (Debian Smail3.2.0.111)
	for <r-bugs@r-project.org>; Tue, 15 May 2001 16:36:28 -0500 (CDT) 
Received: (from uucp@localhost)
	by sax.sax.de (8.9.3/8.9.3) with UUCP id XAA02964
	for r-bugs@r-project.org; Tue, 15 May 2001 23:36:22 +0200 (CEST)
Received:  by zappa.sax.de (UUPC/extended 1.13f);
           Tue, 15 May 2001 23:34:19 +0100
From: "Thomas Hoffmann" <thoffman@zappa.sax.de>
To: "r-bugs@r-project.org" <r-bugs@r-project.org>
Date: Tue, 15 May 01 23:34:17 +0100
Reply-To: "Thomas Hoffmann" <thoffman@zappa.sax.de>
Priority: Normal
X-Mailer: PMMail 1.9 For OS/2 UNREGISTERED SHAREWARE
X-Mailer-Gate: PMMail<->UUPC/extended Gateway v1.01
MIME-Version: 1.0
Content-Type: text/plain; charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
Subject: GCircle(): fails for non-clippable devices under certain circumstances (see below)
Message-ID: <3b01aeeb.thoffman.zappa@zappa.sax.de>

The following code snippet from graphics.c: GCircle() (around line 3100) fails for devices which 
can not clip (dd->dp.canClip==0) and try to plot a circle that does not fit into the plot region, but
fits into the device region, see inserted comments:

....
    result = clipCircleCode(x, y, coords, ir, dd);
// result>0, because circle does not fit into plot region (for dd->gp.xpd=0)

    switch (result) {
    case -2: /* No clipping;  draw all of circle */
        dd->dp.circle(x, y, coords, ir, bg, fg, dd);
        break;
    case -1: /* Total clipping; draw nothing */
        break;
    default: /* Partial clipping; draw poly[line|gon] */
// we proceed here:
        dd->gp.xpd = 2;
// check clipping for the device region:
        result = clipCircleCode(x, y, coords, ir, dd);
// ...if it fits, result=-2: ouch, we have thrown away the result from the 1st check!
        dd->gp.xpd = xpdsaved;
        if (dd->dp.canClip && result == -2) {
// ...but it does not matter if we can clip!
            GClip(dd);
            dd->dp.circle(x, y, coords, ir, bg, fg, dd);
        }
        else {
//...BUT if we can not clip, then we call for trouble:
            vmax = vmaxget();$

....
    default: /* Partial clipping; draw poly[line|gon] */
      if (dd->dp.canClip) {
	dd->gp.xpd = 2;
	result = clipCircleCode(x, y, coords, ir, dd);
	dd->gp.xpd = xpdsaved;
	if (result == -2) {
	    GClip(dd);
	    dd->dp.circle(x, y, coords, ir, bg, fg, dd);
	    break;
	}
      }
      vmax = vmaxget();
      xc = (double*)R_alloc(result+1, sizeof(double));
      yc = (double*)R_alloc(result+1, sizeof(double));
      GConvert(&x, &y, coords, DEVICE, dd);
      convertCircle(x, y, ir, result, xc, yc, dd);
      if (bg == NA_INTEGER) {
	dd->gp.col = fg;
	GPolyline(result+1, xc, yc, DEVICE, dd);
      }
      else {
	int npts;
	double *xcc, *ycc;
	xcc = ycc = 0;	/* -Wall */
	npts = GClipPolygon(xc, yc, result, DEVICE, 0, xcc, ycc, dd);
	if (npts > 1) {
	  xcc = (double*)R_alloc(npts, sizeof(double));
	  ycc = (double*)R_alloc(npts, sizeof(double));
	  npts = GClipPolygon(xc, yc, result, DEVICE, 1,
			      xcc, ycc, dd);
	  dd->dp.polygon(npts, xcc, ycc, DEVICE, bg, fg, dd);
	}
      }
      vmaxset(vmax);
    }
}


This works at least in my test case at

> version
         _
platform i386-pc-os2_emx
arch     i386
os       os2_emx
system   i386, os2_emx
status
major    1
minor    2.2
year     2001
month    02
day      26
language R


Thomas Hoffmann.


==> 940.audit <==
Mon May 21 08:54:07 2001	ripley	moved from incoming to Graphics
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
* PR# 916 *
Subject:  par(mgp) bug 
From: paul@stat.auckland.ac.nz
Date: Fri, 20 Apr 2001 08:33:45 +1200 (NZST)
-- no notes --
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 916 <==
From postmaster@franz.stat.wisc.edu  Thu Apr 19 22:33:54 2001
Received: from franz.stat.wisc.edu (root@franz.stat.wisc.edu [128.105.174.95])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id WAA02208
	for <r-bugs@biostat.ku.dk>; Thu, 19 Apr 2001 22:33:53 +0200 (MET DST)
Received: from mailhost.auckland.ac.nz (really [130.216.1.4]) by franz.stat.wisc.edu
	via smail with esmtp
	id <m14qL7p-000J8eC@franz.stat.wisc.edu> (Debian Smail3.2.0.111)
	for <r-bugs@r-project.org>; Thu, 19 Apr 2001 15:34:01 -0500 (CDT) 
Received: from stat1.stat.auckland.ac.nz (stat1.stat.auckland.ac.nz [130.216.93.1])
	by mailhost.auckland.ac.nz (8.9.2/8.9.2/8.9.2-ua) with ESMTP id IAA16455
	for <r-bugs@r-project.org>; Fri, 20 Apr 2001 08:33:45 +1200 (NZST)
Received: (from paul@localhost)
	by stat1.stat.auckland.ac.nz (8.9.3+Sun/8.8.8) id IAA18528;
	Fri, 20 Apr 2001 08:33:45 +1200 (NZST)
Date: Fri, 20 Apr 2001 08:33:45 +1200 (NZST)
Message-Id: <200104192033.IAA18528@stat1.stat.auckland.ac.nz>
From: paul@stat.auckland.ac.nz
To: r-bugs@r-project.org
Cc: paul@stat1.stat.auckland.ac.nz
Subject:  par(mgp) bug 

Hi

The behaviour of the third argument of par(mgp), which controls the
placement of the axis ticks, is not working.  

In the following example, the plots should NOT be
identical; the axis ticks plus the axis major line should be drawn one
line out from the edges of the plot region.

par(mfrow=c(2,1))
plot(1:10)
par(mgp=c(3,1,1))
plot(1:10)

Paul

<<insert bug report here>>



--please do not edit the information below--

Version:
 platform = sparc-sun-solaris2.7
 arch = sparc
 os = solaris2.7
 system = sparc, solaris2.7
 status = Under development (unstable)
 major = 1
 minor = 3.0
 year = 2001
 month = 02
 day = 18
 language = R

Search Path:
 .GlobalEnv, package:ctest, Autoloads, package:base

==> 916.audit <==
Sat Apr 21 12:59:42 2001	ripley	moved from incoming to Graphics

==> 916.followup.1 <==
From paul@stat.auckland.ac.nz  Tue Jun 19 03:36:11 2001
Received: from mailhost.auckland.ac.nz (mailhost.auckland.ac.nz [130.216.191.4] (may be forged))
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id DAA15904
	for <R-bugs@biostat.ku.dk>; Tue, 19 Jun 2001 03:36:08 +0200 (MET DST)
Received: from stat1.stat.auckland.ac.nz (stat1.stat.auckland.ac.nz [130.216.93.1])
	by mailhost.auckland.ac.nz (8.9.2/8.9.2/8.9.2-ua) with ESMTP id NAA25485;
	Tue, 19 Jun 2001 13:36:01 +1200 (NZST)
Received: from murrell (murrell.stat.auckland.ac.nz [130.216.93.23])
	by stat1.stat.auckland.ac.nz (8.9.3+Sun/8.8.8) with SMTP id NAA21072;
	Tue, 19 Jun 2001 13:36:00 +1200 (NZST)
Message-ID: <012601c0f862$df47ec10$175dd882@stat.auckland.ac.nz>
From: "Paul Murrell" <paul@stat.auckland.ac.nz>
To: <r-core@r-project.org>
Cc: <R-bugs@biostat.ku.dk>
References: <200104192033.WAA02218@pubhealth.ku.dk>
Subject: Re: [Rd] par(mgp) bug (PR#916)
Date: Tue, 19 Jun 2001 13:55:09 +1200
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 5.50.4522.1200
X-MimeOLE: Produced By Microsoft MimeOLE V5.50.4522.1200

Hi


> The behaviour of the third argument of par(mgp), which controls the
> placement of the axis ticks, is not working.
>
> In the following example, the plots should NOT be
> identical; the axis ticks plus the axis major line should be drawn one
> line out from the edges of the plot region.
>
> par(mfrow=c(2,1))
> plot(1:10)
> par(mgp=c(3,1,1))
> plot(1:10)


This is more of an incompatibility-with-S rather than a bug.  In R,
axis(pos=) overrides axis(line=) which overrides par(mgp=).  It is possible
to get axis to respond to par(mgp=), but this is NOT the default behaviour.
For example,

par(mgp=c(3, 1, 1))
plot(1:10, axes=F)
box()
axis(1, line=NA)
axis(2)

In S, par(mgp=) specifies locations RELATIVE TO axis(line=), which can be
overridden by axis(pos=).

So the options are:
(i) become compatible NOW (for 1.3)
(ii) become compatible later
(iii) remain incompatible

I think we should do (i), especially because the default behaviour, which I
think would cover 99.999% of user code, would NOT change.

This is your chance to disagree ...

Paul



~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
* PR# 887 *
Subject: axis(adj=anything) has no effect
From: jhallman@frb.gov
Date: Wed, 28 Mar 2001 20:51:05 +0200 (MET DST)
-- no notes --
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 887 <==
From jhallman@frb.gov  Wed Mar 28 20:51:06 2001
Received: from blueberry.kubism.ku.dk (blueberry [130.225.108.193])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id UAA23265
	for <R-bugs@biostat.ku.dk>; Wed, 28 Mar 2001 20:51:05 +0200 (MET DST)
Date: Wed, 28 Mar 2001 20:51:05 +0200 (MET DST)
From: jhallman@frb.gov
Message-Id: <200103281851.UAA23265@pubhealth.ku.dk>
To: R-bugs@biostat.ku.dk
Subject: axis(adj=anything) has no effect

Full_Name: Jeff Hallman
Version: 1.2.2
OS: SunOS5.6
Submission from: (NULL) (132.200.32.33)


Giving an adj argument to axis() seems to have no effect.  In Splus, adj = 0 
left-justifies the labels under the ticks, adj = 1 right justifies them, and 
numbers in between can also be used.  I like to use adj = 0.9 to get something
that looks like this:

-----------+-----------+-----------+------------+---------
        1980        1981        1982         1983

as an axis for a plot of monthly time series data.



==> 887.audit <==
Sat Apr  7 10:29:17 2001	ripley	moved from incoming to Graphics

==> 887.followup.1 <==
From paul@stat.auckland.ac.nz  Tue Jun 19 06:05:35 2001
Received: from mailhost.auckland.ac.nz (mailhost.auckland.ac.nz [130.216.191.4] (may be forged))
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id GAA16140
	for <R-bugs@biostat.ku.dk>; Tue, 19 Jun 2001 06:05:33 +0200 (MET DST)
Received: from stat1.stat.auckland.ac.nz (stat1.stat.auckland.ac.nz [130.216.93.1])
	by mailhost.auckland.ac.nz (8.9.2/8.9.2/8.9.2-ua) with ESMTP id QAA00412;
	Tue, 19 Jun 2001 16:05:26 +1200 (NZST)
Received: from murrell (murrell.stat.auckland.ac.nz [130.216.93.23])
	by stat1.stat.auckland.ac.nz (8.9.3+Sun/8.8.8) with SMTP id QAA24826;
	Tue, 19 Jun 2001 16:05:25 +1200 (NZST)
Message-ID: <020401c0f877$becbd540$175dd882@stat.auckland.ac.nz>
From: "Paul Murrell" <paul@stat.auckland.ac.nz>
To: <r-core@r-project.org>
Cc: <R-bugs@biostat.ku.dk>
Subject: Re: axis(adj=anything) has no effect (PR#887)
Date: Tue, 19 Jun 2001 16:24:35 +1200
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 5.50.4522.1200
X-MimeOLE: Produced By Microsoft MimeOLE V5.50.4522.1200

Hi

----Bug summary:----
Giving an adj argument to axis() seems to have no effect.  In Splus, adj = 0
left-justifies the labels under the ticks, adj = 1 right justifies them, and
numbers in between can also be used.  I like to use adj = 0.9 to get
something
that looks like this:

-----------+-----------+-----------+------------+---------
        1980        1981        1982         1983

as an axis for a plot of monthly time series data.
----Bug summary:----


Are missing features bugs or wish-list items ?

Paul


~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

Directory:  In-Out

none

Directory:  Installation

none

Directory:  Language

* PR# 937 *
Subject: name creation with index arrays
From: sint@oeaw.ac.at
Date: Thu, 10 May 2001 23:31:58 +0200 (MET DST)
-- no notes --
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 937 <==
From sint@oeaw.ac.at  Thu May 10 23:31:58 2001
Received: from blueberry.kubism.ku.dk (blueberry [130.225.108.193])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id XAA12154
	for <R-bugs@biostat.ku.dk>; Thu, 10 May 2001 23:31:58 +0200 (MET DST)
Date: Thu, 10 May 2001 23:31:58 +0200 (MET DST)
From: sint@oeaw.ac.at
Message-Id: <200105102131.XAA12154@pubhealth.ku.dk>
To: R-bugs@biostat.ku.dk
Subject: name creation with index arrays
MIME-Version: 1.0
Content-Type: text/plain; charset=unknown-8bit
Content-Transfer-Encoding: 8bit

Full_Name: Peter Sint
Version: 1.22
OS: MacOS 9.04
Submission from: (NULL) (193.170.84.51)


The not so serious problem is probably not specific to Macintosh although I
found it there:

The small example from  R-intro works .
> x <- array(1:20,dim=c(4,5))
> i <- array(c(1:3,3:1),dim=c(3,2))
> i
  [,1] [,2]
[1,] 1 3
[2,] 2 2
[3,] 3 1
> x[i]
[1] 9 6 3

x[i] has no attribute!
> x
  [,1] [,2] [,3] [,4] [,5]
[1,] 1 5 9 13 17
[2,] 2 6 10 14 18
[3,] 3 7 11 15 19
[4,] 4 8 12 16 20
> x[i] <- 0
> x
  [,1] [,2] [,3] [,4] [,5]
[1,] 1 5 0 13 17
[2,] 2 0 10 14 18
[3,] 0 7 11 15 19
[4,] 4 8 12 16 20
>

>  colnames(x)<- c("c1","c2","c3","c4","c5")
> x[i]
[1] 9 6 3

BUT
> rownames(x)<- c("r1","r2","r3","r4")
> x[i]
NA NA r3 
 9  6  3 
> 
Rownames result in unsuccessful name formation (colnames do most likely not, but
this may depend on the order in the index array i). Better drop name making if
not o.k.

(Replacement [<- still works. 
Index matrices do not work on data frames, not a bug but a missing feature with
work around)
Reproduce:
x <- array(1:20,dim=c(4,5))
i <- array(c(1:3,3:1),dim=c(3,2))
i
x[i]
x
x[i] <- 0
x
colnames(x)<- c("c1","c2","c3","c4","c5")
x[i]
rownames(x)<- c("r1","r2","r3","r4")
x[i]

==> 937.audit <==
Mon May 21 08:57:05 2001	ripley	moved from incoming to Language
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
* PR# 412 *
Subject: anomalies with call objects
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 06 Feb 2000 01:18:50 +0100
-- no notes --
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 412 <==
From postmaster@franz.stat.wisc.edu  Sun Feb  6 01:16:33 2000
Received: from stat.math.ethz.ch (daemon@hypatia.ethz.ch [129.132.58.23])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id BAA26868
	for <R-bugs@biostat.ku.dk>; Sun, 6 Feb 2000 01:16:31 +0100 (MET)
Received: (from daemon@localhost)
	by stat.math.ethz.ch (8.9.1/8.9.1) id BAA18080
	for <r-bugs@hypatia.math.ethz.ch>; Sun, 6 Feb 2000 01:16:38 +0100 (MET)
Received: from franz.stat.wisc.edu(128.105.174.95)
 via SMTP by hypatia, id smtpdAAAa004QS; Sun Feb  6 01:16:33 2000
Received: from pubhealth.ku.dk (really [130.225.108.10]) by franz.stat.wisc.edu
	via smail with esmtp
	id <m12HFNP-000ZSxC@franz.stat.wisc.edu> (Debian Smail3.2.0.102)
	for <r-bugs@r-project.org>; Sat, 5 Feb 2000 18:16:31 -0600 (CST) 
Received: from biostat.ku.dk (blueberry [130.225.108.193])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id BAA26864
	for <r-bugs@r-project.org>; Sun, 6 Feb 2000 01:16:18 +0100 (MET)
Received: (from pd@localhost)
	by biostat.ku.dk (8.9.3/8.9.3) id BAA12311;
	Sun, 6 Feb 2000 01:18:51 +0100
Sender: pd@blueberry.kubism.ku.dk
To: r-bugs@r-project.org
Subject: anomalies with call objects
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 06 Feb 2000 01:18:50 +0100
Message-ID: <x2900zyyhh.fsf@blueberry.kubism.ku.dk>
Lines: 51
X-Mailer: Gnus v5.7/Emacs 20.4
Mime-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: 7bit


Call objects don't always behave as you'd expect. They're mostly
list-like, but with exceptions:

> f<-function(x,y,...)match.call(expand.dots=FALSE)
> xx <- f(y=1,2,z=3,4)
> dd <- xx$...
> xx$... <- NULL
> c(xx,dd)
[[1]]
f(x = 2, y = 1)

$z
[1] 3

[[3]]
[1] 4

> as.call(c(as.list(xx),dd))
f(x = 2, y = 1, z = 3, 4)

(Splus has this rather differently, since dd becomes a call to list()
rather than a list of promises:

S> c(xx,dd)
f(x = 2, y = 1, list, z = 3, 4)
S> as.call(c(as.list(xx),dd))
f(x = 2, y = 1, list, z = 3, 4)

...but at least gives the same in both cases)

Also, the names of arguments added with [[<- is getting dropped if a
new element is required:

> xx[["abc"]]<-123
> xx
f(x = 2, y = 1, 123)

S has what I'd expect there:

S> xx[["abc"]]<-123
S> xx
f(x = 2, y = 1, abc = 123)

[R-0.99.0 prerelease on RedHat6.1, but this is likely not a new thing.]

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

==> 412.audit <==
Wed Feb 16 19:26:57 2000	ripley	moved from incoming to Language
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
* PR# 408 *
Subject: convolution bug
From: wsimpson@gcal.ac.uk
Date: Fri, 28 Jan 2000 11:17:36 +0100 (MET)
-- no notes --
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 408 <==
From wsimpson@gcal.ac.uk  Fri Jan 28 11:17:36 2000
Received: from localhost (blueberry [130.225.108.193])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id LAA11325
	for <R-bugs@biostat.ku.dk>; Fri, 28 Jan 2000 11:17:36 +0100 (MET)
Date: Fri, 28 Jan 2000 11:17:36 +0100 (MET)
From: wsimpson@gcal.ac.uk
Message-Id: <200001281017.LAA11325@pubhealth.ku.dk>
To: R-bugs@biostat.ku.dk
Subject: convolution bug

Full_Name: Bill Simpson
Version: 65.1 , 0.90.1
OS: Linux
Submission from: (NULL) (193.62.250.209)


I reported this on r-help, but here is official bug report.

The present convolve() does not do convolution by default. Its default behaviour
is
correlation. This is a bug.

The default argument conj should be set to FALSE.

The zero-padding should be on the right for linear convolution (don't ask me
why you call this type="open"; I suggest type="linear").

Here is what I expect linear convolution to do:
myconvolve<-function (x,h) 
{
    nx <- length(x)
    nh <- length(h)
    #zero pad
    if(nx>nh)
       {
       x <- c(x,rep(0, nh-1))
       h<-c(h,rep(0,nx-1))
       }
    else
       {
       h <- c(h,rep(0, nx-1))
       x<-c(x,rep(0,nh-1))
       }
    x <- fft(fft(x) * fft(h), inv = TRUE)
    Re(x)/length(x)
#I am not sure about this, the R IFFT is weird
}

What "circular" convolution should do is just
eliminate the zero-padding:

myconvolve2<-function (x,h)
{
#no padding, circular convolution
    nx <- length(x)
    nh <- length(h)
    x <- fft(fft(x) * fft(h), inv = TRUE)
    Re(x)/(nx)
}


I suggest that you create two functions, convolve() and correlate(), and get
rid
of the conj argument in convolve().

==> 408.audit <==
Wed Feb 16 19:28:42 2000	ripley	moved from incoming to Language
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
* PR# 921 *
Subject:  Managed to confuse match.arg 
From: J.C.Rougier@durham.ac.uk
Date: Wed, 25 Apr 2001 12:22:54 +0100 (BST)
-- no notes --
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 921 <==
From postmaster@franz.stat.wisc.edu  Wed Apr 25 13:23:07 2001
Received: from franz.stat.wisc.edu (root@franz.stat.wisc.edu [128.105.174.95])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id NAA14338
	for <r-bugs@biostat.ku.dk>; Wed, 25 Apr 2001 13:23:06 +0200 (MET DST)
Received: from hermes.dur.ac.uk (really [129.234.4.9]) by franz.stat.wisc.edu
	via smail with esmtp
	id <m14sNO6-000JH1C@franz.stat.wisc.edu> (Debian Smail3.2.0.111)
	for <r-bugs@r-project.org>; Wed, 25 Apr 2001 06:23:14 -0500 (CDT) 
Received: from euclid (euclid.dur.ac.uk [129.234.21.53])
	by hermes.dur.ac.uk (8.11.1/8.11.1) with ESMTP id f3PBMtl04590
	for <r-bugs@r-project.org>; Wed, 25 Apr 2001 12:22:55 +0100 (BST)
Received: from laplace by euclid id <MAA23210@euclid>; Wed, 25 Apr 2001 12:22:49 +0100 (BST)
From: J.C.Rougier@durham.ac.uk
Date: Wed, 25 Apr 2001 12:22:54 +0100 (BST)
Message-Id: <8522.200104251122@laplace>
To: r-bugs@r-project.org
Cc: dma0jcr@laplace.dur.ac.uk
Subject:  Managed to confuse match.arg 

This one may not strictly be a bug, and it was certainly my
fault, but it took me a while to track it down and it is rather
strange:

funOne <- function(x)
{
  funTwo <- 1:10
  funTwo(x)
}

funTwo <- function(v) 2*v

funOne(5) # answer is 10 as expected

# now a different definition for funTwo with a match.arg

funTwo <- function(v, foo=c("small", "large"))
{
  foo <- match.arg(foo)
  print(foo)
  2*v
}

funOne(5) # answer is 10, but foo is NULL

What happens is that in funOne I mask funTwo with a vector, but
that doesn't matter as the call to funTwo specifies
mode="function" (or something similar).  But what happens when
funTwo includes a match.arg?  In this case match.arg fails, and
the reason it fails is that sys.function(sys.parent()) in
match.arg evaluates to 1:10.  If there is a bug here it is the
failure of sys.function to grab a function, with the result that
formal.args in match.fun is NULL.

Cheers, Jonathan.

--please do not edit the information below--

Version:
 platform = sparc-sun-solaris2.7
 arch = sparc
 os = solaris2.7
 system = sparc, solaris2.7
 status = 
 major = 1
 minor = 2.1
 year = 2001
 month = 01
 day = 15
 language = R

Search Path:
 .GlobalEnv, Autoloads, package:base

==> 921.reply.1 <==
From postmaster@franz.stat.wisc.edu  Thu Apr 26 01:01:48 2001
Received: from franz.stat.wisc.edu (root@franz.stat.wisc.edu [128.105.174.95])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id BAA04470
	for <r-bugs@biostat.ku.dk>; Thu, 26 Apr 2001 01:01:47 +0200 (MET DST)
Received: from pubhealth.ku.dk (really [130.225.108.10]) by franz.stat.wisc.edu
	via smail with esmtp
	id <m14sYIG-000JdlC@franz.stat.wisc.edu> (Debian Smail3.2.0.111)
	for <r-bugs@r-project.org>; Wed, 25 Apr 2001 18:01:56 -0500 (CDT) 
Received: from blueberry.kubism.ku.dk (blueberry [130.225.108.193])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id BAA04466
	for <r-bugs@r-project.org>; Thu, 26 Apr 2001 01:01:27 +0200 (MET DST)
Received: (from pd@localhost)
	by blueberry.kubism.ku.dk (8.9.3/8.9.3) id BAA30388;
	Thu, 26 Apr 2001 01:10:27 +0200
Sender: pd@pubhealth.ku.dk
To: r-bugs@r-project.org
Subject: match.arg confusion (PR#921)
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 26 Apr 2001 01:10:27 +0200
Message-ID: <x2zod4r2xo.fsf@blueberry.kubism.ku.dk>
Lines: 22
X-Mailer: Gnus v5.7/Emacs 20.7
Mime-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: 7bit


[sys.function fails sometimes (sorry, our mail system decide to throw
away the original mail)]

Yes, I bumped into something similar recently. The problem is that we
only actually store the call in the context structure, not the
function, so sys.function has to grab the call, take the 1st element,
and reevaluate it in the parent frame. It is quite easy to think up
examples where a second evaluation does not give the same value as
the first. 

Your particular case is of a slightly different natur and should be
easily fixable by replacing findVar in R_sysfunction by findVar1 and
looking specifically for objects of mode "function", but the basic
problem persists. I don't think I want to risk fixing this (and maybe
unfixing something else) for 1.2.3 tomorrow though.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

==> 921.audit <==
Thu Apr 26 12:30:31 2001	pd	moved from incoming to Language
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
* PR# 669 *
Subject: Bug(s) w/ rbind.data.frame(); fix also read.table(*, as.is = TRUE) ?
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Mon, 25 Sep 2000 10:17:15 +0200
--status of AsIs columns
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 669 <==
From maechler@stat.math.ethz.ch  Mon Sep 25 10:17:01 2000
Received: from stat.math.ethz.ch (daemon@hypatia.ethz.ch [129.132.58.23])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id KAA01907
	for <R-bugs@biostat.ku.dk>; Mon, 25 Sep 2000 10:17:01 +0200 (MET DST)
Received: (from daemon@localhost)
	by stat.math.ethz.ch (8.9.1/8.9.1) id KAA07627
	for <R-bugs@stat.math.ethz.ch>; Mon, 25 Sep 2000 10:17:19 +0200 (MET DST)
Received: from lynne(129.132.58.30), claiming to be "lynne.ethz.ch"
 via SMTP by hypatia, id smtpdAAAa001r9; Mon Sep 25 10:17:15 2000
Received: (maechler@localhost) by lynne.ethz.ch (8.9.3/D-MATH-client) id KAA01475; Mon, 25 Sep 2000 10:17:15 +0200
X-Authentication-Warning: lynne.ethz.ch: maechler set sender to maechler@stat.math.ethz.ch using -f
From: Martin Maechler <maechler@stat.math.ethz.ch>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
Message-ID: <14799.2571.494467.836722@gargle.gargle.HOWL>
Date: Mon, 25 Sep 2000 10:17:15 +0200
To: R-bugs@stat.math.ethz.ch
Subject: Bug(s) w/ rbind.data.frame(); fix also read.table(*, as.is = TRUE) ?
X-Mailer: VM 6.76 under Emacs 20.7.1
Reply-To: Martin Maechler <maechler@stat.math.ethz.ch>

This is not only bug report, but also a RFC (request for comments):

The basic problem is that there are (at least) two ways of easily getting
non-factor character columns in data.frames.
The first is  
    read.table(*, as.is = TRUE) 
and the second is
    data.frame(.., I(...), ..)	      

which differ in their result. Whereas the first produces `pure' character
columns in the data.frame, the second approach gives `AsIs' classed
columns (character, or, e.g. logical).

Now, as the following shows,  rbind.data.frame()  *is* buggy anyway,
I wonder if we shouldn't change read.table(*, as.is = TRUE)
such that the non-numeric columns of its result become "AsIs" classed as
well:

-----------

str(d1 <- data.frame(a=1:3, b = I(letters[1:3])))
## d1 is `alright'
## d0: The same but a `character' *not* protected by AsIs:
d0 <- d1
d0$b <- unclass(d0$b)
str(d0)
## Note that this is *really* the same as a what you get from
##  read.table(*, as.is = TRUE)
##  ----------
##  R's read.table() is S+ compatible; however I wonder if
##  we shouldn't add  "AsIs" classes to all non-numeric components...
##  the classes, shouldn't harm, but ensure consistency of treatment..

str(d11 <- rbind(d1, new = c(7, "N"))) ## alright
str(d01 <- rbind(d0, new = c(7, "N"))) ## all wrong :
## Both columns were coerced to factors !!
##-- S-PLUS 5 coerces both to "character" -- which is better,
##  since the new row *is* all character

## R makes nonsense with 'b' [factor w/ 1 level "N": NA NA NA 1]
## S+ 5.1 does exactly the right thing [both a & b still look like in d0,d1 :
str(d12 <- rbind(d1, new = data.frame(a= 7, b="N")))##
str(d02 <- rbind(d0, new = data.frame(a= 7, b="N")))##

---------

Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
Seminar fuer Statistik, ETH-Zentrum  LEO D10	Leonhardstr. 27
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1228			<><

==> 669.audit <==
Wed Oct 25 20:31:21 2000	ripley	changed notes
Wed Oct 25 20:31:21 2000	ripley	foobar
Wed Oct 25 20:31:21 2000	ripley	moved from incoming to Language
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

Directory:  Low-level

* PR# 989 *
Subject: "[.data.frame" allows un-named 3rd subscript
From: "Charles C. Berry" <cberry@tajo.ucsd.edu>
Date: Mon, 18 Jun 2001 13:13:46 -0700 (PDT)
-- no notes --
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 989 <==
From cberry@tajo.ucsd.edu  Mon Jun 18 22:10:28 2001
Received: from mailbox4.ucsd.edu (mailbox4.ucsd.edu [132.239.1.56])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id WAA14900
	for <r-bugs@biostat.ku.dk>; Mon, 18 Jun 2001 22:10:27 +0200 (MET DST)
Received: from smtp.ucsd.edu (smtp.ucsd.edu [132.239.1.49])
	by mailbox4.ucsd.edu (8.11.3/8.11.0) with ESMTP id f5IKAKq28590
	for <r-bugs@biostat.ku.dk>; Mon, 18 Jun 2001 13:10:20 -0700 (PDT)
Received: from tajo.ucsd.edu (tajo.ucsd.edu [132.239.99.2])
	by smtp.ucsd.edu (8.9.3/8.9.3) with ESMTP id NAA24075
	for <r-bugs@biostat.ku.dk>; Mon, 18 Jun 2001 13:10:20 -0700 (PDT)
Received: by tajo.ucsd.edu (8.9.3+Sun/SMI-SVR4-UCSD.1)
	id NAA15110; Mon, 18 Jun 2001 13:13:46 -0700 (PDT)
Date: Mon, 18 Jun 2001 13:13:46 -0700 (PDT)
Message-Id: <200106182013.NAA15110@tajo.ucsd.edu>
From: "Charles C. Berry" <cberry@tajo.ucsd.edu>
To: r-bugs@biostat.ku.dk
Subject: "[.data.frame" allows un-named 3rd subscript


Since the Extract page has usage as:

     x[i, j, ... , drop=TRUE]

I would expect that 'drop=' would need to be given to the third 'subscript'

> diag(4)[ , 4 , 4 ] # Forgot 'drop=' or added extra ','
Error in diag(4)[, 4, 4] : incorrect number of dimensions
> 
> as.data.frame( diag(4) )[ , 4 , 4 ] # should return error, right?
[1] 0 0 0 1


Also note:

> diag(4)[ ,  , drop=TRUE ]
     [,1] [,2] [,3] [,4]
[1,]    1    0    0    0
[2,]    0    1    0    0
[3,]    0    0    1    0
[4,]    0    0    0    1
> 
> as.data.frame( diag(4) )[ ,  , drop=TRUE ]
Error in [.data.frame(as.data.frame(diag(4)), , , drop = 4) : 
	Argument "j" is missing, with no default
> 

--please do not edit the information below--

Version:
 platform = sparc-sun-solaris2.7
 arch = sparc
 os = solaris2.7
 system = sparc, solaris2.7
 status = 
 major = 1
 minor = 2.3
 year = 2001
 month = 04
 day = 26
 language = R

Search Path:
 .GlobalEnv, package:nls, package:nlme, package:ctest, Autoloads, package:base



Chuck

-- 
Charles C. Berry                        (858) 534-2098 
                                         Dept of Family/Preventive Medicine
E mailto:cberry@tajo.ucsd.edu	         UC San Diego
http://hacuna.ucsd.edu/members/ccb.html  La Jolla, San Diego 92093-0645

 

==> 989.reply.1 <==
From pd@blueberry.kubism.ku.dk  Mon Jun 18 22:35:29 2001
Received: from blueberry.kubism.ku.dk (blueberry [130.225.108.193])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id WAA15008;
	Mon, 18 Jun 2001 22:35:28 +0200 (MET DST)
Received: (from pd@localhost)
	by blueberry.kubism.ku.dk (8.9.3/8.9.3) id WAA31163;
	Mon, 18 Jun 2001 22:38:38 +0200
Sender: pd@pubhealth.ku.dk
To: cberry@tajo.ucsd.edu
Cc: r-devel@stat.math.ethz.ch, R-bugs@biostat.ku.dk
Subject: Re: [Rd] "[.data.frame" allows un-named 3rd subscript (PR#989)
References: <200106182010.WAA14911@pubhealth.ku.dk>
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 18 Jun 2001 22:38:38 +0200
In-Reply-To: cberry@tajo.ucsd.edu's message of "Mon, 18 Jun 2001 22:10:29 +0200 (MET DST)"
Message-ID: <x27ky9o75d.fsf@blueberry.kubism.ku.dk>
Lines: 34
X-Mailer: Gnus v5.7/Emacs 20.7
Mime-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: 7bit

cberry@tajo.ucsd.edu writes:

> Since the Extract page has usage as:
> 
>      x[i, j, ... , drop=TRUE]
> 
> I would expect that 'drop=' would need to be given to the third 'subscript'
> 
> > diag(4)[ , 4 , 4 ] # Forgot 'drop=' or added extra ','
> Error in diag(4)[, 4, 4] : incorrect number of dimensions
> > 
> > as.data.frame( diag(4) )[ , 4 , 4 ] # should return error, right?
> [1] 0 0 0 1
> 

And the bug is?

The generic indexing should really be x[...,drop=T].  Methods for
specific classes can specialize to a particular number of indices if
they want to, which is what is happening here

> get ("[.data.frame")
function (x, i, j, drop = if (missing(i)) TRUE else length(cols) == 
    1) 

one could fairly easily slip in a "..." argument after "j", and then
inside the function give an error if "..." is not empty, but what
would the point be?

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

==> 989.followup.1 <==
From cberry@tajo.ucsd.edu  Mon Jun 18 23:06:32 2001
Received: from mailbox3.ucsd.edu (mailbox3.ucsd.edu [132.239.1.55])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id XAA15201;
	Mon, 18 Jun 2001 23:06:31 +0200 (MET DST)
Received: from smtp.ucsd.edu (smtp.ucsd.edu [132.239.1.49])
	by mailbox3.ucsd.edu (8.10.1/8.11.0) with ESMTP id f5IL6PR16820;
	Mon, 18 Jun 2001 14:06:25 -0700 (PDT)
Received: from tajo.ucsd.edu (tajo.ucsd.edu [132.239.99.2])
	by smtp.ucsd.edu (8.9.3/8.9.3) with ESMTP id OAA06469;
	Mon, 18 Jun 2001 14:06:24 -0700 (PDT)
Received: from localhost by tajo.ucsd.edu (8.9.3+Sun/SMI-SVR4-UCSD.1)
	id OAA15733; Mon, 18 Jun 2001 14:09:49 -0700 (PDT)
Date: Mon, 18 Jun 2001 14:09:49 -0700 (PDT)
From: "Charles C. Berry" <cberry@tajo.ucsd.edu>
To: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
cc: r-devel@stat.math.ethz.ch, R-bugs@biostat.ku.dk
Subject: Re: [Rd] "[.data.frame" allows un-named 3rd subscript (PR#989)
In-Reply-To: <x27ky9o75d.fsf@blueberry.kubism.ku.dk>
Message-ID: <Pine.GSO.4.05.10106181348090.12737-100000@tajo.ucsd.edu>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII


See below.

On 18 Jun 2001, Peter Dalgaard BSA wrote:

> cberry@tajo.ucsd.edu writes:
> 
> > Since the Extract page has usage as:
> > 
> >      x[i, j, ... , drop=TRUE]
> > 
> > I would expect that 'drop=' would need to be given to the third 'subscript'
> > 
> > > diag(4)[ , 4 , 4 ] # Forgot 'drop=' or added extra ','
> > Error in diag(4)[, 4, 4] : incorrect number of dimensions
> > > 
> > > as.data.frame( diag(4) )[ , 4 , 4 ] # should return error, right?
> > [1] 0 0 0 1
> > 
> 
> And the bug is?
> 
> The generic indexing should really be x[...,drop=T].  Methods for
> specific classes can specialize to a particular number of indices if
> they want to, which is what is happening here
> 
> > get ("[.data.frame")
> function (x, i, j, drop = if (missing(i)) TRUE else length(cols) == 
>     1) 
> 
> one could fairly easily slip in a "..." argument after "j", and then
> inside the function give an error if "..." is not empty, but what
> would the point be?
> 

The point would be to catch errors like this

for ( i in 1:2 ) foo[i,2] <- my.fun( bar[,i,2] , another.arg )

that might otherwise pass unnoticed when 'bar' is a data.frame.


Charles C. Berry                        (858) 534-2098 
                                         Dept of Family/Preventive Medicine
E mailto:cberry@tajo.ucsd.edu	         UC San Diego
http://hacuna.ucsd.edu/members/ccb.html  La Jolla, San Diego 92093-0645

 


==> 989.audit <==
Tue Jun 19 09:07:09 2001	ripley	moved from incoming to Low-level
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

Directory:  Misc

none

Directory:  Models

none

Directory:  Startup

none

Directory:  System-specific

* PR# 964 *
Subject: R-1.2.3 OSF precompiled binary doesn't run under DU4.0D
From: paul@gromit.dlib.vt.edu
Date: Fri, 1 Jun 2001 17:47:10 +0200 (MET DST)
--Builder needs to avoid -ldnet in distributed binaries..
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 964 <==
From paul@gromit.dlib.vt.edu  Fri Jun  1 17:47:11 2001
Received: from blueberry.kubism.ku.dk (blueberry [130.225.108.193])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id RAA03063
	for <R-bugs@biostat.ku.dk>; Fri, 1 Jun 2001 17:47:10 +0200 (MET DST)
Date: Fri, 1 Jun 2001 17:47:10 +0200 (MET DST)
From: paul@gromit.dlib.vt.edu
Message-Id: <200106011547.RAA03063@pubhealth.ku.dk>
To: R-bugs@biostat.ku.dk
Subject: R-1.2.3 OSF precompiled binary doesn't run under DU4.0D

Full_Name: Paul Mather
Version: 1.2.3
OS: Digital Unix 4.0D
Submission from: (NULL) (128.173.35.237)


The precompiled binary for "osf4.0" distributed via CRAN does not run under
Digital Unix 4.0.  The error given is:

Fatal error: The X11 shared library could not be loaded.
  The error was dlopen: cannot load /usr/local/lib/R/bin/R_X11.so

Subsequent investigation actually reveals that the R_X11.so was linked against
libdnet.so, which is not present on standard Digital Unix 4.0D systems.  The
error is triggered by an inability to load the libdnet.so shared library.

As I understand it, libdnet provides DECnet support.  Digital Unix 4.0D systems
ship with libdnet_stub.so, which is a library of empty stub functions.

Is it possible to provide a version of R_X11.so linked against libdnet_stub.so?
Aside from this problem, the precompiled binary appears to work (i.e.,
"R -g none" runs).

Cheers,

Paul.

==> 964.audit <==
Mon Jun  4 09:27:52 2001	ripley	moved from incoming to System-specific
Thu Jun 21 08:48:15 2001	ripley	changed notes
Thu Jun 21 08:48:15 2001	ripley	foobar
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
* PR# 848 *
Subject: X11 device doesn't handle destroy events correcly
From: Thomas Vogels <tov@ece.cmu.edu>
Date: 13 Feb 2001 17:40:46 -0500
-- no notes --
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 848 <==
From postmaster@franz.stat.wisc.edu  Tue Feb 13 23:40:36 2001
Received: from franz.stat.wisc.edu (franz.stat.wisc.edu [128.105.174.95])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id XAA10552
	for <r-bugs@biostat.ku.dk>; Tue, 13 Feb 2001 23:40:36 +0100 (MET)
Received: from infiniti.ece.cmu.edu (really [128.2.133.84]) by franz.stat.wisc.edu
	via in.smtpd with esmtp
	id <m14So7r-000J2mC@franz.stat.wisc.edu> (Debian Smail3.2.0.102)
	for <r-bugs@r-project.org>; Tue, 13 Feb 2001 16:40:47 -0600 (CST) 
Received: (from tov@localhost) by infiniti.ece.cmu.edu (AIX4.3/UCB 8.8.8/8.8.8) id RAA70658; Tue, 13 Feb 2001 17:40:46 -0500
X-Authentication-Warning: infiniti.ece.cmu.edu: tov set sender to tov@ece.cmu.edu using -f
Sender: tov@infiniti.ece.cmu.edu
To: r-bugs@r-project.org
Cc: Thomas Vogels <tov@ece.cmu.edu>
Subject: X11 device doesn't handle destroy events correcly
Reply-To: Thomas Vogels <tov@ece.cmu.edu>
X-URI: http://www.ece.cmu.edu/~tov
From: Thomas Vogels <tov@ece.cmu.edu>
Date: 13 Feb 2001 17:40:46 -0500
Message-ID: <px3ddi6wb5.fsf@infiniti.ece.cmu.edu>
Lines: 258
User-Agent: Gnus/5.0807 (Gnus v5.8.7) Emacs/20.7
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii


Hi, there are two problems in devX11.c.  The one is an undocumented
nuisance and the other isn't a bug until you try to embed an X11
device in another window (think tktoplevel() in tcltk package...).

Let's take a look at locator() first: Assuming you call locator() with
a current X11 device, this call is handled in X11_Locator
(src/unix/X11/devX11.c).  When you have one window open and call
locator, you have three options to quit the locator: click Button 1
(to locate), click Button 2 (to abort), or destroy the window.  The
later results in the error message: "Error in locator(1) : No graphics
device is active". That's OK, sort of.

This gets problematic when you open two windows:
> x11()  # assume that's device 2
> x11()  # assume that's device 3
> plot(1)
> locator(1)  # with device 3 == dev.cur()!

When you now destroy device 3 (where locator expects the click), you have
*no alternative but to close _all_ windows* to abort the locator.  The
locator continues to wait for mouse clicks in device 3 where of course
no further clicks can come from.  That's the nuisance part.

The second problem is that the device may try to plot() into a
non-existant window.  Assume that the window was destroyed by some
other part of the program.  The device (at some point in the future)
will receive a DestroyNotify event that handleEvent ignores.
Blissfully!  *No KillDevice is called* when the window is destroyed by
something other than the WM_DELETE_WINDOW mechanism!  This happens
when you embed the X11 device into another window/application.  For
starters, the device no longer receives WM_DELETE_WINDOW client
messages.  But it does receive a DestroyNotify event when the parent
(the container window) is destroyed.  HandleEvent should, well
_handle_ this _event_.

The patch below is a _suggestion_ how to solve both problems.  It is
against the current r-devel, 1.3, as of 2/13.  I believe this behavior
exists in version 1.2 as well and can be solved there the same way.
The patch is just meant as a convenient and concise way to describe
my suggestion.  I'd greatly appreciate feedback or other ideas!

Implementation:

-- the variable inclose is now in the device specific structure (why
   was it global?)  After the window is mapped, inclose is TRUE until
   the window is destroyed explicitly or a DestroyNotify event has been
   received.
-- the deviceSpecific pointer is set to NULL after the memory has been
   freed. This (side?) effect is used in X11_Locator to detect the
   closing of the current device  which _must_ lead to an error.
-- the if statement to handle events of type DestroyEvent is added to 
   handleEvent
-- when the user closes the device (dev.off()), the window is
   destroyed in X11_Close
-- when the user pushes the close button in the window frame, the
   window is destroyed in handleEvent and X11_Close is initiated
   (the WM_DELETE_WINDOW mechanism already in place.)
-- when the window is destroyed for another reason (e.g. the parent
   being destroyed), it is not destroyed again but X11_Close is still
   initiated.

Regards,
  -tom


--------------------------------------------------
*** devX11.c_orig	Tue Feb 13 15:32:24 2001
--- devX11.c	Tue Feb 13 17:24:04 2001
***************
*** 116,121 ****
--- 116,122 ----
      FILE *fp;				/* file for a bitmap device */
      int quality;			/* JPEG quality */
  
+     Rboolean inclose;                   /* TRUE if window is being closed */
  } x11Desc;
  
  
***************
*** 145,151 ****
  static Atom _XA_WM_PROTOCOLS, protocol;
  
  static Rboolean displayOpen = FALSE;
- static Rboolean inclose = FALSE;
  static int numX11Devices = 0;
  
  	/********************************************************/
--- 146,151 ----
***************
*** 619,632 ****
  	xd->windowHeight = event.xconfigure.height;
  	xd->resize = 1;
      }
      else if ((event.type == ClientMessage) &&
! 	     (event.xclient.message_type == _XA_WM_PROTOCOLS))
! 	if (!inclose && event.xclient.data.l[0] == protocol) {
! 	    XFindContext(display, event.xclient.window,
  			 devPtrContext, &temp);
  	    dd = (DevDesc *) temp;
! 	    KillDevice(dd);
  	}
  }
  
  static void R_ProcessEvents(void *data)
--- 619,652 ----
  	xd->windowHeight = event.xconfigure.height;
  	xd->resize = 1;
      }
+     else if (event.type == DestroyNotify) {
+         /* The window is being destroyed, kill the device, too. */
+         XFindContext(display, event.xdestroywindow.window,
+                      devPtrContext, &temp);
+         dd = (DevDesc *) temp;
+         xd = (x11Desc *) dd->deviceSpecific;
+         if (!xd->inclose) {
+             xd->inclose = TRUE;
+             KillDevice(dd);
+         }
+     }
      else if ((event.type == ClientMessage) &&
! 	     (event.xclient.message_type == _XA_WM_PROTOCOLS)) {
! 	if (event.xclient.data.l[0] == protocol) {
!             XFindContext(display, event.xclient.window,
  			 devPtrContext, &temp);
  	    dd = (DevDesc *) temp;
! 	    xd = (x11Desc *) dd->deviceSpecific;
! 	    if (!xd->inclose) {
! 		/* Dispatch destroy only once */
! 		xd->inclose = TRUE;
! 		XDestroyWindow(display, xd->window);
! 		XSync (display, 0);
! 		KillDevice(dd);
! 	    }
  	}
+     }
+ 
  }
  
  static void R_ProcessEvents(void *data)
***************
*** 1208,1213 ****
--- 1228,1234 ----
  		     ExposureMask | ButtonPressMask | StructureNotifyMask);
  	XMapWindow(display, xd->window);
  	XSync(display, 0);
+         xd->inclose = FALSE;
  
  	/* Gobble expose events */
  
***************
*** 1464,1476 ****
      x11Desc *xd = (x11Desc *) dd->deviceSpecific;
  
      if (xd->type == WINDOW) {
! 	/* process pending events */
! 	/* set block on destroy events */
! 	inclose = TRUE;
  	R_ProcessEvents((void*) NULL);
  
  	XFreeCursor(display, xd->gcursor);
- 	XDestroyWindow(display, xd->window);
  	XSync(display, 0);
      } else {
  	if (xd->npages && xd->type != XIMAGE) {
--- 1485,1506 ----
      x11Desc *xd = (x11Desc *) dd->deviceSpecific;
  
      if (xd->type == WINDOW) {
! 	/* There are three reasons to be here: */
! 	/* 1) The user clicked on a button in the window frame */
! 	/*    and we received a DELETE_WINDOW from the wm, */
! 	/* 2) Somebody destroyed our window directly, or if */
! 	/*    embedded, the parent is being destroyed, and so */
! 	/*    we got a DestroyNotify event, too, */
! 	/* 3) The user used dev.off() to get rid of us. Bye. */
! 
! 	if (!xd->inclose) {
! 	    xd->inclose = TRUE;
! 	    XDestroyWindow(display, xd->window);
! 	}
! 	/* process pending events (esp. reap events for this window) */
  	R_ProcessEvents((void*) NULL);
  
  	XFreeCursor(display, xd->gcursor);
  	XSync(display, 0);
      } else {
  	if (xd->npages && xd->type != XIMAGE) {
***************
*** 1517,1523 ****
      }
  
      free(xd);
!     inclose = FALSE;
  }
  
  	/********************************************************/
--- 1547,1553 ----
      }
  
      free(xd);
!     dd->deviceSpecific = NULL;
  }
  
  	/********************************************************/
***************
*** 1858,1866 ****
  		else
  		    done = 2;
  	    }
! 	}
! 	else
  	    handleEvent(event);
      }
      /* if it was a Button1 succeed, otherwise fail */
      return (done == 1);
--- 1888,1901 ----
  		else
  		    done = 2;
  	    }
! 	} else {
  	    handleEvent(event);
+ 	    if (!dd->deviceSpecific) {
+ 		/* Allow new active window to redraw */
+ 		R_ProcessEvents((void*)NULL);
+ 		error ("Device closed while waiting for input.\n");
+ 	    }
+         }
      }
      /* if it was a Button1 succeed, otherwise fail */
      return (done == 1);
--------------------------------------------------




--please do not edit the information below--

Version:
 platform = i686-pc-linux-gnu
 arch = i686
 os = linux-gnu
 system = i686, linux-gnu
 status = Under development (unstable)
 major = 1
 minor = 3.0
 year = 2001
 month = 02
 day = 12
 language = R

Search Path:
 .GlobalEnv, package:ctest, Autoloads, package:base


-- 
mailto:tov@ece.cmu.edu (Tom Vogels)   Tel: (412) 268-6638   FAX: -3204


==> 848.followup.1 <==
From pd@biostat.ku.dk  Wed Feb 14 01:10:35 2001
Received: from biostat.ku.dk (blueberry [130.225.108.193])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id BAA10968;
	Wed, 14 Feb 2001 01:10:34 +0100 (MET)
Received: (from pd@localhost)
	by biostat.ku.dk (8.9.3/8.9.3) id BAA02066;
	Wed, 14 Feb 2001 01:11:56 +0100
Sender: pd@blueberry.kubism.ku.dk
To: tov@ece.cmu.edu
Cc: r-devel@stat.math.ethz.ch, R-bugs@biostat.ku.dk
Subject: Re: [Rd] X11 device doesn't handle destroy events correcly (PR#848)
References: <200102132240.XAA10562@pubhealth.ku.dk>
From: Peter Dalgaard BSA <p.dalgaard@pubhealth.ku.dk>
Date: 14 Feb 2001 01:11:56 +0100
In-Reply-To: tov@ece.cmu.edu's message of "Tue, 13 Feb 2001 23:40:37 +0100 (MET)"
Message-ID: <x2elx2yvg3.fsf@blueberry.kubism.ku.dk>
Lines: 25
X-Mailer: Gnus v5.7/Emacs 20.7
Mime-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: 7bit

tov@ece.cmu.edu writes:


> Blissfully!  *No KillDevice is called* when the window is destroyed by
> something other than the WM_DELETE_WINDOW mechanism!  This happens
> when you embed the X11 device into another window/application.  For
> starters, the device no longer receives WM_DELETE_WINDOW client
> messages.  But it does receive a DestroyNotify event when the parent
> (the container window) is destroyed.  HandleEvent should, well
> _handle_ this _event_.

Heh. Quite probably, this is also the source of the FVWM trouble
reported earlier although that triggered an infinite loop which should
probably be guarded against by other means as well. 

Thanks for filing this (good to have as bug report so that we don't
forget - it's the sort of thing that often has to wait until someone
has a clear enough mind and sufficient stamina to try and get it
right.)

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

==> 848.audit <==
Sat Feb 17 11:44:41 2001	ripley	moved from incoming to System-specific
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

Directory:  TooMuchAtOnce

none

Directory:  Windows

none

Directory:  incoming

* PR# 993 *
Subject: ????????
From: "?????" <ausqkf6@lycos.co.kr>
Date: Sat, 23 Jun 2001 11:30:49 +0900 (KST)
-- no notes --
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 993 <==
From ausqkf6@lycos.co.kr  Mon Jun 25 11:21:27 2001
Received: from stat.math.ethz.ch (root@hypatia.ethz.ch [129.132.58.23])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id LAA09411
	for <R-bugs@biostat.ku.dk>; Mon, 25 Jun 2001 11:19:53 +0200 (MET DST)
Received: (from daemon@localhost)
	by stat.math.ethz.ch (8.9.1/8.9.1) id FAA00063;
	Sat, 23 Jun 2001 05:05:09 +0200 (MET DST)
Message-Id: <200106230305.FAA00063@stat.math.ethz.ch>
Received: from UNKNOWN(211.51.63.171), claiming to be "kr-outmail2.lycos.co.kr"
 via SMTP by hypatia, id smtpdAAAa0000k; Sat Jun 23 05:05:03 2001
From: "?????" <ausqkf6@lycos.co.kr>
To: rainboweye@hanmail.net, rainbow-sky@hanamil.net, rainbud@nownuri.net,
        rainbuk@trut.chungbuk.ac.kr, raindogs-request@listserv.hea.ie,
        raindraw@bomun.kaist.ac.kr, raindrop@netian.com,
        raineast@internetbang.com, rainer.bawidamann@wohnheim.uni-ulm.de,
        raiHner@hei.co.kr, rainfree@daum.net, rainhhk@hanmail.net,
        rainism@sktelecom.com, rainlee@aminet.co.kr, rainload@chollian.net,
        rainlood@kldp.org, rainlood@wdb.co.kr, rainlove0512@hanmail.net,
        rainmaker79@hanmail.net, rainmaker897@hanmail.net, rainman@chosun.cHom,
        rainner@dreamwiz.com, rainpic@hanmail.net, rainriver@netscape.net,
        rains2@chollian.net, rain-song@hanmail.net, rainsuck@free-ism.com,
        rainsun@postech.ac.kr, rain-tear@lycos.co.kr,
        raintraveller@hanmail.net, raintree@kgsm.kaist.ac.kr,
        raintree@unitel.cHo.kr, rainway@seoil.ac.kr, rainy0413@hanmail.net,
        rainy131@hanmail.net, rainy1420@hanmail.net, rainy15@hanmail.net,
        rainy5@hanmail.net, rainyday24@hanmail.net, rainyzoo@hanmail.net,
        rainy-zoo@hanmail.net, raisun@yahoo.com, raita71@netian.net,
        raj@dcs.uky.Hedu, raj_kumar74@hotmail.com, rajagrha@hanmail.net,
        rajan.venkataraman@dfat.gov.au, rajatmandal@hotmail.com,
        raja-yun@hanmail.net, raje@voxnet.co.kr, rajeev1@bol.net.in,
        rajesh_parab111@hotmail.com, rajeshdudhat@mailcity.com,
        rajivbhalla@yahoo.com, rajm@mhcn.net, rajo@elan.net.ma,
        rajorias@vsnl.com, rajpurohit@altavista.net, rajsam@pn2.vsnl.net.in,
        rajti@hanmail.net, raju@sgi.com, rajun@hk.co.kr, rajushah@att.net,
        rakesh1@del6.vsnl.net.in, rakii@noview.co.kr, raktv@mail.psb.co.kr,
        ralbrecht@eso.org, ralchemH@hd2.dot.net.in, ralco@blr.vsnl.net.in,
        ralf.treinen@lri.fr, ralf@bj-ig.de, rally@canada.com,
        rally@looksmart.com, rally7@hanmail.net, rallysport@canada.com,
        ralph.weichert@physik.th-darmstadt.de, ralph@first.gmd.de,
        ralph@inputplus.demon.co.uk, ralph@netHian.com, ralphg@xyzpress.com,
        ralphk@panvera.com, ralpho@acc.fau.edu, ralsina@unl.edu.ar,
        raltjsrl@daum.net, ram56@channeli.net, rama@new-shum.cc.huji.ac.il,
        ramahnaioth@hanmail.net, ramanisteel@vsnl.net.in,
        ramanuja@cal2.vsnl.net.in, ramasin@hanmail.net,
        rambadHa@dava.kepco.co.kr, rambo3@suro.dongguk.ac.kr,
        rambo3@wonhyo.dongguk.ac.kr, rambosix@lycos.co.kr, ramdas@apexmail.com,
        ramdrive@altair.snu.ac.kr, ramdrive@ee.snu.ac.kr, ramen@hanmail.net,
        ramen2738@hanmail.net, ramery@arts.adelaide.edu.au
Cc: rameses@yonsei.ac.kr, ramesh@rubi.wlink.com.np, rami-kim@hanmail.net,
        ramirlopez@aol.com, ramiya@freechal.com, ramjui@samsung.co.kr,
        ramkamhang@hanmail.net, rammallappa@lucent.com, ramnin76@wisebees.com,
        ramonas@asme.org, ramones@nl1.telmex.net, ramotHh@dreamx.net,
        ramraj@vsnl.com, ramses@computer.org, ramses@soback.kornet21.net,
        ramses157@hanmail.net, ramses73@netsgo.net, ramsfan2481@aol.com,
        ramtalk-owner@onelist.com, ramtalk-subscribe@onelist.com,
        ramur@alchemy.yonsei.ac.kr, ramy_sho@hotmail.com, raHn@swiftech.net.sg,
        ran_ok@yahoo.com, ran0406@hanmail.net, ran0917@pupyong.inchon.kr,
        ran1004@danal.co.kr, ran2058@hanmail.net, ran456@hitel.net,
        ran519@hanmail.net, ran9421@hanmail.net, ran9584@kebi.com,
        rana160@mail.ww.or.kr, ranani@hanmail.net, ranceso@Hhanmail.net,
        randa.jazairi@ingrammicro.com.au, randerso@bite.db.uth.tmc.edu,
        random99@hanmail.net, randow@zeit.de, randy.harr@vhdl.org,
        randy@opid.littondsd.com, randy@psg.com, randy75@netian.com,
        randym@aloha.com, randys@brignt.net, raner@alchemy.yonsei.Hac.kr,
        rang@laputa.ics.uci.edu, rangan@jupiter.kaist.ac.kr,
        rangbu@hanmail.net, ranger4co@netsgo.com, ranger70@hanmail.net,
        rangernet@lists.sni.net, rangers-request@tamu.edu, rani@hosanna.net,
        rani79@hanmail.net, ranilove1982@hanmail.net, ranjit@legato.coHm,
        ranju1@nownuri.net, ranka@netian.com, rankum@angelfire.com,
        ranma@chollian.dacom.co.kr, ranma@eskimo.com, ranma2002@hanmail.net,
        r-annouce@stat.math.ethz.ch, rans_mail@hanmail.net,
        rantapaa@math.umn.edu, rant-rave-subscribe@onelist.com,
        rany1204@netiHan.com, rany75@hanmail.net, ranypark@chollian.net,
        ranywow@hanmail.net, rap@st-andrews.ac.uk, rapael@alphasports.co.kr,
        rapaport@cs.buffalo.edu, rapaume@netsgo.com, rapelli@hotmail.com,
        raphael@gowa.co.kr, raphael@research.canon.oz.au, raphy@donga.com,
        raHpid1@iprimus.com.au, rapier@xcentric.net,
        rapmusicreview-owner@onelist.com, rapport@ekklesia.win-uk.net,
        rapti@rtc.wlink.com.np, raptor@orgio.net, raptor1967@orgio.net,
        raptor21@hanmail.net, raptor76@hanmail.net, raptors7@kornet.net,
        rapumsoo@hotmail.com, raputa22@dreamwiz.com, rapyuta@goldtour.co.kr,
        rara@icplaza.com, rarac@kuccnx.korea.ac.kr, raragirl@hanmail.net,
        rare0524@hanmail.net, rarebooks-l-request@listserv.indiana.edu,
        rare-books-request@listservice.net, rarefunk@hanmail.net,
        rasahcom@hotmail.coHm
Subject: ????????
Date: Sat, 23 Jun 2001 11:30:49 +0900 (KST)
MIME-Version: 1.0
X-Mailer: SoftForum-WebMail 1.0
Content-Type: multipart/mixed;
	boundary="==SoftForum-WebMail-1.0-32BF5B923B33FF59=="
Content-Transfer-Encoding: 8bit

--==SoftForum-WebMail-1.0-32BF5B923B33FF59==
Content-Type: text/plain; charset=euc-kr
Content-Transfer-Encoding: base64
X-MIME-Autoconverted: from 8bit to base64 by kr-outmail2.lycos.co.kr id LAR76480

v6m3r7rQv6Gw1CCwocDlIMfKv+THz7DtIMCvwM3H0SDExMe7xc0gsPy3w8fBt86x17elwLsN
CsbEsN3A+8C4t84gvdEgsKGw3b+hILD4sd7H1bTPtNkNCg0Kw9a9xbDUwNMuIMCvxr+w/LfD
x8G3zrHXt6UuIE1QMy4guvG18L/AvcO18CC17rXuDQq48LXnIMfBt86x17elwLsgxse4xcfV
tM+02S4gNr/5IMPWvcW4rr26xq7A1LTPtNkNCg0KubC30CC9xb/rILDGwaTAuyDA/Mf0IL3F
sOa+ssH2ILi2vcq9w7/kDQrDt7rOtcggY2RsaXN0LnppcCC+0MPgyK3Az7zTwMcgs7u/68C7
ILq4vcXIxCDA/Mits6oguN7Az7fOIL+stvTB1r3KvcO/5A0KwMwguN7Az8C7ILq4s70gvsbA
zLXwt860wiC/rLb0wMwgtcfB9iC+yr3AtM+02S4NCr7Qw+DIrcDPvNO/oSC/rLb0w7OwoSDA
1r3AtM+02Si43sDPLsD8yK25+MijKSANCg0KPT09IMavurAgurizyr26IL3DtfC4piDB9cGk
x9W0z7TZID09PQ0KDQrIrr3Hx8+w1CDI3rTrxvnAuLfOIL+stvTB1r3KvcO/5A0KsKi758fV
tM+02Q0KDQqzocC4t84gx+O29L74wMwguN7Az8C7ILXluLCwzcC7ILvnsPq15biztM+02S6x
17iusO0gv6m3r7rQwMcguN7Az8HWvNK0wg0KuavA28Cnt84guPC+xsH4sM3AzLTPILTZuKUg
sMbBpMC6IMfPwfYgvsrAuLzFtbUgtcu0z7TZLiAgDQoNCg0KDQogTmV4dCBFbnRlcnRhaW5t
ZW50LCBMWUNPUw0KPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09
PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogwfGwzMH2IL7KwLi46SDAzsXNs93A
zCC+xrTVtM+02SEhICAgaHR0cDovL3d3dy5seWNvcy5jby5rcg0KIMDOxc2z3SC4uMitwMcg
w9awrSwgtvPAzMTavboguLjIrSAgIChodHRwOi8vY29taWNzLmx5Y29zLmNvLmtyKSANCiC9
sbDtILr8uKUgua7A2rjevLzB9iwgtvPAzMTavboguau8sbjewM8gIChodHRwOi8vbS1tYWls
Lmx5Y29zLmNvLmtyKQ0K
--==SoftForum-WebMail-1.0-32BF5B923B33FF59==
Content-Type: application/octet-stream;
 name="cdlist.zip"
Content-Disposition: attachment;
 filename="cdlist.zip"
Content-Transfer-Encoding: base64

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
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
