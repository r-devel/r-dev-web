=================================================
This is an automated collection of open reports in
the R-bugs repository.
=================================================

Directory:  Accuracy

* PR# 751 *
Subject: BUG: polyroot()
From: "Li Dongfeng" <mavip1@inet.polyu.edu.hk>
Date: Tue, 28 Nov 2000 13:24:33 +0800
--Numerical instability. We may want a better algorithm!
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 751 <==
From mavip1@inet.polyu.edu.hk  Tue Nov 28 06:25:25 2000
Received: from hkpa04.polyu.edu.hk (hkpa04.PolyU.edu.hk [158.132.14.21])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id GAA06942
	for <r-bugs@biostat.ku.dk>; Tue, 28 Nov 2000 06:25:20 +0100 (MET)
Received: from hkpu01 ([158.132.174.240]) by hkpa04.polyu.edu.hk
          (Netscape Messaging Server 4.15) with SMTP id G4PZ0X01.43N for
          <r-bugs@biostat.ku.dk>; Tue, 28 Nov 2000 13:24:33 +0800 
Message-ID: <001b01c058fb$7db19700$f0ae849e@polyu.edu.hk>
From: "Li Dongfeng" <mavip1@inet.polyu.edu.hk>
To: <r-bugs@biostat.ku.dk>
Subject: BUG: polyroot()
Date: Tue, 28 Nov 2000 13:24:33 +0800
MIME-Version: 1.0
Content-Type: text/plain;
	charset="gb2312"
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 5.50.4133.2400
X-MimeOLE: Produced By Microsoft MimeOLE V5.50.4133.2400
Content-Transfer-Encoding: 8bit
X-MIME-Autoconverted: from base64 to 8bit by pubhealth.ku.dk id GAA06942

I have found that the polyroot()
function in R-1.1.1(both solaris
and Win32 version) gives totally
incorrect result. Here is the offending
code:

# Polyroot bug report:
# from R-1.1.1
> sort(abs(polyroot(c(1, -2,1,0,0,0,0,0,0,0,0,0,-2,5,-2,0,0,0,0,0,0,0,0,0,1,-2,1))))
 [1] 0.8758259 0.9486499 0.9731015 1.5419189 1.7466214 1.7535362 1.7589484
 [8] 2.0216317 2.4421509 2.5098488 2.6615572 2.7717724 2.8444048 2.9147685
[15] 2.9302278 2.9757159 3.2037151 3.2052962 3.2498510 3.2815881 3.3250881
[22] 4.6593700 4.7048556 5.2738258 5.7369920 5.9017094
# from Splus 2000
> sort(abs(polyroot(c(1, -2,1,0,0,0,0,0,0,0,0,0,-2,5,-2,0,0,0,0,0,0,0,0,0,1,-2,1))))
 [1] 0.8038812 0.8038812 0.8758259 0.8758259 0.9235722
 [6] 0.9235722 0.9439788 0.9439788 0.9536692 0.9536692
[11] 0.9582403 0.9582403 0.9596028 1.0420978 1.0435796
[16] 1.0435796 1.0485816 1.0485816 1.0593458 1.0593458
[21] 1.0827524 1.0827524 1.1417794 1.1417794 1.2439649
[26] 1.2439649

From mathematical theory I know that the Splus result
is correct while the R result is wrong. I would have
checked the source if I had the time.



==> 751.reply.1 <==
From pd@biostat.ku.dk  Thu Dec  7 00:53:06 2000
Received: from biostat.ku.dk (blueberry [130.225.108.193])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id AAA04390;
	Thu, 7 Dec 2000 00:53:05 +0100 (MET)
Received: (from pd@localhost)
	by biostat.ku.dk (8.9.3/8.9.3) id AAA28616;
	Thu, 7 Dec 2000 00:58:28 +0100
Sender: pd@blueberry.kubism.ku.dk
To: mavip1@inet.polyu.edu.hk
Cc: r-devel@stat.math.ethz.ch, R-bugs@biostat.ku.dk
Subject: Re: [Rd] BUG: polyroot() (PR#751)
References: <200011280525.GAA06952@pubhealth.ku.dk>
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 07 Dec 2000 00:58:27 +0100
In-Reply-To: mavip1@inet.polyu.edu.hk's message of "Tue, 28 Nov 2000 06:25:26 +0100 (MET)"
Message-ID: <x2k89dxfto.fsf@blueberry.kubism.ku.dk>
Lines: 96
X-Mailer: Gnus v5.7/Emacs 20.7
Mime-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: 7bit

mavip1@inet.polyu.edu.hk writes:

> I have found that the polyroot()
> function in R-1.1.1(both solaris
> and Win32 version) gives totally
> incorrect result. Here is the offending
> code:
> 
> # Polyroot bug report:
> # from R-1.1.1
> > sort(abs(polyroot(c(1, -2,1,0,0,0,0,0,0,0,0,0,-2,5,-2,0,0,0,0,0,0,0,0,0,1,-2,1))))
>  [1] 0.8758259 0.9486499 0.9731015 1.5419189 1.7466214 1.7535362 1.7589484
>  [8] 2.0216317 2.4421509 2.5098488 2.6615572 2.7717724 2.8444048 2.9147685
> [15] 2.9302278 2.9757159 3.2037151 3.2052962 3.2498510 3.2815881 3.3250881
> [22] 4.6593700 4.7048556 5.2738258 5.7369920 5.9017094
> # from Splus 2000
> > sort(abs(polyroot(c(1, -2,1,0,0,0,0,0,0,0,0,0,-2,5,-2,0,0,0,0,0,0,0,0,0,1,-2,1))))
>  [1] 0.8038812 0.8038812 0.8758259 0.8758259 0.9235722
>  [6] 0.9235722 0.9439788 0.9439788 0.9536692 0.9536692
> [11] 0.9582403 0.9582403 0.9596028 1.0420978 1.0435796
> [16] 1.0435796 1.0485816 1.0485816 1.0593458 1.0593458
> [21] 1.0827524 1.0827524 1.1417794 1.1417794 1.2439649
> [26] 1.2439649
> 
> >From mathematical theory I know that the Splus result
> is correct while the R result is wrong. I would have
> checked the source if I had the time.

There seems to be a rather bad numerical instability with the R code.
If we define

 polyeval<-function(coef,x){v<-0;for (i in rev(coef)) v<-v*x+i; v}

(Horner's scheme), we get 

> polyeval(1:5,polyroot(1:5))
[1] -2.220446e-16-2.664833e-16i -2.220446e-16-1.554475e-16i
[3] -2.220446e-16+1.436839e-16i -2.220446e-16-5.076235e-16i

which is kind of OK except that it looks odd that the real part is the
same for all 4 roots. Increasing the degree gives

> polyeval(10:1,polyroot(10:1))
[1] 9.230968e-08+5.257143e-08i 9.230977e-08+5.257158e-08i
[3] 9.230961e-08+5.257162e-08i 9.230956e-08+5.257151e-08i
[5] 9.230974e-08+5.257145e-08i 9.230975e-08+5.257161e-08i
[7] 9.230949e-08+5.257178e-08i 9.230974e-08+5.257161e-08i
[9] 9.230969e-08+5.257184e-08i

which is fairly OK, but it does look odd that we can't get closer to
zero than that since there are no multiple roots, and again it is
peculiar that the values are so similar. The next items in the
sequence are -ahem- interesting:

> polyeval(11:1,polyroot(11:1))
 [1] 2.305607e-06+1.791577e-05i 2.309550e-06+1.791714e-05i
 [3] 2.307622e-06+1.792101e-05i 2.304150e-06+1.791869e-05i
 [5] 2.307087e-06+1.791537e-05i 2.309716e-06+1.791873e-05i
 [7] 2.306030e-06+1.792098e-05i 2.304727e-06+1.792011e-05i
 [9] 2.308569e-06+1.791588e-05i 2.308994e-06+1.792018e-05i
> polyeval(12:1,polyroot(12:1))
 [1] 70.94521-90.6597i 70.94521-90.6597i 70.94521-90.6597i 70.94521-90.6597i
 [5] 70.94521-90.6597i 70.94521-90.6597i 70.94521-90.6597i 70.94521-90.6597i
 [9] 70.94521-90.6597i 70.94521-90.6597i 70.94521-90.6597i
> polyeval(13:1,polyroot(13:1))
 [1] -9.076647e-05-0.0003440688i -1.253803e-04-0.0003691299i
 [3] -8.894859e-05-0.0003941022i -7.310528e-05-0.0003638818i
 [5] -1.144849e-04-0.0003471283i -1.221901e-04-0.0003814892i
 [7] -7.857251e-05-0.0003869614i -7.284137e-05-0.0003760067i
 [9] -1.029218e-04-0.0003424790i -1.136443e-04-0.0003910680i
[11] -1.016283e-04-0.0003956270i -1.225930e-04-0.0003567609i
> polyeval(14:1,polyroot(14:1))
 [1]     11.28833+   28.72917i     11.28833+   28.72917i
 [3]   5809.74030-  427.90119i -19407.81458+ 3462.91985i
 [5]  -2823.47547-  494.63498i -40909.65435-10789.57874i
 [7]  -8336.95783+ 5241.26935i    344.71455- 1520.94876i
 [9]   5357.44530-24665.94094i  57313.79892-43530.37668i
[11]  11464.67537+29484.08287i  30010.79343+24624.25551i
[13]  25799.32156+53755.92101i
> polyeval(15:1,polyroot(15:1))
 [1]  4.110828e+01+5.028631e+01i  4.123746e+01+5.033469e+01i
 [3]  4.113423e+01+5.043357e+01i  4.106175e+01+5.031924e+01i
 [5]  2.130747e+06+7.226414e+05i -1.088699e+08+1.096129e+09i
 [7]  1.785940e+09+1.407187e+09i  9.750674e+10-5.059480e+10i
 [9] -3.102572e+09-9.212065e+10i  7.213065e+09-1.023845e+10i
[11]  1.682049e+10+2.202050e+10i  1.889123e+10-1.046838e+11i
[13] -6.220741e+10-4.563469e+10i -1.477005e+10-3.393510e+10i

Root finding in high-degree polynomials is known to be nasty business,
but this looks more than ordinarily bad.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

==> 751.audit <==
Sun Dec 10 14:32:11 2000	pd	changed notes
Sun Dec 10 14:32:11 2000	pd	foobar
Sun Dec 10 14:32:11 2000	pd	moved from incoming to Accuracy

==> 751.followup.1 <==
From mark0060@tc.umn.edu  Wed Jan 17 03:51:59 2001
Received: from amethyst.tc.umn.edu (amethyst.tc.umn.edu [160.94.153.1])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id DAA19519
	for <r-bugs@biostat.ku.dk>; Wed, 17 Jan 2001 03:51:58 +0100 (MET)
Received: from [134.84.252.67] by amethyst.tc.umn.edu for r-bugs@biostat.ku.dk; Tue, 16 Jan 2001 20:51:40 -0600
Message-Id: <001b01c08041$2de9cae0$43fc5486@c9wz101>
Reply-To: "Kristian Markon" <mark0060@tc.umn.edu>
From: "Kristian Markon" <mark0060@tc.umn.edu>
To: <r-bugs@biostat.ku.dk>
Subject: PR#751
Date: Tue, 16 Jan 2001 20:51:38 -0800
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 5.00.2615.200
X-MimeOLE: Produced By Microsoft MimeOLE V5.00.2615.200

I'd just like to report a possible R bug--or rather, confirm an existing one
(bug #751).

I have had some difficulty using the polyroot() function.

For example, in Win 98, R 1.1.1,

> polyroot(c(2,1,1))

correctly (per the help index) gives the roots of  1 + (1*x) + (2*x^2) as

[1] -0.5+1.322876i -0.5-1.322876i

However,

> polyroot(c(-100,0,1))

gives the roots of

[1]  10+0i -10+0i

which corresponds to -100 + x^2, not 1 - (100*x^2).

Also,

> polyroot(c(0,0,0,1))

gives

[1]   0+0i   0+0i -10+0i

which aren't all roots of x^3.


Thanks for all your efforts.

I apologize if I'm missing something.

Kristian Markon











==> 751.reply.2 <==
From pd@biostat.ku.dk  Wed Jan 17 08:02:05 2001
Received: from biostat.ku.dk (blueberry [130.225.108.193])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id HAA19898;
	Wed, 17 Jan 2001 07:59:35 +0100 (MET)
Received: (from pd@localhost)
	by biostat.ku.dk (8.9.3/8.9.3) id IAA01976;
	Wed, 17 Jan 2001 08:01:11 +0100
Sender: pd@blueberry.kubism.ku.dk
To: mark0060@tc.umn.edu
Cc: r-devel@stat.math.ethz.ch, R-bugs@biostat.ku.dk
Subject: Re: [Rd] PR#751
References: <200101170252.DAA19529@pubhealth.ku.dk>
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 17 Jan 2001 08:01:11 +0100
In-Reply-To: mark0060@tc.umn.edu's message of "Wed, 17 Jan 2001 03:52:00 +0100 (MET)"
Message-ID: <x2hf2yirwo.fsf@blueberry.kubism.ku.dk>
Lines: 71
X-Mailer: Gnus v5.7/Emacs 20.7
Mime-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: 7bit

mark0060@tc.umn.edu writes:

> I'd just like to report a possible R bug--or rather, confirm an existing one
> (bug #751).
> 
> I have had some difficulty using the polyroot() function.
> 
> For example, in Win 98, R 1.1.1,
> 
> > polyroot(c(2,1,1))
> 
> correctly (per the help index) gives the roots of  1 + (1*x) + (2*x^2) as
> 
> [1] -0.5+1.322876i -0.5-1.322876i

Mm, no. The coefficients are by increasing degree, so these are the
roots of 2+x+x^2

> x<-polyroot(c(2,1,1))
> x
[1] -0.5+1.322876i -0.5-1.322876i
> 2+x+x^2
[1] -2.220446e-16+4.440892e-16i -2.220446e-16-4.440892e-16i


> However,
> 
> > polyroot(c(-100,0,1))
> 
> gives the roots of
> 
> [1]  10+0i -10+0i
> 
> which corresponds to -100 + x^2, not 1 - (100*x^2).

as it should.

> 
> Also,
> 
> > polyroot(c(0,0,0,1))
> 
> gives
> 
> [1]   0+0i   0+0i -10+0i
> 
> which aren't all roots of x^3.

That one is way out, however. Even more "fun":

> polyroot(c(-100,0,1))
[1]  10+0i -10+0i
> x<- polyroot(c(0,0,0,1))
> x
[1]   0+0i   0+0i -10+0i
> x<-polyroot(c(2,1,1))
> x<- polyroot(c(0,0,0,1))
> x
[1]  0.0+0.000000i  0.0+0.000000i -0.5-1.322876i

I.e. the result of polyroot(c(0,0,0,1)) depends on the previous
polyroot calculation! So there's more to the problem than numerical
instability.

Thanks for pointing it out.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

==> 751.followup.2 <==
From apjaworski@mmm.com  Wed Jan 17 17:21:34 2001
Received: from sulu.mmm.com (sulu.mmm.com [192.28.4.21])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id RAA00032
	for <R-bugs@biostat.ku.dk>; Wed, 17 Jan 2001 17:21:33 +0100 (MET)
From: apjaworski@mmm.com
Received: from us-ritahayworth.mmm.com (us-ritahayworth.mmm.com [169.10.9.87])
	by sulu.mmm.com (8.8.7/8.8.7) with ESMTP id KAA23813;
	Wed, 17 Jan 2001 10:21:14 -0600 (CST)
Subject: Re: [Rd] PR#751
X-Priority: 3 (Normal)
To: r-devel@stat.math.ethz.ch, R-bugs@biostat.ku.dk
X-Mailer: Lotus Notes Release 5.0.3  March 21, 2000
Message-ID: <OF636EC57A.115D0ABC-ON862569D7.00599413@mmm.com>
Date: Wed, 17 Jan 2001 10:21:10 -0600
X-MIMETrack: Serialize by Router on US-RitaHayworth/US-Corporate/3M/US(Release 5.0.3 |March
 21, 2000) at 01/17/2001 10:21:14 AM
MIME-Version: 1.0
Content-type: text/plain; charset=us-ascii


... snip ...

> For example, in Win 98, R 1.1.1,
>
> > polyroot(c(2,1,1))
>
> correctly (per the help index) gives the roots of  1 + (1*x) + (2*x^2) as
>
> [1] -0.5+1.322876i -0.5-1.322876i

Mm, no. The coefficients are by increasing degree, so these are the
roots of 2+x+x^2

... snip ...

The manual page seems to have a typo.  It says (1.2.0 on Win)

Arguments:

       z: the vector of polynomial coefficients in decreasing order.


Andy


==> 751.reply.3 <==
From pd@biostat.ku.dk  Wed Jan 17 17:58:58 2001
Received: from biostat.ku.dk (blueberry [130.225.108.193])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id RAA00346;
	Wed, 17 Jan 2001 17:58:58 +0100 (MET)
Received: (from pd@localhost)
	by biostat.ku.dk (8.9.3/8.9.3) id SAA02739;
	Wed, 17 Jan 2001 18:00:38 +0100
Sender: pd@blueberry.kubism.ku.dk
To: apjaworski@mmm.com
Cc: r-devel@stat.math.ethz.ch, R-bugs@biostat.ku.dk
Subject: Re: [Rd] PR#751
References: <OF636EC57A.115D0ABC-ON862569D7.00599413@mmm.com>
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 17 Jan 2001 18:00:38 +0100
In-Reply-To: apjaworski@mmm.com's message of "Wed, 17 Jan 2001 10:21:10 -0600"
Message-ID: <x2zogqru4p.fsf@blueberry.kubism.ku.dk>
Lines: 37
X-Mailer: Gnus v5.7/Emacs 20.7
Mime-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: 7bit

apjaworski@mmm.com writes:

> ... snip ...
> 
> > For example, in Win 98, R 1.1.1,
> >
> > > polyroot(c(2,1,1))
> >
> > correctly (per the help index) gives the roots of  1 + (1*x) + (2*x^2) as
> >
> > [1] -0.5+1.322876i -0.5-1.322876i
> 
> Mm, no. The coefficients are by increasing degree, so these are the
> roots of 2+x+x^2
> 
> ... snip ...
> 
> The manual page seems to have a typo.  It says (1.2.0 on Win)
> 
> Arguments:
> 
>        z: the vector of polynomial coefficients in decreasing order.
> 

I suppose that could be clearer (it kind of depends on what you
consider the "normal" order), but it also has

              p(x) = z1 + z2 * x + ... + z[n] * x^(n-1)

which should be clear enough.


-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

==> 751.reply.4 <==
From pd@biostat.ku.dk  Wed Jan 17 20:45:51 2001
Received: from biostat.ku.dk (blueberry [130.225.108.193])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id UAA01167;
	Wed, 17 Jan 2001 20:45:50 +0100 (MET)
Received: (from pd@localhost)
	by biostat.ku.dk (8.9.3/8.9.3) id UAA15273;
	Wed, 17 Jan 2001 20:47:29 +0100
Sender: pd@blueberry.kubism.ku.dk
To: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Cc: mark0060@tc.umn.edu, r-devel@stat.math.ethz.ch, R-bugs@biostat.ku.dk
Subject: Re: [Rd] PR#751
References: <200101170252.DAA19529@pubhealth.ku.dk> <x2hf2yirwo.fsf@blueberry.kubism.ku.dk>
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 17 Jan 2001 20:47:27 +0100
In-Reply-To: Peter Dalgaard BSA's message of "17 Jan 2001 08:01:11 +0100"
Message-ID: <x2vgreyn8v.fsf@blueberry.kubism.ku.dk>
Lines: 47
X-Mailer: Gnus v5.7/Emacs 20.7
Mime-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: 7bit

Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk> writes:

> > [1]   0+0i   0+0i -10+0i
> > 
> > which aren't all roots of x^3.
> 
> That one is way out, however. Even more "fun":
> 
> > polyroot(c(-100,0,1))
> [1]  10+0i -10+0i
> > x<- polyroot(c(0,0,0,1))
> > x
> [1]   0+0i   0+0i -10+0i
> > x<-polyroot(c(2,1,1))
> > x<- polyroot(c(0,0,0,1))
> > x
> [1]  0.0+0.000000i  0.0+0.000000i -0.5-1.322876i
> 
> I.e. the result of polyroot(c(0,0,0,1)) depends on the previous
> polyroot calculation! So there's more to the problem than numerical
> instability.
> 
> Thanks for pointing it out.

Found and fixed. Unfortunately the code had just forgotten to test for
the case where you end with a zero-degree polynomial after zero-root
removal, so the fix has zero effect on the accuracy issue. 

The fix is simply 

--- src/appl/cpoly.c    2000/11/24 21:34:31     1.20
+++ src/appl/cpoly.c    2001/01/17 19:45:24
@@ -148,6 +148,8 @@
     nn++;
     /*-- Now, global var.  nn := #{coefficients} = (relevant degree)+1 */
 
+    if (nn == 1) return;
+
     /* make a copy of the coefficients and shr[] = | p[] | */
     for (i = 0; i < nn; i++) {
        pr[i] = opr[i];

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

Directory:  Add-ons

* PR# 824 *
Subject: trouble with netCDF 
From: jasont@indigoindustrial.co.nz
Date: Thu, 25 Jan 2001 12:00:39 +1300
-- no notes --
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 824 <==
From postmaster@franz.stat.wisc.edu  Thu Jan 25 00:00:38 2001
Received: from franz.stat.wisc.edu (franz.stat.wisc.edu [128.105.174.95])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id AAA13606
	for <r-bugs@biostat.ku.dk>; Thu, 25 Jan 2001 00:00:37 +0100 (MET)
Received: from smtp.worley.co.nz (really [203.167.214.58]) by franz.stat.wisc.edu
	via in.smtpd with esmtp (ident fwuser using rfc1413)
	id <m14LYuE-000IWyC@franz.stat.wisc.edu> (Debian Smail3.2.0.102)
	for <r-bugs@r-project.org>; Wed, 24 Jan 2001 17:00:46 -0600 (CST) 
Received: from camille.indigoindustrial.co.nz ([172.16.6.75]) by smtp.worley.co.nz with MailMarshal (3,3,0,0) 
	id <B00020733>; Thu, 25 Jan 2001 12:04:02 +1300
Received: (from jasont@localhost)
	by camille.indigoindustrial.co.nz (8.9.3/8.9.3) id MAA04889;
	Thu, 25 Jan 2001 12:00:39 +1300
Date: Thu, 25 Jan 2001 12:00:39 +1300
From: jasont@indigoindustrial.co.nz
Message-Id: <200101242300.MAA04889@camille.indigoindustrial.co.nz>
To: r-bugs@r-project.org
Subject: trouble with netCDF 
Cc: jasont@camille.indigoindustrial.co.nz

Having trouble with netCDF since I upgraded to 1.2.1 (did directly
from 1.1.1).  Package was recompiled after the upgrade.

Symptoms:
open.netCDF returns cleanly, but read.netCDF causes R to segfault
and dump core.  What else do you need me to write to help?

--please do not edit the information below--

Version:
 platform = i586-pc-linux-gnu
 arch = i586
 os = linux-gnu
 system = i586, linux-gnu
 status = 
 major = 1
 minor = 2.1
 year = 2001
 month = 01
 day = 15
 language = R

Search Path:
 .GlobalEnv, package:netCDF, package:RODBC, package:ts, package:local, package:ctest, Autoloads, package:base

==> 824.followup.1 <==
From ripley@stats.ox.ac.uk  Thu Jan 25 00:09:14 2001
Received: from toucan.stats.ox.ac.uk (toucan.stats.ox.ac.uk [163.1.20.20])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id AAA13639
	for <R-bugs@biostat.ku.dk>; Thu, 25 Jan 2001 00:09:13 +0100 (MET)
Received: from max166.public.ox.ac.uk (max166.public.ox.ac.uk [192.76.27.166])
	by toucan.stats.ox.ac.uk (8.9.0/8.9.0) with ESMTP id XAA09108;
	Wed, 24 Jan 2001 23:09:15 GMT
Date: Wed, 24 Jan 2001 23:07:56 +0000 (GMT)
From: Prof Brian D Ripley <ripley@stats.ox.ac.uk>
Sender: <ripley@auk.stats>
To: <jasont@indigoindustrial.co.nz>
cc: <R-bugs@biostat.ku.dk>
Subject: Re: [Rd] trouble with netCDF (PR#824)
In-Reply-To: <200101242300.AAA13617@pubhealth.ku.dk>
Message-ID: <Pine.GSO.4.31.0101242303390.9789-100000@auk.stats>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII

On Thu, 25 Jan 2001 jasont@indigoindustrial.co.nz wrote:

> Having trouble with netCDF since I upgraded to 1.2.1 (did directly
> from 1.1.1).  Package was recompiled after the upgrade.

You did use netCDF_1.1 for 1.2.1 did you.  I wonder?
netCDF_1.0-1 will not work.

> Symptoms:
> open.netCDF returns cleanly, but read.netCDF causes R to segfault
> and dump core.  What else do you need me to write to help?

The first item is to report that it had passed R CMD check netCDF?  That
uses read.netCDF.  If so the problem is data-specific, if not it
is with your installation.  So we either need the data or a lot
more about your installation of netCDF.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


==> 824.followup.2 <==
From jasont@indigoindustrial.co.nz  Thu Jan 25 01:18:34 2001
Received: from smtp.worley.co.nz (fwuser@fw.worley.co.nz [203.167.214.58])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id BAA13908
	for <R-bugs@biostat.ku.dk>; Thu, 25 Jan 2001 01:18:30 +0100 (MET)
Received: from camille.indigoindustrial.co.nz ([172.16.6.75]) by smtp.worley.co.nz with MailMarshal (3,3,0,0) 
	id <B000207d7>; Thu, 25 Jan 2001 13:22:00 +1300
Received: (from jasont@localhost)
	by camille.indigoindustrial.co.nz (8.9.3/8.9.3) id NAA14287;
	Thu, 25 Jan 2001 13:18:38 +1300
Date: Thu, 25 Jan 2001 13:18:37 +1300
From: Jason Turner <jasont@indigoindustrial.co.nz>
To: r-bugs@r-project.org
Cc: jasont@indigoindustrial.co.nz, R-bugs@biostat.ku.dk
Subject: Re: [Rd] trouble with netCDF (PR#824)
Message-ID: <20010125131836.A4997@camille.indigoindustrial.co.nz>
References: <200101242300.AAA13617@pubhealth.ku.dk> <Pine.GSO.4.31.0101242303390.9789-100000@auk.stats>
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
In-Reply-To: <Pine.GSO.4.31.0101242303390.9789-100000@auk.stats>; from ripley@stats.ox.ac.uk on Wed, Jan 24, 2001 at 11:07:56PM +0000


First and foremost, regarding:

> Please do not send bug reports to R-bugs and R-help: the first
> set goes to R-devel too which means that the active developers see it
> twice (and are probably twice as likely to ignore it, as I will next time). 

My appologies.  I'm well aware that R is a labour of love for those involved,
and I truly appreciate what they've given the rest of us.  The last thing
I want to do is irritate any of you.  Now trying to pull foot from 
mouth.  And making every note to not do this sort of thing in future.

Thanks for the quick reply with information.  

> You did use netCDF_1.1 for 1.2.1 did you.  

Yes.

> The first item is to report that it had passed R CMD check netCDF?  

Output from that is....

---Begin ~/R/netCDF.Rcheck/00check.log ---

* using log directory /home/jasont/R/netCDF.Rcheck
* checking for file `netCDF/DESCRIPTION' ... OK
* checking package directory ... OK
* checking DESCRIPTION Package field ... OK
* checking DESCRIPTION Version field ... OK
* checking DESCRIPTION Title field ... OK
* checking DESCRIPTION License field ... OK
* checking DESCRIPTION Author field ... OK
* checking DESCRIPTION Maintainer field ... WARNING
*   no DESCRIPTION Maintainer field found
* checking Rd files ... OK
* checking for undocumented objects ... OK
* creating netCDF-Ex.R ... OK
* checking examples ... OK
* creating netCDF-manual.tex ... OK
* checking netCDF-manual.tex ... OK

---End ~/R/netCDF.Rcheck/00check.log ---

Looks good to me.  As you've probably guessed, I'm new
to R, so take the following with the requisite number
of grains of salt:  in the R-ex directory, the 
read.netCDF.R file contains either blank lines
or commented lines, and nothing else.  There might
be some keywords there for the example software?

---Begin ~/R/netCDF.Rcheck/netCDF/R-ex/read.netCDF.R ---

###--- >>> `read.netCDF' <<<----- Read subsets of a netCDF file

        ## alias         help(read.netCDF)

##___ Examples ___:



## Keywords: 'file'.   
---End ~/R/netCDF.Rcheck/netCDF/R-ex/read.netCDF.R ---

That's it.


NetCDF installation:  version 3.4, built from source.
Other NetCDF utilities continue to work nicely, which 
is how I'm working around the issue.  Now, I'm taking
existing netCDF files, converting them to csv files,
and either reading them directly, or loading them
to PostgreSQL, and using RPgSQL or RODBC.  Conversion
to csv is done using home-brewed c programs which
were dynamically linked against libnetcdf.so.  As
such, I'm pretty sure the library is still working fine.

I have a nice sample netCDF file, but I doubt it's appropriate
for the bugs list (waste of bandwidth).  It's just under 2K.

-- 
Indigo Industrial Controls Ltd.
64-21-343-545
jasont@indigoindustrial.co.nz

==> 824.followup.3 <==
From postmaster@franz.stat.wisc.edu  Thu Jan 25 01:18:45 2001
Received: from franz.stat.wisc.edu (franz.stat.wisc.edu [128.105.174.95])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id BAA13922
	for <r-bugs@biostat.ku.dk>; Thu, 25 Jan 2001 01:18:45 +0100 (MET)
Received: from smtp.worley.co.nz (really [203.167.214.58]) by franz.stat.wisc.edu
	via in.smtpd with esmtp (ident fwuser using rfc1413)
	id <m14La7t-000IWyC@franz.stat.wisc.edu> (Debian Smail3.2.0.102)
	for <r-bugs@r-project.org>; Wed, 24 Jan 2001 18:18:57 -0600 (CST) 
Received: from camille.indigoindustrial.co.nz ([172.16.6.75]) by smtp.worley.co.nz with MailMarshal (3,3,0,0) 
	id <B000207d7>; Thu, 25 Jan 2001 13:22:00 +1300
Received: (from jasont@localhost)
	by camille.indigoindustrial.co.nz (8.9.3/8.9.3) id NAA14287;
	Thu, 25 Jan 2001 13:18:38 +1300
Date: Thu, 25 Jan 2001 13:18:37 +1300
From: Jason Turner <jasont@indigoindustrial.co.nz>
To: r-bugs@r-project.org
Cc: jasont@indigoindustrial.co.nz, R-bugs@biostat.ku.dk
Subject: Re: [Rd] trouble with netCDF (PR#824)
Message-ID: <20010125131836.A4997@camille.indigoindustrial.co.nz>
References: <200101242300.AAA13617@pubhealth.ku.dk> <Pine.GSO.4.31.0101242303390.9789-100000@auk.stats>
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
In-Reply-To: <Pine.GSO.4.31.0101242303390.9789-100000@auk.stats>; from ripley@stats.ox.ac.uk on Wed, Jan 24, 2001 at 11:07:56PM +0000


First and foremost, regarding:

> Please do not send bug reports to R-bugs and R-help: the first
> set goes to R-devel too which means that the active developers see it
> twice (and are probably twice as likely to ignore it, as I will next time). 

My appologies.  I'm well aware that R is a labour of love for those involved,
and I truly appreciate what they've given the rest of us.  The last thing
I want to do is irritate any of you.  Now trying to pull foot from 
mouth.  And making every note to not do this sort of thing in future.

Thanks for the quick reply with information.  

> You did use netCDF_1.1 for 1.2.1 did you.  

Yes.

> The first item is to report that it had passed R CMD check netCDF?  

Output from that is....

---Begin ~/R/netCDF.Rcheck/00check.log ---

* using log directory /home/jasont/R/netCDF.Rcheck
* checking for file `netCDF/DESCRIPTION' ... OK
* checking package directory ... OK
* checking DESCRIPTION Package field ... OK
* checking DESCRIPTION Version field ... OK
* checking DESCRIPTION Title field ... OK
* checking DESCRIPTION License field ... OK
* checking DESCRIPTION Author field ... OK
* checking DESCRIPTION Maintainer field ... WARNING
*   no DESCRIPTION Maintainer field found
* checking Rd files ... OK
* checking for undocumented objects ... OK
* creating netCDF-Ex.R ... OK
* checking examples ... OK
* creating netCDF-manual.tex ... OK
* checking netCDF-manual.tex ... OK

---End ~/R/netCDF.Rcheck/00check.log ---

Looks good to me.  As you've probably guessed, I'm new
to R, so take the following with the requisite number
of grains of salt:  in the R-ex directory, the 
read.netCDF.R file contains either blank lines
or commented lines, and nothing else.  There might
be some keywords there for the example software?

---Begin ~/R/netCDF.Rcheck/netCDF/R-ex/read.netCDF.R ---

###--- >>> `read.netCDF' <<<----- Read subsets of a netCDF file

        ## alias         help(read.netCDF)

##___ Examples ___:



## Keywords: 'file'.   
---End ~/R/netCDF.Rcheck/netCDF/R-ex/read.netCDF.R ---

That's it.


NetCDF installation:  version 3.4, built from source.
Other NetCDF utilities continue to work nicely, which 
is how I'm working around the issue.  Now, I'm taking
existing netCDF files, converting them to csv files,
and either reading them directly, or loading them
to PostgreSQL, and using RPgSQL or RODBC.  Conversion
to csv is done using home-brewed c programs which
were dynamically linked against libnetcdf.so.  As
such, I'm pretty sure the library is still working fine.

I have a nice sample netCDF file, but I doubt it's appropriate
for the bugs list (waste of bandwidth).  It's just under 2K.

-- 
Indigo Industrial Controls Ltd.
64-21-343-545
jasont@indigoindustrial.co.nz

==> 824.followup.4 <==
From postmaster@franz.stat.wisc.edu  Thu Jan 25 01:43:44 2001
Received: from franz.stat.wisc.edu (franz.stat.wisc.edu [128.105.174.95])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id BAA14078
	for <r-bugs@biostat.ku.dk>; Thu, 25 Jan 2001 01:43:44 +0100 (MET)
Received: from smtp.worley.co.nz (really [203.167.214.58]) by franz.stat.wisc.edu
	via in.smtpd with esmtp (ident fwuser using rfc1413)
	id <m14LaW2-000IWyC@franz.stat.wisc.edu> (Debian Smail3.2.0.102)
	for <r-bugs@r-project.org>; Wed, 24 Jan 2001 18:43:54 -0600 (CST) 
Received: from camille.indigoindustrial.co.nz ([172.16.6.75]) by smtp.worley.co.nz with MailMarshal (3,3,0,0) 
	id <B00020813>; Thu, 25 Jan 2001 13:46:49 +1300
Received: (from jasont@localhost)
	by camille.indigoindustrial.co.nz (8.9.3/8.9.3) id NAA14352
	for r-bugs@r-project.org; Thu, 25 Jan 2001 13:43:26 +1300
Date: Thu, 25 Jan 2001 13:43:26 +1300
From: Jason Turner <jasont@indigoindustrial.co.nz>
To: r-bugs@r-project.org
Subject: Re: [Rd] trouble with netCDF (PR#824)
Message-ID: <20010125134325.A14333@camille.indigoindustrial.co.nz>
References: <200101242300.AAA13617@pubhealth.ku.dk> <Pine.GSO.4.31.0101242303390.9789-100000@auk.stats>
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
In-Reply-To: <Pine.GSO.4.31.0101242303390.9789-100000@auk.stats>; from ripley@stats.ox.ac.uk on Wed, Jan 24, 2001 at 11:07:56PM +0000

Another interesting point - read.netCDF does *not* cause
R to dump core if debug(read.netCDF) is on. To be clear:

> rm(list=ls(all=T))
> library(netCDF)

# --- works ---
> debug(read.netCDF)
> fd<-open.netCDF("data.nc")
> z<-read.netCDF(fd,"foo")

--- lots of stuff deleted ---

> length(z)
[1] 143
--- what it should be

> close.netCDF(fd)
[1] TRUE   

#--- end works ---

That works fine.  Carrying on in the same session:

# --- doesn't work ---

> rm(z,fd)
> undebug(read.netCDF)
> fd<-open.netCDF("data.nc")
> z<-read.netCDF(fd,"foo")
Segmentation fault (core dumped)   

# --- end doesn't work ---

Now more puzzled.

Jason Turner
-- 
Indigo Industrial Controls Ltd.
64-21-343-545
jasont@indigoindustrial.co.nz

==> 824.followup.5 <==
From ripley@stats.ox.ac.uk  Thu Jan 25 08:13:58 2001
Received: from toucan.stats.ox.ac.uk (toucan.stats.ox.ac.uk [163.1.20.20])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id IAA15016
	for <R-bugs@biostat.ku.dk>; Thu, 25 Jan 2001 08:13:57 +0100 (MET)
Received: from max128.public.ox.ac.uk (max128.public.ox.ac.uk [192.76.27.128])
	by toucan.stats.ox.ac.uk (8.9.0/8.9.0) with ESMTP id HAA09811;
	Thu, 25 Jan 2001 07:14:08 GMT
Date: Thu, 25 Jan 2001 07:12:48 +0000 (GMT)
From: Prof Brian D Ripley <ripley@stats.ox.ac.uk>
Sender: <ripley@auk.stats>
To: <jasont@indigoindustrial.co.nz>
cc: <R-bugs@biostat.ku.dk>
Subject: Re: [Rd] trouble with netCDF (PR#824)
In-Reply-To: <200101250018.BAA13932@pubhealth.ku.dk>
Message-ID: <Pine.GSO.4.31.0101250709440.10090-100000@auk.stats>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII

On Thu, 25 Jan 2001 jasont@indigoindustrial.co.nz wrote:

> NetCDF installation:  version 3.4, built from source.
> Other NetCDF utilities continue to work nicely, which
> is how I'm working around the issue.  Now, I'm taking
> existing netCDF files, converting them to csv files,
> and either reading them directly, or loading them
> to PostgreSQL, and using RPgSQL or RODBC.  Conversion
> to csv is done using home-brewed c programs which
> were dynamically linked against libnetcdf.so.  As
> such, I'm pretty sure the library is still working fine.
>
> I have a nice sample netCDF file, but I doubt it's appropriate
> for the bugs list (waste of bandwidth).  It's just under 2K.

I think the thing to do now is to contact the netCDF package
maintainer (Thomas Lumley) with that example.

As I am sure you appreciate we need to eliminate the simple causes first,
and they are common.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


==> 824.audit <==
Mon Jan 29 08:33:45 2001	ripley	moved from incoming to Add-ons
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
* PR# 496 *
From: bonneau@epi.roazhon.inra.fr (en148)
Date: Tue, 21 Mar 2000 10:57:13 +0100 (MET)
--base R has no est.variogram function.
--This appears to be a bug report on sgeostat.
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 496 <==
From bonneau@epi.roazhon.inra.fr  Tue Mar 21 11:40:23 2000
Received: from stat.math.ethz.ch (daemon@hypatia.ethz.ch [129.132.58.23])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id LAA24613
	for <R-bugs@biostat.ku.dk>; Tue, 21 Mar 2000 11:40:21 +0100 (MET)
Received: (from daemon@localhost)
	by stat.math.ethz.ch (8.9.1/8.9.1) id LAA00472
	for <r-bugs@hypatia.math.ethz.ch>; Tue, 21 Mar 2000 11:40:33 +0100 (MET)
Received: from epi.roazhon.inra.fr(194.167.76.1)
 via SMTP by hypatia, id smtpdAAAa0007L; Tue Mar 21 11:40:28 2000
Received: from (bonneau@localhost)
          by epi.roazhon.inra.fr (8.8.8/jtpda-5.3) id KAA09010
          for r-bugs@lists.r-project.org; Tue, 21 Mar 2000 10:57:13 +0100 (MET)
Date: Tue, 21 Mar 2000 10:57:13 +0100 (MET)
From: bonneau@epi.roazhon.inra.fr (en148)
Message-Id: <200003210957.KAA09010@epi.roazhon.inra.fr>

I am using R 0.65.1 under linux (Redhat 6.0),
and I have a problem with the est.variogram function when the first lag is empty (I am trying to estimate anisotropic varios)

fittedpnt<-point(fitted, x="X2", y="X3")
fittedpair<-pair(fittedpnt, num.lags=15, type="anisotropic", theta=60, dtheta=20, maxdist=maxfittedist)
fittedvario<-est.variogram(fittedpnt, fittedpair, "fit")

With my datas I have no pair in lags 1 to 3 and the error message is :
Error in psort(x, partial) : index 0 outside bounds

What can I do, in order to fix the bug ?

==> 496.audit <==
Sat Apr 01 07:32:27 2000	ripley	changed notes
Sat Apr 01 07:32:27 2000	ripley	moved from incoming to Add-ons
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
* PR# 812 *
Subject: segmentation fault in integrate
From: Achim Zeileis <zeileis@ci.tuwien.ac.at>
Date: Thu, 11 Jan 2001 22:49:59 +0100
-- no notes --
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 812 <==
From zeileis@ci.tuwien.ac.at  Thu Jan 11 22:49:50 2001
Received: from fangorn.ci.tuwien.ac.at (root@fangorn.ci.tuwien.ac.at [128.131.51.24])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id WAA26987
	for <R-bugs@biostat.ku.dk>; Thu, 11 Jan 2001 22:49:50 +0100 (MET)
Received: from ci.tuwien.ac.at (zeileis@thorin.ci.tuwien.ac.at [128.131.51.33])
	by fangorn.ci.tuwien.ac.at (8.9.3/8.8.5) with ESMTP id WAA16997;
	Thu, 11 Jan 2001 22:49:28 +0100
X-Authentication-Warning: fangorn.ci.tuwien.ac.at: Host zeileis@thorin.ci.tuwien.ac.at [128.131.51.33] claimed to be ci.tuwien.ac.at
Sender: zeileis@ci.tuwien.ac.at
Message-ID: <3A5E2A87.6864792F@ci.tuwien.ac.at>
Date: Thu, 11 Jan 2001 22:49:59 +0100
From: Achim Zeileis <zeileis@ci.tuwien.ac.at>
X-Mailer: Mozilla 4.75 [en] (X11; U; Linux 2.2.15 i686)
X-Accept-Language: en
MIME-Version: 1.0
To: r-devel@stat.math.ethz.ch
CC: R-bugs@biostat.ku.dk
Subject: segmentation fault in integrate
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit

I tried to integrate numerically a function wich is similar to the
following:

> dummy <- function(x) { exp(-1*x) * dnorm(x) }
> dummy(-100)
[1] 0
> dummy(-1000)
[1] NaN
> dummy(-10000)
[1] NaN

If I choose the lower boundary to be too small integrate causes a
segmentation fault:

> library(integrate)
> integrate(dummy, -100, 0)$value
[1] 1.387143
> integrate(dummy, -1000, 0)$value
[1] NaN
Warning message:
Ifail=1, maxpts was too small. Check the returned relerr! in: adapt(1,
lower, upper, minpts, maxpts, functn, eps, ...)
> integrate(dummy, -10000, 0)$value
Segmentation fault

I'm running R.1.2.0 on Debian Linux.

Regards
Achim


> version
         _                
platform i686-pc-linux-gnu
arch     i686             
os       linux-gnu        
system   i686, linux-gnu  
status                    
major    1                
minor    2.0              
year     2000             
month    12               
day      15               
language R   



-------------------------

Achim Zeileis
Institut für Statistik
Technische Universität Wien

==> 812.audit <==
Sat Jan 13 18:52:20 2001	ripley	moved from incoming to Add-ons
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
* PR# 781 *
Subject: syskern fails Rcmd check on Windows, gives incorrect information
From: Prof Brian Ripley <ripley@stats.ox.ac.uk>
Date: Wed, 20 Dec 2000 11:12:47 +0000 (GMT)
--Partially fixed by dse_2000.12, but still uses "ls" and gives
--incorrect information
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 781 <==
From postmaster@franz.stat.wisc.edu  Wed Dec 20 12:12:36 2000
Received: from franz.stat.wisc.edu (franz.stat.wisc.edu [128.105.174.95])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id MAA15275
	for <r-bugs@biostat.ku.dk>; Wed, 20 Dec 2000 12:12:35 +0100 (MET)
Received: from toucan.stats.ox.ac.uk (really [163.1.20.20]) by franz.stat.wisc.edu
	via in.smtpd with esmtp
	id <m148hAv-000IYUC@franz.stat.wisc.edu> (Debian Smail3.2.0.102)
	for <r-bugs@r-project.org>; Wed, 20 Dec 2000 05:12:49 -0600 (CST) 
Received: from localhost (ripley@localhost)
	by toucan.stats.ox.ac.uk (8.9.0/8.9.0) with ESMTP id LAA02938;
	Wed, 20 Dec 2000 11:12:48 GMT
X-Authentication-Warning: toucan.stats: ripley owned process doing -bs
Date: Wed, 20 Dec 2000 11:12:47 +0000 (GMT)
From: Prof Brian Ripley <ripley@stats.ox.ac.uk>
X-Sender: ripley@toucan.stats
To: r-bugs@r-project.org
cc: Paul Gilbert <pgilbert@bank-banque-canada.ca>
Subject: syskern fails Rcmd check on Windows, gives incorrect information
Message-ID: <Pine.GSO.4.05.10012201059520.2885-100000@toucan.stats>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII

syskern (`Functions for writing code that is OS and R/S independent', an
amazing description given the reality) fails Rcmd check on Windows, and
also gives incorrect information where it does work.

There are already correct OS-independent functions for these purposes in
R.  It appears not to be needed to run the other three packages in the dse
bundle, but to be the only R package that deliberately does not work on
one of the major platforms.  I doubt if it works on Macs, either.  It
should not be in the main section of CRAN unless it does what it claims.
 
> example(global.assign)

glbl.s> date.parsed()
Error in eval.with.vis(expr, envir, enclos) : 
        couldn't find function "date.parsed"

It has not been implemented!

> example(system.call)

systm.> system.call("ls")
Error in system.call("ls") : system calls must be implemented for this operating system.

But they are:

> shell("ls -C")
#R.bug.report#       cvs-co               test1
DF.R                 jpegsrc.v6b.tar.gz   test2.emf
GSD2.EMF             libpng-1.0.8.tar.gz  test3.emf
R-1.2.0.tgz          library              test4.emf
R.bug.report         mri.dat              test5.emf
Rconsole             mydata               texinfo-4.0.tar.bz2
Rdist                packages             tools
TB                   rw1020               tools.zip
VR3sc                rw1021               winold.zip
addlibs              rw1030               zlib113.zip

> system("ls", intern=TRUE)
 [1] "#R.bug.report#"      "DF.R"                "GSD2.EMF"           
 [4] "R-1.2.0.tgz"         "R.bug.report"        "Rconsole"           
 [7] "Rdist"               "TB"                  "VR3sc"              
[10] "addlibs"             "cvs-co"              "jpegsrc.v6b.tar.gz" 
[13] "libpng-1.0.8.tar.gz" "library"             "mri.dat"            
[16] "mydata"              "packages"            "rw1020"             
[19] "rw1021"              "rw1030"              "test1"              
[22] "test2.emf"           "test3.emf"           "test4.emf"          
[25] "test5.emf"           "texinfo-4.0.tar.bz2" "tools"              
[28] "tools.zip"           "winold.zip"          "zlib113.zip"        

Of course, `ls' is OS-dependent, so should not be used as an example
in a purportedly OS-independent package.

> example(system.info)

systm.> system.info()
          _              
platform  i386-pc-mingw32
arch      x86            
os        Win32          
system    x86, Win32     
status                   
major     1              
minor     2              
year      2000           
month     12             
day       15             
language  R              
OSversion MS Windows 95  
OStype    MS Windows     

That is incorrect: see what bug.report gives below.  The heading looks
strange too.

> example(whoami)

whoami> whoami()
Error in whoami() : system calls must be implemented for this operating system.

They are:

> system("whoami", intern=T)
[1] "ripley"
> Sys.info()["user"]
    user 
"ripley" 


--please do not edit the information below--

Version:
 platform = i386-pc-mingw32
 arch = x86
 os = Win32
 system = x86, Win32
 status = 
 major = 1
 minor = 2.0
 year = 2000
 month = 12
 day = 15
 language = R

Windows NT 4.0 (build 1381) Service Pack 4

Search Path:
 .GlobalEnv, package:syskern, package:ctest, Autoloads, package:base

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


==> 781.audit <==
Tue Dec 26 10:18:52 2000	ripley	changed notes
Tue Dec 26 10:18:52 2000	ripley	foobar
Tue Dec 26 10:18:52 2000	ripley	moved from incoming to Add-ons
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

Directory:  Analyses

* PR# 653 *
Subject: bug in spline()?
From: Ian White <imsw@holyrood.ed.ac.uk>
Date: Mon, 4 Sep 2000 12:29:26 +0100 (BST)
--bug in spline: replace by interSpline in package spline?
--address problems are fixed
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 653 <==
From imsw@holyrood.ed.ac.uk  Mon Sep  4 13:29:07 2000
Received: from holyrood.ed.ac.uk (holyrood.ed.ac.uk [129.215.16.14])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id NAA28104
	for <r-bugs@biostat.ku.dk>; Mon, 4 Sep 2000 13:29:07 +0200 (MET DST)
Received: (from imsw@localhost)
	by holyrood.ed.ac.uk (8.8.7/8.8.7) id MAA07844
	for r-bugs@biostat.ku.dk; Mon, 4 Sep 2000 12:29:26 +0100 (BST)
Date: Mon, 4 Sep 2000 12:29:26 +0100 (BST)
From: Ian White <imsw@holyrood.ed.ac.uk>
Message-Id: <200009041129.MAA07844@holyrood.ed.ac.uk>
To: r-bugs@biostat.ku.dk
Subject: bug in spline()?

BUG IN SPLINE()?

Version R-1.0.1, system i486,linux

If the spline(x,y,method="natural") function is given values outside the
range of the data, it does not give a warning. Moreover, the extrapolated
value reported is not the ordinate of the natural spline defined by (x,y).

Example.  Let x <- c(2,5,8,10) and y <- c(1.2266,-1.7606,-0.5051,1.0390).
Then interpolate/extrapolate with a natural cubic spline at 1:10 using
either

spline(x,y,n=10,method="natural",xmin=1,xmax=10)

or

fn <- splinefun(x,y,method="natural")
fn(1:10)

This gives c(2.5366,1.2266,-0.0834,...,1.0390). I agree with all values
except that at x=1. The interpolation formula in Green and Silverman's
book on splines gives the derivative of a natural spline at the first
knot as f'(x1)=(f2-f1)/(x2-x1) -(1/6)(x2-x1)d, where d=second derivative
at the second knot. For the above example, d=0.7071, f'(x1)=-1.3493,
and the natural spline interpolant has value 1.2266-(-1.3493)=2.5759
at x=1, not 2.5366.

PS There are different e-mail addresses for bug reports given in the
FAQ file and in the help information for bug.report.

************************************************
*    I.White                                   *
*    ICAPB, University of Edinburgh            *
*    Ashworth Laboratories, West Mains Road    *
*    Edinburgh EH9 3JT                         *
*    Fax: 0131 667 3210   Tel: 0131 650 5490   *
*    E-mail: i.m.s.white@ed.ac.uk              *
************************************************

==> 653.reply.1 <==
From pd@blueberry.kubism.ku.dk  Mon Sep  4 14:25:15 2000
Received: from blueberry.kubism.ku.dk (blueberry [130.225.108.193])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id OAA29112
	for <R-bugs@biostat.ku.dk>; Mon, 4 Sep 2000 14:25:15 +0200 (MET DST)
Received: (from pd@localhost)
	by blueberry.kubism.ku.dk (8.9.3/8.9.3) id OAA02525;
	Mon, 4 Sep 2000 14:28:38 +0200
Sender: pd@blueberry.kubism.ku.dk
To: imsw@holyrood.ed.ac.uk
Cc: r-devel@stat.math.ethz.ch, R-bugs@biostat.ku.dk
Subject: Re: [Rd] bug in spline()? (PR#653)
References: <200009041129.NAA28115@pubhealth.ku.dk>
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 04 Sep 2000 14:28:37 +0200
In-Reply-To: imsw@holyrood.ed.ac.uk's message of "Mon, 4 Sep 2000 13:29:08 +0200 (MET DST)"
Message-ID: <x2n1homjd6.fsf@blueberry.kubism.ku.dk>
Lines: 48
X-Mailer: Gnus v5.7/Emacs 20.7
Mime-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: 7bit

imsw@holyrood.ed.ac.uk writes:

> This gives c(2.5366,1.2266,-0.0834,...,1.0390). I agree with all values
> except that at x=1. The interpolation formula in Green and Silverman's
> book on splines gives the derivative of a natural spline at the first
> knot as f'(x1)=(f2-f1)/(x2-x1) -(1/6)(x2-x1)d, where d=second derivative
> at the second knot. For the above example, d=0.7071, f'(x1)=-1.3493,
> and the natural spline interpolant has value 1.2266-(-1.3493)=2.5759
> at x=1, not 2.5366.

Also, 

plot(diff(fn(seq(1,3,.01))))

reveals that something is wrong

At the other end, 

 plot(diff(fn(seq(8,11,.01))))

looks even weirder, especially if one modifies 
to y <- c(1.2266,-1.7606,-0.5051,1.01)


> PS There are different e-mail addresses for bug reports given in the
> FAQ file and in the help information for bug.report.

Hmm, and neither looks quite right! One would probably want the
address to be in the r-project.org domain (in case we move it away
from Copenhagen). "r-bugs@list.r-project.org", however, is none too
logical and assumes that there's an r-bugs user or an alias in Zurich
which forwards to biostat.dk (there is, it seems). Same thing with
r-bugs@r-project.org, since the Wisconsin machine aliases r-bugs to
r-bugs@lists.r-project.org. 

More logical would be to use r-bugs@r-project.org and have the
forwarding there go to biostat.dk.

Alternatively, it ought to work as r-bugs@bugs.r-project.org, but that
doesn't work whenever a RedHat upgrade blows away the resending rules
in my sendmail.cf... (the program in r-bugs' .forward needs to execute
on a machine that matches the architecture of the binary!)

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

==> 653.reply.2 <==
From bates@stat.wisc.edu  Mon Sep  4 23:50:57 2000
Received: from franz.stat.wisc.edu (franz.stat.wisc.edu [128.105.174.95])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id XAA02696
	for <R-bugs@biostat.ku.dk>; Mon, 4 Sep 2000 23:50:57 +0200 (MET DST)
Received: by franz.stat.wisc.edu
	via sendmail from stdin
	id <m13W4B0-000IYXC@franz.stat.wisc.edu> (Debian Smail3.2.0.102)
	for R-bugs@biostat.ku.dk; Mon, 4 Sep 2000 16:53:14 -0500 (CDT) 
Sender: bates@franz.stat.wisc.edu
To: imsw@holyrood.ed.ac.uk
Cc: r-devel@stat.math.ethz.ch, R-bugs@biostat.ku.dk
Subject: Re: [Rd] bug in spline()? (PR#653)
References: <200009041129.NAA28115@pubhealth.ku.dk>
From: Douglas Bates <bates@stat.wisc.edu>
Date: 04 Sep 2000 16:53:14 -0500
In-Reply-To: imsw@holyrood.ed.ac.uk's message of "Mon, 4 Sep 2000 13:29:08 +0200 (MET DST)"
Message-ID: <6ritsb7rjp.fsf@franz.stat.wisc.edu>
Lines: 49
User-Agent: Gnus/5.0803 (Gnus v5.8.3) Emacs/20.7
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii

imsw@holyrood.ed.ac.uk writes:

> BUG IN SPLINE()?
> 
> Version R-1.0.1, system i486,linux
> 
> If the spline(x,y,method="natural") function is given values outside the
> range of the data, it does not give a warning. Moreover, the extrapolated
> value reported is not the ordinate of the natural spline defined by (x,y).
> 
> Example.  Let x <- c(2,5,8,10) and y <- c(1.2266,-1.7606,-0.5051,1.0390).
> Then interpolate/extrapolate with a natural cubic spline at 1:10 using
> either
> 
> spline(x,y,n=10,method="natural",xmin=1,xmax=10)
> 
> or
> 
> fn <- splinefun(x,y,method="natural")
> fn(1:10)
> 
> This gives c(2.5366,1.2266,-0.0834,...,1.0390). I agree with all values
> except that at x=1. The interpolation formula in Green and Silverman's
> book on splines gives the derivative of a natural spline at the first
> knot as f'(x1)=(f2-f1)/(x2-x1) -(1/6)(x2-x1)d, where d=second derivative
> at the second knot. For the above example, d=0.7071, f'(x1)=-1.3493,
> and the natural spline interpolant has value 1.2266-(-1.3493)=2.5759
> at x=1, not 2.5366.

I think the `interpSpline' function in the splines package gives the
desired natural interpolation spline.  Perhaps we should change the
underlying code for the spline function.

 > library(splines)
 > x <- c(2,5,8,10)
 > y <- c(1.2266,-1.7606,-0.5051,1.0390)
 > ns1 <- interpSpline(y ~ x)
 > plot(ns1)   # gives a plot that looks reasonable
 > points(x,y)
 > predict(ns1, 1:10)
 $x
  [1]  1  2  3  4  5  6  7  8  9 10

 $y
  [1]  2.5758923  1.2266000 -0.0834080 -1.1577100 -1.7606000 -1.7349409
  [7] -1.2378717 -0.5051000  0.2669514  1.0390000

 attr(,"class")
 [1] "xyVector"

==> 653.audit <==
Wed Oct 25 06:56:51 2000	ripley	changed notes
Wed Oct 25 06:56:51 2000	ripley	moved from incoming to Analyses
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

Directory:  Documentation

none

Directory:  Graphics

* PR# 839 *
Subject: clipped lines have wrong slope in log plot
From: Jason Eisner <jason@cs.rochester.edu>
Date: Sun, 4 Feb 2001 20:17:31 -0500 (EST)
-- no notes --
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 839 <==
From jason@cs.rochester.edu  Mon Feb  5 02:17:20 2001
Received: from gate.cs.rochester.edu (gate.cs.rochester.edu [192.5.53.207])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id CAA29231
	for <r-bugs@biostat.ku.dk>; Mon, 5 Feb 2001 02:17:19 +0100 (MET)
Received: from heart.cs.rochester.edu (heart.cs.rochester.edu [192.5.53.109]) by gate.cs.rochester.edu (8.9.1b+Sun/U) with ESMTP id UAA29493 for <r-bugs@biostat.ku.dk>; Sun, 4 Feb 2001 20:17:31 -0500 (EST)
Received: (from jason@localhost) by heart.cs.rochester.edu (8.9.1b+Sun/Q++) id UAA22374; Sun, 4 Feb 2001 20:17:31 -0500 (EST)
Date: Sun, 4 Feb 2001 20:17:31 -0500 (EST)
Message-Id: <200102050117.UAA22374@heart.cs.rochester.edu>
From: Jason Eisner <jason@cs.rochester.edu>
To: r-bugs@biostat.ku.dk
Subject: clipped lines have wrong slope in log plot

Hi,

I'm using R version 1.2.0 (2000-12-15), on RedHat Linux 6.2 (kernel 2.2.14).

The following command ought to plot a straight-line on a log-log
graph but instead plots two line segments, both with the wrong
slope:

  plot(c(1,10,100),c(100,10,1),type="l",xlim=c(1,20),ylim=c(1,20),log="xy")

Only clipped lines seem to have this problem.  Changing to type "b"
or enlarging the ranges fixes it:

  plot(c(1,10,100),c(100,10,1),type="b",xlim=c(1,20),ylim=c(1,20),log="xy")
  plot(c(1,10,100),c(100,10,1),type="l",xlim=c(1,100),ylim=c(1,100),log="xy")

abline has the same problem.  Try following the above calls with abline(2,-1).
(This is supposed to plot a straight line in the log-log domain, and
does, but it's the wrong straight line.)

I can also get the problem where only one axis is logarithmic.  
Let's untransform the x-axis from the original command:
 
  plot(log(c(1,10,100)),c(100,10,1),type="l",xlim=log(c(1,20)),ylim=c(1,20),log="y")

Thanks! - Jason Eisner






==> 839.audit <==
Wed Feb  7 08:51:14 2001	ripley	moved from incoming to Graphics
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
* PR# 202 *
Subject: persp box occlusion bug
From: wsi@gcal.ac.uk
Date: Wed, 2 Jun 1999 15:02:03 +0200 (MET DST)
--The persp algorithm does not apply the occlusion rules to the frame, 
--which is always plotted first. 
--A bug, but not very simple to fix.
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 202 <==
From wsi@gcal.ac.uk  Wed Jun  2 15:02:10 1999
Received: from localhost (blueberry [130.225.108.193])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id PAA27126
	for <R-bugs@biostat.ku.dk>; Wed, 2 Jun 1999 15:02:03 +0200 (MET DST)
Date: Wed, 2 Jun 1999 15:02:03 +0200 (MET DST)
From: wsi@gcal.ac.uk
Message-Id: <199906021302.PAA27126@pubhealth.ku.dk>
To: R-bugs@biostat.ku.dk
Subject: persp box occlusion bug

Full_Name: Bill Simpson
Version: 64.1
OS: linux
Submission from: (NULL) (193.62.250.209)


Bug in persp() bounding box:
If the surface being plotted extends below the lower z-axis boundary, the box
is
drawn with the wrong occlusion. The box is shown as being occluded by the
surface
even though it should be in front of the surface.

The box is correct for surface extending above the box. Problem is only for
surface extending below the box.

This exhibits the bug:

std<-rep(seq(-32,32,8),9)/1000 * 60
cf<-rep(seq(-32,32,8),rep(9,9))/1000 *60 
dp<-(cf-std)/.6
std<-unique(std)
cf<-unique(cf)
dp<-t(matrix(dp,length(cf),length(std)))
persp(std,cf,dp, xlim=c(-2,2), ylim=c(-2,2), zlim=c(0,5),theta=-40,    
phi=45,
box=TRUE,ltheta=-120, lphi=120,
d=1.5, shade=.7)


==> 202.audit <==
Wed Jun 30 19:31:18 1999	pd	moved from incoming to Graphics
Thu Jul 01 18:19:48 1999	pd	changed notes
Sun Feb 20 10:07:11 2000	ripley	changed notes
Mon Feb 28 17:17:51 2000	pd	changed notes
Mon Feb 28 17:18:28 2000	pd	changed notes
Mon Feb 28 17:19:35 2000	pd	changed notes
Mon Feb 28 17:20:17 2000	pd	changed notes
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
* PR# 726 *
Subject: par(las=.)  gives wrong "adj" for mtext()
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Tue, 7 Nov 2000 13:03:58 +0100
-- no notes --
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 726 <==
From maechler@stat.math.ethz.ch  Tue Nov  7 13:03:47 2000
Received: from stat.math.ethz.ch (daemon@hypatia.ethz.ch [129.132.58.23])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id NAA19936
	for <R-bugs@biostat.ku.dk>; Tue, 7 Nov 2000 13:03:46 +0100 (MET)
Received: (from daemon@localhost)
	by stat.math.ethz.ch (8.9.1/8.9.1) id NAA27952
	for <R-bugs@stat.math.ethz.ch>; Tue, 7 Nov 2000 13:04:04 +0100 (MET)
Received: from lynne(129.132.58.30), claiming to be "lynne.ethz.ch"
 via SMTP by hypatia, id smtpdAAAa006od; Tue Nov  7 13:04:00 2000
Received: (maechler@localhost) by lynne.ethz.ch (8.9.3/D-MATH-client) id NAA03777; Tue, 7 Nov 2000 13:03:59 +0100
X-Authentication-Warning: lynne.ethz.ch: maechler set sender to maechler@stat.math.ethz.ch using -f
From: Martin Maechler <maechler@stat.math.ethz.ch>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
Message-ID: <14855.61358.974454.417553@gargle.gargle.HOWL>
Date: Tue, 7 Nov 2000 13:03:58 +0100
To: R-bugs@stat.math.ethz.ch
Subject: par(las=.)  gives wrong "adj" for mtext()
X-Mailer: VM 6.76 under Emacs 20.7.1
Reply-To: Martin Maechler <maechler@stat.math.ethz.ch>

For R Version 1.1.1 and R-devel (Linux)...

Sorry, there's no time to fix myself now
{e.g., after starting a new device} :

    par(las=3); plot(1:10); par(las=1) ; mtext("mtext")

Gives a left-adjusted (as for  adj = 0)  mtext,
even if  par("adj") is still 0.5

Note that I'm also not convinced that  mtext() should follow  par("las")
as it does in the following {2nd bug ?} :


    par(las=3); plot(1:10); mtext("mtext")

Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
Seminar fuer Statistik, ETH-Zentrum  LEO D10	Leonhardstr. 27
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1228			<><

==> 726.followup.1 <==
From ligges@statistik.uni-dortmund.de  Tue Nov  7 14:43:55 2000
Received: from nx5.HRZ.Uni-Dortmund.DE (nx5.HRZ.Uni-Dortmund.DE [129.217.131.21])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id OAA21669
	for <R-bugs@biostat.ku.dk>; Tue, 7 Nov 2000 14:43:55 +0100 (MET)
Received: from amadeus.statistik.uni-dortmund.de by nx5.HRZ.Uni-Dortmund.DE
          via smtp-local with ESMTP; Tue, 7 Nov 2000 14:44:09 +0100
Received: from statistik.uni-dortmund.de (dial-142031.HRZ.Uni-Dortmund.DE [129.217.142.31])
	by amadeus.statistik.uni-dortmund.de (8.9.3+Sun/8.9.3) with ESMTP id OAA20383;
	Tue, 7 Nov 2000 14:44:08 +0100 (MET)
Message-ID: <3A08073D.F6C15CAA@statistik.uni-dortmund.de>
Date: Tue, 07 Nov 2000 14:44:29 +0100
From: Uwe Ligges <ligges@statistik.uni-dortmund.de>
X-Mailer: Mozilla 4.76 [en] (WinNT; U)
X-Accept-Language: de-DE,en
MIME-Version: 1.0
To: maechler@stat.math.ethz.ch
CC: R-bugs <R-bugs@biostat.ku.dk>
Subject: Re: [Rd] par(las=.)  gives wrong "adj" for mtext() (PR#726)
References: <200011071203.NAA19946@pubhealth.ku.dk>
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit

maechler@stat.math.ethz.ch wrote:
> 
> For R Version 1.1.1 and R-devel (Linux)...
> 
> Sorry, there's no time to fix myself now
> {e.g., after starting a new device} :
> 
>     par(las=3); plot(1:10); par(las=1) ; mtext("mtext")
>
> Gives a left-adjusted (as for  adj = 0)  mtext,
> even if  par("adj") is still 0.5


That's not a bug, I suppose. From help of mtext():

adj  adjustment for each string. [......]
     If adj is not a finite value (the default), 
                                       ^^^^^^^ = NA, not from par("adj")
     the value par("las") determines the adjustment. 
     For strings plotted parallel to the axis the default is to centre
the string. 
 

> Note that I'm also not convinced that  mtext() should follow  par("las")
> as it does in the following {2nd bug ?} :
> 
>     par(las=3); plot(1:10); mtext("mtext")


Everything is vertical, here (R-1.1.1, WinNT4.0). I don't see a second
bug ...



But I think most users don't expect the behavior of mtext(). Maybe some
changes are useful:

1. The above described "bug", maybe centre all strings as the default
(and not only those strings plotted parallel to the axis), so there are
not so much dependencies between the settings of "adj" and "las".

2. Have a look at:

      par("las"=3)
      plot(1:10)
      mtext("text1", adj=0.2)
      mtext("text2", adj=0.8)

This is intended (from the help), but I would expect (without reading
the help at first) the following result:
 
      par("las"=3)
      plot(1:10)
      mtext("text1", adj=0.2, at=5.5)
      mtext("text2", adj=0.8, at=5.5)


Additionally: The argument "adj" in mtext() does not support adj=c(x, y)
as described in ?par.



Regards,
Uwe Ligges

==> 726.reply.1 <==
From maechler@stat.math.ethz.ch  Wed Nov  8 12:27:35 2000
Received: from stat.math.ethz.ch (daemon@hypatia.ethz.ch [129.132.58.23])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id MAA02270
	for <R-bugs@biostat.ku.dk>; Wed, 8 Nov 2000 12:27:35 +0100 (MET)
Received: (from daemon@localhost)
	by stat.math.ethz.ch (8.9.1/8.9.1) id MAA23933;
	Wed, 8 Nov 2000 12:27:47 +0100 (MET)
Received: from lynne(129.132.58.30), claiming to be "lynne.ethz.ch"
 via SMTP by hypatia, id smtpdAAAa005pv; Wed Nov  8 12:27:45 2000
Received: (maechler@localhost) by lynne.ethz.ch (8.9.3/D-MATH-client) id MAA05036; Wed, 8 Nov 2000 12:27:44 +0100
X-Authentication-Warning: lynne.ethz.ch: maechler set sender to maechler@stat.math.ethz.ch using -f
From: Martin Maechler <maechler@stat.math.ethz.ch>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
Message-ID: <14857.14512.195716.697631@gargle.gargle.HOWL>
Date: Wed, 8 Nov 2000 12:27:44 +0100
To: Uwe Ligges <ligges@statistik.uni-dortmund.de>
Cc: R-bugs <R-bugs@biostat.ku.dk>
Subject: Re: [Rd] par(las=.)  gives wrong "adj" for mtext() (PR#726)
In-Reply-To: <3A08073D.F6C15CAA@statistik.uni-dortmund.de>
References: <200011071203.NAA19946@pubhealth.ku.dk>
	<3A08073D.F6C15CAA@statistik.uni-dortmund.de>
X-Mailer: VM 6.76 under Emacs 20.7.1
Reply-To: Martin Maechler <maechler@stat.math.ethz.ch>

>>>>> "Uwe" == Uwe Ligges <ligges@statistik.uni-dortmund.de> writes:

    Uwe> maechler@stat.math.ethz.ch wrote:
    >>  For R Version 1.1.1 and R-devel (Linux)...
    >> 
    >> Sorry, there's no time to fix myself now {e.g., after starting a new
    >> device} :
    >> 
    >> par(las=3); plot(1:10); par(las=1) ; mtext("mtext")
    >> 
    >> Gives a left-adjusted (as for adj = 0) mtext, even if par("adj") is
    >> still 0.5


    Uwe> That's not a bug, I suppose. From help of mtext():

    Uwe> adj adjustment for each string. [......]  If adj is not a finite
    Uwe> value (the default), ^^^^^^^ = NA, not from par("adj") the value
    Uwe> par("las") determines the adjustment.  For strings plotted
    Uwe> parallel to the axis the default is to centre the string.
 
Yes, it *is* one!

Note that above, I had already reset  "par(las = 1)"
*before* doing  mtext(.) !

--------

    >> Note that I'm also not convinced that mtext() should follow
    >> par("las") as it does in the following {2nd bug ?} :
    >> 
    >> par(las=3); plot(1:10); mtext("mtext")


    Uwe> Everything is vertical, here (R-1.1.1, WinNT4.0). I don't see a
    Uwe> second bug ...

yes, and I didn't say so, I said
"not convinced that mtext() should ..."

I think you have good  points below :

    Uwe> But I think most users don't expect the behavior of mtext(). Maybe
    Uwe> some changes are useful:

    Uwe> 1. The above described "bug", maybe centre all strings as the
    Uwe> default (and not only those strings plotted parallel to the axis),
    Uwe> so there are not so much dependencies between the settings of
    Uwe> "adj" and "las".

    Uwe> 2. Have a look at:

    Uwe> par("las"=3)
    Uwe> plot(1:10)
    Uwe> mtext("text1", adj=0.2)
    Uwe> mtext("text2", adj=0.8)

    Uwe> This is intended (from the help), but I would expect (without reading
    Uwe> the help at first) the following result:
 
    Uwe> par("las"=3)
    Uwe> plot(1:10)
    Uwe> mtext("text1", adj=0.2, at=5.5)
    Uwe> mtext("text2", adj=0.8, at=5.5)

Request for comments :  
Shouldn't we change the behavior() of mtext() here?

----


    Uwe> Additionally: The argument "adj" in mtext() does not support
    Uwe> adj=c(x, y) as described in ?par.

yes, but the `adj' argument of mtext()  *is*  documented explicitly,
(partly for that reason!).


==> 726.audit <==
Thu Nov  9 08:22:23 2000	ripley	moved from incoming to Graphics
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
* PR# 660 *
Subject: identify.default ignores any setting of cex.
From: Prof Brian Ripley <ripley@stats.ox.ac.uk>
Date: Fri, 15 Sep 2000 10:23:39 +0100 (BST)
-- no notes --
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 660 <==
From postmaster@franz.stat.wisc.edu  Fri Sep 15 11:23:32 2000
Received: from stat.math.ethz.ch (daemon@hypatia.ethz.ch [129.132.58.23])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id LAA13327
	for <R-bugs@biostat.ku.dk>; Fri, 15 Sep 2000 11:23:32 +0200 (MET DST)
Received: (from daemon@localhost)
	by stat.math.ethz.ch (8.9.1/8.9.1) id LAA17846
	for <r-bugs@hypatia.math.ethz.ch>; Fri, 15 Sep 2000 11:23:49 +0200 (MET DST)
Received: from franz.stat.wisc.edu(128.105.174.95)
 via SMTP by hypatia, id smtpdAAAa004Mn; Fri Sep 15 11:23:42 2000
Received: from toucan.stats.ox.ac.uk (really [163.1.20.20]) by franz.stat.wisc.edu
	via in.smtpd with esmtp
	id <m13Zrkl-000IW0C@franz.stat.wisc.edu> (Debian Smail3.2.0.102)
	for <R-bugs@r-project.org>; Fri, 15 Sep 2000 04:25:51 -0500 (CDT) 
Received: from localhost (ripley@localhost)
	by toucan.stats.ox.ac.uk (8.9.0/8.9.0) with ESMTP id KAA14892
	for <R-bugs@r-project.org>; Fri, 15 Sep 2000 10:23:39 +0100 (BST)
X-Authentication-Warning: toucan.stats: ripley owned process doing -bs
Date: Fri, 15 Sep 2000 10:23:39 +0100 (BST)
From: Prof Brian Ripley <ripley@stats.ox.ac.uk>
X-Sender: ripley@toucan.stats
To: R-bugs@r-project.org
Subject: identify.default ignores any setting of cex.
Message-ID: <Pine.GSO.4.05.10009151011510.14885-100000@toucan.stats>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII

R 1.1.1 on Windows, but I think this is widespread.

Using either

par(cex=0.5)
plot(1:10)
identify(1:10)

or

plot(1:10)
identify(1:10, cex=0.5)

ignores the cex setting.  The root cause is that par(cex=0.5)
alters cexbase for the device but sets cex=1.0, and the internal
text plotting routines use cex and not cexbase.

The obvious fix is to set cex to cexbase in do_identify. However,
if this is fixed, there is another problem, The offset of the label
is related to the cex in use for the label, and not for the symbol.
So

plot(1:10, type="n")
points(1:10, cex=5)
identify(1:10)

is not sensible in placing the labels.  That may be hard to anticipate,
but 

plot(1:10)
identify(1:10, cex=0.5)

needs to use cex=1 not cex=0.5 for the adjustment.  Perhaps identify is
trying too hard, and should give the user more control over the precise
position of the label (as S-PLUS does).

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


==> 660.audit <==
Wed Oct 25 06:57:35 2000	ripley	moved from incoming to Graphics
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
* PR# 776 *
Subject: strwidth does not take font into account
From: Martyn Plummer <plummer@iarc.fr>
Date: Tue, 19 Dec 2000 14:56:01 +0100 (CET)
-- no notes --
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 776 <==
From postmaster@franz.stat.wisc.edu  Tue Dec 19 14:53:40 2000
Received: from franz.stat.wisc.edu (franz.stat.wisc.edu [128.105.174.95])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id OAA05819
	for <r-bugs@biostat.ku.dk>; Tue, 19 Dec 2000 14:53:39 +0100 (MET)
Received: from smtp02.iarc.fr (really [212.157.236.234]) by franz.stat.wisc.edu
	via in.smtpd with esmtp
	id <m148NHG-000IYiC@franz.stat.wisc.edu> (Debian Smail3.2.0.102)
	for <r-bugs@r-project.org>; Tue, 19 Dec 2000 07:58:02 -0600 (CST) 
Received: from xena.iarc.fr ([10.10.150.125])
	by smtp02.iarc.fr (8.9.3/8.9.3) with ESMTP id OAA21720
	for <r-bugs@r-project.org>; Tue, 19 Dec 2000 14:53:55 +0100
Message-ID: <XFMail.001219145601.plummer@iarc.fr>
X-Mailer: XFMail 1.3 [p0] on Linux
X-Priority: 3 (Normal)
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 8bit
MIME-Version: 1.0
Date: Tue, 19 Dec 2000 14:56:01 +0100 (CET)
Organization: International Agency for Research on Cancer
Sender: martyn@xena.iarc.fr
From: Martyn Plummer <plummer@iarc.fr>
To: r-bugs@r-project.org
Subject: strwidth does not take font into account

One for the wishlist.

The text() function permits the use of different fonts with the arguments
"font" or "vfont".  These create text strings of the same height as the
default font, but of different widths: bold face is slightly wider; vector
fonts are usually much wider.  I think the strwidth() function needs to
take the font into account by also having "font" and "vfont" arguments.
Currently it reports the string width using the default font, which can
be quite different.

Here is a little test function you can use to see how far off the
reported string width is.

test.strwidth <-
function(text, vfont=NULL, cex=NULL, ...)
{
 plot(0,0,xlim=c(-1,1),ylim=c(-1,1), type="n")
 text(0,0, text, adj=c(0,0), offset=0, cex=cex, vfont=vfont, ...)
 abline(h=c(0, strheight(text, cex=cex)), lty=2)
 abline(v=c(0, strwidth(text, cex=cex)), lty=2)
}

e.g.

test.strwidth("This is some text", cex=2)
test.strwidth("This is some text", cex=2, font=2)
test.strwidth("This is some text", vfont=c("sans serif", "plain"))

Martyn

Please do not edit the information below--

Version:
 platform = i686-pc-linux-gnu
 arch = i686
 os = linux-gnu
 system = i686, linux-gnu
 status =
 major = 1
 minor = 2.0
 year = 2000
 month = 12
 day = 15
 language = R

Search Path:
 .GlobalEnv, package:ctest, Autoloads, package:base




==> 776.audit <==
Tue Dec 26 10:31:10 2000	ripley	moved from incoming to Graphics
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
* PR# 750 *
Subject: abline() does not obey "xpd" (clipping rules)
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Mon, 27 Nov 2000 18:27:11 +0100
-- no notes --
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 750 <==
From maechler@stat.math.ethz.ch  Mon Nov 27 18:27:05 2000
Received: from stat.math.ethz.ch (daemon@hypatia.ethz.ch [129.132.58.23])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id SAA04861
	for <R-bugs@biostat.ku.dk>; Mon, 27 Nov 2000 18:27:04 +0100 (MET)
Received: (from daemon@localhost)
	by stat.math.ethz.ch (8.9.1/8.9.1) id SAA21229
	for <R-bugs@stat.math.ethz.ch>; Mon, 27 Nov 2000 18:27:14 +0100 (MET)
Received: from UNKNOWN(129.132.58.30), claiming to be "lynne.ethz.ch"
 via SMTP by hypatia, id smtpdAAAa005Bf; Mon Nov 27 18:27:12 2000
Received: (maechler@localhost) by lynne.ethz.ch (8.9.3/D-MATH-client) id SAA01940; Mon, 27 Nov 2000 18:27:11 +0100
X-Authentication-Warning: lynne.ethz.ch: maechler set sender to maechler@stat.math.ethz.ch using -f
From: Martin Maechler <maechler@stat.math.ethz.ch>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
Message-ID: <14882.39279.553452.20503@gargle.gargle.HOWL>
Date: Mon, 27 Nov 2000 18:27:11 +0100
To: R-bugs@stat.math.ethz.ch
Subject: abline() does not obey "xpd" (clipping rules)
X-Mailer: VM 6.76 under Emacs 20.7.1
Reply-To: Martin Maechler <maechler@stat.math.ethz.ch>

This is not a bug in the very strict sense,
but for consistency,  
I feel that
    abline() 
should obey  par("xpd") setting, even by ...-argument.
The following code shows how  lines() ``works'' and abline() does not :

  par(mfrow=c(2,1))
  plot(1:4)
  plot(1:10)
  par(xpd=NA); abline(v=1:10); par(xpd=FALSE)
  ## or even
  abline(v=1:10, xpd = NA, col = "purple")
  ## lines() *does* work with xpd arg:
  lines(4:5,c(1,40), col = 2, xpd = FALSE)# clip to plot
  lines(5:6,c(1,40), col = 3, xpd = TRUE)# clip to figure
  lines(6:7,c(1,20), col = 4, xpd = NA)# clip to device 
  text(4:6, 10.5, "xpd =", xpd = TRUE, col = 2:4)
  text(4:6, 10, c("FALSE","TRUE","NA"), col = 2:4, adj = 0)


Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
Seminar fuer Statistik, ETH-Zentrum  LEO D10	Leonhardstr. 27
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1228			<><

==> 750.reply.1 <==
From maechler@stat.math.ethz.ch  Wed Nov 29 14:02:47 2000
Received: from stat.math.ethz.ch (daemon@hypatia.ethz.ch [129.132.58.23])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id OAA24751
	for <R-bugs@biostat.ku.dk>; Wed, 29 Nov 2000 14:02:46 +0100 (MET)
Received: (from daemon@localhost)
	by stat.math.ethz.ch (8.9.1/8.9.1) id OAA15367
	for <R-bugs@biostat.ku.dk>; Wed, 29 Nov 2000 14:03:01 +0100 (MET)
Received: from UNKNOWN(129.132.58.30), claiming to be "lynne.ethz.ch"
 via SMTP by hypatia, id smtpdAAAa003k0; Wed Nov 29 14:02:57 2000
Received: (maechler@localhost) by lynne.ethz.ch (8.9.3/D-MATH-client) id OAA05829; Wed, 29 Nov 2000 14:02:56 +0100
X-Authentication-Warning: lynne.ethz.ch: maechler set sender to maechler@stat.math.ethz.ch using -f
From: Martin Maechler <maechler@stat.math.ethz.ch>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
Message-ID: <14884.65152.785676.980519@gargle.gargle.HOWL>
Date: Wed, 29 Nov 2000 14:02:56 +0100
To: R-bugs@biostat.ku.dk
Subject: abline() AND rect() do not obey "xpd" (clipping) (PR#750)
In-Reply-To: <200011271727.SAA04871@pubhealth.ku.dk>
References: <200011271727.SAA04871@pubhealth.ku.dk>
X-Mailer: VM 6.86 under Emacs 20.7.1
Reply-To: Martin Maechler <maechler@stat.math.ethz.ch>

>>>>> "MM" == Martin Maechler <maechler@stat.math.ethz.ch> writes:

    MM> This is not a bug in the very strict sense,
    MM> but for consistency,  
    MM> I feel that
    MM> abline() 
    MM> should obey  par("xpd") setting, even by ...-argument.
    MM> The following code shows how  lines() ``works'' and abline() does not :

    MM> par(mfrow=c(2,1))
    MM> plot(1:4)
    MM> plot(1:10)
    MM> par(xpd=NA); abline(v=1:10); par(xpd=FALSE)
    MM> ## or even
    MM> abline(v=1:10, xpd = NA, col = "purple")
    MM> ## lines() *does* work with xpd arg:
    MM> lines(4:5,c(1,40), col = 2, xpd = FALSE)# clip to plot
    MM> lines(5:6,c(1,40), col = 3, xpd = TRUE)# clip to figure
    MM> lines(6:7,c(1,20), col = 4, xpd = NA)# clip to device 
    MM> text(4:6, 10.5, "xpd =", xpd = TRUE, col = 2:4)
    MM> text(4:6, 10, c("FALSE","TRUE","NA"), col = 2:4, adj = 0)

Also, 
      rect() 
fails similarly.
This gives funny legend()s :

 plot(1:10)
 legend(1,7.5,  c("1st", "2nd", "third"), col = 1:3, lwd = 1:3, pch = 1:3)
 op <- par(xpd = NA)
 legend(1,11.5, c("1st", "2nd", "third"), col = 1:3, lwd = 1:3, pch = 1:3)
 ## pch = 1 also doesn't ?!?? ?? why??  It does here :
 points(2+ 1:8, rep(11, 8), pch = 1:8, col = "purple")
 ## and other pch's do here
 legend(4,11.9, c("1st", "2nd", "third"), col = 1:3, lwd = 1:3, pch = 6:4)
 par(op)

## Note that there seems another peculiar clipping bug 
##       with pch = 1 in legend

Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
Seminar fuer Statistik, ETH-Zentrum  LEO D10	Leonhardstr. 27
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1228			<><

==> 750.audit <==
Wed Nov 29 14:17:37 2000	ripley	moved from incoming to Graphics
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
* PR# 820 *
Subject: interaction.plot
From: "Mark M. Span" <span@psy.uva.nl>
Date: Mon, 22 Jan 2001 10:47:39 +0100
-- no notes --
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 820 <==
From postmaster@franz.stat.wisc.edu  Mon Jan 22 10:43:38 2001
Received: from franz.stat.wisc.edu (franz.stat.wisc.edu [128.105.174.95])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id KAA09043
	for <r-bugs@biostat.ku.dk>; Mon, 22 Jan 2001 10:43:37 +0100 (MET)
Received: from mail.psy.uva.nl (really [145.18.113.16]) by franz.stat.wisc.edu
	via in.smtpd with esmtp
	id <m14KdVr-000IWyC@franz.stat.wisc.edu> (Debian Smail3.2.0.102)
	for <r-bugs@r-project.org>; Mon, 22 Jan 2001 03:43:47 -0600 (CST) 
Received: from rea2205 (rea2205.psy.uva.nl [145.18.152.205])
	by mail.psy.uva.nl (8.9.3/8.9.3) with SMTP id KAA21513
	for <r-bugs@r-project.org>; Mon, 22 Jan 2001 10:43:45 +0100 (MET)
Message-ID: <008501c08458$5bfc6530$cd981291@psy.uva.nl>
From: "Mark M. Span" <span@psy.uva.nl>
To: <r-bugs@r-project.org>
Subject: interaction.plot
Date: Mon, 22 Jan 2001 10:47:39 +0100
Organization: UvA
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 5.50.4133.2400
X-MimeOLE: Produced By Microsoft MimeOLE V5.50.4133.2400

I notices some indesireable behaviour in interaction.plot. The scaling of
the x-axis labels discards the overall settings for the 'cex' attribute,
leading to unscaled labels. The source for this behaviour is the line

mtext(xlabs, 1, at = xvals)

in interaction.plot.

to get this function to perform conform the manual, change this line to

mtext(xlabs, 1, at = xvals, cex=par("cex"))

and all is well.

because of the simplicity of this 'fix' I assume that it is a crossplatform
thingie, but for the record:

I use R-Win in winNT, 1.2.0, upgrading soon.

just my .02 euro..

I'll just end this mail with a standard declaration of love for R

greetz. Mark M. Span


==> 820.audit <==
Thu Jan 25 00:05:53 2001	ripley	moved from incoming to Graphics
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
* PR# 816 *
Subject: dotplot: character size of labels
From: RINNER Heinrich <H.RINNER@TIROL.GV.AT>
Date: Thu, 18 Jan 2001 14:54:32 +0100
--Suggested fix will work (and spaces for labels will be fine), but there is a
--deeper problem:  mtext() ignores par(cex=.5) in general.  
--To see the problem try:  par(cex=.5); mtext("hi")
--I think the right fix is to change the argument list for mtext so that
--cex=par(cex) by default rather than cex=NA by default (plus corresponding
--internal changes to  do_mtext in plot.c).
--This needs to be done very carefully because (i) the change suggested above may
--have side-effects in many other pieces of interpreted code (ii) do_mtext ignores
--
--dd->gp.cexbase unlike, for example, do_plot_xy and anything to do with cexbase
--needs extreme care.
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 816 <==
From postmaster@franz.stat.wisc.edu  Thu Jan 18 16:57:16 2001
Received: from franz.stat.wisc.edu (franz.stat.wisc.edu [128.105.174.95])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id QAA13627
	for <r-bugs@biostat.ku.dk>; Thu, 18 Jan 2001 16:57:15 +0100 (MET)
Received: from ingw1.tirol.gv.at (really [212.183.27.1]) by franz.stat.wisc.edu
	via in.smtpd with esmtp
	id <m14JHRE-000IWyC@franz.stat.wisc.edu> (Debian Smail3.2.0.102)
	for <r-bugs@r-project.org>; Thu, 18 Jan 2001 09:57:24 -0600 (CST) 
Received: from xms.tirol.gv.at (xms.tirol.gv.at [10.11.128.200])
	by ingw1.tirol.gv.at (Mailer) with ESMTP id 22ADE2825
	for <r-bugs@r-project.org>; Thu, 18 Jan 2001 14:49:47 +0100 (NFT)
Received: from xms.tirol.gv.at (unverified) by xms.tirol.gv.at
 (Content Technologies SMTPRS 4.1.5) with ESMTP id <T0a0b80c8512ecf1400@xms.tirol.gv.at> for <r-bugs@r-project.org>;
 Thu, 18 Jan 2001 14:54:33 +0100
Received: by xms.tirol.gv.at with Internet Mail Service (5.5.2650.21)
	id <CLGLQ6B7>; Thu, 18 Jan 2001 14:54:33 +0100
Message-ID: <C4D44AB4CB62D311BA6500041202E8862640F8@xms1.tirol.gv.at>
From: RINNER Heinrich <H.RINNER@TIROL.GV.AT>
To: "'r-bugs@r-project.org'" <r-bugs@r-project.org>
Subject: dotplot: character size of labels
Date: Thu, 18 Jan 2001 14:54:32 +0100
Return-Receipt-To: RINNER Heinrich <H.RINNER@TIROL.GV.AT>
MIME-Version: 1.0
X-Mailer: Internet Mail Service (5.5.2650.21)
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: 8bit
X-MIME-Autoconverted: from quoted-printable to 8bit by pubhealth.ku.dk id QAA13627

There seems to be a bug in "dotplot" concerning the "cex" parameter. Setting
cex has no effect on the character size of the labels of the points.
This problem was posted to r-help today (Thu, 18 Jan 2001); the solution
given by Brian Ripley (and Uwe Ligges) seems to work for me.

Heinrich Rinner.
 
> version
         _              
platform i386-pc-mingw32
arch     x86            
os       Win32          
system   x86, Win32     
status                  
major    1              
minor    2.0            
year     2000           
month    12             
day      15             
language R              

> ----------
> Von: 	Prof Brian Ripley[SMTP:ripley@stats.ox.ac.uk]
> Gesendet: 	Donnerstag, 18. Jänner 2001 10:35
> An: 	RINNER Heinrich
> Cc: 	'r-help@stat.math.ethz.ch'
> Betreff: 	Re: [R] dotplot: character size of labels
> 
> On Thu, 18 Jan 2001, RINNER Heinrich wrote:
> 
> > Dear R users,
> >
> > using dotplot (R1.2.0, WinNT4.0), I am trying to change the character
> size
> > of the labels of the points:
> >
> > > # example
> > > data(VADeaths)
> > > dotplot(VADeaths, main = "Death Rates in Virginia - 1940")
> > > # I'd like to have smaller character size of the labels (for age and
> > population groups)
> > > ?dotplot
> > > # for argument "cex", this says: "Setting cex to a value smaller than
> one
> > can be a useful way of avoiding label overlap."
> > > dotplot(VADeaths, main = "Death Rates in Virginia - 1940", cex = 0.5)
> > > # the main title and the plotting characters are smaller now, but not
> the
> > labels
> > > # trying to set other graphics parameters seems to have no effect:
> > > dotplot(VADeaths, main = "Death Rates in Virginia - 1940", cex.axis =
> 0.5)
> > > dotplot(VADeaths, main = "Death Rates in Virginia - 1940", cex.lab =
> 0.5)
> >
> > I'd be grateful for any hint how to do this correctly;
> 
> Looks like a bug. Inside dotplot alter to
> 
>         for (i in 1:n) mtext(labs[i], side = 2, line = loffset,
>             at = y[i], adj = 0, col = color, las = 2, cex = cex, ...)
> 
>         for (i in 1:nlevels(groups)) mtext(glabels[i], side = 2,
>             line = goffset, at = gpos[i], adj = 0, col = gcolor,
>             las = 2, cex = cex, ...)
> 
> However, it really needs more than that to calculate the spaces for the
> labels correctly.
> 
> 
> -- 
> Brian D. Ripley,                  ripley@stats.ox.ac.uk
> Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
> University of Oxford,             Tel:  +44 1865 272861 (self)
> 1 South Parks Road,                     +44 1865 272860 (secr)
> Oxford OX1 3TG, UK                Fax:  +44 1865 272595
> 

==> 816.audit <==
Sat Jan 20 10:24:14 2001	ripley	moved from incoming to Graphics
Tue Jan 23 03:38:23 2001	paul	changed notes
Tue Jan 23 03:38:23 2001	paul	foobar
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
* PR# 791 *
Subject:  par(lab= *) / axis(*) bug 
From: maechler@stat.math.ethz.ch
Date: Fri, 22 Dec 2000 10:59:26 +0100
-- no notes --
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 791 <==
From postmaster@franz.stat.wisc.edu  Fri Dec 22 10:59:23 2000
Received: from franz.stat.wisc.edu (franz.stat.wisc.edu [128.105.174.95])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id KAA08619
	for <r-bugs@biostat.ku.dk>; Fri, 22 Dec 2000 10:59:23 +0100 (MET)
Received: from stat.math.ethz.ch (really [129.132.58.23]) by franz.stat.wisc.edu
	via in.smtpd with esmtp (ident daemon using rfc1413)
	id <m149OzA-000IXMC@franz.stat.wisc.edu> (Debian Smail3.2.0.102)
	for <r-bugs@r-project.org>; Fri, 22 Dec 2000 03:59:36 -0600 (CST) 
Received: (from daemon@localhost)
	by stat.math.ethz.ch (8.9.1/8.9.1) id KAA02617;
	Fri, 22 Dec 2000 10:59:34 +0100 (MET)
Received: from UNKNOWN(129.132.58.33), claiming to be "florence.ethz.ch"
 via SMTP by hypatia, id smtpdAAAa000cp; Fri Dec 22 10:59:26 2000
Received: (maechler@localhost) by florence.ethz.ch (8.9.3/D-MATH-client) id KAA23075; Fri, 22 Dec 2000 10:59:26 +0100
Date: Fri, 22 Dec 2000 10:59:26 +0100
From: maechler@stat.math.ethz.ch
Message-Id: <200012220959.KAA23075@florence.ethz.ch>
To: r-bugs@r-project.org
Subject:  par(lab= *) / axis(*) bug 
Cc: maechler@stat.math.ethz.ch

As the subject says,
here is example code (with comments) showing the problem:

p1 <- function(lab = c(8,12,7))
{
    ## This `fails' (on a virgin device)
    clab <- paste(lab,collapse=",")
    plot(1,1, xlim = c(0,15), ylim = c(-.8,1), type ="n", axes = FALSE,
         main=paste("plot(*,axes=F); par(lab= c(",clab,"));  axis(*) x 2",sep=""))
    box(col="gray80")
    op <- par(lab = lab) ; on.exit(par(op))
    axis(1, pos = 0)
    axis(2, pos = 0, las = 1)
    par(op)
    op
}

p2 <- function(lab = c(8,12,7))
{
    ## This works  [par()  *BEFORE*  plot() ]
    clab <- paste(lab,collapse=",")
    op <- par(lab = lab) ; on.exit(par(op))

    plot(1,1, xlim = c(0,15), ylim = c(-.8,1), type ="n", axes = FALSE,
         main=paste("par(lab= c(",clab,")); plot(*,axes=F); axis(*) x 2",sep=""))
    box(col="gray80")
    axis(1, pos = 0)
    axis(2, pos = 0, las = 1)
    op ## lab 5 5 7
}

dev.off()
par(mfrow=c(2,1), mar=c(2,2,3,1))
p1()
p2()




--please do not edit the information below--

Version:
 platform = i686-pc-linux-gnu
 arch = i686
 os = linux-gnu
 system = i686, linux-gnu
 status = Patched
 major = 1
 minor = 2.0
 year = 2000
 month = 12
 day = 19
 language = R

Search Path:
 .GlobalEnv, package:nls, package:splines, package:lqs, package:modreg, package:stepfun, package:mva, package:eda, package:ts, package:VLMC, package:ctest, package:SfS, Autoloads, package:base

==> 791.audit <==
Tue Dec 26 10:31:10 2000	ripley	moved from incoming to Graphics
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
* PR# 828 *
Subject: termplot fails for composite non-factor terms
From: John Maindonald <john.maindonald@anu.edu.au>
Date: Sat, 27 Jan 2001 11:57:37 +1100 (EST)
-- no notes --
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 828 <==
From postmaster@franz.stat.wisc.edu  Sat Jan 27 01:57:37 2001
Received: from franz.stat.wisc.edu (franz.stat.wisc.edu [128.105.174.95])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id BAA07865
	for <r-bugs@biostat.ku.dk>; Sat, 27 Jan 2001 01:57:36 +0100 (MET)
Received: from leonard.anu.edu.au (really [150.203.2.15]) by franz.stat.wisc.edu
	via in.smtpd with esmtp
	id <m14MJgZ-000IWyC@franz.stat.wisc.edu> (Debian Smail3.2.0.102)
	for <r-bugs@r-project.org>; Fri, 26 Jan 2001 18:57:47 -0600 (CST) 
Received: (from u9801539@localhost)
	by leonard.anu.edu.au (8.9.3/8.9.3) id LAA25063
	for r-bugs@r-project.org; Sat, 27 Jan 2001 11:57:37 +1100 (EST)
Date: Sat, 27 Jan 2001 11:57:37 +1100 (EST)
From: John Maindonald <john.maindonald@anu.edu.au>
Message-Id: <200101270057.LAA25063@leonard.anu.edu.au>
To: r-bugs@r-project.org
Subject: termplot fails for composite non-factor terms

I am running R 1.2.1 under Windows 98SE.

termplot() currently fails when there are composite terms, thus:
  > library(mass)
  > data(hills)
  > hills.lm <- lm(time ~ climb + poly(dist, 2), data = hills)
  > termplot(hills.lm)
  Hit <Return> to see next plot: 
  Error in eval(expr, envir, enclos) : Object "dist" not found

The call
  > termplot(hills.lm,data=hills)
does run without generating an error message, i.e. there is a 
problem with the default setting for the parameter 'data'. 
However the x-axis for the term poly(dist,2) is then incorrectly 
labelled as poly(dist,2), rather than dist
The label poly(dist,2) surely belongs as part of the y-axis label.

Here are suggested fixes

1. In the default parameters for the function call change
   data = model.frame(model)
to
   data = get(as.character(model$call$data))

[This does not work if the variable values are specified in the
function call.  It is not clear to me how to fix that.]

2. A few lines from the beginning, replace
    if (is.null(xlabs)) 
        xlabs <- nmt
    if (is.null(ylab)) 
        ylab <- substitute(link(foo), list(foo = formula(model)[[2]]))
with
   if (is.null(xlabs)) 
        xlabs <- unlist(lapply(cn,function(x)
        if(length(x)>1)as.character(x[[2]]) else as.character(x)))
   if (is.null(ylab)) 
        ylab <- paste("Partial for", nmt)

[The current y-label is "link(<yvar>)".  If it is thought necessary
to specify this, it should be additional to e.g., in my example,
"Partial for poly(dist,2)"]

Replace ylab = ylab with 
   ylab = ylab[i]
in the two places (arguments to plot()) where it appears.

John Maindonald               email : john.maindonald@anu.edu.au        
Statistical Consulting Unit,  phone : (6125)3998        
c/o CMA, SMS,                 fax   : (6125)5549  
John Dedman Mathematical Sciences Building
Australian National University
Canberra ACT 0200
Australia

==> 828.followup.1 <==
From tlumley@u.washington.edu  Sat Jan 27 02:08:54 2001
Received: from jason02.u.washington.edu (root@jason02.u.washington.edu [140.142.8.52])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id CAA07896
	for <R-bugs@biostat.ku.dk>; Sat, 27 Jan 2001 02:08:53 +0100 (MET)
Received: from homer06.u.washington.edu (tlumley@homer06.u.washington.edu [140.142.15.40])
	by jason02.u.washington.edu (8.9.3+UW00.05/8.9.3+UW00.12) with ESMTP id RAA28204;
	Fri, 26 Jan 2001 17:09:04 -0800
Received: from localhost (tlumley@localhost)
	by homer06.u.washington.edu (8.9.3+UW00.05/8.9.3+UW00.12) with ESMTP id RAA186066;
	Fri, 26 Jan 2001 17:09:03 -0800
Date: Fri, 26 Jan 2001 17:09:03 -0800 (PST)
From: Thomas Lumley <tlumley@u.washington.edu>
To: john.maindonald@anu.edu.au
cc: r-devel@stat.math.ethz.ch, R-bugs@biostat.ku.dk
Subject: Re: [Rd] termplot fails for composite non-factor terms (PR#828)
In-Reply-To: <200101270057.BAA07875@pubhealth.ku.dk>
Message-ID: <Pine.A41.4.21.0101261704120.21498-100000@homer06.u.washington.edu>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII

On Sat, 27 Jan 2001 john.maindonald@anu.edu.au wrote:

> I am running R 1.2.1 under Windows 98SE.
> 
> termplot() currently fails when there are composite terms, thus:
>   > library(mass)
>   > data(hills)
>   > hills.lm <- lm(time ~ climb + poly(dist, 2), data = hills)
>   > termplot(hills.lm)
>   Hit <Return> to see next plot: 
>   Error in eval(expr, envir, enclos) : Object "dist" not found
> 
> The call
>   > termplot(hills.lm,data=hills)
> does run without generating an error message, i.e. there is a 
> problem with the default setting for the parameter 'data'. 
> However the x-axis for the term poly(dist,2) is then incorrectly 
> labelled as poly(dist,2), rather than dist
> The label poly(dist,2) surely belongs as part of the y-axis label.
> 
> Here are suggested fixes
> 
> 1. In the default parameters for the function call change
>    data = model.frame(model)
> to
>    data = get(as.character(model$call$data))
> 
> [This does not work if the variable values are specified in the
> function call.  It is not clear to me how to fix that.]

Also, it does not specify where to get() the data: what environment to
use. The reason that the data= argument is present in termplot() is that
we can't tell where to find the data in general.

The situation is better as of R1.2, since we can look up variables in the
environment of the model formula. This would fix not only termplot() but a
number of other prediction-related problems.


> 2. A few lines from the beginning, replace
>     if (is.null(xlabs)) 
>         xlabs <- nmt
>     if (is.null(ylab)) 
>         ylab <- substitute(link(foo), list(foo = formula(model)[[2]]))
> with
>    if (is.null(xlabs)) 
>         xlabs <- unlist(lapply(cn,function(x)
>         if(length(x)>1)as.character(x[[2]]) else as.character(x)))
>    if (is.null(ylab)) 
>         ylab <- paste("Partial for", nmt)
> 
> [The current y-label is "link(<yvar>)".  If it is thought necessary
> to specify this, it should be additional to e.g., in my example,
> "Partial for poly(dist,2)"]
> 
> Replace ylab = ylab with 
>    ylab = ylab[i]
> in the two places (arguments to plot()) where it appears.


This looks like a good idea. 

	-thomas


==> 828.audit <==
Mon Jan 29 08:36:10 2001	ripley	moved from incoming to Graphics
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
* PR# 823 *
Subject: adjustment of expressions with mtext(..., las=2)
From: Uwe Ligges <ligges@statistik.uni-dortmund.de>
Date: Wed, 24 Jan 2001 20:12:43 +0100
-- no notes --
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 823 <==
From ligges@statistik.uni-dortmund.de  Wed Jan 24 20:12:48 2001
Received: from nx5.HRZ.Uni-Dortmund.DE (nx5.HRZ.Uni-Dortmund.DE [129.217.131.21])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id UAA12684
	for <R-bugs@biostat.ku.dk>; Wed, 24 Jan 2001 20:12:47 +0100 (MET)
Received: from amadeus.statistik.uni-dortmund.de by nx5.HRZ.Uni-Dortmund.DE
          via smtp-local with ESMTP; Wed, 24 Jan 2001 20:11:55 +0100
Received: from statistik.uni-dortmund.de (dial-142088.HRZ.Uni-Dortmund.DE [129.217.142.88])
	by amadeus.statistik.uni-dortmund.de (8.9.3+Sun/8.9.3) with ESMTP id UAA21614;
	Wed, 24 Jan 2001 20:11:53 +0100 (MET)
Message-ID: <3A6F292B.A3D6027D@statistik.uni-dortmund.de>
Date: Wed, 24 Jan 2001 20:12:43 +0100
From: Uwe Ligges <ligges@statistik.uni-dortmund.de>
X-Mailer: Mozilla 4.76 [en] (WinNT; U)
X-Accept-Language: en
MIME-Version: 1.0
To: Don Wingate <Don.Wingate@intellichem.com>, r-bugs <R-bugs@biostat.ku.dk>
Subject: adjustment of expressions with mtext(..., las=2)
References: <ABB64B4C48ECD44CADC72FA840118B3B4FF0@athena.Bend.IntelliChem.com>
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit

[Subject renamed for bug report]


Don Wingate wrote:
[...]
> For example:
> 
>         math.names.text <- c("x1^2", "x2^2", "x2%*%x3) # in actual use,
> dynamically created.
>         math.expressions <- parse(text=math.names.text)
>         dotplot(1:3, labels=math.expressions)
[...] 
> By the way, I notice that when using math expressions as the labels in
> dotplot, the positioning of the labels is off to the right (and off the
> visible screen). Is this a bug in the way that the size of the math
> expressions are computed?


Yes, it looks like a bug. I try to simplify it:

When using mtext(..., las=2, adj=anything), the argument adj doesn't
seem to have any effect:

  plot(1:10)
  mtext("x^2 + x^3", side = 2, las=2, at=3, line=3, adj=0) # works fine
...

  # but here it is not left justified at line=3:
  mtext(expression(x^2 + x^3), side = 2, las=2, at=7, line=3, adj=0) 

Uwe Ligges


--please do not edit the information below--

Version:
 platform = i386-pc-mingw32
 arch = x86
 os = Win32
 system = x86, Win32
 status = 
 major = 1
 minor = 2.1
 year = 2001
 month = 01
 day = 15
 language = R

Windows NT 4.0 (build 1381) Service Pack 6

Search Path:
 .GlobalEnv, package:ctest, Autoloads, package:base

==> 823.audit <==
Thu Jan 25 00:05:32 2001	ripley	moved from incoming to Graphics
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
* PR# 837 *
Subject: screen doesn't handle redrawing properly
From: Thomas Vogels <tov@ece.cmu.edu>
Date: 01 Feb 2001 14:20:52 -0500
-- no notes --
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 837 <==
From tov@ece.cmu.edu  Thu Feb  1 20:20:40 2001
Received: from infiniti.ece.cmu.edu (INFINITI.ECE.CMU.EDU [128.2.133.84])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id UAA08721
	for <r-bugs@biostat.ku.dk>; Thu, 1 Feb 2001 20:20:39 +0100 (MET)
Received: (from tov@localhost) by infiniti.ece.cmu.edu (AIX4.3/UCB 8.8.8/8.8.8) id OAA30464; Thu, 1 Feb 2001 14:20:52 -0500
X-Authentication-Warning: infiniti.ece.cmu.edu: tov set sender to tov@ece.cmu.edu using -f
Sender: tov@infiniti.ece.cmu.edu
To: r-bugs@biostat.ku.dk
Cc: Thomas Vogels <tov@ece.cmu.edu>
Subject: screen doesn't handle redrawing properly
Reply-To: Thomas Vogels <tov@ece.cmu.edu>
X-URI: http://www.ece.cmu.edu/~tov
From: Thomas Vogels <tov@ece.cmu.edu>
Date: 01 Feb 2001 14:20:52 -0500
Message-ID: <pxitmub46j.fsf@infiniti.ece.cmu.edu>
Lines: 74
User-Agent: Gnus/5.0807 (Gnus v5.8.7) Emacs/20.7
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii


Hi.  As far as I understand it, there is a list of graphic primitives
stored for a device.  So for example, when I iconify/deiconify an X11
window, the plot will be redrawn.  Now screen (split.screen and
friends) appear not to handle this list properly, the list is reset or
not reset at odd times.  The commands below will show clearly what I
mean.  There are two effects:

  - After splitting the device real estate into two screens, I can
    plot on these screens, alternating between them.  When I then
    touch the window to force a redraw, *all* the plots are redrawn,
    not just the last (and visible) ones.
    [This happens when the X server runs on AIX, R runs on AIX or Sun.]

  - Again, after splitting, plotting on one screen can affect the
    other screen.  I.e. plot(...); plot (...) on the left screen can
    erase the *right* screen.
    [This happens for all platforms I have access to, AIX, Linux, Sun.]

The first effect may be due to a bad interaction with the X server,
but the second effect is surely not desirable, is it?  Am I mis-using
'screen' here?

R> split.screen (c(1,2))
[1] 1 2
R> # Draw 10000 points to make the effect obvious
R> screen (1)
R> plot (1:10000, 1:10000, main="1")
R> screen (2)
R> plot (1:10000, 1:10000, main="2")
R> # Ok, go back to screen 1, draw plots 3 and 4
R> screen (1)
R> plot (1:10000, 10000:1, main="3")
R> screen (2)
R> plot (1:10000, 10000:1, main="4")
R> 
R> ########################################
R> # NOW lower/raise window, do something to force device to redraw itself.
R> # You'll see again plot 1 (!), 2 (!), 3, and 4.  Why 1 and 2?
R> ########################################
R> 
R> # Here's how to erase screen 2 from screen 1 (!)
R> screen (1)
R> plot (1:10, 1:10, main="3a")
R> ########################################
R> # The following plot will erase screen 2
R> ########################################
R> plot (1:10, 1:10, main="3b")
R> 
R> # The good news is that this resets the list of graphic ops:
R> screen (2)
R> plot (1:10, 1:10, main="4")
R> # Now if you touch the window, you'll see only plot 3b and 4.

Regards,
  -tom

R> R.version
         _                   
platform sparc-sun-solaris2.7
arch     sparc               
os       solaris2.7          
system   sparc, solaris2.7   
status   Patched             
major    1                   
minor    2.1                 
year     2001                
month    01                  
day      31                  
language R                   

-- 
mailto:tov@ece.cmu.edu (Tom Vogels)   Tel: (412) 268-6638   FAX: -3204


==> 837.audit <==
Wed Feb  7 08:51:14 2001	ripley	moved from incoming to Graphics
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
* PR# 831 *
Subject: screen can't go back to (split) screen with log="y" plot
From: Thomas Vogels <tov@ece.cmu.edu>
Date: 30 Jan 2001 00:39:41 -0500
-- no notes --
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 831 <==
From postmaster@franz.stat.wisc.edu  Tue Jan 30 06:39:31 2001
Received: from franz.stat.wisc.edu (franz.stat.wisc.edu [128.105.174.95])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id GAA28455
	for <r-bugs@biostat.ku.dk>; Tue, 30 Jan 2001 06:39:30 +0100 (MET)
Received: from infiniti.ece.cmu.edu (really [128.2.216.84]) by franz.stat.wisc.edu
	via in.smtpd with esmtp
	id <m14NTW2-000IWyC@franz.stat.wisc.edu> (Debian Smail3.2.0.102)
	for <r-bugs@r-project.org>; Mon, 29 Jan 2001 23:39:42 -0600 (CST) 
Received: (from tov@localhost) by infiniti.ece.cmu.edu (AIX4.3/UCB 8.8.8/8.8.8) id AAA26672; Tue, 30 Jan 2001 00:39:42 -0500
X-Authentication-Warning: infiniti.ece.cmu.edu: tov set sender to tov@ece.cmu.edu using -f
Sender: tov@infiniti.ece.cmu.edu
To: r-bugs@r-project.org
Cc: Thomas Vogels <tov@ece.cmu.edu>
Subject: screen can't go back to (split) screen with log="y" plot
Reply-To: Thomas Vogels <tov@ece.cmu.edu>
X-URI: http://www.ece.cmu.edu/~tov
From: Thomas Vogels <tov@ece.cmu.edu>
User-Agent: Gnus/5.0807 (Gnus v5.8.7) Emacs/20.7
Date: 30 Jan 2001 00:39:41 -0500
Message-ID: <pxsnm1egyq.fsf@infiniti.ece.cmu.edu>
Lines: 76
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii


Hi.  Let's try to explain the subject line with some code:

> split.screen (c(2,1))
[1] 1 2
> screen(1)
> plot (1:2, 1:2, log="y", main="1")
> screen (2)
> plot (1:2, 1:2, main="2")
> screen (1)
Error in par(.split.screens[[n]]) : invalid value specified for graphics parameter "yaxp".
> close.screen(all=TRUE)

Let's add comments:

> split.screen (c(2,1))
[1] 1 2

OK, plot in the top half screen:
> screen(1)
> plot (1:2, 1:2, log="y", main="1")
> par("yaxp")
[1]  1  2 -5

OK, switch to bottom half:
> screen (2)
> plot (1:2, 1:2, main="2")
> par("yaxp")
[1] 1 2 5

OK, looks fine, let's go back up:
> screen (1)
Error in par(.split.screens[[n]]) : invalid value specified for graphics parameter "yaxp".

Bummer.
> close.screen(all=TRUE)

Somehow I'm hoping you'll tell me I'm doing something wrong, because
I'd really would like to be able to do the following:
  repeat {
    #calculate
    screen(1)
    #fancy plot
    screen (2)
    #even fancier plot ;-)
    if (user.bored()) break
  }
Which is roughly what I was doing when the error messages started
popping up.

Thanks,
  -tom

--please do not edit the information below--

Version:
 platform = i386-pc-linux-gnu
 arch = i386
 os = linux-gnu
 system = i386, linux-gnu
 status = 
 major = 1
 minor = 2.1
 year = 2001
 month = 01
 day = 15
 language = R

Search Path:
 .GlobalEnv, package:ctest, Autoloads, package:base



-- 
mailto:tov@ece.cmu.edu (Tom Vogels)   Tel: (412) 268-6638   FAX: -3204


==> 831.followup.1 <==
From ripley@stats.ox.ac.uk  Tue Jan 30 08:40:46 2001
Received: from toucan.stats.ox.ac.uk (toucan.stats.ox.ac.uk [163.1.20.20])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id IAA28901
	for <R-bugs@biostat.ku.dk>; Tue, 30 Jan 2001 08:40:46 +0100 (MET)
Received: from max144.public.ox.ac.uk (max144.public.ox.ac.uk [192.76.27.144])
	by toucan.stats.ox.ac.uk (8.9.0/8.9.0) with ESMTP id HAA21509;
	Tue, 30 Jan 2001 07:40:54 GMT
Date: Tue, 30 Jan 2001 07:39:25 +0000 (GMT)
From: Prof Brian D Ripley <ripley@stats.ox.ac.uk>
Sender: <ripley@auk.stats>
To: <tov@ece.cmu.edu>
cc: <R-bugs@biostat.ku.dk>
Subject: Re: [Rd] screen can't go back to log="y" plot (PR#831)
In-Reply-To: <200101300539.GAA28465@pubhealth.ku.dk>
Message-ID: <Pine.GSO.4.31.0101300725290.17104-100000@auk.stats>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII

[I have abbreviated the subject as jitterbug has been having probems
with long subjects.]

The issue here is that one cannot mix log/non-log axes in the calls to
screen(), as the appropriate par() parameter is read-only, but the
meaning of yaxp depends on it.  But beyond that you can't set
x/yaxp for log axes.

You should be able to do this: you can in the S original.

A simpler version:

plot (1:2, 1:2, log="y", main="1")
zz <- par("yaxp")
zz
[1]  1  2 -5
par(yaxp=zz)
Error in par(yaxp = zz) : invalid value specified for graphics parameter
"yaxp".

So you can't reset the yaxp parameter to what it is reported as!


Additional bug: the meaning of x/yaxp for log axes is not defined
in help(par).


On Tue, 30 Jan 2001 tov@ece.cmu.edu wrote:

>
> Hi.  Let's try to explain the subject line with some code:
>
> > split.screen (c(2,1))
> [1] 1 2
> > screen(1)
> > plot (1:2, 1:2, log="y", main="1")
> > screen (2)
> > plot (1:2, 1:2, main="2")
> > screen (1)
> Error in par(.split.screens[[n]]) : invalid value specified for graphics parameter "yaxp".
> > close.screen(all=TRUE)
>
> Let's add comments:
>
> > split.screen (c(2,1))
> [1] 1 2
>
> OK, plot in the top half screen:
> > screen(1)
> > plot (1:2, 1:2, log="y", main="1")
> > par("yaxp")
> [1]  1  2 -5
>
> OK, switch to bottom half:
> > screen (2)
> > plot (1:2, 1:2, main="2")
> > par("yaxp")
> [1] 1 2 5
>
> OK, looks fine, let's go back up:
> > screen (1)
> Error in par(.split.screens[[n]]) : invalid value specified for graphics parameter "yaxp".
>
> Bummer.
> > close.screen(all=TRUE)
>
> Somehow I'm hoping you'll tell me I'm doing something wrong, because
> I'd really would like to be able to do the following:
>   repeat {
>     #calculate
>     screen(1)
>     #fancy plot
>     screen (2)
>     #even fancier plot ;-)
>     if (user.bored()) break
>   }
> Which is roughly what I was doing when the error messages started
> popping up.
>
> Thanks,
>   -tom
>
> --please do not edit the information below--
>
> Version:
>  platform = i386-pc-linux-gnu
>  arch = i386
>  os = linux-gnu
>  system = i386, linux-gnu
>  status =
>  major = 1
>  minor = 2.1
>  year = 2001
>  month = 01
>  day = 15
>  language = R
>
> Search Path:
>  .GlobalEnv, package:ctest, Autoloads, package:base
>
>
>
> --
> mailto:tov@ece.cmu.edu (Tom Vogels)   Tel: (412) 268-6638   FAX: -3204
>
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


==> 831.followup.2 <==
From tov@ece.cmu.edu  Thu Feb  1 02:13:08 2001
Received: from infiniti.ece.cmu.edu (INFINITI.ECE.CMU.EDU [128.2.133.84])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id CAA25173
	for <R-bugs@biostat.ku.dk>; Thu, 1 Feb 2001 02:13:07 +0100 (MET)
Received: (from tov@localhost) by infiniti.ece.cmu.edu (AIX4.3/UCB 8.8.8/8.8.8) id UAA19026; Wed, 31 Jan 2001 20:12:41 -0500
X-Authentication-Warning: infiniti.ece.cmu.edu: tov set sender to tov@ece.cmu.edu using -f
Sender: tov@infiniti.ece.cmu.edu
To: Prof Brian D Ripley <ripley@stats.ox.ac.uk>
Cc: <R-bugs@biostat.ku.dk>
Subject: Re: [Rd] screen can't go back to log="y" plot (PR#831)
References: <Pine.GSO.4.31.0101300725290.17104-100000@auk.stats>
Reply-To: Thomas Vogels <tov@ece.cmu.edu>
X-URI: http://www.ece.cmu.edu/~tov
From: Thomas Vogels <tov@ece.cmu.edu>
Date: 31 Jan 2001 20:12:41 -0500
In-Reply-To: Prof Brian D Ripley's message of "Tue, 30 Jan 2001 07:39:25 +0000 (GMT)"
Message-ID: <px7l3bcik6.fsf@infiniti.ece.cmu.edu>
Lines: 81
User-Agent: Gnus/5.0807 (Gnus v5.8.7) Emacs/20.7
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii


Prof Brian D Ripley <ripley@stats.ox.ac.uk> writes:

> [I have abbreviated the subject as jitterbug has been having probems
> with long subjects.]
> 
> The issue here is that one cannot mix log/non-log axes in the calls to
> screen(), as the appropriate par() parameter is read-only, but the
> meaning of yaxp depends on it.  But beyond that you can't set
> x/yaxp for log axes.
> 
> You should be able to do this: you can in the S original.
> 
> A simpler version:
> 
> plot (1:2, 1:2, log="y", main="1")
> zz <- par("yaxp")
> zz
> [1]  1  2 -5
> par(yaxp=zz)
> Error in par(yaxp = zz) : invalid value specified for graphics parameter
> "yaxp".
> 
> So you can't reset the yaxp parameter to what it is reported as!
[snip]

The code in main/par.c ignores the value of xlog (or ylog) when
setting xaxp (or yaxp).  Right now you have in Specify (and Specify2):

... else if (streql(what, "xaxp")) {
	value = coerceVector(value, REALSXP);
	lengthCheck(what, value, 3);
	naRealCheck(REAL(value)[0], what);
	naRealCheck(REAL(value)[1], what);
        posIntCheck((int) (REAL(value)[2]), what);

Shouldn't that be something like:

... else if (streql(what, "xaxp")) {
	value = coerceVector(value, REALSXP);
	lengthCheck(what, value, 3);
	naRealCheck(REAL(value)[0], what);
	naRealCheck(REAL(value)[1], what);
        if (dd->gp.xlog)
            logAxpCheck((int) (REAL(value)[2]), what);
        else
            posIntCheck((int) (REAL(value)[2]), what);

Where logAxpCheck is suitably defined as:

static void logAxpCheck(int x, char *s)
{
    if (x == NA_INTEGER || x == 0 || x > 4)
	par_error(s);
}

since only values < 0 or the values 1, 2, 3 are allowed?


> Additional bug: the meaning of x/yaxp for log axes is not defined
> in help(par).

excerpt from help(par):

    xaxp: A vector of the form `c(x1, x2, n)' giving the coordinates
          of the extreme tick marks and the number of intervals
          between tick-marks.

Could you add:

          The value of n must be positive for linear scale axes.  For
          logarithmic scale axes n must be either negative (then there
          will be (1-n) ticks at a linear distance) or one of 1, 2, or
          3 where n then indicates the number of ticks per decade.

similar for yaxp?  What am I missing?
Regards,
  -tom

-- 
mailto:tov@ece.cmu.edu (Tom Vogels)   Tel: (412) 268-6638   FAX: -3204

==> 831.audit <==
Wed Feb  7 08:51:14 2001	ripley	moved from incoming to Graphics
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
* PR# 830 *
Subject: Disappearing x axis in plot.factor
From: Thomas Vogels <tov@ece.cmu.edu>
Date: 30 Jan 2001 00:27:13 -0500
-- no notes --
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 830 <==
From postmaster@franz.stat.wisc.edu  Tue Jan 30 06:27:08 2001
Received: from franz.stat.wisc.edu (franz.stat.wisc.edu [128.105.174.95])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id GAA28413
	for <r-bugs@biostat.ku.dk>; Tue, 30 Jan 2001 06:27:08 +0100 (MET)
Received: from infiniti.ece.cmu.edu (really [128.2.216.84]) by franz.stat.wisc.edu
	via in.smtpd with esmtp
	id <m14NTK3-000IWyC@franz.stat.wisc.edu> (Debian Smail3.2.0.102)
	for <r-bugs@r-project.org>; Mon, 29 Jan 2001 23:27:19 -0600 (CST) 
Received: (from tov@localhost) by infiniti.ece.cmu.edu (AIX4.3/UCB 8.8.8/8.8.8) id AAA70126; Tue, 30 Jan 2001 00:27:14 -0500
X-Authentication-Warning: infiniti.ece.cmu.edu: tov set sender to tov@ece.cmu.edu using -f
Sender: tov@infiniti.ece.cmu.edu
To: r-bugs@r-project.org
Cc: Thomas Vogels <tov@ece.cmu.edu>
Subject: Disappearing x axis in plot.factor
Reply-To: Thomas Vogels <tov@ece.cmu.edu>
X-URI: http://www.ece.cmu.edu/~tov
From: Thomas Vogels <tov@ece.cmu.edu>
Date: 30 Jan 2001 00:27:13 -0500
Message-ID: <pxvgqxehji.fsf@infiniti.ece.cmu.edu>
Lines: 68
User-Agent: Gnus/5.0807 (Gnus v5.8.7) Emacs/20.7
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii


Hi.

While there is an x-axis set up for:
> plot.factor(factor(1:3))

this axis is not present for
> plot.factor(factor(1:3), col="red")

which actually should just be the same as the first plot and call
barplot(table(.)), shouldn't it?  Where did the ticks and labels go?

Note that
> barplot (table(factor(1:3)), col="red")
has the x-axis.

Something funky is going on with axisnames or args in plot.factor that
I can't figure out.  The situation can be remedied with
> plot.factor(factor(1:3), col="red", axes=TRUE)

alas, why do you need "axes=TRUE"?

Regards,
  -tom



Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk> writes:

> Thomas Vogels <tov@ece.cmu.edu> writes:
> 
> 
> > Now the (actually not so) funny thing is that the labels for the
> > x-axis disappear when I specify colors for the bars.  (R 1.2.1, Linux)
> > Ok, maybe the other thing I'll have to catch up on is the docu...
> 
> The logic around "axisnames" in plot.factor looks not quite right.
> Could you file a bug report on this so that we dont forget?
> 
> barplot(table(factor(1:3)),col="green")
> plot(factor(1:3),col="green",axes=T)
> 
> both work, although the latter is clearly silly.


--please do not edit the information below--

Version:
 platform = i386-pc-linux-gnu
 arch = i386
 os = linux-gnu
 system = i386, linux-gnu
 status = 
 major = 1
 minor = 2.1
 year = 2001
 month = 01
 day = 15
 language = R

Search Path:
 .GlobalEnv, package:ctest, Autoloads, package:base



-- 
mailto:tov@ece.cmu.edu (Tom Vogels)   Tel: (412) 268-6638   FAX: -3204


==> 830.reply.1 <==
From pd@biostat.ku.dk  Tue Jan 30 16:29:00 2001
Received: from biostat.ku.dk (blueberry [130.225.108.193])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id QAA09778;
	Tue, 30 Jan 2001 16:28:59 +0100 (MET)
Received: (from pd@localhost)
	by biostat.ku.dk (8.9.3/8.9.3) id QAA02447;
	Tue, 30 Jan 2001 16:32:31 +0100
Sender: pd@blueberry.kubism.ku.dk
To: tov@ece.cmu.edu
Cc: r-devel@stat.math.ethz.ch, R-bugs@biostat.ku.dk
Subject: Re: [Rd] Disappearing x axis in plot.factor (PR#830)
References: <200101300527.GAA28423@pubhealth.ku.dk>
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 30 Jan 2001 16:32:30 +0100
In-Reply-To: tov@ece.cmu.edu's message of "Tue, 30 Jan 2001 06:27:11 +0100 (MET)"
Message-ID: <x28znt5a41.fsf@blueberry.kubism.ku.dk>
Lines: 50
X-Mailer: Gnus v5.7/Emacs 20.7
Mime-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: 7bit

tov@ece.cmu.edu writes:

> Hi.
> 
> While there is an x-axis set up for:
> > plot.factor(factor(1:3))
> 
> this axis is not present for
> > plot.factor(factor(1:3), col="red")
> 
> which actually should just be the same as the first plot and call
> barplot(table(.)), shouldn't it?  Where did the ticks and labels go?
> 
> Note that
> > barplot (table(factor(1:3)), col="red")
> has the x-axis.
> 
> Something funky is going on with axisnames or args in plot.factor that
> I can't figure out.  The situation can be remedied with
> > plot.factor(factor(1:3), col="red", axes=TRUE)
> 
> alas, why do you need "axes=TRUE"?

Because of the logic of

        axisnames <- if (length(dargs <- list(...)) > 0) {
            nam <- names(dargs)
            ((any("axes" == nam) && dargs$axes) || (any("xaxt" == 
                nam) && dargs$xaxt != "n"))
        }

gives FALSE if there are any "..." arguments, and neither of axes= and
xaxt= are given.

I think the first part of plot.factor wants to be 

     if (missing(y) || is.factor(y)) {
	dargs <- list(...)
        axisnames <- if (!is.null(dargs$axes)) dargs$axes
	    else if (!is.null(dargs$xaxt)) dargs$xaxt != "n"
            else TRUE
    }

Anyone know better?

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

==> 830.audit <==
Wed Feb  7 08:51:14 2001	ripley	moved from incoming to Graphics
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

Directory:  In-Out

* PR# 814 *
Subject: Memory problem ?
From: Zoltan Barta <Z.Barta@bristol.ac.uk>
Date: Mon, 15 Jan 2001 09:54:16 +0000 (GMT Standard Time)
--scan crashes R on Linux: a memory allocation problem, probably
--Uses n= or nlines= in scan will use less memory, and read.table does.
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 814 <==
From Z.Barta@bristol.ac.uk  Mon Jan 15 10:57:51 2001
Received: from dire.bris.ac.uk (dire.bris.ac.uk [137.222.10.60])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id KAA22984
	for <r-bugs@biostat.ku.dk>; Mon, 15 Jan 2001 10:57:51 +0100 (MET)
Received: from elios.maths.bris.ac.uk. (actually host elios.maths.bris.ac.uk) 
          by dire.bris.ac.uk with SMTP-PRIV with ESMTP;
          Mon, 15 Jan 2001 09:57:48 +0000
Received: from maths-pc80.maths.bris.ac.uk (pc80 [137.222.80.122])	by elios.maths.bris.ac.uk. (8.8.8/8.8.5) 
          with SMTP id JAA07514	for <r-bugs@biostat.ku.dk>;
          Mon, 15 Jan 2001 09:54:16 GMT
From: Zoltan Barta <Z.Barta@bristol.ac.uk>
Sender: Z.Barta@bristol.ac.uk
To: r-bugs@biostat.ku.dk
Subject: Memory problem ?
Message-ID: <SIMEON.10101150916.A@maths-pc80.bristol.ac.uk>
Date: Mon, 15 Jan 2001 09:54:16 +0000 (GMT Standard Time)
Priority: NORMAL
X-Mailer: Simeon for Win32 Version 4.1.5 Build (43)
X-Authentication: none
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; CHARSET=US-ASCII



Dear R-developers,

I have the following problem with R: When I try to scan a big file R
is sometimes killed by the operation system (after spinning the hard
disk for 10 minutes or so) or sometimes my X Window collapses. This
problem occurs only if I have many applications (e.g. Emacs, 
gnumeric, two gv, netscape) open at the same
time. On the other hand, if I use read.table() R reads the file without
problems even if many applications also open. 

I do not know whether this is a bug or I do something wrong. Please
let me know what is the case.

The details are given below. Please do not hesitate to contact me if
you need more information.


Many thanks,


Zoltan Barta



The details:

> version
         _                
platform i386-pc-linux-gnu
arch     i386             
os       linux-gnu        
system   i386, linux-gnu  
status                    
major    1                
minor    2.0              
year     2000             
month    12               
day      15               
language R                
> source("../moult/R/O.dat.R")
> F12 <- O.dat("food12")
Read 92669 lines
Killed

The file O.dat.R:
O.dat <- function(nev){
  f.nev <- paste(nev,".dat",sep="");
  what.l <- list(year=numeric(),week=numeric(),bird=numeric(),
                 event=character(),moult=character(),action=character(),
                 res=numeric(),fea1=numeric(),ml1=numeric(),brood=numeric(),
                 exper=numeric(),loc=numeric(),uval=numeric());
  data.frame(scan(f.nev,what=what.l,skip=1));
}


The first ten rows of the file "food12.dat":
year	week	bird	event	moult	action	res	fea1	ml1	brood	exper	loc	uval
0	15	0	SUBST	NOMOULT	DELAY	5	10	0	0	0	1	0.347214
0	15	1	SUBST	NOMOULT	DELAY	5	10	0	0	0	1	0.347214
0	15	2	SUBST	NOMOULT	DELAY	5	10	0	0	0	1	0.347214
0	15	3	SUBST	NOMOULT	DELAY	5	10	0	0	0	1	0.347214
0	15	4	SUBST	NOMOULT	DELAY	5	10	0	0	0	1	0.347214
0	15	5	SUBST	NOMOULT	DELAY	5	10	0	0	0	1	0.347214
0	15	6	SUBST	NOMOULT	DELAY	5	10	0	0	0	1	0.347214
0	15	7	SUBST	NOMOULT	DELAY	5	10	0	0	0	1	0.347214
0	15	8	SUBST	NOMOULT	DELAY	5	10	0	0	0	1	0.347214

the file contains lines of similar data and it is generated by a Monte Carlo
simulation. 

My system:
Debian GNU/Linux 2.2 (potato)
Kernel 2.2.15
libc6 2.2-4
Memory: 60 MB
Swap 72 MB







==> 814.audit <==
Sat Jan 20 10:23:59 2001	ripley	changed notes
Sat Jan 20 10:23:59 2001	ripley	foobar
Sat Jan 20 10:23:59 2001	ripley	moved from incoming to In-Out
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

Directory:  Installation

* PR# 806 *
Subject: configure error on alpha
From: Richard Beare <Richard.Beare@cmis.CSIRO.AU>
Date: Wed, 10 Jan 2001 16:52:58 +1100
-- no notes --
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 806 <==
From postmaster@franz.stat.wisc.edu  Wed Jan 10 06:52:58 2001
Received: from franz.stat.wisc.edu (franz.stat.wisc.edu [128.105.174.95])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id GAA02523
	for <r-bugs@biostat.ku.dk>; Wed, 10 Jan 2001 06:52:57 +0100 (MET)
Received: from snowy.nsw.cmis.CSIRO.AU (really [130.155.16.108]) by franz.stat.wisc.edu
	via in.smtpd with esmtp
	id <m14GEC5-000IXTC@franz.stat.wisc.edu> (Debian Smail3.2.0.102)
	for <r-bugs@r-project.org>; Tue, 9 Jan 2001 23:53:09 -0600 (CST) 
Received: by snowy.nsw.cmis.CSIRO.AU (SMI-8.6/SMI-SVR4)
	id QAA17231; Wed, 10 Jan 2001 16:53:03 +1100
Received: from bondi.nsw.cmis.CSIRO.AU(130.155.16.118), claiming to be "cmis.csiro.au"
 via SMTP by snowy.nsw.cmis.CSIRO.AU, id smtpdAAAa004DA; Wed Jan 10 16:52:59 2001
Sender: Richard.Beare@cmis.CSIRO.AU
Message-ID: <3A5BF8BA.7875F92C@cmis.csiro.au>
Date: Wed, 10 Jan 2001 16:52:58 +1100
From: Richard Beare <Richard.Beare@cmis.CSIRO.AU>
Organization: CSIRO Mathematical and Information Sciences
X-Mailer: Mozilla 4.7 [en] (X11; I; OSF1 V4.0 alpha)
X-Accept-Language: en
MIME-Version: 1.0
To: r-bugs@r-project.org
Subject: configure error on alpha
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit


Hi, 

I've found that the default options of gcc and g77 on alpha produce an
executable that suffers from floating exceptions. There seems to be a
problem with the configure scripts that prevents the --with-f77 option
working correctly. The configure script tests that f77 is running by
attempting to compile and link a dummy program - the link step seems
broken on the alpha (it doesn't like the command 

f77 -o conftest conftest.f -L/usr/local/lib

The command works fine without the -L switch.

)

my workaround was to remove $LIBS from the line
ac_link='${F77-f77} -o conftest${ac_exeext} $FFLAGS $LDFLAGS
conftest.$ac_ext $L
IBS 1>&5'

but a better alternative may be to just use the fortran compiler to
produce an object file rather than an executable.

R configured using the following options passes "make test"

R is now configured for alphaev56-dec-osf4.0d

  Source directory:          .
  Installation directory:    /usr/local/R
  C compiler:                cc  -ieee_with_inexact -std1 -g
  C++ compiler:              c++  -g -O2
  FORTRAN compiler:          f77  -fpe3 -g

  X11 support:               yes
  Gnome support:             no
  Tcl/Tk support:            no

  R profiling support:       yes
  R as a shared library:     no



--please do not edit the information below--

Version:
 platform = alphaev56-dec-osf4.0d
 arch = alphaev56
 os = osf4.0d
 system = alphaev56, osf4.0d
 status = 
 major = 1
 minor = 2.0
 year = 2000
 month = 12
 day = 15
 language = R

Search Path:
 .GlobalEnv, package:ctest, Autoloads, package:base

-- 
Richard Beare, CSIRO Mathematical & Information Sciences
Locked Bag 17, North Ryde, NSW 1670, Australia
Phone: +61-2-93253221 (GMT+~10hrs)  Fax: +61-2-93253200

Richard.Beare@cmis.csiro.au

==> 806.audit <==
Sat Jan 13 18:44:20 2001	ripley	moved from incoming to Installation
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

Directory:  Language

* PR# 813 *
Subject: match.call problem
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 12 Jan 2001 17:46:15 +0100
-- no notes --
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 813 <==
From postmaster@franz.stat.wisc.edu  Fri Jan 12 17:46:04 2001
Received: from franz.stat.wisc.edu (franz.stat.wisc.edu [128.105.174.95])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id RAA09757
	for <r-bugs@biostat.ku.dk>; Fri, 12 Jan 2001 17:46:04 +0100 (MET)
Received: from pubhealth.ku.dk (really [130.225.108.10]) by franz.stat.wisc.edu
	via in.smtpd with esmtp
	id <m14H7LE-000IWyC@franz.stat.wisc.edu> (Debian Smail3.2.0.102)
	for <r-bugs@r-project.org>; Fri, 12 Jan 2001 10:46:16 -0600 (CST) 
Received: from biostat.ku.dk (blueberry [130.225.108.193])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id RAA09753
	for <r-bugs@r-project.org>; Fri, 12 Jan 2001 17:45:20 +0100 (MET)
Received: (from pd@localhost)
	by biostat.ku.dk (8.9.3/8.9.3) id RAA12842;
	Fri, 12 Jan 2001 17:46:16 +0100
Sender: pd@blueberry.kubism.ku.dk
To: r-bugs@r-project.org
Subject: match.call problem
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 12 Jan 2001 17:46:15 +0100
Message-ID: <x2lmsgvhuw.fsf@blueberry.kubism.ku.dk>
Lines: 62
X-Mailer: Gnus v5.7/Emacs 20.7
Mime-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: 7bit


Previously reported by Martin as a plot.formula issue, but I believe
it boils down to this:

> f <- function(x,...)match.call(expand.dots=FALSE)
> g <- function(x,y=2,...)f(x,y=y,...)
> g(1)
f(x = x, ... = list(y = y, ...))
> g(1,b=2) 
f(x = x, ... = list(y = y, b = 2))
> g(1,y=2)
f(x = x, ... = list(y = y, ...))

Notice that ... appears if all actual arguments to g are matched in
the call to f. This is the *name* "..." as in as.name("..."). I would
have expected just ... = list(y = y) in those cases.

Simpler

> f <- function(x,...)match.call(expand.dots=FALSE)
> g <- function(x,...)f(x,...)
> g(1)
f(x = x, ... = list(...))
> g(1,2)
f(x = x, ... = list(..1 = 2))
> g(1,a=2)
f(x = x, ... = list(a = 2))

or yet again simpler

> f <- function(...)match.call(expand.dots=FALSE)
> g <- function(...)f(...)
> g(1)
f(... = list(..1 = 1))
> g()
f(... = list(...))
> f()
f()


For comparison, Splus 3.4 has this kind of stuff:

> f <- function(...)match.call(expand.dots=FALSE)
> g <- function(...)f(...)
> g()
f(... = list())
> f()
f(... = list())
> g(1)
f(... = list(1))
> g(a=1)  
f(... = list(a = 1))

I don't see why we don't do the same (although given differences in
lazy evaluation, there might be a point to it), but just getting rid
of the ... in the lists would help quite a bit.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

==> 813.audit <==
Sat Jan 13 18:52:20 2001	ripley	moved from incoming to Language
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
* PR# 669 *
Subject: Bug(s) w/ rbind.data.frame(); fix also read.table(*, as.is = TRUE) ?
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Mon, 25 Sep 2000 10:17:15 +0200
--status of AsIs columns
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 669 <==
From maechler@stat.math.ethz.ch  Mon Sep 25 10:17:01 2000
Received: from stat.math.ethz.ch (daemon@hypatia.ethz.ch [129.132.58.23])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id KAA01907
	for <R-bugs@biostat.ku.dk>; Mon, 25 Sep 2000 10:17:01 +0200 (MET DST)
Received: (from daemon@localhost)
	by stat.math.ethz.ch (8.9.1/8.9.1) id KAA07627
	for <R-bugs@stat.math.ethz.ch>; Mon, 25 Sep 2000 10:17:19 +0200 (MET DST)
Received: from lynne(129.132.58.30), claiming to be "lynne.ethz.ch"
 via SMTP by hypatia, id smtpdAAAa001r9; Mon Sep 25 10:17:15 2000
Received: (maechler@localhost) by lynne.ethz.ch (8.9.3/D-MATH-client) id KAA01475; Mon, 25 Sep 2000 10:17:15 +0200
X-Authentication-Warning: lynne.ethz.ch: maechler set sender to maechler@stat.math.ethz.ch using -f
From: Martin Maechler <maechler@stat.math.ethz.ch>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
Message-ID: <14799.2571.494467.836722@gargle.gargle.HOWL>
Date: Mon, 25 Sep 2000 10:17:15 +0200
To: R-bugs@stat.math.ethz.ch
Subject: Bug(s) w/ rbind.data.frame(); fix also read.table(*, as.is = TRUE) ?
X-Mailer: VM 6.76 under Emacs 20.7.1
Reply-To: Martin Maechler <maechler@stat.math.ethz.ch>

This is not only bug report, but also a RFC (request for comments):

The basic problem is that there are (at least) two ways of easily getting
non-factor character columns in data.frames.
The first is  
    read.table(*, as.is = TRUE) 
and the second is
    data.frame(.., I(...), ..)	      

which differ in their result. Whereas the first produces `pure' character
columns in the data.frame, the second approach gives `AsIs' classed
columns (character, or, e.g. logical).

Now, as the following shows,  rbind.data.frame()  *is* buggy anyway,
I wonder if we shouldn't change read.table(*, as.is = TRUE)
such that the non-numeric columns of its result become "AsIs" classed as
well:

-----------

str(d1 <- data.frame(a=1:3, b = I(letters[1:3])))
## d1 is `alright'
## d0: The same but a `character' *not* protected by AsIs:
d0 <- d1
d0$b <- unclass(d0$b)
str(d0)
## Note that this is *really* the same as a what you get from
##  read.table(*, as.is = TRUE)
##  ----------
##  R's read.table() is S+ compatible; however I wonder if
##  we shouldn't add  "AsIs" classes to all non-numeric components...
##  the classes, shouldn't harm, but ensure consistency of treatment..

str(d11 <- rbind(d1, new = c(7, "N"))) ## alright
str(d01 <- rbind(d0, new = c(7, "N"))) ## all wrong :
## Both columns were coerced to factors !!
##-- S-PLUS 5 coerces both to "character" -- which is better,
##  since the new row *is* all character

## R makes nonsense with 'b' [factor w/ 1 level "N": NA NA NA 1]
## S+ 5.1 does exactly the right thing [both a & b still look like in d0,d1 :
str(d12 <- rbind(d1, new = data.frame(a= 7, b="N")))##
str(d02 <- rbind(d0, new = data.frame(a= 7, b="N")))##

---------

Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
Seminar fuer Statistik, ETH-Zentrum  LEO D10	Leonhardstr. 27
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1228			<><

==> 669.audit <==
Wed Oct 25 20:31:21 2000	ripley	changed notes
Wed Oct 25 20:31:21 2000	ripley	foobar
Wed Oct 25 20:31:21 2000	ripley	moved from incoming to Language
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
* PR# 412 *
Subject: anomalies with call objects
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 06 Feb 2000 01:18:50 +0100
-- no notes --
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 412 <==
From postmaster@franz.stat.wisc.edu  Sun Feb  6 01:16:33 2000
Received: from stat.math.ethz.ch (daemon@hypatia.ethz.ch [129.132.58.23])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id BAA26868
	for <R-bugs@biostat.ku.dk>; Sun, 6 Feb 2000 01:16:31 +0100 (MET)
Received: (from daemon@localhost)
	by stat.math.ethz.ch (8.9.1/8.9.1) id BAA18080
	for <r-bugs@hypatia.math.ethz.ch>; Sun, 6 Feb 2000 01:16:38 +0100 (MET)
Received: from franz.stat.wisc.edu(128.105.174.95)
 via SMTP by hypatia, id smtpdAAAa004QS; Sun Feb  6 01:16:33 2000
Received: from pubhealth.ku.dk (really [130.225.108.10]) by franz.stat.wisc.edu
	via smail with esmtp
	id <m12HFNP-000ZSxC@franz.stat.wisc.edu> (Debian Smail3.2.0.102)
	for <r-bugs@r-project.org>; Sat, 5 Feb 2000 18:16:31 -0600 (CST) 
Received: from biostat.ku.dk (blueberry [130.225.108.193])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id BAA26864
	for <r-bugs@r-project.org>; Sun, 6 Feb 2000 01:16:18 +0100 (MET)
Received: (from pd@localhost)
	by biostat.ku.dk (8.9.3/8.9.3) id BAA12311;
	Sun, 6 Feb 2000 01:18:51 +0100
Sender: pd@blueberry.kubism.ku.dk
To: r-bugs@r-project.org
Subject: anomalies with call objects
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 06 Feb 2000 01:18:50 +0100
Message-ID: <x2900zyyhh.fsf@blueberry.kubism.ku.dk>
Lines: 51
X-Mailer: Gnus v5.7/Emacs 20.4
Mime-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: 7bit


Call objects don't always behave as you'd expect. They're mostly
list-like, but with exceptions:

> f<-function(x,y,...)match.call(expand.dots=FALSE)
> xx <- f(y=1,2,z=3,4)
> dd <- xx$...
> xx$... <- NULL
> c(xx,dd)
[[1]]
f(x = 2, y = 1)

$z
[1] 3

[[3]]
[1] 4

> as.call(c(as.list(xx),dd))
f(x = 2, y = 1, z = 3, 4)

(Splus has this rather differently, since dd becomes a call to list()
rather than a list of promises:

S> c(xx,dd)
f(x = 2, y = 1, list, z = 3, 4)
S> as.call(c(as.list(xx),dd))
f(x = 2, y = 1, list, z = 3, 4)

...but at least gives the same in both cases)

Also, the names of arguments added with [[<- is getting dropped if a
new element is required:

> xx[["abc"]]<-123
> xx
f(x = 2, y = 1, 123)

S has what I'd expect there:

S> xx[["abc"]]<-123
S> xx
f(x = 2, y = 1, abc = 123)

[R-0.99.0 prerelease on RedHat6.1, but this is likely not a new thing.]

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

==> 412.audit <==
Wed Feb 16 19:26:57 2000	ripley	moved from incoming to Language
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
* PR# 408 *
Subject: convolution bug
From: wsimpson@gcal.ac.uk
Date: Fri, 28 Jan 2000 11:17:36 +0100 (MET)
-- no notes --
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 408 <==
From wsimpson@gcal.ac.uk  Fri Jan 28 11:17:36 2000
Received: from localhost (blueberry [130.225.108.193])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id LAA11325
	for <R-bugs@biostat.ku.dk>; Fri, 28 Jan 2000 11:17:36 +0100 (MET)
Date: Fri, 28 Jan 2000 11:17:36 +0100 (MET)
From: wsimpson@gcal.ac.uk
Message-Id: <200001281017.LAA11325@pubhealth.ku.dk>
To: R-bugs@biostat.ku.dk
Subject: convolution bug

Full_Name: Bill Simpson
Version: 65.1 , 0.90.1
OS: Linux
Submission from: (NULL) (193.62.250.209)


I reported this on r-help, but here is official bug report.

The present convolve() does not do convolution by default. Its default behaviour
is
correlation. This is a bug.

The default argument conj should be set to FALSE.

The zero-padding should be on the right for linear convolution (don't ask me
why you call this type="open"; I suggest type="linear").

Here is what I expect linear convolution to do:
myconvolve<-function (x,h) 
{
    nx <- length(x)
    nh <- length(h)
    #zero pad
    if(nx>nh)
       {
       x <- c(x,rep(0, nh-1))
       h<-c(h,rep(0,nx-1))
       }
    else
       {
       h <- c(h,rep(0, nx-1))
       x<-c(x,rep(0,nh-1))
       }
    x <- fft(fft(x) * fft(h), inv = TRUE)
    Re(x)/length(x)
#I am not sure about this, the R IFFT is weird
}

What "circular" convolution should do is just
eliminate the zero-padding:

myconvolve2<-function (x,h)
{
#no padding, circular convolution
    nx <- length(x)
    nh <- length(h)
    x <- fft(fft(x) * fft(h), inv = TRUE)
    Re(x)/(nx)
}


I suggest that you create two functions, convolve() and correlate(), and get
rid
of the conj argument in convolve().

==> 408.audit <==
Wed Feb 16 19:28:42 2000	ripley	moved from incoming to Language
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

Directory:  Low-level

* PR# 505 *
Subject: interrupted save 
From: Thomas Lumley <thomas@biostat.washington.edu>
Date: Sat, 25 Mar 2000 12:16:50 -0800 (PST)
-- no notes --
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 505 <==
From thomas@biostat.washington.edu  Sat Mar 25 21:16:39 2000
Received: from mail.biostat.washington.edu (mail.biostat.washington.edu [128.95.113.21])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id VAA08785
	for <R-bugs@biostat.ku.dk>; Sat, 25 Mar 2000 21:16:38 +0100 (MET)
Received: from mail.biostat.washington.edu (mail.biostat.washington.edu [128.95.113.21])
	by mail.biostat.washington.edu (8.9.3+Sun/8.9.1-fetrow-99-05-16b) with ESMTP id MAA24561
	for <R-bugs@biostat.ku.dk>; Sat, 25 Mar 2000 12:16:50 -0800 (PST)
Date: Sat, 25 Mar 2000 12:16:50 -0800 (PST)
From: Thomas Lumley <thomas@biostat.washington.edu>
To: R-bugs@biostat.ku.dk
Subject: interrupted save 
In-Reply-To: <Pine.GSO.4.21.0003251204350.22429-100000@mail.biostat.washington.edu>
Message-ID: <Pine.GSO.4.21.0003251207350.22429-100000@mail.biostat.washington.edu>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII


If an error occurs during a save the file does not appear to be
closed and buffers flushed.  This can lead to corruption if the same
filename is used later and then the buffer is flushed on program exit.

For example, tn the context of PR #504

 f<-function(x,...){ function(y) list(x=x,y=y,...)}
 a<-f(1,2,3)
 save(list="a",file="a.rdata")  ## -- error --
 b<-1:10
 save(list="b",file="a.rdata")
 load("a.rdata")  ## works
 q("no")
 
 R

 load("a.rdata")  ## error



This is R1.0 on Linux

	-thomas

Thomas Lumley
Assistant Professor, Biostatistics
University of Washington, Seattle


==> 505.audit <==
Thu Apr 13 06:21:36 2000	ripley	moved from incoming to Low-level
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

Directory:  Misc

* PR# 829 *
Subject: variables in nls
From: baron@cattell.psych.upenn.edu
Date: Sun, 28 Jan 2001 15:07:27 +0100 (MET)
--need to get all.vars to skip blank variable names,
--or patch nls to workaround this.
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 829 <==
From baron@cattell.psych.upenn.edu  Sun Jan 28 15:07:27 2001
Received: from blueberry.kubism.ku.dk (blueberry [130.225.108.193])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id PAA11909
	for <R-bugs@biostat.ku.dk>; Sun, 28 Jan 2001 15:07:27 +0100 (MET)
Date: Sun, 28 Jan 2001 15:07:27 +0100 (MET)
From: baron@cattell.psych.upenn.edu
Message-Id: <200101281407.PAA11909@pubhealth.ku.dk>
To: R-bugs@biostat.ku.dk
Subject: variables in nls

Full_Name: Jonathan Baron
Version: 1.2.1
OS: Linux
Submission from: (NULL) (151.197.202.231)


The following gives an error message:
> nls(doit[2,] ~ 7/(1 + exp(a*efft[2,])),start=c(a=-.1))
Error in as.name(varName) : attempt to use zero-length variable name

The following runs fine:
> nls(doit.vm ~ 7/(1 + exp(a*efft.vm)),start=c(a=-.1))

This happens even though doit.vm and doit[2,] are identical (and efft[])


==> 829.followup.1 <==
From ligges@statistik.uni-dortmund.de  Sun Jan 28 16:00:19 2001
Received: from nx5.HRZ.Uni-Dortmund.DE (nx5.HRZ.Uni-Dortmund.DE [129.217.131.21])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id QAA12050
	for <R-bugs@biostat.ku.dk>; Sun, 28 Jan 2001 16:00:18 +0100 (MET)
Received: from amadeus.statistik.uni-dortmund.de by nx5.HRZ.Uni-Dortmund.DE
          via smtp-local with ESMTP; Sun, 28 Jan 2001 16:00:31 +0100
Received: from dial-142059.HRZ.Uni-Dortmund.DE (dial-142059.HRZ.Uni-Dortmund.DE [129.217.142.59])
	by amadeus.statistik.uni-dortmund.de (8.9.3+Sun/8.9.3) with ESMTP id QAA19025;
	Sun, 28 Jan 2001 16:00:29 +0100 (MET)
Date: Sun, 28 Jan 2001 16:01:27 +0100 (CET)
From: Uwe Ligges <ligges@statistik.uni-dortmund.de>
To: baron@cattell.psych.upenn.edu
cc: r-devel@stat.math.ethz.ch, R-bugs@biostat.ku.dk
Subject: Re: [Rd] variables in nls (PR#829)
In-Reply-To: <200101281407.PAA11919@pubhealth.ku.dk>
Message-ID: <Pine.LNX.4.21.0101281543001.943-100000@rechenknecht.statistik.uni-dortmund.de>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII



On Sun, 28 Jan 2001 baron@cattell.psych.upenn.edu wrote:

> Full_Name: Jonathan Baron
> Version: 1.2.1
> OS: Linux
> Submission from: (NULL) (151.197.202.231)
> 
> 
> The following gives an error message:
> > nls(doit[2,] ~ 7/(1 + exp(a*efft[2,])),start=c(a=-.1))
> Error in as.name(varName) : attempt to use zero-length variable name
> 
> The following runs fine:
> > nls(doit.vm ~ 7/(1 + exp(a*efft.vm)),start=c(a=-.1))
> 
> This happens even though doit.vm and doit[2,] are identical (and efft[])
> 

Looks like a problem (?) with all.vars():

 temp <- matrix(1:4, 2)
 all.vars(temp ~ 3) # OK
[1] "temp"

 all.vars(temp[1, ] ~ 3) # Here is the problem. 
[1] "temp" ""

 all.vars(temp[1, TRUE] ~ 3) # works again
[1] "temp"


If this is expected (?), because of an implicitly given empty variable
name ([1, ThisOne]) for example, nls() has to be fixed:


Just insert after the lines
 
  varNames <- varNames[is.na(match(varNames, names(start),
        nomatch = NA))]

the line 

  varNames <- varNames[varNames != ""]



Uwe Ligges


==> 829.reply.1 <==
From pd@biostat.ku.dk  Sun Jan 28 16:19:02 2001
Received: from biostat.ku.dk (blueberry [130.225.108.193])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id QAA12113;
	Sun, 28 Jan 2001 16:19:01 +0100 (MET)
Received: (from pd@localhost)
	by biostat.ku.dk (8.9.3/8.9.3) id QAA28873;
	Sun, 28 Jan 2001 16:22:17 +0100
Sender: pd@blueberry.kubism.ku.dk
To: Uwe Ligges <ligges@statistik.uni-dortmund.de>
Cc: baron@cattell.psych.upenn.edu, r-devel@stat.math.ethz.ch,
        R-bugs@biostat.ku.dk
Subject: Re: [Rd] variables in nls (PR#829)
References: <Pine.LNX.4.21.0101281543001.943-100000@rechenknecht.statistik.uni-dortmund.de>
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 28 Jan 2001 16:22:17 +0100
In-Reply-To: Uwe Ligges's message of "Sun, 28 Jan 2001 16:01:27 +0100 (CET)"
Message-ID: <x2zogbzopi.fsf@blueberry.kubism.ku.dk>
Lines: 35
X-Mailer: Gnus v5.7/Emacs 20.7
Mime-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: 7bit

Uwe Ligges <ligges@statistik.uni-dortmund.de> writes:

> Looks like a problem (?) with all.vars():
> 
>  temp <- matrix(1:4, 2)
>  all.vars(temp ~ 3) # OK
> [1] "temp"
> 
>  all.vars(temp[1, ] ~ 3) # Here is the problem. 
> [1] "temp" ""
> 
>  all.vars(temp[1, TRUE] ~ 3) # works again
> [1] "temp"
> 
> 
> If this is expected (?), because of an implicitly given empty variable
> name ([1, ThisOne]) for example, nls() has to be fixed:
> 
> 
> Just insert after the lines
>  
>   varNames <- varNames[is.na(match(varNames, names(start),
>         nomatch = NA))]
> 
> the line 
> 
>   varNames <- varNames[varNames != ""]

Thanks for the workaround, Uwe. In the longer run it is probably
better to make all.vars skip empty variable names.
-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

==> 829.audit <==
Wed Feb  7 08:54:24 2001	ripley	changed notes
Wed Feb  7 08:54:24 2001	ripley	foobar
Wed Feb  7 08:54:24 2001	ripley	moved from incoming to Misc
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

Directory:  Models

none

Directory:  Startup

* PR# 486 *
Subject: Re: autoload error in profile {was anova-bug in R-version  1.0.0?}
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Tue, 14 Mar 2000 10:32:43 +0100 (MET)
--workaround to the origin problem in 1.0.1
--New report: try does not work from the profile.
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 486 <==
From maechler@stat.math.ethz.ch  Tue Mar 14 10:32:36 2000
Received: from stat.math.ethz.ch (daemon@hypatia.ethz.ch [129.132.58.23])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id KAA17249
	for <R-bugs@biostat.ku.dk>; Tue, 14 Mar 2000 10:32:35 +0100 (MET)
Received: (from daemon@localhost)
	by stat.math.ethz.ch (8.9.1/8.9.1) id KAA21252;
	Tue, 14 Mar 2000 10:32:48 +0100 (MET)
Received: from lynne(129.132.58.30), claiming to be "lynne.ethz.ch"
 via SMTP by hypatia, id smtpdAAAa005C1; Tue Mar 14 10:32:44 2000
Received: (maechler@localhost) by lynne.ethz.ch (8.9.3/D-MATH-client) id KAA03934; Tue, 14 Mar 2000 10:32:44 +0100
X-Authentication-Warning: lynne.ethz.ch: maechler set sender to maechler@stat.math.ethz.ch using -f
From: Martin Maechler <maechler@stat.math.ethz.ch>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
Message-ID: <14542.1851.731086.380@lynne.ethz.ch>
Date: Tue, 14 Mar 2000 10:32:43 +0100 (MET)
To: Prof Brian D Ripley <ripley@stats.ox.ac.uk>
Cc: R-bugs@stat.math.ethz.ch
Subject: Re: autoload error in profile {was anova-bug in R-version  1.0.0?}
 (PR#470)
In-Reply-To: <Pine.GSO.4.05.10003071100180.20079-100000@auk.stats>
References: <14532.56910.278837.379365@lynne.ethz.ch>
	<Pine.GSO.4.05.10003071100180.20079-100000@auk.stats>
X-Mailer: VM 6.75 under Emacs 20.6.1
Reply-To: Martin Maechler <maechler@stat.math.ethz.ch>

>>>>> "BDR" == Prof Brian D Ripley <ripley@stats.ox.ac.uk> writes:

    BDR> On Tue, 7 Mar 2000, Martin Maechler wrote:
    >> >>>>> "BDR" == Prof Brian D Ripley <ripley@stats.ox.ac.uk> writes:
    >> 
    BDR> On Tue, 7 Mar 2000, Trenkler, Dietrich wrote:
    >> >> I think I've discovered what went wrong.
    >> >> 
    >> >> My workspace included a function wilcox.test formerly copied from
    >> >> ctest. Now ctest ist part of the distribution and because of that I
    >> >> always got the message:
    >> >> 
    >> >> [Previously saved workspace restored]
    >> >> 
    >> >> Error in autoload("wilcox.test", "ctest") :
    >> >> Object already exists
    >> >> 
    >> >> I didn't take care of this message. Now I removed wilcox.test, saved
    >> >> the WS, restarted R without the vanilla-option and alas, anova
    >> >> now works.
    >> >> 
    >> >> It seems that R stops initializing after encountering the error
    >> >> mentioned above. Is this correct?   
    >> 
    BDR> Yes, in that the rest of the system Rprofile file is skipped
    BDR> and hence options show.signif.stars and show.coef.Pvalues are not set.
    >> but other options as well..
    >> I think this shouldn't happen and *is* a bug.

    BDR> It looks to me as if a bit more protection is needed in print.coefmat,
    BDR> at least.

	 which Brian has implemented in the mean time.

	 ....

    >> For the 1.0.x patches, at least, I'll move the autoload()'s to the end of
    >> profile/Common.R

    BDR> I _think_ they should have try() around them, which is what S-PLUS 
    BDR> now does with all startup code.

I tried this, but it does not work :

try(autoload(..)) works okay when used after startup, but not *during*
startup.  However, I'll put a workaround into Common.R

Should this {try(.) not working during startup} be another bug report ?

Martin

==> 486.audit <==
Sat Mar 25 09:44:47 2000	maechler	moved from incoming to Startup
Sat Apr 08 07:41:36 2000	ripley	changed notes
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

Directory:  System-specific

* PR# 838 *
Subject: Linux shared library problem
From: daniel.egloff@dplanet.ch
Date: Sun, 4 Feb 2001 22:37:31 +0100 (MET)
--RedHat 7.0: need updates?
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 838 <==
From daniel.egloff@dplanet.ch  Sun Feb  4 22:37:33 2001
Received: from blueberry.kubism.ku.dk (blueberry [130.225.108.193])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id WAA28582
	for <R-bugs@biostat.ku.dk>; Sun, 4 Feb 2001 22:37:31 +0100 (MET)
Date: Sun, 4 Feb 2001 22:37:31 +0100 (MET)
From: daniel.egloff@dplanet.ch
Message-Id: <200102042137.WAA28582@pubhealth.ku.dk>
To: R-bugs@biostat.ku.dk
Subject: Linux shared library problem

Full_Name: Daniel Egloff
Version: 1.2.1
OS: Linux Redhat 7.0
Submission from: (NULL) (212.35.34.200)


Externals in the shared library libc.so.6 not found. See the 
following R session, with the abort message at the end.

> demo(graphics)
 
 
        demo(graphics)
        ---- ~~~~~~~~
 
Type  <Return>   to start :
 
> opar <- par(ask = interactive() && (.Device %in% c("X11",
    "GTK", "windows", "Macintosh")))
 
> x <- rnorm(50)
 
> opar <- c(opar, par(bg = "white"))
 
> plot(x, ann = FALSE, type = "n")
Hit <Return> to see next plot:
 
> abline(h = 0, col = gray(0.9))
 
> lines(x, col = "green4", lty = "dotted")
 
> points(x, bg = "limegreen", pch = 21)
 
> title(main = "Simple Use of Color In a Plot", xlab = "Just a Whisper of a
Label",
    col.main = "blue", col.lab = gray(0.8), cex.main = 1.2, cex.lab = 1,
    font.main = 4, font.lab = 3)
 
> par(bg = "gray")
 
> piechart(rep(1, 24), col = rainbow(24), radius = 0.9)
Hit <Return> to see next plot:
 
> title(main = "A Sample Color Wheel", cex.main = 1.4,
    font.main = 3)
 
> title(xlab = "(Use this as a test of monitor linearity)",
    cex.lab = 0.8, font.lab = 3)
 
> pie.sales <- c(0.12, 0.3, 0.26, 0.16, 0.04, 0.12)
 
> names(pie.sales) <- c("Blueberry", "Cherry", "Apple",
    "Boston Cream", "Other", "Vanilla Cream")
 
> piechart(pie.sales, col = c("purple", "violetred1",
    "green3", "cornsilk", "cyan", "white"))
Hit <Return> to see next plot:
/usr/lib/R/bin/R.bin: error while loading shared libraries:
/usr/lib/R/bin/R.bin: symbol __sysconf, version GLIBC_2.2 not defined in file
libc.so.6 with link time reference
[dani@PLUTO amopt_sim]$             

==> 838.reply.1 <==
From pd@biostat.ku.dk  Sun Feb  4 23:28:22 2001
Received: from biostat.ku.dk (blueberry [130.225.108.193])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id XAA28730;
	Sun, 4 Feb 2001 23:28:21 +0100 (MET)
Received: (from pd@localhost)
	by biostat.ku.dk (8.9.3/8.9.3) id XAA18122;
	Sun, 4 Feb 2001 23:32:41 +0100
Sender: pd@blueberry.kubism.ku.dk
To: daniel.egloff@dplanet.ch
Cc: r-devel@stat.math.ethz.ch, R-bugs@biostat.ku.dk
Subject: Re: [Rd] Linux shared library problem (PR#838)
References: <200102042137.WAA28592@pubhealth.ku.dk>
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 04 Feb 2001 23:32:41 +0100
In-Reply-To: daniel.egloff@dplanet.ch's message of "Sun, 4 Feb 2001 22:37:36 +0100 (MET)"
Message-ID: <x2d7cyf59y.fsf@blueberry.kubism.ku.dk>
Lines: 32
X-Mailer: Gnus v5.7/Emacs 20.7
Mime-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: 7bit

daniel.egloff@dplanet.ch writes:

> Full_Name: Daniel Egloff
> Version: 1.2.1
> OS: Linux Redhat 7.0
> Submission from: (NULL) (212.35.34.200)
> 
> 
> Externals in the shared library libc.so.6 not found. See the 
> following R session, with the abort message at the end.
> 
....
> > piechart(pie.sales, col = c("purple", "violetred1",
>     "green3", "cornsilk", "cyan", "white"))
> Hit <Return> to see next plot:
> /usr/lib/R/bin/R.bin: error while loading shared libraries:
> /usr/lib/R/bin/R.bin: symbol __sysconf, version GLIBC_2.2 not defined in file
> libc.so.6 with link time reference
> [dani@PLUTO amopt_sim]$             

if (you.compiled.it) {
    have.you(updated.gcc)   # need 2.96-69 or better
    have.you(updated.glibc) # at -12 now. I think the orig caused trouble 
} else {
    have.you(correct.rpm)   # need the one for 7.0
    have.you(updated.glibc) # at -12 now. I think the orig caused trouble 
}
-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

==> 838.audit <==
Wed Feb  7 08:55:25 2001	ripley	changed notes
Wed Feb  7 08:55:25 2001	ripley	foobar
Wed Feb  7 08:55:25 2001	ripley	moved from incoming to System-specific
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
* PR# 822 *
Subject: Re: Sys.time dumps core at start-up
From: Peter Kleiweg <kleiweg@let.rug.nl>
Date: Tue, 23 Jan 2001 19:56:32 +0100 (CET)
--part of 821
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 822 <==
From postmaster@franz.stat.wisc.edu  Tue Jan 23 19:56:24 2001
Received: from franz.stat.wisc.edu (franz.stat.wisc.edu [128.105.174.95])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id TAA29852
	for <r-bugs@biostat.ku.dk>; Tue, 23 Jan 2001 19:56:23 +0100 (MET)
Received: from kleigh.nl (really [129.125.8.138]) by franz.stat.wisc.edu
	via in.smtpd with esmtp (ident peter using rfc1413)
	id <m14L8cN-000IWyC@franz.stat.wisc.edu> (Debian Smail3.2.0.102)
	for <r-bugs@r-project.org>; Tue, 23 Jan 2001 12:56:35 -0600 (CST) 
Received: from localhost (peter@localhost)
	by kleigh.nl (8.8.7/8.8.7) with ESMTP id TAA01554
	for <r-bugs@r-project.org>; Tue, 23 Jan 2001 19:56:32 +0100
X-Authentication-Warning: kleigh.nl: peter owned process doing -bs
Date: Tue, 23 Jan 2001 19:56:32 +0100 (CET)
From: Peter Kleiweg <kleiweg@let.rug.nl>
X-Sender: peter@kleigh.nl
To: r-bugs@r-project.org
Subject: Re: Sys.time dumps core at start-up
In-Reply-To: <Pine.LNX.4.21.0101231943020.638-100000@kleigh.nl>
Message-ID: <Pine.LNX.4.21.0101231947170.638-100000@kleigh.nl>
Organization: Alfa-Informatica, Rijksuniversiteit Groningen
X-Alert: http://www.opensource.org/halloween/
X-Face: "K~X:~!ydgSdjNy;]_+BCb\OM^pqyg_q*Le84$l46M\-mL=.^,L4B}bDK>`o#r4_>O*
X-Mailer: Pine 4.21, Linux 2.0.36, i586
X-No-Archive: Yes
X-Reason: http://www.infidels.org/
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII

Peter Kleiweg skriver...

> R dumps core if the first command I use is Sys.time():
> 
>     > Sys.time()
>     Segmentation fault (core dumped) 

(peter) ~ R -d gdb

[snip]

GDB 4.16 (i386-redhat-linux), Copyright 1996 Free Software Foundation, Inc...
(gdb) run
Starting program: /usr/local/R/lib/R/bin/R.bin

R : Copyright 2001, The R Development Core Team
Version 1.2.1  (2001-01-15)

[snip]

Type `q()' to quit R.

> Sys.time()

Program received signal SIGSEGV, Segmentation fault.
0x401029ce in strftime () at strftime.c:287
strftime.c:287: No such file or directory.
(gdb)        


-- 
Peter Kleiweg


==> 822.audit <==
Thu Jan 25 00:01:55 2001	ripley	changed notes
Thu Jan 25 00:01:55 2001	ripley	foobar
Thu Jan 25 00:01:55 2001	ripley	moved from incoming to System-specific
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
* PR# 821 *
Subject: Sys.time dumps core at start-up
From: Peter Kleiweg <kleiweg@let.rug.nl>
Date: Tue, 23 Jan 2001 19:44:28 +0100 (CET)
--See also 822, which shows the segfault is in strftime.c.
--From other correspondence, this is on RH5.0: we can't
--reproduce it on RH6.2 or anywhere else.
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 821 <==
From postmaster@franz.stat.wisc.edu  Tue Jan 23 19:45:14 2001
Received: from franz.stat.wisc.edu (franz.stat.wisc.edu [128.105.174.95])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id TAA29789
	for <r-bugs@biostat.ku.dk>; Tue, 23 Jan 2001 19:45:13 +0100 (MET)
Received: from kleigh.nl (really [129.125.8.136]) by franz.stat.wisc.edu
	via in.smtpd with esmtp (ident root using rfc1413)
	id <m14L8RY-000IWyC@franz.stat.wisc.edu> (Debian Smail3.2.0.102)
	for <r-bugs@r-project.org>; Tue, 23 Jan 2001 12:45:24 -0600 (CST) 
Received: from localhost (peter@localhost)
	by kleigh.nl (8.8.7/8.8.7) with ESMTP id TAA01266
	for <r-bugs@r-project.org>; Tue, 23 Jan 2001 19:44:28 +0100
X-Authentication-Warning: kleigh.nl: peter owned process doing -bs
Date: Tue, 23 Jan 2001 19:44:28 +0100 (CET)
From: Peter Kleiweg <kleiweg@let.rug.nl>
X-Sender: peter@kleigh.nl
To: r-bugs@r-project.org
Subject: Sys.time dumps core at start-up
Message-ID: <Pine.LNX.4.21.0101231943020.638-100000@kleigh.nl>
Organization: Alfa-Informatica, Rijksuniversiteit Groningen
X-Alert: http://www.opensource.org/halloween/
X-Face: "K~X:~!ydgSdjNy;]_+BCb\OM^pqyg_q*Le84$l46M\-mL=.^,L4B}bDK>`o#r4_>O*
X-Mailer: Pine 4.21, Linux 2.0.36, i586
X-No-Archive: Yes
X-Reason: http://www.infidels.org/
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII


R dumps core if the first command I use is Sys.time():

    > Sys.time()
    Segmentation fault (core dumped) 

This works fine:

    > s <- Sys.time()
    > s
    [1] "2001-01-23 19:38:49 CET"

This works fine too:

    > 1+1
    [1] 2
    > Sys.time()
    [1] "2001-01-23 19:40:56 CET"

--please do not edit the information below--

Version:
 platform = i586-pc-linux-gnu
 arch = i586
 os = linux-gnu
 system = i586, linux-gnu
 status = 
 major = 1
 minor = 2.1
 year = 2001
 month = 01
 day = 15
 language = R

Search Path:
 .GlobalEnv, package:ctest, Autoloads, package:base

-- 
Peter Kleiweg
http://www.let.rug.nl/~kleiweg/


==> 821.followup.1 <==
From ripley@stats.ox.ac.uk  Tue Jan 23 20:00:04 2001
Received: from toucan.stats.ox.ac.uk (toucan.stats.ox.ac.uk [163.1.20.20])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id UAA29889
	for <R-bugs@biostat.ku.dk>; Tue, 23 Jan 2001 20:00:03 +0100 (MET)
Received: from max102.public.ox.ac.uk (max102.public.ox.ac.uk [192.76.27.102])
	by toucan.stats.ox.ac.uk (8.9.0/8.9.0) with ESMTP id TAA03198;
	Tue, 23 Jan 2001 19:00:09 GMT
Date: Tue, 23 Jan 2001 18:58:51 +0000 (GMT)
From: Prof Brian D Ripley <ripley@stats.ox.ac.uk>
Sender: <ripley@auk.stats>
To: <kleiweg@let.rug.nl>
cc: <R-bugs@biostat.ku.dk>
Subject: Re: [Rd] Sys.time dumps core at start-up (PR#821)
In-Reply-To: <200101231845.TAA29799@pubhealth.ku.dk>
Message-ID: <Pine.GSO.4.31.0101231857580.803-100000@auk.stats>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII

On Tue, 23 Jan 2001 kleiweg@let.rug.nl wrote:

>
> R dumps core if the first command I use is Sys.time():
>
>     > Sys.time()
>     Segmentation fault (core dumped)
>
> This works fine:
>
>     > s <- Sys.time()
>     > s
>     [1] "2001-01-23 19:38:49 CET"
>
> This works fine too:
>
>     > 1+1
>     [1] 2
>     > Sys.time()
>     [1] "2001-01-23 19:40:56 CET"

It does not fail on my RH6.2 systems, so can you debug it please?

>
> --please do not edit the information below--
>
> Version:
>  platform = i586-pc-linux-gnu
>  arch = i586
>  os = linux-gnu
>  system = i586, linux-gnu
>  status =
>  major = 1
>  minor = 2.1
>  year = 2001
>  month = 01
>  day = 15
>  language = R
>
> Search Path:
>  .GlobalEnv, package:ctest, Autoloads, package:base
>
> --
> Peter Kleiweg
> http://www.let.rug.nl/~kleiweg/
>
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


==> 821.audit <==
Thu Jan 25 00:05:20 2001	ripley	changed notes
Thu Jan 25 00:05:20 2001	ripley	foobar
Thu Jan 25 00:05:20 2001	ripley	moved from incoming to System-specific
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

Directory:  TooMuchAtOnce

* PR# 811 *
Subject: problem with strptime example (and mention of bug.report)
From: Stephen Eglen <stephen@anc.ed.ac.uk>
Date: Thu, 11 Jan 2001 19:18:39 GMT
--1) On OSF4, strptime is deficient. Nothing we can do.
--
--2) On Windows NT, the strptime problems are (i) German locale, English dates,
--(ii) Windows system errors with unknown DST (it move times to DST).
--(i) now has another warning in the help file (there already was one).
--(ii) was already worked around for 1.2.1.
--
--3) bug.report() uses a mailer option that does not exist on OSF4.
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 811 <==
From postmaster@franz.stat.wisc.edu  Thu Jan 11 22:22:48 2001
Received: from franz.stat.wisc.edu (franz.stat.wisc.edu [128.105.174.95])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id WAA26396
	for <r-bugs@biostat.ku.dk>; Thu, 11 Jan 2001 22:22:47 +0100 (MET)
Received: from mango.cns.ed.ac.uk (really [129.215.238.26]) by franz.stat.wisc.edu
	via in.smtpd with esmtp
	id <m14GnFH-000IXTC@franz.stat.wisc.edu> (Debian Smail3.2.0.102)
	for <r-bugs@r-project.org>; Thu, 11 Jan 2001 13:18:47 -0600 (CST) 
Received: (from stephen@localhost)
	by mango.cns.ed.ac.uk (8.9.1/8.9.1) id TAA06239;
	Thu, 11 Jan 2001 19:18:39 GMT
Date: Thu, 11 Jan 2001 19:18:39 GMT
Message-Id: <200101111918.TAA06239@mango.cns.ed.ac.uk>
From: Stephen Eglen <stephen@anc.ed.ac.uk>
To: r-bugs@r-project.org
Subject: problem with strptime example (and mention of bug.report)

Hi,

The help file for strptime has the following code which doesn't work
for me:

     ## read in date info in format `ddmmmyyyy'
     x <- c("1jan1960", "2jan1960", "31mar1960", "30jul1960")
     z <- strptime(x, "%d%b%Y")
> z
[1] "NA" "NA" "NA" "NA"

Do these work for other people?

whereas it works fine if I use a separator (/) in the date@

> strptime("9/Feb/1960", "%d/%b/%Y")
[1] "1960-02-09"

> strptime("9Feb1960", "%d%b%Y")
[1] "NA"

Stephen

p.s. I failed to send this using bug.report(); on DEC OSF/1, "mailx"
does not recognise the -c switch for setting the carbon copy (CC)
field, causing an error.  One solution might be to remove the -c
argument from the cmdarg in bug.rerport(), or put a 
"~c joe@bloggs.com" directive at the end of the file to set the CC field.

--please do not edit the information below--

Version:
 platform = alphaev56-dec-osf4.0f
 arch = alphaev56
 os = osf4.0f
 system = alphaev56, osf4.0f
 status = 
 major = 1
 minor = 2.0
 year = 2000
 month = 12
 day = 15
 language = R

Search Path:
 .GlobalEnv, package:ctest, Autoloads, package:base


==> 811.followup.1 <==
From ripley@stats.ox.ac.uk  Thu Jan 11 22:54:32 2001
Received: from toucan.stats.ox.ac.uk (toucan.stats.ox.ac.uk [163.1.20.20])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id WAA27090
	for <R-bugs@biostat.ku.dk>; Thu, 11 Jan 2001 22:54:31 +0100 (MET)
Received: from localhost (ripley@localhost)
	by toucan.stats.ox.ac.uk (8.9.0/8.9.0) with ESMTP id VAA05133;
	Thu, 11 Jan 2001 21:54:44 GMT
X-Authentication-Warning: toucan.stats: ripley owned process doing -bs
Date: Thu, 11 Jan 2001 21:54:43 +0000 (GMT)
From: Prof Brian Ripley <ripley@stats.ox.ac.uk>
X-X-Sender:  <ripley@toucan.stats>
To: <stephen@anc.ed.ac.uk>
cc: <R-bugs@biostat.ku.dk>
Subject: Re: [Rd] problem with strptime example (PR#811)
In-Reply-To: <200101112122.WAA26408@pubhealth.ku.dk>
Message-ID: <Pine.GSO.4.31.0101112146290.5126-100000@toucan.stats>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII

On Thu, 11 Jan 2001 stephen@anc.ed.ac.uk wrote:

> Hi,
>
> The help file for strptime has the following code which doesn't work
> for me:
>
>      ## read in date info in format `ddmmmyyyy'
>      x <- c("1jan1960", "2jan1960", "31mar1960", "30jul1960")
>      z <- strptime(x, "%d%b%Y")
> > z
> [1] "NA" "NA" "NA" "NA"
>
> Do these work for other people?

Yes, on several platforms.  It will be a problem with your OS's strptime
code.  It must be, I think, as the alternative we supply works.

> whereas it works fine if I use a separator (/) in the date@
>
> > strptime("9/Feb/1960", "%d/%b/%Y")
> [1] "1960-02-09"
>
> > strptime("9Feb1960", "%d%b%Y")
> [1] "NA"

We really do not put out new features without testing them!


>
> Stephen
>
> p.s. I failed to send this using bug.report(); on DEC OSF/1, "mailx"
> does not recognise the -c switch for setting the carbon copy (CC)
> field, causing an error.  One solution might be to remove the -c
> argument from the cmdarg in bug.rerport(), or put a
> "~c joe@bloggs.com" directive at the end of the file to set the CC field.
>
> --please do not edit the information below--
>
> Version:
>  platform = alphaev56-dec-osf4.0f
>  arch = alphaev56
>  os = osf4.0f
>  system = alphaev56, osf4.0f
>  status =
>  major = 1
>  minor = 2.0
>  year = 2000
>  month = 12
>  day = 15
>  language = R
>
> Search Path:
>  .GlobalEnv, package:ctest, Autoloads, package:base
>
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


==> 811.followup.2 <==
From ligges@statistik.uni-dortmund.de  Fri Jan 12 11:15:33 2001
Received: from nx5.HRZ.Uni-Dortmund.DE (nx5.HRZ.Uni-Dortmund.DE [129.217.131.21])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id LAA02850
	for <R-bugs@biostat.ku.dk>; Fri, 12 Jan 2001 11:15:32 +0100 (MET)
Received: from amadeus.statistik.uni-dortmund.de by nx5.HRZ.Uni-Dortmund.DE
          via smtp-local with ESMTP; Fri, 12 Jan 2001 11:15:34 +0100
Received: from statistik.uni-dortmund.de (hiwi4 [129.217.207.94])
	by amadeus.statistik.uni-dortmund.de (8.9.3+Sun/8.9.3) with ESMTP id LAA13591;
	Fri, 12 Jan 2001 11:15:33 +0100 (MET)
Message-ID: <3A5ED97F.6E808F03@statistik.uni-dortmund.de>
Date: Fri, 12 Jan 2001 11:16:31 +0100
From: Uwe Ligges <ligges@statistik.uni-dortmund.de>
X-Mailer: Mozilla 4.76 [en] (WinNT; U)
X-Accept-Language: en
MIME-Version: 1.0
To: ripley@stats.ox.ac.uk
CC: R-bugs@biostat.ku.dk
Subject: Re: [Rd] problem with strptime example (PR#811)
References: <200101112154.WAA27100@pubhealth.ku.dk>
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit


ripley@stats.ox.ac.uk wrote:
> 
> On Thu, 11 Jan 2001 stephen@anc.ed.ac.uk wrote:
> 
> > Hi,
> >
> > The help file for strptime has the following code which doesn't work
> > for me:
> >
> >      ## read in date info in format `ddmmmyyyy'
> >      x <- c("1jan1960", "2jan1960", "31mar1960", "30jul1960")
> >      z <- strptime(x, "%d%b%Y")
> > > z
> > [1] "NA" "NA" "NA" "NA"
> >
> > Do these work for other people?
> 
> Yes, on several platforms.  It will be a problem with your OS's strptime
> code.  It must be, I think, as the alternative we supply works.
> 
> > whereas it works fine if I use a separator (/) in the date@
> >
> > > strptime("9/Feb/1960", "%d/%b/%Y")
> > [1] "1960-02-09"
> >
> > > strptime("9Feb1960", "%d%b%Y")
> > [1] "NA"
> 
> We really do not put out new features without testing them!


Also very strange on WinNT4.0 (R-1.2.0): 


  x <- c("1jan1960", "2jan1960", "31mar1960", "30jul1960")
  z <- strptime(x, "%d%b%Y")
  z
[1] "1960-01-01 01:00:00" "1960-01-02 01:00:00" "NA"                 
"1960-07-30 01:00:00"


Uwe Ligges

==> 811.followup.3 <==
From ripley@stats.ox.ac.uk  Fri Jan 12 11:56:09 2001
Received: from toucan.stats.ox.ac.uk (toucan.stats.ox.ac.uk [163.1.20.20])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id LAA03586
	for <R-bugs@biostat.ku.dk>; Fri, 12 Jan 2001 11:56:09 +0100 (MET)
Received: from localhost (ripley@localhost)
	by toucan.stats.ox.ac.uk (8.9.0/8.9.0) with ESMTP id KAA06620;
	Fri, 12 Jan 2001 10:52:36 GMT
X-Authentication-Warning: toucan.stats: ripley owned process doing -bs
Date: Fri, 12 Jan 2001 10:52:36 +0000 (GMT)
From: Prof Brian Ripley <ripley@stats.ox.ac.uk>
X-X-Sender:  <ripley@toucan.stats>
To: Uwe Ligges <ligges@statistik.uni-dortmund.de>
cc: <R-bugs@biostat.ku.dk>
Subject: Re: [Rd] problem with strptime example (PR#811)
In-Reply-To: <3A5ED97F.6E808F03@statistik.uni-dortmund.de>
Message-ID: <Pine.GSO.4.31.0101121048420.6610-100000@toucan.stats>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII

On Fri, 12 Jan 2001, Uwe Ligges wrote:

>
> ripley@stats.ox.ac.uk wrote:
> >
> > On Thu, 11 Jan 2001 stephen@anc.ed.ac.uk wrote:
> >
> > > Hi,
> > >
> > > The help file for strptime has the following code which doesn't work
> > > for me:
> > >
> > >      ## read in date info in format `ddmmmyyyy'
> > >      x <- c("1jan1960", "2jan1960", "31mar1960", "30jul1960")
> > >      z <- strptime(x, "%d%b%Y")
> > > > z
> > > [1] "NA" "NA" "NA" "NA"
> > >
> > > Do these work for other people?
> >
> > Yes, on several platforms.  It will be a problem with your OS's strptime
> > code.  It must be, I think, as the alternative we supply works.
> >
> > > whereas it works fine if I use a separator (/) in the date@
> > >
> > > > strptime("9/Feb/1960", "%d/%b/%Y")
> > > [1] "1960-02-09"
> > >
> > > > strptime("9Feb1960", "%d%b%Y")
> > > [1] "NA"
> >
> > We really do not put out new features without testing them!
>
>
> Also very strange on WinNT4.0 (R-1.2.0):
>
>
>   x <- c("1jan1960", "2jan1960", "31mar1960", "30jul1960")
>   z <- strptime(x, "%d%b%Y")
>   z
> [1] "1960-01-01 01:00:00" "1960-01-02 01:00:00" "NA"
> "1960-07-30 01:00:00"

I don't get the NA. The 1am is a Windows bug: this only happens in
times prior to 1970, which for Windows do not exist.  It seems to assume
that if isdst is non-zero, it is DST, rather than for isdst > 0.
I have a workaround, so for 1.2.1 (on my machines) this will behave as
expected.

The date-time functions do depend on OS functions being correct, and
although I have done a lot of workarounds, no doubt more errors will
emerge.


-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


==> 811.audit <==
Sat Jan 13 18:50:59 2001	ripley	changed notes
Sat Jan 13 18:50:59 2001	ripley	foobar
Sat Jan 13 18:50:59 2001	ripley	moved from incoming to TooMuchAtOnce
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

Directory:  Windows

none

Directory:  incoming

* PR# 844 *
Subject: default data= arg to glm()
From: pperkins@ucsd.edu
Date: Fri, 9 Feb 2001 23:04:42 +0100 (MET)
-- no notes --
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 844 <==
From pperkins@ucsd.edu  Fri Feb  9 23:04:43 2001
Received: from blueberry.kubism.ku.dk (blueberry [130.225.108.193])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id XAA08390
	for <R-bugs@biostat.ku.dk>; Fri, 9 Feb 2001 23:04:42 +0100 (MET)
Date: Fri, 9 Feb 2001 23:04:42 +0100 (MET)
From: pperkins@ucsd.edu
Message-Id: <200102092204.XAA08390@pubhealth.ku.dk>
To: R-bugs@biostat.ku.dk
Subject: default data= arg to glm()

Full_Name: Peter Perkins
Version: 1.2.1
OS: LinuxPPC
Submission from: (NULL) (24.4.89.36)


the lines

   if (missing(data)) 
      data <- environment(formula)

in glm() seem to contradict the documentaton:

   data: an optional data frame containing the variables in the model.
         By default the variables are taken from the environment from
         which `glm' is called.

actually, the near lack of other references to "data" is glm() is not
clear to me, so i may have this wrong.  but a small test seems to bear
out the problem:

function () 
{
	form <- y ~ x
	fun1 <- function(f)
	{
		n <- 10
		x <- runif(n, 1, 10)
		y <- rpois(n, x)
		glm(f, family=poisson(link="log"), data=environment())
	}
	fun2 <- function(f)
	{
		n <- 10
		x <- runif(n, 1, 10)
		y <- rpois(n, x)
		glm(f, family=poisson(link="log"))
	}
	print("fit1")
	print(fun1(form)$call)
	print("fit2")
	print(fun2(form)$call)
}

> test()
[1] "fit1"
glm(formula = f, family = poisson(link = "log"), data = environment())
[1] "fit2"
Error in eval(expr, envir, enclos) : Object "y" not found


==> 844.followup.1 <==
From tlumley@u.washington.edu  Fri Feb  9 23:57:12 2001
Received: from jason05.u.washington.edu (root@jason05.u.washington.edu [140.142.8.54])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id XAA08626
	for <R-bugs@biostat.ku.dk>; Fri, 9 Feb 2001 23:57:10 +0100 (MET)
Received: from homer27.u.washington.edu (tlumley@homer27.u.washington.edu [140.142.8.37])
	by jason05.u.washington.edu (8.9.3+UW00.05/8.9.3+UW00.12) with ESMTP id OAA11062;
	Fri, 9 Feb 2001 14:57:21 -0800
Received: from localhost (tlumley@localhost)
	by homer27.u.washington.edu (8.9.3+UW00.05/8.9.3+UW00.12) with ESMTP id OAA155534;
	Fri, 9 Feb 2001 14:57:20 -0800
Date: Fri, 9 Feb 2001 14:57:19 -0800 (PST)
From: Thomas Lumley <tlumley@u.washington.edu>
To: pperkins@ucsd.edu
cc: r-devel@stat.math.ethz.ch, R-bugs@biostat.ku.dk
Subject: Re: [Rd] default data= arg to glm() (PR#844)
In-Reply-To: <200102092204.XAA08400@pubhealth.ku.dk>
Message-ID: <Pine.A41.4.21.0102091417100.82220-100000@homer27.u.washington.edu>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII

On Fri, 9 Feb 2001 pperkins@ucsd.edu wrote:
> 
> the lines
> 
>    if (missing(data)) 
>       data <- environment(formula)
> 
> in glm() seem to contradict the documentaton:
> 
>    data: an optional data frame containing the variables in the model.
>          By default the variables are taken from the environment from
>          which `glm' is called.
> 
> actually, the near lack of other references to "data" is glm() is not
> clear to me, so i may have this wrong.  but a small test seems to bear
> out the problem:

The documentation is slightly out of date.  The current behaviour is that
the variables are taken from the environment in which the model formula is
defined. This will usually, but not always, be the same thing. This
behaviour is new in 1.2.0, and is designed to give functions like
predict() and update() a fighting chance.

However, the line you quote is in fact irrelevant to this. The
variable `data' that it modifies is not used in fitting the model, it is
just returned as part of the result. So, you ask, if the `data' variable
is never used, how is it used?

This is Deep Magic, and probably worth explaining.
A copy of the call to glm() (or other modelling functions) is grabbed by
match.call() and turned into a call to model.frame(). This call is then
evaluated in the parent environment to create a model frame. The
model.matrix() function is then called to create a design matrix from the
model frame.

This is how we fake dynamic scope -- using the values of variables in the
parent environment --  in a language that really has static scope. 

The moral of this is that it pays to put the variables you want to use in
a data frame. It's much easier to find them that way than by playing
clever games with environments.


	-thomas

Thomas Lumley			Asst. Professor, Biostatistics
tlumley@u.washington.edu	University of Washington, Seattle


~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
* PR# 843 *
Subject: Minor doc bug
From: bwheeler@echip.com (Bob Wheeler)
Date: Fri, 09 Feb 2001 12:35:03 -0500
-- no notes --
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 843 <==
From bwheeler@echip.com  Fri Feb  9 18:36:44 2001
Received: from shrike.ravenet.com ([208.212.179.12])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id SAA07603
	for <r-bugs@biostat.ku.dk>; Fri, 9 Feb 2001 18:36:43 +0100 (MET)
Received: from echip.com ([208.0.86.150]) by shrike.ravenet.com
          (Post.Office MTA v3.5.3 release 223 ID# 0-55144U2500L250S0V35)
          with ESMTP id com for <r-bugs@biostat.ku.dk>;
          Fri, 9 Feb 2001 12:46:59 -0500
Message-ID: <3A842A47.814BBFE0@echip.com>
Date: Fri, 09 Feb 2001 12:35:03 -0500
From: bwheeler@echip.com (Bob Wheeler)
Organization: ECHIP
X-Mailer: Mozilla 4.7 [en]C-CCK-MCD NSCPCD47  (WinNT; I)
X-Accept-Language: en
MIME-Version: 1.0
To: r-bugs@biostat.ku.dk
Subject: Minor doc bug
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit

In the doc for split, the factor g is unordered,
so the illustrative code

x <- rnorm(n * nn) + sqrt(codes(g))

should be

x <- rnorm(n * nn) + sqrt(as.numeric(g))


-- 
Bob Wheeler --- (Reply to: bwheeler@echip.com)
        ECHIP, Inc. --- (302) 239-6620, voice and
FAX
           724 Yorklyn Rd., Hockessin, DE 19707
              Randomness comes in bunches
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
* PR# 842 *
Subject: dnbinom(,size<1,)=0
Subject: Re: [R] Goodness of fit to Poisson / NegBinomial
From: Thomas Lumley <tlumley@u.washington.edu>
From: Yudi Pawitan <yudi@stat.ucc.ie>
Date: Thu, 8 Feb 2001 11:44:21 -0800 (PST)
Date: Thu, 08 Feb 2001 17:10:23 +0000
-- no notes --
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 842 <==
From postmaster@franz.stat.wisc.edu  Thu Feb  8 20:44:18 2001
Received: from franz.stat.wisc.edu (franz.stat.wisc.edu [128.105.174.95])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id UAA23110
	for <r-bugs@biostat.ku.dk>; Thu, 8 Feb 2001 20:44:13 +0100 (MET)
Received: from jason03.u.washington.edu (really [140.142.8.11]) by franz.stat.wisc.edu
	via in.smtpd with esmtp
	id <m14QwzQ-000J23C@franz.stat.wisc.edu> (Debian Smail3.2.0.102)
	for <r-bugs@r-project.org>; Thu, 8 Feb 2001 13:44:24 -0600 (CST) 
Received: from homer40.u.washington.edu (tlumley@homer40.u.washington.edu [140.142.16.6])
	by jason03.u.washington.edu (8.9.3+UW00.05/8.9.3+UW00.12) with ESMTP id LAA33614
	for <r-bugs@r-project.org>; Thu, 8 Feb 2001 11:44:23 -0800
Received: from localhost (tlumley@localhost)
	by homer40.u.washington.edu (8.9.3+UW00.05/8.9.3+UW00.12) with ESMTP id LAA170858
	for <r-bugs@r-project.org>; Thu, 8 Feb 2001 11:44:22 -0800
Date: Thu, 8 Feb 2001 11:44:21 -0800 (PST)
From: Thomas Lumley <tlumley@u.washington.edu>
To: r-bugs@r-project.org
Subject: dnbinom(,size<1,)=0
Message-ID: <Pine.A41.4.21.0102081141170.191392-100000@homer40.u.washington.edu>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII


This came up on r-help but indicates a bug.

dnbinom(x,n,p) calls dbinom_raw(n-1,...)
which returns 0 for n<1.

	-thomas


---------- Forwarded message ----------
Date: Thu, 08 Feb 2001 17:10:23 +0000
From: Yudi Pawitan <yudi@stat.ucc.ie>
To: Mark Myatt <mark@myatt.demon.co.uk>
Cc: R-Help <r-help@stat.math.ethz.ch>
Subject: Re: [R] Goodness of fit to Poisson / NegBinomial

Sorry, Mark, the program worked for Rw1011, but this is
what happened in Rw1021:

> dnbinom(0:5,.9,.4)  
[1] 0.4383833 0.0000000 0.0000000 0.0000000 0.0000000 0.0000000   #wrong!!

while, the correct result from Rw1011 is:
>  dnbinom(0:5,.9,.4)
[1] 0.43838329 0.23672698 0.13493438 0.07826194 0.04578323 0.02692054

I have added a corrected dnbinom() below, which makes the program
works  for Rw1021.

-YP-

x_ c(70, 38, 17, 10,  9, 6) 
kk_ 0:5
n_ sum(x)

dnbinom_ function(x,n,p){
         gamma(x+n)/gamma(n)/gamma(x+1)*p^n * (1-p)^x
}

fn_ function(p){
    r_ p[1]
    th_ p[2]
    ll _ -sum(x[1:max(kk)]*log(dnbinom(kk[-length(kk)],r,th))) -
          x[length(kk)]*log(1-pnbinom((max(kk)-1),r,th))
    return(ll)
}

a_ nlm(fn,p=c(.9,.5),hes=T)
est_ a$est

phat_ c(dnbinom(kk[-length(kk)],est[1],est[2]),
        1-pnbinom((max(kk)-1),est[1],est[2]))
E_ n*phat
chi2_ sum((x-E)^2/E)
cat('Chi2 goodness-of-fit = ',chi2,'\n')
cat('P-value=',1-pchisq(chi2,df=length(kk)-1-2),'\n')

print(cbind(O=x,E=round(E,1),err=round((x-E)^2/E,1)))


===========================================
At 02:31 PM 2/8/01 +0000, Mark Wyatt wrote:
>Yudi,
>
>Thanks for this:
>
>>x_ c(70, 38, 17, 10,  9, 6) 
>>kk_ 0:5
>>n_ sum(x)
>>
>>fn_ function(p){
>>    r_ p[1]
>>    th_ p[2]
>>    ll _ -sum(x[1:max(kk)]*log(dnbinom(kk[-length(kk)],r,th))) -
>>          x[length(kk)]*log(1-pnbinom((max(kk)-1),r,th))
>>    return(ll)
>>}
>>
>>a_ nlm(fn,p=c(.9,.5),hes=T)
>>est_ a$est
>>
>>phat_ c(dnbinom(kk[-length(kk)],est[1],est[2]),
>>        1-pnbinom((max(kk)-1),est[1],est[2]))
>>E_ n*phat
>>chi2_ sum((x-E)^2/E)
>>cat('Chi2 goodness-of-fit = ',chi2,'\n')
>>cat('P-value=',1-pchisq(chi2,df=length(kk)-1-2),'\n')
>>
>>print(cbind(O=x,E=round(E,1),err=round((x-E)^2/E,1)))
>
>It is certainly more elegant than anything I would have come up with but
>I just cannot get it to work (Rwin 1.21). The call to nlm() returns:
>
>        Warning messages: 
>        1: NA/Inf replaced by maximum positive value 
>        2: NA/Inf replaced by maximum positive value 
>        3: NA/Inf replaced by maximum positive value 
>        4: NA/Inf replaced by maximum positive value 
>        5: NA/Inf replaced by maximum positive value 
>        6: NA/Inf replaced by maximum positive value 
>        7: NA/Inf replaced by maximum positive value 
>        8: NA/Inf replaced by maximum positive value 
>
>est holds the starting parameters:
>
>        [1] 0.9 0.5
>
>E (from n*phat) holds:
>
>        [1] 80.38301  0.00000  0.00000  0.00000  0.00000  3.90972
>
>which gives a very big chi-square.
>
>Sorry to be a nuisance.
>
>Mark
>
>
>--
>Mark Myatt
>
>
>
Yudi Pawitan     yudi@stat.ucc.ie
Department of Statistics UCC
Cork, Ireland
Ph   353-21-490 2906
Fax 353-21-427 1040 
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


==> 842.reply.1 <==
From maechler@stat.math.ethz.ch  Fri Feb  9 08:58:53 2001
Received: from stat.math.ethz.ch (daemon@hypatia.ethz.ch [129.132.58.23])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id IAA25625
	for <R-bugs@biostat.ku.dk>; Fri, 9 Feb 2001 08:58:52 +0100 (MET)
Received: (from daemon@localhost)
	by stat.math.ethz.ch (8.9.1/8.9.1) id IAA03103;
	Fri, 9 Feb 2001 08:59:03 +0100 (MET)
Received: from UNKNOWN(129.132.58.30), claiming to be "lynne.ethz.ch"
 via SMTP by hypatia, id smtpdAAAa000kN; Fri Feb  9 08:59:00 2001
Received: (maechler@localhost) by lynne.ethz.ch (8.9.3/D-MATH-client) id IAA09052; Fri, 9 Feb 2001 08:58:59 +0100
X-Authentication-Warning: lynne.ethz.ch: maechler set sender to maechler@stat.math.ethz.ch using -f
From: Martin Maechler <maechler@stat.math.ethz.ch>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
Message-ID: <14979.41795.815686.851399@gargle.gargle.HOWL>
Date: Fri, 9 Feb 2001 08:58:59 +0100
To: tlumley@u.washington.edu
Cc: R-bugs@biostat.ku.dk, Yudi Pawitan <yudi@stat.ucc.ie>,
        Mark Myatt <mark@myatt.demon.co.uk>
Subject: Re: [Rd] dnbinom(,size<1,)=0 (PR#842)
In-Reply-To: <200102081944.UAA23120@pubhealth.ku.dk>
References: <200102081944.UAA23120@pubhealth.ku.dk>
X-Mailer: VM 6.86 under Emacs 20.7.1
Reply-To: Martin Maechler <maechler@stat.math.ethz.ch>

>>>>> "TL" == Thomas Lumley <tlumley@u.washington.edu> writes:

    TL> This came up on r-help but indicates a bug.

    TL> dnbinom(x,n,p) calls dbinom_raw(n-1,...)
    TL> which returns 0 for n<1.

Actually for all  non-integer n.

This is now fixed for "R-release" aka "R-patched" aka "R 1.2.2 to be" :

--- src/nmath/dnbinom.c.~6~	Wed Jan 24 18:02:07 2001
+++ src/nmath/dnbinom.c	Fri Feb  9 08:37:14 2001
@@ -47,6 +47,12 @@
     if (x < 0 || !R_FINITE(x)) return R_D__0;
     x = R_D_forceint(x);
 
+    if(R_D_nonint(n)) {
+	return R_D_exp(lfastchoose(x + n - 1, x)
+		       + n * log(p) + x * log(1 - p));
+    } 
+    else { /* n is integer */
     prob = dbinom_raw(n-1,n+x-1,p,1-p,give_log);
     return((give_log) ? log(p) + prob : p*prob);
+    }
 }


Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
Seminar fuer Statistik, ETH-Zentrum  LEO D10	Leonhardstr. 27
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1228			<><


    TL> ---------- Forwarded message ----------
    TL> Date: Thu, 08 Feb 2001 17:10:23 +0000
    TL> From: Yudi Pawitan <yudi@stat.ucc.ie>
    TL> To: Mark Myatt <mark@myatt.demon.co.uk>
    TL> Cc: R-Help <r-help@stat.math.ethz.ch>
    TL> Subject: Re: [R] Goodness of fit to Poisson / NegBinomial

    TL> Sorry, Mark, the program worked for Rw1011, but this is
    TL> what happened in Rw1021:

    >> dnbinom(0:5,.9,.4)  
    TL> [1] 0.4383833 0.0000000 0.0000000 0.0000000 0.0000000 0.0000000   #wrong!!

    TL> while, the correct result from Rw1011 is:
    >> dnbinom(0:5,.9,.4)
    TL> [1] 0.43838329 0.23672698 0.13493438 0.07826194 0.04578323 0.02692054

    TL> I have added a corrected dnbinom() below, which makes the program
    TL> works  for Rw1021.

    TL> -YP-

    TL> x_ c(70, 38, 17, 10,  9, 6) 
    TL> kk_ 0:5
    TL> n_ sum(x)

    TL> dnbinom_ function(x,n,p){
    TL> gamma(x+n)/gamma(n)/gamma(x+1)*p^n * (1-p)^x
    TL> }

    TL> fn_ function(p){
    TL> r_ p[1]
    TL> th_ p[2]
    TL> ll _ -sum(x[1:max(kk)]*log(dnbinom(kk[-length(kk)],r,th))) -
    TL> x[length(kk)]*log(1-pnbinom((max(kk)-1),r,th))
    TL> return(ll)
    TL> }

    TL> a_ nlm(fn,p=c(.9,.5),hes=T)
    TL> est_ a$est

    TL> phat_ c(dnbinom(kk[-length(kk)],est[1],est[2]),
    TL> 1-pnbinom((max(kk)-1),est[1],est[2]))
    TL> E_ n*phat
    TL> chi2_ sum((x-E)^2/E)
    TL> cat('Chi2 goodness-of-fit = ',chi2,'\n')
    TL> cat('P-value=',1-pchisq(chi2,df=length(kk)-1-2),'\n')

    TL> print(cbind(O=x,E=round(E,1),err=round((x-E)^2/E,1)))


    TL> ===========================================
    TL> At 02:31 PM 2/8/01 +0000, Mark Wyatt wrote:
    >> Yudi,
    >> 
    >> Thanks for this:
    >> 
    >>> x_ c(70, 38, 17, 10,  9, 6) 
    >>> kk_ 0:5
    >>> n_ sum(x)
    >>> 
    >>> fn_ function(p){
    >>> r_ p[1]
    >>> th_ p[2]
    >>> ll _ -sum(x[1:max(kk)]*log(dnbinom(kk[-length(kk)],r,th))) -
    >>> x[length(kk)]*log(1-pnbinom((max(kk)-1),r,th))
    >>> return(ll)
    >>> }
    >>> 
    >>> a_ nlm(fn,p=c(.9,.5),hes=T)
    >>> est_ a$est
    >>> 
    >>> phat_ c(dnbinom(kk[-length(kk)],est[1],est[2]),
    >>> 1-pnbinom((max(kk)-1),est[1],est[2]))
    >>> E_ n*phat
    >>> chi2_ sum((x-E)^2/E)
    >>> cat('Chi2 goodness-of-fit = ',chi2,'\n')
    >>> cat('P-value=',1-pchisq(chi2,df=length(kk)-1-2),'\n')
    >>> 
    >>> print(cbind(O=x,E=round(E,1),err=round((x-E)^2/E,1)))
    >> 
    >> It is certainly more elegant than anything I would have come up with but
    >> I just cannot get it to work (Rwin 1.21). The call to nlm() returns:
    >> 
    >> Warning messages: 
    >> 1: NA/Inf replaced by maximum positive value 
    >> 2: NA/Inf replaced by maximum positive value 
    >> 3: NA/Inf replaced by maximum positive value 
    >> 4: NA/Inf replaced by maximum positive value 
    >> 5: NA/Inf replaced by maximum positive value 
    >> 6: NA/Inf replaced by maximum positive value 
    >> 7: NA/Inf replaced by maximum positive value 
    >> 8: NA/Inf replaced by maximum positive value 
    >> 
    >> est holds the starting parameters:
    >> 
    >> [1] 0.9 0.5
    >> 
    >> E (from n*phat) holds:
    >> 
    >> [1] 80.38301  0.00000  0.00000  0.00000  0.00000  3.90972
    >> 
    >> which gives a very big chi-square.
    >> 
    >> Sorry to be a nuisance.
    >> 
    >> Mark
    >> 
    >> 
    >> --
    >> Mark Myatt
    >> 
    >> 
    >> 
    TL> Yudi Pawitan     yudi@stat.ucc.ie
    TL> Department of Statistics UCC
    TL> Cork, Ireland
    TL> Ph   353-21-490 2906
    TL> Fax 353-21-427 1040 
    TL> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
    TL> r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
    TL> Send "info", "help", or "[un]subscribe"
    TL> (in the "body", not the subject !)  To: r-help-request@stat.math.ethz.ch
    TL> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


    TL> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
    TL> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
    TL> Send "info", "help", or "[un]subscribe"
    TL> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
    TL> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

==> 842.reply.2 <==
From maechler@stat.math.ethz.ch  Fri Feb  9 09:08:55 2001
Received: from stat.math.ethz.ch (daemon@hypatia.ethz.ch [129.132.58.23])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id JAA25866
	for <R-bugs@biostat.ku.dk>; Fri, 9 Feb 2001 09:08:54 +0100 (MET)
Received: (from daemon@localhost)
	by stat.math.ethz.ch (8.9.1/8.9.1) id JAA04445;
	Fri, 9 Feb 2001 09:09:03 +0100 (MET)
Received: from UNKNOWN(129.132.58.30), claiming to be "lynne.ethz.ch"
 via SMTP by hypatia, id smtpdAAAa0015R; Fri Feb  9 09:09:02 2001
Received: (maechler@localhost) by lynne.ethz.ch (8.9.3/D-MATH-client) id JAA09066; Fri, 9 Feb 2001 09:09:02 +0100
X-Authentication-Warning: lynne.ethz.ch: maechler set sender to maechler@stat.math.ethz.ch using -f
From: Martin Maechler <maechler@stat.math.ethz.ch>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
Message-ID: <14979.42398.196086.927049@gargle.gargle.HOWL>
Date: Fri, 9 Feb 2001 09:09:02 +0100
To: R-bugs@biostat.ku.dk
Cc: Catherine Loader <catherine@research.bell-labs.com>
Subject: Re: [Rd] dnbinom(,size<1,)=0 (PR#842)
In-Reply-To: <200102090759.IAA25635@pubhealth.ku.dk>
References: <200102090759.IAA25635@pubhealth.ku.dk>
X-Mailer: VM 6.86 under Emacs 20.7.1
Reply-To: Martin Maechler <maechler@stat.math.ethz.ch>

       
>>>>> "MM" == Martin Maechler <maechler@stat.math.ethz.ch> writes:

>>>>> "TL" == Thomas Lumley <tlumley@u.washington.edu> writes:
    TL> This came up on r-help but indicates a bug.

    TL> dnbinom(x,n,p) calls dbinom_raw(n-1,...)
    TL> which returns 0 for n<1.

  MM> Actually for all  non-integer n.

wrong, Martin!

Thomas was right:  
       dbinom_raw(m, *)		
       seems fine for non-negative non-integers m.

    MM> This is now fixed for "R-release" aka "R-patched" aka "R 1.2.2 to be" :

    MM> --- src/nmath/dnbinom.c.~6~	Wed Jan 24 18:02:07 2001
    MM> +++ src/nmath/dnbinom.c	Fri Feb  9 08:37:14 2001
    MM> @@ -47,6 +47,12 @@
    MM> if (x < 0 || !R_FINITE(x)) return R_D__0;
    MM> x = R_D_forceint(x);
 
    MM> +    if(R_D_nonint(n)) {
    MM> +	return R_D_exp(lfastchoose(x + n - 1, x)
    MM> +		       + n * log(p) + x * log(1 - p));
    MM> +    } 
    MM> +    else { /* n is integer */
    MM> prob = dbinom_raw(n-1,n+x-1,p,1-p,give_log);
    MM> return((give_log) ? log(p) + prob : p*prob);
    MM> +    }
    MM> }

The above fix reverts to pre R 1.2.0 behaviour 
for non-integer `n' (in C; `size' in R) which is `first order ok',
but far from optimal.

The real solution must be better,
and should be done along the code (see comments!) in dbeta.c.

I won't have time to look at this for the next time though.

    MM> Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
    MM> Seminar fuer Statistik, ETH-Zentrum  LEO D10	Leonhardstr. 27
    MM> ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
    MM> phone: x-41-1-632-3408		fax: ...-1228			<><


    TL> ---------- Forwarded message ----------
    TL> Date: Thu, 08 Feb 2001 17:10:23 +0000
    TL> From: Yudi Pawitan <yudi@stat.ucc.ie>
    TL> To: Mark Myatt <mark@myatt.demon.co.uk>
    TL> Cc: R-Help <r-help@stat.math.ethz.ch>
    TL> Subject: Re: [R] Goodness of fit to Poisson / NegBinomial

    TL> Sorry, Mark, the program worked for Rw1011, but this is
    TL> what happened in Rw1021:

    >>> dnbinom(0:5,.9,.4)  
    TL> [1] 0.4383833 0.0000000 0.0000000 0.0000000 0.0000000 0.0000000   #wrong!!

    TL> while, the correct result from Rw1011 is:
    >>> dnbinom(0:5,.9,.4)
    TL> [1] 0.43838329 0.23672698 0.13493438 0.07826194 0.04578323 0.02692054

    TL> I have added a corrected dnbinom() below, which makes the program
    TL> works  for Rw1021.

    TL> -YP-

    TL> x_ c(70, 38, 17, 10,  9, 6) 
    TL> kk_ 0:5
    TL> n_ sum(x)

    TL> dnbinom_ function(x,n,p){
    TL> gamma(x+n)/gamma(n)/gamma(x+1)*p^n * (1-p)^x
    TL> }

    TL> fn_ function(p){
    TL> r_ p[1]
    TL> th_ p[2]
    TL> ll _ -sum(x[1:max(kk)]*log(dnbinom(kk[-length(kk)],r,th))) -
    TL> x[length(kk)]*log(1-pnbinom((max(kk)-1),r,th))
    TL> return(ll)
    TL> }

    TL> a_ nlm(fn,p=c(.9,.5),hes=T)
    TL> est_ a$est

    TL> phat_ c(dnbinom(kk[-length(kk)],est[1],est[2]),
    TL> 1-pnbinom((max(kk)-1),est[1],est[2]))
    TL> E_ n*phat
    TL> chi2_ sum((x-E)^2/E)
    TL> cat('Chi2 goodness-of-fit = ',chi2,'\n')
    TL> cat('P-value=',1-pchisq(chi2,df=length(kk)-1-2),'\n')

    TL> print(cbind(O=x,E=round(E,1),err=round((x-E)^2/E,1)))


    TL> ===========================================
    TL> At 02:31 PM 2/8/01 +0000, Mark Wyatt wrote:
    >>> Yudi,
    >>> 
    >>> Thanks for this:
    >>> 
    >>>> x_ c(70, 38, 17, 10,  9, 6) 
    >>>> kk_ 0:5
    >>>> n_ sum(x)
    >>>> 
    >>>> fn_ function(p){
    >>>> r_ p[1]
    >>>> th_ p[2]
    >>>> ll _ -sum(x[1:max(kk)]*log(dnbinom(kk[-length(kk)],r,th))) -
    >>>> x[length(kk)]*log(1-pnbinom((max(kk)-1),r,th))
    >>>> return(ll)
    >>>> }
    >>>> 
    >>>> a_ nlm(fn,p=c(.9,.5),hes=T)
    >>>> est_ a$est
    >>>> 
    >>>> phat_ c(dnbinom(kk[-length(kk)],est[1],est[2]),
    >>>> 1-pnbinom((max(kk)-1),est[1],est[2]))
    >>>> E_ n*phat
    >>>> chi2_ sum((x-E)^2/E)
    >>>> cat('Chi2 goodness-of-fit = ',chi2,'\n')
    >>>> cat('P-value=',1-pchisq(chi2,df=length(kk)-1-2),'\n')
    >>>> 
    >>>> print(cbind(O=x,E=round(E,1),err=round((x-E)^2/E,1)))
    >>> 
    >>> It is certainly more elegant than anything I would have come up with but
    >>> I just cannot get it to work (Rwin 1.21). The call to nlm() returns:
    >>> 
    >>> Warning messages: 
    >>> 1: NA/Inf replaced by maximum positive value 
    >>> 2: NA/Inf replaced by maximum positive value 
    >>> 3: NA/Inf replaced by maximum positive value 
    >>> 4: NA/Inf replaced by maximum positive value 
    >>> 5: NA/Inf replaced by maximum positive value 
    >>> 6: NA/Inf replaced by maximum positive value 
    >>> 7: NA/Inf replaced by maximum positive value 
    >>> 8: NA/Inf replaced by maximum positive value 
    >>> 
    >>> est holds the starting parameters:
    >>> 
    >>> [1] 0.9 0.5
    >>> 
    >>> E (from n*phat) holds:
    >>> 
    >>> [1] 80.38301  0.00000  0.00000  0.00000  0.00000  3.90972
    >>> 
    >>> which gives a very big chi-square.
    >>> 
    >>> Sorry to be a nuisance.
    >>> 
    >>> Mark
    >>> 
    >>> 
    >>> --
    >>> Mark Myatt
    >>> 
    >>> 
    >>> 
    TL> Yudi Pawitan     yudi@stat.ucc.ie
    TL> Department of Statistics UCC
    TL> Cork, Ireland
    TL> Ph   353-21-490 2906
    TL> Fax 353-21-427 1040 
    TL> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
    TL> r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
    TL> Send "info", "help", or "[un]subscribe"
    TL> (in the "body", not the subject !)  To: r-help-request@stat.math.ethz.ch
    TL> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


    TL> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
    TL> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
    TL> Send "info", "help", or "[un]subscribe"
    TL> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
    TL> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

    MM> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
    MM> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
    MM> Send "info", "help", or "[un]subscribe"
    MM> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
    MM> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
